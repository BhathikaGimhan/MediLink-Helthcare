function $R(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var oT={exports:{}},k0={},aT={exports:{}},jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=Symbol.for("react.element"),HR=Symbol.for("react.portal"),WR=Symbol.for("react.fragment"),GR=Symbol.for("react.strict_mode"),KR=Symbol.for("react.profiler"),YR=Symbol.for("react.provider"),QR=Symbol.for("react.context"),XR=Symbol.for("react.forward_ref"),JR=Symbol.for("react.suspense"),ZR=Symbol.for("react.memo"),e8=Symbol.for("react.lazy"),l_=Symbol.iterator;function t8(t){return t===null||typeof t!="object"?null:(t=l_&&t[l_]||t["@@iterator"],typeof t=="function"?t:null)}var lT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uT=Object.assign,cT={};function Jh(t,e,n){this.props=t,this.context=e,this.refs=cT,this.updater=n||lT}Jh.prototype.isReactComponent={};Jh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hT(){}hT.prototype=Jh.prototype;function I5(t,e,n){this.props=t,this.context=e,this.refs=cT,this.updater=n||lT}var k5=I5.prototype=new hT;k5.constructor=I5;uT(k5,Jh.prototype);k5.isPureReactComponent=!0;var u_=Array.isArray,dT=Object.prototype.hasOwnProperty,C5={current:null},fT={key:!0,ref:!0,__self:!0,__source:!0};function pT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)dT.call(e,r)&&!fT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yp,type:t,key:s,ref:o,props:i,_owner:C5.current}}function n8(t,e){return{$$typeof:yp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function P5(t){return typeof t=="object"&&t!==null&&t.$$typeof===yp}function r8(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var c_=/\/+/g;function Z1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?r8(""+t.key):e.toString(36)}function qm(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yp:case HR:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Z1(o,0):r,u_(i)?(n="",t!=null&&(n=t.replace(c_,"$&/")+"/"),qm(i,e,n,"",function(u){return u})):i!=null&&(P5(i)&&(i=n8(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(c_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",u_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Z1(s,a);o+=qm(s,e,n,l,i)}else if(l=t8(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Z1(s,a++),o+=qm(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function um(t,e,n){if(t==null)return t;var r=[],i=0;return qm(t,r,"","",function(s){return e.call(n,s,i++)}),r}function i8(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ai={current:null},$m={transition:null},s8={ReactCurrentDispatcher:ai,ReactCurrentBatchConfig:$m,ReactCurrentOwner:C5};function mT(){throw Error("act(...) is not supported in production builds of React.")}jt.Children={map:um,forEach:function(t,e,n){um(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return um(t,function(){e++}),e},toArray:function(t){return um(t,function(e){return e})||[]},only:function(t){if(!P5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};jt.Component=Jh;jt.Fragment=WR;jt.Profiler=KR;jt.PureComponent=I5;jt.StrictMode=GR;jt.Suspense=JR;jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s8;jt.act=mT;jt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)dT.call(e,l)&&!fT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yp,type:t.type,key:i,ref:s,props:r,_owner:o}};jt.createContext=function(t){return t={$$typeof:QR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:YR,_context:t},t.Consumer=t};jt.createElement=pT;jt.createFactory=function(t){var e=pT.bind(null,t);return e.type=t,e};jt.createRef=function(){return{current:null}};jt.forwardRef=function(t){return{$$typeof:XR,render:t}};jt.isValidElement=P5;jt.lazy=function(t){return{$$typeof:e8,_payload:{_status:-1,_result:t},_init:i8}};jt.memo=function(t,e){return{$$typeof:ZR,type:t,compare:e===void 0?null:e}};jt.startTransition=function(t){var e=$m.transition;$m.transition={};try{t()}finally{$m.transition=e}};jt.unstable_act=mT;jt.useCallback=function(t,e){return ai.current.useCallback(t,e)};jt.useContext=function(t){return ai.current.useContext(t)};jt.useDebugValue=function(){};jt.useDeferredValue=function(t){return ai.current.useDeferredValue(t)};jt.useEffect=function(t,e){return ai.current.useEffect(t,e)};jt.useId=function(){return ai.current.useId()};jt.useImperativeHandle=function(t,e,n){return ai.current.useImperativeHandle(t,e,n)};jt.useInsertionEffect=function(t,e){return ai.current.useInsertionEffect(t,e)};jt.useLayoutEffect=function(t,e){return ai.current.useLayoutEffect(t,e)};jt.useMemo=function(t,e){return ai.current.useMemo(t,e)};jt.useReducer=function(t,e,n){return ai.current.useReducer(t,e,n)};jt.useRef=function(t){return ai.current.useRef(t)};jt.useState=function(t){return ai.current.useState(t)};jt.useSyncExternalStore=function(t,e,n){return ai.current.useSyncExternalStore(t,e,n)};jt.useTransition=function(){return ai.current.useTransition()};jt.version="18.3.1";aT.exports=jt;var ee=aT.exports;const gT=I0(ee),o8=$R({__proto__:null,default:gT},[ee]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a8=ee,l8=Symbol.for("react.element"),u8=Symbol.for("react.fragment"),c8=Object.prototype.hasOwnProperty,h8=a8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d8={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)c8.call(e,r)&&!d8.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:l8,type:t,key:s,ref:o,props:i,_owner:h8.current}}k0.Fragment=u8;k0.jsx=yT;k0.jsxs=yT;oT.exports=k0;var y=oT.exports,vT={exports:{}},Ki={},wT={exports:{}},xT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,re){var z=X.length;X.push(re);e:for(;0<z;){var Ae=z-1>>>1,M=X[Ae];if(0<i(M,re))X[Ae]=re,X[z]=M,z=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var re=X[0],z=X.pop();if(z!==re){X[0]=z;e:for(var Ae=0,M=X.length,R=M>>>1;Ae<R;){var Z=2*(Ae+1)-1,ne=X[Z],se=Z+1,ge=X[se];if(0>i(ne,z))se<M&&0>i(ge,ne)?(X[Ae]=ge,X[se]=z,Ae=se):(X[Ae]=ne,X[Z]=z,Ae=Z);else if(se<M&&0>i(ge,z))X[Ae]=ge,X[se]=z,Ae=se;else break e}}return re}function i(X,re){var z=X.sortIndex-re.sortIndex;return z!==0?z:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,m=3,p=!1,_=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(X){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=X)r(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=n(u)}}function O(X){if(b=!1,A(X),!_)if(n(l)!==null)_=!0,he(K);else{var re=n(u);re!==null&&ue(O,re.startTime-X)}}function K(X,re){_=!1,b&&(b=!1,w(T),T=-1),p=!0;var z=m;try{for(A(re),h=n(l);h!==null&&(!(h.expirationTime>re)||X&&!I());){var Ae=h.callback;if(typeof Ae=="function"){h.callback=null,m=h.priorityLevel;var M=Ae(h.expirationTime<=re);re=t.unstable_now(),typeof M=="function"?h.callback=M:h===n(l)&&r(l),A(re)}else r(l);h=n(l)}if(h!==null)var R=!0;else{var Z=n(u);Z!==null&&ue(O,Z.startTime-re),R=!1}return R}finally{h=null,m=z,p=!1}}var q=!1,D=null,T=-1,L=5,F=-1;function I(){return!(t.unstable_now()-F<L)}function C(){if(D!==null){var X=t.unstable_now();F=X;var re=!0;try{re=D(!0,X)}finally{re?j():(q=!1,D=null)}}else q=!1}var j;if(typeof S=="function")j=function(){S(C)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,le=Y.port2;Y.port1.onmessage=C,j=function(){le.postMessage(null)}}else j=function(){N(C,0)};function he(X){D=X,q||(q=!0,j())}function ue(X,re){T=N(function(){X(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){_||p||(_=!0,he(K))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var z=m;m=re;try{return X()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=m;m=X;try{return re()}finally{m=z}},t.unstable_scheduleCallback=function(X,re,z){var Ae=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Ae+z:Ae):z=Ae,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=z+M,X={id:c++,callback:re,priorityLevel:X,startTime:z,expirationTime:M,sortIndex:-1},z>Ae?(X.sortIndex=z,e(u,X),n(l)===null&&X===n(u)&&(b?(w(T),T=-1):b=!0,ue(O,z-Ae))):(X.sortIndex=M,e(l,X),_||p||(_=!0,he(K))),X},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(X){var re=m;return function(){var z=m;m=re;try{return X.apply(this,arguments)}finally{m=z}}}})(xT);wT.exports=xT;var f8=wT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p8=ee,Wi=f8;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bT=new Set,Cf={};function ic(t,e){Ch(t,e),Ch(t+"Capture",e)}function Ch(t,e){for(Cf[t]=e,t=0;t<e.length;t++)bT.add(e[t])}var ca=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bv=Object.prototype.hasOwnProperty,m8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h_={},d_={};function g8(t){return bv.call(d_,t)?!0:bv.call(h_,t)?!1:m8.test(t)?d_[t]=!0:(h_[t]=!0,!1)}function y8(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v8(t,e,n,r){if(e===null||typeof e>"u"||y8(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function li(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nr[t]=new li(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nr[e]=new li(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nr[t]=new li(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nr[t]=new li(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nr[t]=new li(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nr[t]=new li(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nr[t]=new li(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nr[t]=new li(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nr[t]=new li(t,5,!1,t.toLowerCase(),null,!1,!1)});var L5=/[\-:]([a-z])/g;function R5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L5,R5);Nr[e]=new li(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L5,R5);Nr[e]=new li(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L5,R5);Nr[e]=new li(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nr[t]=new li(t,1,!1,t.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new li("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nr[t]=new li(t,1,!1,t.toLowerCase(),null,!0,!0)});function D5(t,e,n,r){var i=Nr.hasOwnProperty(e)?Nr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v8(e,n,i,r)&&(n=null),r||i===null?g8(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xa=p8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cm=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),Qc=Symbol.for("react.fragment"),j5=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),_T=Symbol.for("react.provider"),ST=Symbol.for("react.context"),O5=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Ev=Symbol.for("react.suspense_list"),M5=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),ET=Symbol.for("react.offscreen"),f_=Symbol.iterator;function Ld(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var Tn=Object.assign,ey;function Kd(t){if(ey===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ey=e&&e[1]||""}return`
`+ey+t}var ty=!1;function ny(t,e){if(!t||ty)return"";ty=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ty=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kd(t):""}function w8(t){switch(t.tag){case 5:return Kd(t.type);case 16:return Kd("Lazy");case 13:return Kd("Suspense");case 19:return Kd("SuspenseList");case 0:case 2:case 15:return t=ny(t.type,!1),t;case 11:return t=ny(t.type.render,!1),t;case 1:return t=ny(t.type,!0),t;default:return""}}function Av(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qc:return"Fragment";case Yc:return"Portal";case _v:return"Profiler";case j5:return"StrictMode";case Sv:return"Suspense";case Ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ST:return(t.displayName||"Context")+".Consumer";case _T:return(t._context.displayName||"Context")+".Provider";case O5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M5:return e=t.displayName||null,e!==null?e:Av(t.type)||"Memo";case al:e=t._payload,t=t._init;try{return Av(t(e))}catch{}}return null}function x8(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Av(e);case 8:return e===j5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function jl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b8(t){var e=AT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hm(t){t._valueTracker||(t._valueTracker=b8(t))}function TT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tv(t,e){var n=e.checked;return Tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function p_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=jl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NT(t,e){e=e.checked,e!=null&&D5(t,"checked",e,!1)}function Nv(t,e){NT(t,e);var n=jl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Iv(t,e.type,n):e.hasOwnProperty("defaultValue")&&Iv(t,e.type,jl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function m_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Iv(t,e,n){(e!=="number"||Sg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yd=Array.isArray;function ph(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+jl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function g_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Yd(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:jl(n)}}function IT(t,e){var n=jl(e.value),r=jl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function y_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dm,CT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dm=dm||document.createElement("div"),dm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_8=["Webkit","ms","Moz","O"];Object.keys(af).forEach(function(t){_8.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),af[e]=af[t]})});function PT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||af.hasOwnProperty(t)&&af[t]?(""+e).trim():e+"px"}function LT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=PT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var S8=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pv(t,e){if(e){if(S8[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function Lv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rv=null;function F5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dv=null,mh=null,gh=null;function v_(t){if(t=xp(t)){if(typeof Dv!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=D0(e),Dv(t.stateNode,t.type,e))}}function RT(t){mh?gh?gh.push(t):gh=[t]:mh=t}function DT(){if(mh){var t=mh,e=gh;if(gh=mh=null,v_(t),e)for(t=0;t<e.length;t++)v_(e[t])}}function jT(t,e){return t(e)}function OT(){}var ry=!1;function MT(t,e,n){if(ry)return t(e,n);ry=!0;try{return jT(t,e,n)}finally{ry=!1,(mh!==null||gh!==null)&&(OT(),DT())}}function Lf(t,e){var n=t.stateNode;if(n===null)return null;var r=D0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var jv=!1;if(ca)try{var Rd={};Object.defineProperty(Rd,"passive",{get:function(){jv=!0}}),window.addEventListener("test",Rd,Rd),window.removeEventListener("test",Rd,Rd)}catch{jv=!1}function E8(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var lf=!1,Eg=null,Ag=!1,Ov=null,A8={onError:function(t){lf=!0,Eg=t}};function T8(t,e,n,r,i,s,o,a,l){lf=!1,Eg=null,E8.apply(A8,arguments)}function N8(t,e,n,r,i,s,o,a,l){if(T8.apply(this,arguments),lf){if(lf){var u=Eg;lf=!1,Eg=null}else throw Error(Fe(198));Ag||(Ag=!0,Ov=u)}}function sc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function FT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function w_(t){if(sc(t)!==t)throw Error(Fe(188))}function I8(t){var e=t.alternate;if(!e){if(e=sc(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return w_(i),t;if(s===r)return w_(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function VT(t){return t=I8(t),t!==null?BT(t):null}function BT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BT(t);if(e!==null)return e;t=t.sibling}return null}var UT=Wi.unstable_scheduleCallback,x_=Wi.unstable_cancelCallback,k8=Wi.unstable_shouldYield,C8=Wi.unstable_requestPaint,Vn=Wi.unstable_now,P8=Wi.unstable_getCurrentPriorityLevel,V5=Wi.unstable_ImmediatePriority,zT=Wi.unstable_UserBlockingPriority,Tg=Wi.unstable_NormalPriority,L8=Wi.unstable_LowPriority,qT=Wi.unstable_IdlePriority,C0=null,vo=null;function R8(t){if(vo&&typeof vo.onCommitFiberRoot=="function")try{vo.onCommitFiberRoot(C0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:O8,D8=Math.log,j8=Math.LN2;function O8(t){return t>>>=0,t===0?32:31-(D8(t)/j8|0)|0}var fm=64,pm=4194304;function Qd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ng(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qd(a):(s&=o,s!==0&&(r=Qd(s)))}else o=n&~i,o!==0?r=Qd(o):s!==0&&(r=Qd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vs(e),i=1<<n,r|=t[n],e&=~i;return r}function M8(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F8(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=M8(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Mv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $T(){var t=fm;return fm<<=1,!(fm&4194240)&&(fm=64),t}function iy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=n}function V8(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function B5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var tn=0;function HT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WT,U5,GT,KT,YT,Fv=!1,mm=[],xl=null,bl=null,_l=null,Rf=new Map,Df=new Map,cl=[],B8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function b_(t,e){switch(t){case"focusin":case"focusout":xl=null;break;case"dragenter":case"dragleave":bl=null;break;case"mouseover":case"mouseout":_l=null;break;case"pointerover":case"pointerout":Rf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Df.delete(e.pointerId)}}function Dd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xp(e),e!==null&&U5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function U8(t,e,n,r,i){switch(e){case"focusin":return xl=Dd(xl,t,e,n,r,i),!0;case"dragenter":return bl=Dd(bl,t,e,n,r,i),!0;case"mouseover":return _l=Dd(_l,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rf.set(s,Dd(Rf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Df.set(s,Dd(Df.get(s)||null,t,e,n,r,i)),!0}return!1}function QT(t){var e=Ou(t.target);if(e!==null){var n=sc(e);if(n!==null){if(e=n.tag,e===13){if(e=FT(n),e!==null){t.blockedOn=e,YT(t.priority,function(){GT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rv=r,n.target.dispatchEvent(r),Rv=null}else return e=xp(n),e!==null&&U5(e),t.blockedOn=n,!1;e.shift()}return!0}function __(t,e,n){Hm(t)&&n.delete(e)}function z8(){Fv=!1,xl!==null&&Hm(xl)&&(xl=null),bl!==null&&Hm(bl)&&(bl=null),_l!==null&&Hm(_l)&&(_l=null),Rf.forEach(__),Df.forEach(__)}function jd(t,e){t.blockedOn===e&&(t.blockedOn=null,Fv||(Fv=!0,Wi.unstable_scheduleCallback(Wi.unstable_NormalPriority,z8)))}function jf(t){function e(i){return jd(i,t)}if(0<mm.length){jd(mm[0],t);for(var n=1;n<mm.length;n++){var r=mm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xl!==null&&jd(xl,t),bl!==null&&jd(bl,t),_l!==null&&jd(_l,t),Rf.forEach(e),Df.forEach(e),n=0;n<cl.length;n++)r=cl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cl.length&&(n=cl[0],n.blockedOn===null);)QT(n),n.blockedOn===null&&cl.shift()}var yh=xa.ReactCurrentBatchConfig,Ig=!0;function q8(t,e,n,r){var i=tn,s=yh.transition;yh.transition=null;try{tn=1,z5(t,e,n,r)}finally{tn=i,yh.transition=s}}function $8(t,e,n,r){var i=tn,s=yh.transition;yh.transition=null;try{tn=4,z5(t,e,n,r)}finally{tn=i,yh.transition=s}}function z5(t,e,n,r){if(Ig){var i=Vv(t,e,n,r);if(i===null)py(t,e,r,kg,n),b_(t,r);else if(U8(i,t,e,n,r))r.stopPropagation();else if(b_(t,r),e&4&&-1<B8.indexOf(t)){for(;i!==null;){var s=xp(i);if(s!==null&&WT(s),s=Vv(t,e,n,r),s===null&&py(t,e,r,kg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else py(t,e,r,null,n)}}var kg=null;function Vv(t,e,n,r){if(kg=null,t=F5(r),t=Ou(t),t!==null)if(e=sc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=FT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kg=t,null}function XT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P8()){case V5:return 1;case zT:return 4;case Tg:case L8:return 16;case qT:return 536870912;default:return 16}default:return 16}}var ml=null,q5=null,Wm=null;function JT(){if(Wm)return Wm;var t,e=q5,n=e.length,r,i="value"in ml?ml.value:ml.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wm=i.slice(t,1<r?1-r:void 0)}function Gm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gm(){return!0}function S_(){return!1}function Yi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gm:S_,this.isPropagationStopped=S_,this}return Tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gm)},persist:function(){},isPersistent:gm}),e}var Zh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$5=Yi(Zh),wp=Tn({},Zh,{view:0,detail:0}),H8=Yi(wp),sy,oy,Od,P0=Tn({},wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Od&&(Od&&t.type==="mousemove"?(sy=t.screenX-Od.screenX,oy=t.screenY-Od.screenY):oy=sy=0,Od=t),sy)},movementY:function(t){return"movementY"in t?t.movementY:oy}}),E_=Yi(P0),W8=Tn({},P0,{dataTransfer:0}),G8=Yi(W8),K8=Tn({},wp,{relatedTarget:0}),ay=Yi(K8),Y8=Tn({},Zh,{animationName:0,elapsedTime:0,pseudoElement:0}),Q8=Yi(Y8),X8=Tn({},Zh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),J8=Yi(X8),Z8=Tn({},Zh,{data:0}),A_=Yi(Z8),eD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=nD[t])?!!e[t]:!1}function H5(){return rD}var iD=Tn({},wp,{key:function(t){if(t.key){var e=eD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H5,charCode:function(t){return t.type==="keypress"?Gm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sD=Yi(iD),oD=Tn({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T_=Yi(oD),aD=Tn({},wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H5}),lD=Yi(aD),uD=Tn({},Zh,{propertyName:0,elapsedTime:0,pseudoElement:0}),cD=Yi(uD),hD=Tn({},P0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dD=Yi(hD),fD=[9,13,27,32],W5=ca&&"CompositionEvent"in window,uf=null;ca&&"documentMode"in document&&(uf=document.documentMode);var pD=ca&&"TextEvent"in window&&!uf,ZT=ca&&(!W5||uf&&8<uf&&11>=uf),N_=" ",I_=!1;function eN(t,e){switch(t){case"keyup":return fD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xc=!1;function mD(t,e){switch(t){case"compositionend":return tN(e);case"keypress":return e.which!==32?null:(I_=!0,N_);case"textInput":return t=e.data,t===N_&&I_?null:t;default:return null}}function gD(t,e){if(Xc)return t==="compositionend"||!W5&&eN(t,e)?(t=JT(),Wm=q5=ml=null,Xc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZT&&e.locale!=="ko"?null:e.data;default:return null}}var yD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!yD[t.type]:e==="textarea"}function nN(t,e,n,r){RT(r),e=Cg(e,"onChange"),0<e.length&&(n=new $5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var cf=null,Of=null;function vD(t){fN(t,0)}function L0(t){var e=eh(t);if(TT(e))return t}function wD(t,e){if(t==="change")return e}var rN=!1;if(ca){var ly;if(ca){var uy="oninput"in document;if(!uy){var C_=document.createElement("div");C_.setAttribute("oninput","return;"),uy=typeof C_.oninput=="function"}ly=uy}else ly=!1;rN=ly&&(!document.documentMode||9<document.documentMode)}function P_(){cf&&(cf.detachEvent("onpropertychange",iN),Of=cf=null)}function iN(t){if(t.propertyName==="value"&&L0(Of)){var e=[];nN(e,Of,t,F5(t)),MT(vD,e)}}function xD(t,e,n){t==="focusin"?(P_(),cf=e,Of=n,cf.attachEvent("onpropertychange",iN)):t==="focusout"&&P_()}function bD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return L0(Of)}function _D(t,e){if(t==="click")return L0(e)}function SD(t,e){if(t==="input"||t==="change")return L0(e)}function ED(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zs=typeof Object.is=="function"?Object.is:ED;function Mf(t,e){if(zs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bv.call(e,i)||!zs(t[i],e[i]))return!1}return!0}function L_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R_(t,e){var n=L_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L_(n)}}function sN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oN(){for(var t=window,e=Sg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sg(t.document)}return e}function G5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AD(t){var e=oN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sN(n.ownerDocument.documentElement,n)){if(r!==null&&G5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=R_(n,s);var o=R_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TD=ca&&"documentMode"in document&&11>=document.documentMode,Jc=null,Bv=null,hf=null,Uv=!1;function D_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uv||Jc==null||Jc!==Sg(r)||(r=Jc,"selectionStart"in r&&G5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hf&&Mf(hf,r)||(hf=r,r=Cg(Bv,"onSelect"),0<r.length&&(e=new $5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jc)))}function ym(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zc={animationend:ym("Animation","AnimationEnd"),animationiteration:ym("Animation","AnimationIteration"),animationstart:ym("Animation","AnimationStart"),transitionend:ym("Transition","TransitionEnd")},cy={},aN={};ca&&(aN=document.createElement("div").style,"AnimationEvent"in window||(delete Zc.animationend.animation,delete Zc.animationiteration.animation,delete Zc.animationstart.animation),"TransitionEvent"in window||delete Zc.transitionend.transition);function R0(t){if(cy[t])return cy[t];if(!Zc[t])return t;var e=Zc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aN)return cy[t]=e[n];return t}var lN=R0("animationend"),uN=R0("animationiteration"),cN=R0("animationstart"),hN=R0("transitionend"),dN=new Map,j_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yl(t,e){dN.set(t,e),ic(e,[t])}for(var hy=0;hy<j_.length;hy++){var dy=j_[hy],ND=dy.toLowerCase(),ID=dy[0].toUpperCase()+dy.slice(1);Yl(ND,"on"+ID)}Yl(lN,"onAnimationEnd");Yl(uN,"onAnimationIteration");Yl(cN,"onAnimationStart");Yl("dblclick","onDoubleClick");Yl("focusin","onFocus");Yl("focusout","onBlur");Yl(hN,"onTransitionEnd");Ch("onMouseEnter",["mouseout","mouseover"]);Ch("onMouseLeave",["mouseout","mouseover"]);Ch("onPointerEnter",["pointerout","pointerover"]);Ch("onPointerLeave",["pointerout","pointerover"]);ic("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ic("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ic("onBeforeInput",["compositionend","keypress","textInput","paste"]);ic("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ic("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ic("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xd));function O_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N8(r,e,void 0,t),t.currentTarget=null}function fN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;O_(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;O_(i,a,u),s=l}}}if(Ag)throw t=Ov,Ag=!1,Ov=null,t}function vn(t,e){var n=e[Wv];n===void 0&&(n=e[Wv]=new Set);var r=t+"__bubble";n.has(r)||(pN(e,t,2,!1),n.add(r))}function fy(t,e,n){var r=0;e&&(r|=4),pN(n,t,r,e)}var vm="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[vm]){t[vm]=!0,bT.forEach(function(n){n!=="selectionchange"&&(kD.has(n)||fy(n,!1,t),fy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vm]||(e[vm]=!0,fy("selectionchange",!1,e))}}function pN(t,e,n,r){switch(XT(e)){case 1:var i=q8;break;case 4:i=$8;break;default:i=z5}n=i.bind(null,e,n,t),i=void 0,!jv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function py(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ou(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}MT(function(){var u=s,c=F5(n),h=[];e:{var m=dN.get(t);if(m!==void 0){var p=$5,_=t;switch(t){case"keypress":if(Gm(n)===0)break e;case"keydown":case"keyup":p=sD;break;case"focusin":_="focus",p=ay;break;case"focusout":_="blur",p=ay;break;case"beforeblur":case"afterblur":p=ay;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=E_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=G8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=lD;break;case lN:case uN:case cN:p=Q8;break;case hN:p=cD;break;case"scroll":p=H8;break;case"wheel":p=dD;break;case"copy":case"cut":case"paste":p=J8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T_}var b=(e&4)!==0,N=!b&&t==="scroll",w=b?m!==null?m+"Capture":null:m;b=[];for(var S=u,A;S!==null;){A=S;var O=A.stateNode;if(A.tag===5&&O!==null&&(A=O,w!==null&&(O=Lf(S,w),O!=null&&b.push(Vf(S,O,A)))),N)break;S=S.return}0<b.length&&(m=new p(m,_,null,n,c),h.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==Rv&&(_=n.relatedTarget||n.fromElement)&&(Ou(_)||_[ha]))break e;if((p||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,p?(_=n.relatedTarget||n.toElement,p=u,_=_?Ou(_):null,_!==null&&(N=sc(_),_!==N||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=u),p!==_)){if(b=E_,O="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(b=T_,O="onPointerLeave",w="onPointerEnter",S="pointer"),N=p==null?m:eh(p),A=_==null?m:eh(_),m=new b(O,S+"leave",p,n,c),m.target=N,m.relatedTarget=A,O=null,Ou(c)===u&&(b=new b(w,S+"enter",_,n,c),b.target=A,b.relatedTarget=N,O=b),N=O,p&&_)t:{for(b=p,w=_,S=0,A=b;A;A=Mc(A))S++;for(A=0,O=w;O;O=Mc(O))A++;for(;0<S-A;)b=Mc(b),S--;for(;0<A-S;)w=Mc(w),A--;for(;S--;){if(b===w||w!==null&&b===w.alternate)break t;b=Mc(b),w=Mc(w)}b=null}else b=null;p!==null&&M_(h,m,p,b,!1),_!==null&&N!==null&&M_(h,N,_,b,!0)}}e:{if(m=u?eh(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var K=wD;else if(k_(m))if(rN)K=SD;else{K=bD;var q=xD}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(K=_D);if(K&&(K=K(t,u))){nN(h,K,n,c);break e}q&&q(t,m,u),t==="focusout"&&(q=m._wrapperState)&&q.controlled&&m.type==="number"&&Iv(m,"number",m.value)}switch(q=u?eh(u):window,t){case"focusin":(k_(q)||q.contentEditable==="true")&&(Jc=q,Bv=u,hf=null);break;case"focusout":hf=Bv=Jc=null;break;case"mousedown":Uv=!0;break;case"contextmenu":case"mouseup":case"dragend":Uv=!1,D_(h,n,c);break;case"selectionchange":if(TD)break;case"keydown":case"keyup":D_(h,n,c)}var D;if(W5)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Xc?eN(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(ZT&&n.locale!=="ko"&&(Xc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Xc&&(D=JT()):(ml=c,q5="value"in ml?ml.value:ml.textContent,Xc=!0)),q=Cg(u,T),0<q.length&&(T=new A_(T,t,null,n,c),h.push({event:T,listeners:q}),D?T.data=D:(D=tN(n),D!==null&&(T.data=D)))),(D=pD?mD(t,n):gD(t,n))&&(u=Cg(u,"onBeforeInput"),0<u.length&&(c=new A_("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=D))}fN(h,e)})}function Vf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Lf(t,n),s!=null&&r.unshift(Vf(t,s,i)),s=Lf(t,e),s!=null&&r.push(Vf(t,s,i))),t=t.return}return r}function Mc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function M_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Lf(n,s),l!=null&&o.unshift(Vf(n,l,a))):i||(l=Lf(n,s),l!=null&&o.push(Vf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CD=/\r\n?/g,PD=/\u0000|\uFFFD/g;function F_(t){return(typeof t=="string"?t:""+t).replace(CD,`
`).replace(PD,"")}function wm(t,e,n){if(e=F_(e),F_(t)!==e&&n)throw Error(Fe(425))}function Pg(){}var zv=null,qv=null;function $v(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hv=typeof setTimeout=="function"?setTimeout:void 0,LD=typeof clearTimeout=="function"?clearTimeout:void 0,V_=typeof Promise=="function"?Promise:void 0,RD=typeof queueMicrotask=="function"?queueMicrotask:typeof V_<"u"?function(t){return V_.resolve(null).then(t).catch(DD)}:Hv;function DD(t){setTimeout(function(){throw t})}function my(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),jf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);jf(e)}function Sl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function B_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ed=Math.random().toString(36).slice(2),po="__reactFiber$"+ed,Bf="__reactProps$"+ed,ha="__reactContainer$"+ed,Wv="__reactEvents$"+ed,jD="__reactListeners$"+ed,OD="__reactHandles$"+ed;function Ou(t){var e=t[po];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ha]||n[po]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=B_(t);t!==null;){if(n=t[po])return n;t=B_(t)}return e}t=n,n=t.parentNode}return null}function xp(t){return t=t[po]||t[ha],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function eh(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function D0(t){return t[Bf]||null}var Gv=[],th=-1;function Ql(t){return{current:t}}function bn(t){0>th||(t.current=Gv[th],Gv[th]=null,th--)}function fn(t,e){th++,Gv[th]=t.current,t.current=e}var Ol={},Yr=Ql(Ol),_i=Ql(!1),Wu=Ol;function Ph(t,e){var n=t.type.contextTypes;if(!n)return Ol;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Si(t){return t=t.childContextTypes,t!=null}function Lg(){bn(_i),bn(Yr)}function U_(t,e,n){if(Yr.current!==Ol)throw Error(Fe(168));fn(Yr,e),fn(_i,n)}function mN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,x8(t)||"Unknown",i));return Tn({},n,r)}function Rg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ol,Wu=Yr.current,fn(Yr,t),fn(_i,_i.current),!0}function z_(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=mN(t,e,Wu),r.__reactInternalMemoizedMergedChildContext=t,bn(_i),bn(Yr),fn(Yr,t)):bn(_i),fn(_i,n)}var Yo=null,j0=!1,gy=!1;function gN(t){Yo===null?Yo=[t]:Yo.push(t)}function MD(t){j0=!0,gN(t)}function Xl(){if(!gy&&Yo!==null){gy=!0;var t=0,e=tn;try{var n=Yo;for(tn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Yo=null,j0=!1}catch(i){throw Yo!==null&&(Yo=Yo.slice(t+1)),UT(V5,Xl),i}finally{tn=e,gy=!1}}return null}var nh=[],rh=0,Dg=null,jg=0,ls=[],us=0,Gu=null,Qo=1,Xo="";function Nu(t,e){nh[rh++]=jg,nh[rh++]=Dg,Dg=t,jg=e}function yN(t,e,n){ls[us++]=Qo,ls[us++]=Xo,ls[us++]=Gu,Gu=t;var r=Qo;t=Xo;var i=32-Vs(r)-1;r&=~(1<<i),n+=1;var s=32-Vs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qo=1<<32-Vs(e)+i|n<<i|r,Xo=s+t}else Qo=1<<s|n<<i|r,Xo=t}function K5(t){t.return!==null&&(Nu(t,1),yN(t,1,0))}function Y5(t){for(;t===Dg;)Dg=nh[--rh],nh[rh]=null,jg=nh[--rh],nh[rh]=null;for(;t===Gu;)Gu=ls[--us],ls[us]=null,Xo=ls[--us],ls[us]=null,Qo=ls[--us],ls[us]=null}var Hi=null,Ui=null,_n=!1,js=null;function vN(t,e){var n=hs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function q_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hi=t,Ui=Sl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hi=t,Ui=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gu!==null?{id:Qo,overflow:Xo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hi=t,Ui=null,!0):!1;default:return!1}}function Kv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yv(t){if(_n){var e=Ui;if(e){var n=e;if(!q_(t,e)){if(Kv(t))throw Error(Fe(418));e=Sl(n.nextSibling);var r=Hi;e&&q_(t,e)?vN(r,n):(t.flags=t.flags&-4097|2,_n=!1,Hi=t)}}else{if(Kv(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,_n=!1,Hi=t}}}function $_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hi=t}function xm(t){if(t!==Hi)return!1;if(!_n)return $_(t),_n=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$v(t.type,t.memoizedProps)),e&&(e=Ui)){if(Kv(t))throw wN(),Error(Fe(418));for(;e;)vN(t,e),e=Sl(e.nextSibling)}if($_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ui=Sl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ui=null}}else Ui=Hi?Sl(t.stateNode.nextSibling):null;return!0}function wN(){for(var t=Ui;t;)t=Sl(t.nextSibling)}function Lh(){Ui=Hi=null,_n=!1}function Q5(t){js===null?js=[t]:js.push(t)}var FD=xa.ReactCurrentBatchConfig;function Md(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function bm(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function H_(t){var e=t._init;return e(t._payload)}function xN(t){function e(w,S){if(t){var A=w.deletions;A===null?(w.deletions=[S],w.flags|=16):A.push(S)}}function n(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function r(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function i(w,S){return w=Nl(w,S),w.index=0,w.sibling=null,w}function s(w,S,A){return w.index=A,t?(A=w.alternate,A!==null?(A=A.index,A<S?(w.flags|=2,S):A):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,S,A,O){return S===null||S.tag!==6?(S=Sy(A,w.mode,O),S.return=w,S):(S=i(S,A),S.return=w,S)}function l(w,S,A,O){var K=A.type;return K===Qc?c(w,S,A.props.children,O,A.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===al&&H_(K)===S.type)?(O=i(S,A.props),O.ref=Md(w,S,A),O.return=w,O):(O=eg(A.type,A.key,A.props,null,w.mode,O),O.ref=Md(w,S,A),O.return=w,O)}function u(w,S,A,O){return S===null||S.tag!==4||S.stateNode.containerInfo!==A.containerInfo||S.stateNode.implementation!==A.implementation?(S=Ey(A,w.mode,O),S.return=w,S):(S=i(S,A.children||[]),S.return=w,S)}function c(w,S,A,O,K){return S===null||S.tag!==7?(S=qu(A,w.mode,O,K),S.return=w,S):(S=i(S,A),S.return=w,S)}function h(w,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Sy(""+S,w.mode,A),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case cm:return A=eg(S.type,S.key,S.props,null,w.mode,A),A.ref=Md(w,null,S),A.return=w,A;case Yc:return S=Ey(S,w.mode,A),S.return=w,S;case al:var O=S._init;return h(w,O(S._payload),A)}if(Yd(S)||Ld(S))return S=qu(S,w.mode,A,null),S.return=w,S;bm(w,S)}return null}function m(w,S,A,O){var K=S!==null?S.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return K!==null?null:a(w,S,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case cm:return A.key===K?l(w,S,A,O):null;case Yc:return A.key===K?u(w,S,A,O):null;case al:return K=A._init,m(w,S,K(A._payload),O)}if(Yd(A)||Ld(A))return K!==null?null:c(w,S,A,O,null);bm(w,A)}return null}function p(w,S,A,O,K){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(A)||null,a(S,w,""+O,K);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case cm:return w=w.get(O.key===null?A:O.key)||null,l(S,w,O,K);case Yc:return w=w.get(O.key===null?A:O.key)||null,u(S,w,O,K);case al:var q=O._init;return p(w,S,A,q(O._payload),K)}if(Yd(O)||Ld(O))return w=w.get(A)||null,c(S,w,O,K,null);bm(S,O)}return null}function _(w,S,A,O){for(var K=null,q=null,D=S,T=S=0,L=null;D!==null&&T<A.length;T++){D.index>T?(L=D,D=null):L=D.sibling;var F=m(w,D,A[T],O);if(F===null){D===null&&(D=L);break}t&&D&&F.alternate===null&&e(w,D),S=s(F,S,T),q===null?K=F:q.sibling=F,q=F,D=L}if(T===A.length)return n(w,D),_n&&Nu(w,T),K;if(D===null){for(;T<A.length;T++)D=h(w,A[T],O),D!==null&&(S=s(D,S,T),q===null?K=D:q.sibling=D,q=D);return _n&&Nu(w,T),K}for(D=r(w,D);T<A.length;T++)L=p(D,w,T,A[T],O),L!==null&&(t&&L.alternate!==null&&D.delete(L.key===null?T:L.key),S=s(L,S,T),q===null?K=L:q.sibling=L,q=L);return t&&D.forEach(function(I){return e(w,I)}),_n&&Nu(w,T),K}function b(w,S,A,O){var K=Ld(A);if(typeof K!="function")throw Error(Fe(150));if(A=K.call(A),A==null)throw Error(Fe(151));for(var q=K=null,D=S,T=S=0,L=null,F=A.next();D!==null&&!F.done;T++,F=A.next()){D.index>T?(L=D,D=null):L=D.sibling;var I=m(w,D,F.value,O);if(I===null){D===null&&(D=L);break}t&&D&&I.alternate===null&&e(w,D),S=s(I,S,T),q===null?K=I:q.sibling=I,q=I,D=L}if(F.done)return n(w,D),_n&&Nu(w,T),K;if(D===null){for(;!F.done;T++,F=A.next())F=h(w,F.value,O),F!==null&&(S=s(F,S,T),q===null?K=F:q.sibling=F,q=F);return _n&&Nu(w,T),K}for(D=r(w,D);!F.done;T++,F=A.next())F=p(D,w,T,F.value,O),F!==null&&(t&&F.alternate!==null&&D.delete(F.key===null?T:F.key),S=s(F,S,T),q===null?K=F:q.sibling=F,q=F);return t&&D.forEach(function(C){return e(w,C)}),_n&&Nu(w,T),K}function N(w,S,A,O){if(typeof A=="object"&&A!==null&&A.type===Qc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case cm:e:{for(var K=A.key,q=S;q!==null;){if(q.key===K){if(K=A.type,K===Qc){if(q.tag===7){n(w,q.sibling),S=i(q,A.props.children),S.return=w,w=S;break e}}else if(q.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===al&&H_(K)===q.type){n(w,q.sibling),S=i(q,A.props),S.ref=Md(w,q,A),S.return=w,w=S;break e}n(w,q);break}else e(w,q);q=q.sibling}A.type===Qc?(S=qu(A.props.children,w.mode,O,A.key),S.return=w,w=S):(O=eg(A.type,A.key,A.props,null,w.mode,O),O.ref=Md(w,S,A),O.return=w,w=O)}return o(w);case Yc:e:{for(q=A.key;S!==null;){if(S.key===q)if(S.tag===4&&S.stateNode.containerInfo===A.containerInfo&&S.stateNode.implementation===A.implementation){n(w,S.sibling),S=i(S,A.children||[]),S.return=w,w=S;break e}else{n(w,S);break}else e(w,S);S=S.sibling}S=Ey(A,w.mode,O),S.return=w,w=S}return o(w);case al:return q=A._init,N(w,S,q(A._payload),O)}if(Yd(A))return _(w,S,A,O);if(Ld(A))return b(w,S,A,O);bm(w,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,S!==null&&S.tag===6?(n(w,S.sibling),S=i(S,A),S.return=w,w=S):(n(w,S),S=Sy(A,w.mode,O),S.return=w,w=S),o(w)):n(w,S)}return N}var Rh=xN(!0),bN=xN(!1),Og=Ql(null),Mg=null,ih=null,X5=null;function J5(){X5=ih=Mg=null}function Z5(t){var e=Og.current;bn(Og),t._currentValue=e}function Qv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vh(t,e){Mg=t,X5=ih=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bi=!0),t.firstContext=null)}function ms(t){var e=t._currentValue;if(X5!==t)if(t={context:t,memoizedValue:e,next:null},ih===null){if(Mg===null)throw Error(Fe(308));ih=t,Mg.dependencies={lanes:0,firstContext:t}}else ih=ih.next=t;return e}var Mu=null;function ew(t){Mu===null?Mu=[t]:Mu.push(t)}function _N(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ew(e)):(n.next=i.next,i.next=n),e.interleaved=n,da(t,r)}function da(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ll=!1;function tw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ta(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function El(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,da(t,n)}return i=r.interleaved,i===null?(e.next=e,ew(r)):(e.next=i.next,i.next=e),r.interleaved=e,da(t,n)}function Km(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B5(t,n)}}function W_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fg(t,e,n,r){var i=t.updateQueue;ll=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,b=a;switch(m=e,p=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){h=_.call(p,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,m=typeof _=="function"?_.call(p,h,m):_,m==null)break e;h=Tn({},h,m);break e;case 2:ll=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yu|=o,t.lanes=o,t.memoizedState=h}}function G_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var bp={},wo=Ql(bp),Uf=Ql(bp),zf=Ql(bp);function Fu(t){if(t===bp)throw Error(Fe(174));return t}function nw(t,e){switch(fn(zf,e),fn(Uf,t),fn(wo,bp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cv(e,t)}bn(wo),fn(wo,e)}function Dh(){bn(wo),bn(Uf),bn(zf)}function EN(t){Fu(zf.current);var e=Fu(wo.current),n=Cv(e,t.type);e!==n&&(fn(Uf,t),fn(wo,n))}function rw(t){Uf.current===t&&(bn(wo),bn(Uf))}var Sn=Ql(0);function Vg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yy=[];function iw(){for(var t=0;t<yy.length;t++)yy[t]._workInProgressVersionPrimary=null;yy.length=0}var Ym=xa.ReactCurrentDispatcher,vy=xa.ReactCurrentBatchConfig,Ku=0,An=null,sr=null,fr=null,Bg=!1,df=!1,qf=0,VD=0;function Rr(){throw Error(Fe(321))}function sw(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zs(t[n],e[n]))return!1;return!0}function ow(t,e,n,r,i,s){if(Ku=s,An=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ym.current=t===null||t.memoizedState===null?qD:$D,t=n(r,i),df){s=0;do{if(df=!1,qf=0,25<=s)throw Error(Fe(301));s+=1,fr=sr=null,e.updateQueue=null,Ym.current=HD,t=n(r,i)}while(df)}if(Ym.current=Ug,e=sr!==null&&sr.next!==null,Ku=0,fr=sr=An=null,Bg=!1,e)throw Error(Fe(300));return t}function aw(){var t=qf!==0;return qf=0,t}function uo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fr===null?An.memoizedState=fr=t:fr=fr.next=t,fr}function gs(){if(sr===null){var t=An.alternate;t=t!==null?t.memoizedState:null}else t=sr.next;var e=fr===null?An.memoizedState:fr.next;if(e!==null)fr=e,sr=t;else{if(t===null)throw Error(Fe(310));sr=t,t={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},fr===null?An.memoizedState=fr=t:fr=fr.next=t}return fr}function $f(t,e){return typeof e=="function"?e(t):e}function wy(t){var e=gs(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=sr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Ku&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,An.lanes|=c,Yu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,zs(r,e.memoizedState)||(bi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,An.lanes|=s,Yu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xy(t){var e=gs(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zs(s,e.memoizedState)||(bi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function AN(){}function TN(t,e){var n=An,r=gs(),i=e(),s=!zs(r.memoizedState,i);if(s&&(r.memoizedState=i,bi=!0),r=r.queue,lw(kN.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||fr!==null&&fr.memoizedState.tag&1){if(n.flags|=2048,Hf(9,IN.bind(null,n,r,i,e),void 0,null),mr===null)throw Error(Fe(349));Ku&30||NN(n,e,i)}return i}function NN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IN(t,e,n,r){e.value=n,e.getSnapshot=r,CN(e)&&PN(t)}function kN(t,e,n){return n(function(){CN(e)&&PN(t)})}function CN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zs(t,n)}catch{return!0}}function PN(t){var e=da(t,1);e!==null&&Bs(e,t,1,-1)}function K_(t){var e=uo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$f,lastRenderedState:t},e.queue=t,t=t.dispatch=zD.bind(null,An,t),[e.memoizedState,t]}function Hf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=An.updateQueue,e===null?(e={lastEffect:null,stores:null},An.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function LN(){return gs().memoizedState}function Qm(t,e,n,r){var i=uo();An.flags|=t,i.memoizedState=Hf(1|e,n,void 0,r===void 0?null:r)}function O0(t,e,n,r){var i=gs();r=r===void 0?null:r;var s=void 0;if(sr!==null){var o=sr.memoizedState;if(s=o.destroy,r!==null&&sw(r,o.deps)){i.memoizedState=Hf(e,n,s,r);return}}An.flags|=t,i.memoizedState=Hf(1|e,n,s,r)}function Y_(t,e){return Qm(8390656,8,t,e)}function lw(t,e){return O0(2048,8,t,e)}function RN(t,e){return O0(4,2,t,e)}function DN(t,e){return O0(4,4,t,e)}function jN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ON(t,e,n){return n=n!=null?n.concat([t]):null,O0(4,4,jN.bind(null,e,t),n)}function uw(){}function MN(t,e){var n=gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sw(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FN(t,e){var n=gs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sw(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VN(t,e,n){return Ku&21?(zs(n,e)||(n=$T(),An.lanes|=n,Yu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bi=!0),t.memoizedState=n)}function BD(t,e){var n=tn;tn=n!==0&&4>n?n:4,t(!0);var r=vy.transition;vy.transition={};try{t(!1),e()}finally{tn=n,vy.transition=r}}function BN(){return gs().memoizedState}function UD(t,e,n){var r=Tl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},UN(t))zN(e,n);else if(n=_N(t,e,n,r),n!==null){var i=oi();Bs(n,t,r,i),qN(n,e,r)}}function zD(t,e,n){var r=Tl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(UN(t))zN(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zs(a,o)){var l=e.interleaved;l===null?(i.next=i,ew(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=_N(t,e,i,r),n!==null&&(i=oi(),Bs(n,t,r,i),qN(n,e,r))}}function UN(t){var e=t.alternate;return t===An||e!==null&&e===An}function zN(t,e){df=Bg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B5(t,n)}}var Ug={readContext:ms,useCallback:Rr,useContext:Rr,useEffect:Rr,useImperativeHandle:Rr,useInsertionEffect:Rr,useLayoutEffect:Rr,useMemo:Rr,useReducer:Rr,useRef:Rr,useState:Rr,useDebugValue:Rr,useDeferredValue:Rr,useTransition:Rr,useMutableSource:Rr,useSyncExternalStore:Rr,useId:Rr,unstable_isNewReconciler:!1},qD={readContext:ms,useCallback:function(t,e){return uo().memoizedState=[t,e===void 0?null:e],t},useContext:ms,useEffect:Y_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Qm(4194308,4,jN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Qm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Qm(4,2,t,e)},useMemo:function(t,e){var n=uo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=uo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UD.bind(null,An,t),[r.memoizedState,t]},useRef:function(t){var e=uo();return t={current:t},e.memoizedState=t},useState:K_,useDebugValue:uw,useDeferredValue:function(t){return uo().memoizedState=t},useTransition:function(){var t=K_(!1),e=t[0];return t=BD.bind(null,t[1]),uo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=An,i=uo();if(_n){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),mr===null)throw Error(Fe(349));Ku&30||NN(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Y_(kN.bind(null,r,s,t),[t]),r.flags|=2048,Hf(9,IN.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=uo(),e=mr.identifierPrefix;if(_n){var n=Xo,r=Qo;n=(r&~(1<<32-Vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$D={readContext:ms,useCallback:MN,useContext:ms,useEffect:lw,useImperativeHandle:ON,useInsertionEffect:RN,useLayoutEffect:DN,useMemo:FN,useReducer:wy,useRef:LN,useState:function(){return wy($f)},useDebugValue:uw,useDeferredValue:function(t){var e=gs();return VN(e,sr.memoizedState,t)},useTransition:function(){var t=wy($f)[0],e=gs().memoizedState;return[t,e]},useMutableSource:AN,useSyncExternalStore:TN,useId:BN,unstable_isNewReconciler:!1},HD={readContext:ms,useCallback:MN,useContext:ms,useEffect:lw,useImperativeHandle:ON,useInsertionEffect:RN,useLayoutEffect:DN,useMemo:FN,useReducer:xy,useRef:LN,useState:function(){return xy($f)},useDebugValue:uw,useDeferredValue:function(t){var e=gs();return sr===null?e.memoizedState=t:VN(e,sr.memoizedState,t)},useTransition:function(){var t=xy($f)[0],e=gs().memoizedState;return[t,e]},useMutableSource:AN,useSyncExternalStore:TN,useId:BN,unstable_isNewReconciler:!1};function Ls(t,e){if(t&&t.defaultProps){e=Tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var M0={isMounted:function(t){return(t=t._reactInternals)?sc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=oi(),i=Tl(t),s=ta(r,i);s.payload=e,n!=null&&(s.callback=n),e=El(t,s,i),e!==null&&(Bs(e,t,i,r),Km(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=oi(),i=Tl(t),s=ta(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=El(t,s,i),e!==null&&(Bs(e,t,i,r),Km(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=oi(),r=Tl(t),i=ta(n,r);i.tag=2,e!=null&&(i.callback=e),e=El(t,i,r),e!==null&&(Bs(e,t,r,n),Km(e,t,r))}};function Q_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Mf(n,r)||!Mf(i,s):!0}function $N(t,e,n){var r=!1,i=Ol,s=e.contextType;return typeof s=="object"&&s!==null?s=ms(s):(i=Si(e)?Wu:Yr.current,r=e.contextTypes,s=(r=r!=null)?Ph(t,i):Ol),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=M0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function X_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&M0.enqueueReplaceState(e,e.state,null)}function Jv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ms(s):(s=Si(e)?Wu:Yr.current,i.context=Ph(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&M0.enqueueReplaceState(i,i.state,null),Fg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jh(t,e){try{var n="",r=e;do n+=w8(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function by(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WD=typeof WeakMap=="function"?WeakMap:Map;function HN(t,e,n){n=ta(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qg||(qg=!0,u2=r),Zv(t,e)},n}function WN(t,e,n){n=ta(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zv(t,e),typeof r!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function J_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=oj.bind(null,t,e,n),e.then(t,t))}function Z_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ta(-1,1),e.tag=2,El(n,e,1))),n.lanes|=1),t)}var GD=xa.ReactCurrentOwner,bi=!1;function ii(t,e,n,r){e.child=t===null?bN(e,null,n,r):Rh(e,t.child,n,r)}function tS(t,e,n,r,i){n=n.render;var s=e.ref;return vh(e,i),r=ow(t,e,n,r,s,i),n=aw(),t!==null&&!bi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fa(t,e,i)):(_n&&n&&K5(e),e.flags|=1,ii(t,e,r,i),e.child)}function nS(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yw(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,GN(t,e,s,r,i)):(t=eg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Mf,n(o,r)&&t.ref===e.ref)return fa(t,e,i)}return e.flags|=1,t=Nl(s,r),t.ref=e.ref,t.return=e,e.child=t}function GN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Mf(s,r)&&t.ref===e.ref)if(bi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(bi=!0);else return e.lanes=t.lanes,fa(t,e,i)}return e2(t,e,n,r,i)}function KN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(oh,Vi),Vi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fn(oh,Vi),Vi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fn(oh,Vi),Vi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fn(oh,Vi),Vi|=r;return ii(t,e,i,n),e.child}function YN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function e2(t,e,n,r,i){var s=Si(n)?Wu:Yr.current;return s=Ph(e,s),vh(e,i),n=ow(t,e,n,r,s,i),r=aw(),t!==null&&!bi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,fa(t,e,i)):(_n&&r&&K5(e),e.flags|=1,ii(t,e,n,i),e.child)}function rS(t,e,n,r,i){if(Si(n)){var s=!0;Rg(e)}else s=!1;if(vh(e,i),e.stateNode===null)Xm(t,e),$N(e,n,r),Jv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ms(u):(u=Si(n)?Wu:Yr.current,u=Ph(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&X_(e,o,r,u),ll=!1;var m=e.memoizedState;o.state=m,Fg(e,r,o,i),l=e.memoizedState,a!==r||m!==l||_i.current||ll?(typeof c=="function"&&(Xv(e,n,c,r),l=e.memoizedState),(a=ll||Q_(e,n,a,r,m,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,SN(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ls(e.type,a),o.props=u,h=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ms(l):(l=Si(n)?Wu:Yr.current,l=Ph(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||m!==l)&&X_(e,o,r,l),ll=!1,m=e.memoizedState,o.state=m,Fg(e,r,o,i);var _=e.memoizedState;a!==h||m!==_||_i.current||ll?(typeof p=="function"&&(Xv(e,n,p,r),_=e.memoizedState),(u=ll||Q_(e,n,u,r,m,_,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return t2(t,e,n,r,s,i)}function t2(t,e,n,r,i,s){YN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&z_(e,n,!1),fa(t,e,s);r=e.stateNode,GD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Rh(e,t.child,null,s),e.child=Rh(e,null,a,s)):ii(t,e,a,s),e.memoizedState=r.state,i&&z_(e,n,!0),e.child}function QN(t){var e=t.stateNode;e.pendingContext?U_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&U_(t,e.context,!1),nw(t,e.containerInfo)}function iS(t,e,n,r,i){return Lh(),Q5(i),e.flags|=256,ii(t,e,n,r),e.child}var n2={dehydrated:null,treeContext:null,retryLane:0};function r2(t){return{baseLanes:t,cachePool:null,transitions:null}}function XN(t,e,n){var r=e.pendingProps,i=Sn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fn(Sn,i&1),t===null)return Yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=B0(o,r,0,null),t=qu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=r2(n),e.memoizedState=n2,t):cw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return KD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Nl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Nl(a,s):(s=qu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?r2(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=n2,r}return s=t.child,t=s.sibling,r=Nl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cw(t,e){return e=B0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _m(t,e,n,r){return r!==null&&Q5(r),Rh(e,t.child,null,n),t=cw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=by(Error(Fe(422))),_m(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=B0({mode:"visible",children:r.children},i,0,null),s=qu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Rh(e,t.child,null,o),e.child.memoizedState=r2(o),e.memoizedState=n2,s);if(!(e.mode&1))return _m(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=by(s,r,void 0),_m(t,e,o,r)}if(a=(o&t.childLanes)!==0,bi||a){if(r=mr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,da(t,i),Bs(r,t,i,-1))}return gw(),r=by(Error(Fe(421))),_m(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=aj.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ui=Sl(i.nextSibling),Hi=e,_n=!0,js=null,t!==null&&(ls[us++]=Qo,ls[us++]=Xo,ls[us++]=Gu,Qo=t.id,Xo=t.overflow,Gu=e),e=cw(e,r.children),e.flags|=4096,e)}function sS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qv(t.return,e,n)}function _y(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JN(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ii(t,e,r.children,n),r=Sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sS(t,n,e);else if(t.tag===19)sS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fn(Sn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Vg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),_y(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Vg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}_y(e,!0,n,null,s);break;case"together":_y(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=Nl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YD(t,e,n){switch(e.tag){case 3:QN(e),Lh();break;case 5:EN(e);break;case 1:Si(e.type)&&Rg(e);break;case 4:nw(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fn(Og,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fn(Sn,Sn.current&1),e.flags|=128,null):n&e.child.childLanes?XN(t,e,n):(fn(Sn,Sn.current&1),t=fa(t,e,n),t!==null?t.sibling:null);fn(Sn,Sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fn(Sn,Sn.current),r)break;return null;case 22:case 23:return e.lanes=0,KN(t,e,n)}return fa(t,e,n)}var ZN,i2,eI,tI;ZN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};i2=function(){};eI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fu(wo.current);var s=null;switch(n){case"input":i=Tv(t,i),r=Tv(t,r),s=[];break;case"select":i=Tn({},i,{value:void 0}),r=Tn({},r,{value:void 0}),s=[];break;case"textarea":i=kv(t,i),r=kv(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pg)}Pv(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&vn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};tI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fd(t,e){if(!_n)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QD(t,e,n){var r=e.pendingProps;switch(Y5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dr(e),null;case 1:return Si(e.type)&&Lg(),Dr(e),null;case 3:return r=e.stateNode,Dh(),bn(_i),bn(Yr),iw(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,js!==null&&(d2(js),js=null))),i2(t,e),Dr(e),null;case 5:rw(e);var i=Fu(zf.current);if(n=e.type,t!==null&&e.stateNode!=null)eI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Dr(e),null}if(t=Fu(wo.current),xm(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[po]=e,r[Bf]=s,t=(e.mode&1)!==0,n){case"dialog":vn("cancel",r),vn("close",r);break;case"iframe":case"object":case"embed":vn("load",r);break;case"video":case"audio":for(i=0;i<Xd.length;i++)vn(Xd[i],r);break;case"source":vn("error",r);break;case"img":case"image":case"link":vn("error",r),vn("load",r);break;case"details":vn("toggle",r);break;case"input":p_(r,s),vn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vn("invalid",r);break;case"textarea":g_(r,s),vn("invalid",r)}Pv(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&wm(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wm(r.textContent,a,t),i=["children",""+a]):Cf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&vn("scroll",r)}switch(n){case"input":hm(r),m_(r,s,!0);break;case"textarea":hm(r),y_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[po]=e,t[Bf]=r,ZN(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lv(n,r),n){case"dialog":vn("cancel",t),vn("close",t),i=r;break;case"iframe":case"object":case"embed":vn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xd.length;i++)vn(Xd[i],t);i=r;break;case"source":vn("error",t),i=r;break;case"img":case"image":case"link":vn("error",t),vn("load",t),i=r;break;case"details":vn("toggle",t),i=r;break;case"input":p_(t,r),i=Tv(t,r),vn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Tn({},r,{value:void 0}),vn("invalid",t);break;case"textarea":g_(t,r),i=kv(t,r),vn("invalid",t);break;default:i=r}Pv(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?LT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pf(t,l):typeof l=="number"&&Pf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&vn("scroll",t):l!=null&&D5(t,s,l,o))}switch(n){case"input":hm(t),m_(t,r,!1);break;case"textarea":hm(t),y_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+jl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ph(t,!!r.multiple,s,!1):r.defaultValue!=null&&ph(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dr(e),null;case 6:if(t&&e.stateNode!=null)tI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Fu(zf.current),Fu(wo.current),xm(e)){if(r=e.stateNode,n=e.memoizedProps,r[po]=e,(s=r.nodeValue!==n)&&(t=Hi,t!==null))switch(t.tag){case 3:wm(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wm(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[po]=e,e.stateNode=r}return Dr(e),null;case 13:if(bn(Sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_n&&Ui!==null&&e.mode&1&&!(e.flags&128))wN(),Lh(),e.flags|=98560,s=!1;else if(s=xm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[po]=e}else Lh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dr(e),s=!1}else js!==null&&(d2(js),js=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Sn.current&1?ar===0&&(ar=3):gw())),e.updateQueue!==null&&(e.flags|=4),Dr(e),null);case 4:return Dh(),i2(t,e),t===null&&Ff(e.stateNode.containerInfo),Dr(e),null;case 10:return Z5(e.type._context),Dr(e),null;case 17:return Si(e.type)&&Lg(),Dr(e),null;case 19:if(bn(Sn),s=e.memoizedState,s===null)return Dr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fd(s,!1);else{if(ar!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vg(t),o!==null){for(e.flags|=128,Fd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fn(Sn,Sn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Vn()>Oh&&(e.flags|=128,r=!0,Fd(s,!1),e.lanes=4194304)}else{if(!r)if(t=Vg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_n)return Dr(e),null}else 2*Vn()-s.renderingStartTime>Oh&&n!==1073741824&&(e.flags|=128,r=!0,Fd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Vn(),e.sibling=null,n=Sn.current,fn(Sn,r?n&1|2:n&1),e):(Dr(e),null);case 22:case 23:return mw(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vi&1073741824&&(Dr(e),e.subtreeFlags&6&&(e.flags|=8192)):Dr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function XD(t,e){switch(Y5(e),e.tag){case 1:return Si(e.type)&&Lg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dh(),bn(_i),bn(Yr),iw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rw(e),null;case 13:if(bn(Sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Lh()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bn(Sn),null;case 4:return Dh(),null;case 10:return Z5(e.type._context),null;case 22:case 23:return mw(),null;case 24:return null;default:return null}}var Sm=!1,zr=!1,JD=typeof WeakSet=="function"?WeakSet:Set,nt=null;function sh(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ln(t,e,r)}else n.current=null}function s2(t,e,n){try{n()}catch(r){Ln(t,e,r)}}var oS=!1;function ZD(t,e){if(zv=Ig,t=oN(),G5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,m=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)m=h,h=p;for(;;){if(h===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qv={focusedElem:t,selectionRange:n},Ig=!1,nt=e;nt!==null;)if(e=nt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,nt=t;else for(;nt!==null;){e=nt;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,N=_.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ls(e.type,b),N);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(O){Ln(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}return _=oS,oS=!1,_}function ff(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&s2(e,n,s)}i=i.next}while(i!==r)}}function F0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function o2(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nI(t){var e=t.alternate;e!==null&&(t.alternate=null,nI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[po],delete e[Bf],delete e[Wv],delete e[jD],delete e[OD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rI(t){return t.tag===5||t.tag===3||t.tag===4}function aS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function a2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pg));else if(r!==4&&(t=t.child,t!==null))for(a2(t,e,n),t=t.sibling;t!==null;)a2(t,e,n),t=t.sibling}function l2(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(l2(t,e,n),t=t.sibling;t!==null;)l2(t,e,n),t=t.sibling}var _r=null,Ds=!1;function el(t,e,n){for(n=n.child;n!==null;)iI(t,e,n),n=n.sibling}function iI(t,e,n){if(vo&&typeof vo.onCommitFiberUnmount=="function")try{vo.onCommitFiberUnmount(C0,n)}catch{}switch(n.tag){case 5:zr||sh(n,e);case 6:var r=_r,i=Ds;_r=null,el(t,e,n),_r=r,Ds=i,_r!==null&&(Ds?(t=_r,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):_r.removeChild(n.stateNode));break;case 18:_r!==null&&(Ds?(t=_r,n=n.stateNode,t.nodeType===8?my(t.parentNode,n):t.nodeType===1&&my(t,n),jf(t)):my(_r,n.stateNode));break;case 4:r=_r,i=Ds,_r=n.stateNode.containerInfo,Ds=!0,el(t,e,n),_r=r,Ds=i;break;case 0:case 11:case 14:case 15:if(!zr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&s2(n,e,o),i=i.next}while(i!==r)}el(t,e,n);break;case 1:if(!zr&&(sh(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ln(n,e,a)}el(t,e,n);break;case 21:el(t,e,n);break;case 22:n.mode&1?(zr=(r=zr)||n.memoizedState!==null,el(t,e,n),zr=r):el(t,e,n);break;default:el(t,e,n)}}function lS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JD),e.forEach(function(r){var i=lj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ks(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_r=a.stateNode,Ds=!1;break e;case 3:_r=a.stateNode.containerInfo,Ds=!0;break e;case 4:_r=a.stateNode.containerInfo,Ds=!0;break e}a=a.return}if(_r===null)throw Error(Fe(160));iI(s,o,i),_r=null,Ds=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ln(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sI(e,t),e=e.sibling}function sI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ks(e,t),ao(t),r&4){try{ff(3,t,t.return),F0(3,t)}catch(b){Ln(t,t.return,b)}try{ff(5,t,t.return)}catch(b){Ln(t,t.return,b)}}break;case 1:ks(e,t),ao(t),r&512&&n!==null&&sh(n,n.return);break;case 5:if(ks(e,t),ao(t),r&512&&n!==null&&sh(n,n.return),t.flags&32){var i=t.stateNode;try{Pf(i,"")}catch(b){Ln(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&NT(i,s),Lv(a,o);var u=Lv(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?LT(i,h):c==="dangerouslySetInnerHTML"?CT(i,h):c==="children"?Pf(i,h):D5(i,c,h,u)}switch(a){case"input":Nv(i,s);break;case"textarea":IT(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ph(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?ph(i,!!s.multiple,s.defaultValue,!0):ph(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bf]=s}catch(b){Ln(t,t.return,b)}}break;case 6:if(ks(e,t),ao(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){Ln(t,t.return,b)}}break;case 3:if(ks(e,t),ao(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jf(e.containerInfo)}catch(b){Ln(t,t.return,b)}break;case 4:ks(e,t),ao(t);break;case 13:ks(e,t),ao(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fw=Vn())),r&4&&lS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(zr=(u=zr)||c,ks(e,t),zr=u):ks(e,t),ao(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(nt=t,c=t.child;c!==null;){for(h=nt=c;nt!==null;){switch(m=nt,p=m.child,m.tag){case 0:case 11:case 14:case 15:ff(4,m,m.return);break;case 1:sh(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){Ln(r,n,b)}}break;case 5:sh(m,m.return);break;case 22:if(m.memoizedState!==null){cS(h);continue}}p!==null?(p.return=m,nt=p):cS(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PT("display",o))}catch(b){Ln(t,t.return,b)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){Ln(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ks(e,t),ao(t),r&4&&lS(t);break;case 21:break;default:ks(e,t),ao(t)}}function ao(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rI(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pf(i,""),r.flags&=-33);var s=aS(t);l2(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=aS(t);a2(t,a,o);break;default:throw Error(Fe(161))}}catch(l){Ln(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ej(t,e,n){nt=t,oI(t)}function oI(t,e,n){for(var r=(t.mode&1)!==0;nt!==null;){var i=nt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Sm;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||zr;a=Sm;var u=zr;if(Sm=o,(zr=l)&&!u)for(nt=i;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?hS(i):l!==null?(l.return=o,nt=l):hS(i);for(;s!==null;)nt=s,oI(s),s=s.sibling;nt=i,Sm=a,zr=u}uS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,nt=s):uS(t)}}function uS(t){for(;nt!==null;){var e=nt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||F0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ls(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&G_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}G_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&jf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}zr||e.flags&512&&o2(e)}catch(m){Ln(e,e.return,m)}}if(e===t){nt=null;break}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}}function cS(t){for(;nt!==null;){var e=nt;if(e===t){nt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,nt=n;break}nt=e.return}}function hS(t){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{F0(4,e)}catch(l){Ln(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ln(e,i,l)}}var s=e.return;try{o2(e)}catch(l){Ln(e,s,l)}break;case 5:var o=e.return;try{o2(e)}catch(l){Ln(e,o,l)}}}catch(l){Ln(e,e.return,l)}if(e===t){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var tj=Math.ceil,zg=xa.ReactCurrentDispatcher,hw=xa.ReactCurrentOwner,fs=xa.ReactCurrentBatchConfig,qt=0,mr=null,Zn=null,Tr=0,Vi=0,oh=Ql(0),ar=0,Wf=null,Yu=0,V0=0,dw=0,pf=null,wi=null,fw=0,Oh=1/0,Ko=null,qg=!1,u2=null,Al=null,Em=!1,gl=null,$g=0,mf=0,c2=null,Jm=-1,Zm=0;function oi(){return qt&6?Vn():Jm!==-1?Jm:Jm=Vn()}function Tl(t){return t.mode&1?qt&2&&Tr!==0?Tr&-Tr:FD.transition!==null?(Zm===0&&(Zm=$T()),Zm):(t=tn,t!==0||(t=window.event,t=t===void 0?16:XT(t.type)),t):1}function Bs(t,e,n,r){if(50<mf)throw mf=0,c2=null,Error(Fe(185));vp(t,n,r),(!(qt&2)||t!==mr)&&(t===mr&&(!(qt&2)&&(V0|=n),ar===4&&hl(t,Tr)),Ei(t,r),n===1&&qt===0&&!(e.mode&1)&&(Oh=Vn()+500,j0&&Xl()))}function Ei(t,e){var n=t.callbackNode;F8(t,e);var r=Ng(t,t===mr?Tr:0);if(r===0)n!==null&&x_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&x_(n),e===1)t.tag===0?MD(dS.bind(null,t)):gN(dS.bind(null,t)),RD(function(){!(qt&6)&&Xl()}),n=null;else{switch(HT(r)){case 1:n=V5;break;case 4:n=zT;break;case 16:n=Tg;break;case 536870912:n=qT;break;default:n=Tg}n=pI(n,aI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aI(t,e){if(Jm=-1,Zm=0,qt&6)throw Error(Fe(327));var n=t.callbackNode;if(wh()&&t.callbackNode!==n)return null;var r=Ng(t,t===mr?Tr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hg(t,r);else{e=r;var i=qt;qt|=2;var s=uI();(mr!==t||Tr!==e)&&(Ko=null,Oh=Vn()+500,zu(t,e));do try{ij();break}catch(a){lI(t,a)}while(!0);J5(),zg.current=s,qt=i,Zn!==null?e=0:(mr=null,Tr=0,e=ar)}if(e!==0){if(e===2&&(i=Mv(t),i!==0&&(r=i,e=h2(t,i))),e===1)throw n=Wf,zu(t,0),hl(t,r),Ei(t,Vn()),n;if(e===6)hl(t,r);else{if(i=t.current.alternate,!(r&30)&&!nj(i)&&(e=Hg(t,r),e===2&&(s=Mv(t),s!==0&&(r=s,e=h2(t,s))),e===1))throw n=Wf,zu(t,0),hl(t,r),Ei(t,Vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Iu(t,wi,Ko);break;case 3:if(hl(t,r),(r&130023424)===r&&(e=fw+500-Vn(),10<e)){if(Ng(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){oi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Hv(Iu.bind(null,t,wi,Ko),e);break}Iu(t,wi,Ko);break;case 4:if(hl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tj(r/1960))-r,10<r){t.timeoutHandle=Hv(Iu.bind(null,t,wi,Ko),r);break}Iu(t,wi,Ko);break;case 5:Iu(t,wi,Ko);break;default:throw Error(Fe(329))}}}return Ei(t,Vn()),t.callbackNode===n?aI.bind(null,t):null}function h2(t,e){var n=pf;return t.current.memoizedState.isDehydrated&&(zu(t,e).flags|=256),t=Hg(t,e),t!==2&&(e=wi,wi=n,e!==null&&d2(e)),t}function d2(t){wi===null?wi=t:wi.push.apply(wi,t)}function nj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hl(t,e){for(e&=~dw,e&=~V0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vs(e),r=1<<n;t[n]=-1,e&=~r}}function dS(t){if(qt&6)throw Error(Fe(327));wh();var e=Ng(t,0);if(!(e&1))return Ei(t,Vn()),null;var n=Hg(t,e);if(t.tag!==0&&n===2){var r=Mv(t);r!==0&&(e=r,n=h2(t,r))}if(n===1)throw n=Wf,zu(t,0),hl(t,e),Ei(t,Vn()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Iu(t,wi,Ko),Ei(t,Vn()),null}function pw(t,e){var n=qt;qt|=1;try{return t(e)}finally{qt=n,qt===0&&(Oh=Vn()+500,j0&&Xl())}}function Qu(t){gl!==null&&gl.tag===0&&!(qt&6)&&wh();var e=qt;qt|=1;var n=fs.transition,r=tn;try{if(fs.transition=null,tn=1,t)return t()}finally{tn=r,fs.transition=n,qt=e,!(qt&6)&&Xl()}}function mw(){Vi=oh.current,bn(oh)}function zu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LD(n)),Zn!==null)for(n=Zn.return;n!==null;){var r=n;switch(Y5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lg();break;case 3:Dh(),bn(_i),bn(Yr),iw();break;case 5:rw(r);break;case 4:Dh();break;case 13:bn(Sn);break;case 19:bn(Sn);break;case 10:Z5(r.type._context);break;case 22:case 23:mw()}n=n.return}if(mr=t,Zn=t=Nl(t.current,null),Tr=Vi=e,ar=0,Wf=null,dw=V0=Yu=0,wi=pf=null,Mu!==null){for(e=0;e<Mu.length;e++)if(n=Mu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mu=null}return t}function lI(t,e){do{var n=Zn;try{if(J5(),Ym.current=Ug,Bg){for(var r=An.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bg=!1}if(Ku=0,fr=sr=An=null,df=!1,qf=0,hw.current=null,n===null||n.return===null){ar=1,Wf=e,Zn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Tr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=Z_(o);if(p!==null){p.flags&=-257,eS(p,o,a,s,e),p.mode&1&&J_(s,u,e),e=p,l=u;var _=e.updateQueue;if(_===null){var b=new Set;b.add(l),e.updateQueue=b}else _.add(l);break e}else{if(!(e&1)){J_(s,u,e),gw();break e}l=Error(Fe(426))}}else if(_n&&a.mode&1){var N=Z_(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),eS(N,o,a,s,e),Q5(jh(l,a));break e}}s=l=jh(l,a),ar!==4&&(ar=2),pf===null?pf=[s]:pf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=HN(s,l,e);W_(s,w);break e;case 1:a=l;var S=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Al===null||!Al.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=WN(s,a,e);W_(s,O);break e}}s=s.return}while(s!==null)}hI(n)}catch(K){e=K,Zn===n&&n!==null&&(Zn=n=n.return);continue}break}while(!0)}function uI(){var t=zg.current;return zg.current=Ug,t===null?Ug:t}function gw(){(ar===0||ar===3||ar===2)&&(ar=4),mr===null||!(Yu&268435455)&&!(V0&268435455)||hl(mr,Tr)}function Hg(t,e){var n=qt;qt|=2;var r=uI();(mr!==t||Tr!==e)&&(Ko=null,zu(t,e));do try{rj();break}catch(i){lI(t,i)}while(!0);if(J5(),qt=n,zg.current=r,Zn!==null)throw Error(Fe(261));return mr=null,Tr=0,ar}function rj(){for(;Zn!==null;)cI(Zn)}function ij(){for(;Zn!==null&&!k8();)cI(Zn)}function cI(t){var e=fI(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,e===null?hI(t):Zn=e,hw.current=null}function hI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=XD(n,e),n!==null){n.flags&=32767,Zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ar=6,Zn=null;return}}else if(n=QD(n,e,Vi),n!==null){Zn=n;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=t}while(e!==null);ar===0&&(ar=5)}function Iu(t,e,n){var r=tn,i=fs.transition;try{fs.transition=null,tn=1,sj(t,e,n,r)}finally{fs.transition=i,tn=r}return null}function sj(t,e,n,r){do wh();while(gl!==null);if(qt&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(V8(t,s),t===mr&&(Zn=mr=null,Tr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Em||(Em=!0,pI(Tg,function(){return wh(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fs.transition,fs.transition=null;var o=tn;tn=1;var a=qt;qt|=4,hw.current=null,ZD(t,n),sI(n,t),AD(qv),Ig=!!zv,qv=zv=null,t.current=n,ej(n),C8(),qt=a,tn=o,fs.transition=s}else t.current=n;if(Em&&(Em=!1,gl=t,$g=i),s=t.pendingLanes,s===0&&(Al=null),R8(n.stateNode),Ei(t,Vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qg)throw qg=!1,t=u2,u2=null,t;return $g&1&&t.tag!==0&&wh(),s=t.pendingLanes,s&1?t===c2?mf++:(mf=0,c2=t):mf=0,Xl(),null}function wh(){if(gl!==null){var t=HT($g),e=fs.transition,n=tn;try{if(fs.transition=null,tn=16>t?16:t,gl===null)var r=!1;else{if(t=gl,gl=null,$g=0,qt&6)throw Error(Fe(331));var i=qt;for(qt|=4,nt=t.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(nt=u;nt!==null;){var c=nt;switch(c.tag){case 0:case 11:case 15:ff(8,c,s)}var h=c.child;if(h!==null)h.return=c,nt=h;else for(;nt!==null;){c=nt;var m=c.sibling,p=c.return;if(nI(c),c===u){nt=null;break}if(m!==null){m.return=p,nt=m;break}nt=p}}}var _=s.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ff(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,nt=w;break e}nt=s.return}}var S=t.current;for(nt=S;nt!==null;){o=nt;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,nt=A;else e:for(o=S;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:F0(9,a)}}catch(K){Ln(a,a.return,K)}if(a===o){nt=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,nt=O;break e}nt=a.return}}if(qt=i,Xl(),vo&&typeof vo.onPostCommitFiberRoot=="function")try{vo.onPostCommitFiberRoot(C0,t)}catch{}r=!0}return r}finally{tn=n,fs.transition=e}}return!1}function fS(t,e,n){e=jh(n,e),e=HN(t,e,1),t=El(t,e,1),e=oi(),t!==null&&(vp(t,1,e),Ei(t,e))}function Ln(t,e,n){if(t.tag===3)fS(t,t,n);else for(;e!==null;){if(e.tag===3){fS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Al===null||!Al.has(r))){t=jh(n,t),t=WN(e,t,1),e=El(e,t,1),t=oi(),e!==null&&(vp(e,1,t),Ei(e,t));break}}e=e.return}}function oj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=oi(),t.pingedLanes|=t.suspendedLanes&n,mr===t&&(Tr&n)===n&&(ar===4||ar===3&&(Tr&130023424)===Tr&&500>Vn()-fw?zu(t,0):dw|=n),Ei(t,e)}function dI(t,e){e===0&&(t.mode&1?(e=pm,pm<<=1,!(pm&130023424)&&(pm=4194304)):e=1);var n=oi();t=da(t,e),t!==null&&(vp(t,e,n),Ei(t,n))}function aj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dI(t,n)}function lj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),dI(t,n)}var fI;fI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_i.current)bi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bi=!1,YD(t,e,n);bi=!!(t.flags&131072)}else bi=!1,_n&&e.flags&1048576&&yN(e,jg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xm(t,e),t=e.pendingProps;var i=Ph(e,Yr.current);vh(e,n),i=ow(null,e,r,t,i,n);var s=aw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Si(r)?(s=!0,Rg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tw(e),i.updater=M0,e.stateNode=i,i._reactInternals=e,Jv(e,r,t,n),e=t2(null,e,r,!0,s,n)):(e.tag=0,_n&&s&&K5(e),ii(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=cj(r),t=Ls(r,t),i){case 0:e=e2(null,e,r,t,n);break e;case 1:e=rS(null,e,r,t,n);break e;case 11:e=tS(null,e,r,t,n);break e;case 14:e=nS(null,e,r,Ls(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),e2(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),rS(t,e,r,i,n);case 3:e:{if(QN(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,SN(t,e),Fg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=jh(Error(Fe(423)),e),e=iS(t,e,r,n,i);break e}else if(r!==i){i=jh(Error(Fe(424)),e),e=iS(t,e,r,n,i);break e}else for(Ui=Sl(e.stateNode.containerInfo.firstChild),Hi=e,_n=!0,js=null,n=bN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lh(),r===i){e=fa(t,e,n);break e}ii(t,e,r,n)}e=e.child}return e;case 5:return EN(e),t===null&&Yv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$v(r,i)?o=null:s!==null&&$v(r,s)&&(e.flags|=32),YN(t,e),ii(t,e,o,n),e.child;case 6:return t===null&&Yv(e),null;case 13:return XN(t,e,n);case 4:return nw(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Rh(e,null,r,n):ii(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),tS(t,e,r,i,n);case 7:return ii(t,e,e.pendingProps,n),e.child;case 8:return ii(t,e,e.pendingProps.children,n),e.child;case 12:return ii(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fn(Og,r._currentValue),r._currentValue=o,s!==null)if(zs(s.value,o)){if(s.children===i.children&&!_i.current){e=fa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ta(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ii(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,vh(e,n),i=ms(i),r=r(i),e.flags|=1,ii(t,e,r,n),e.child;case 14:return r=e.type,i=Ls(r,e.pendingProps),i=Ls(r.type,i),nS(t,e,r,i,n);case 15:return GN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ls(r,i),Xm(t,e),e.tag=1,Si(r)?(t=!0,Rg(e)):t=!1,vh(e,n),$N(e,r,i),Jv(e,r,i,n),t2(null,e,r,!0,t,n);case 19:return JN(t,e,n);case 22:return KN(t,e,n)}throw Error(Fe(156,e.tag))};function pI(t,e){return UT(t,e)}function uj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(t,e,n,r){return new uj(t,e,n,r)}function yw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cj(t){if(typeof t=="function")return yw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O5)return 11;if(t===M5)return 14}return 2}function Nl(t,e){var n=t.alternate;return n===null?(n=hs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qc:return qu(n.children,i,s,e);case j5:o=8,i|=8;break;case _v:return t=hs(12,n,e,i|2),t.elementType=_v,t.lanes=s,t;case Sv:return t=hs(13,n,e,i),t.elementType=Sv,t.lanes=s,t;case Ev:return t=hs(19,n,e,i),t.elementType=Ev,t.lanes=s,t;case ET:return B0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _T:o=10;break e;case ST:o=9;break e;case O5:o=11;break e;case M5:o=14;break e;case al:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=hs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function qu(t,e,n,r){return t=hs(7,t,r,e),t.lanes=n,t}function B0(t,e,n,r){return t=hs(22,t,r,e),t.elementType=ET,t.lanes=n,t.stateNode={isHidden:!1},t}function Sy(t,e,n){return t=hs(6,t,null,e),t.lanes=n,t}function Ey(t,e,n){return e=hs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function hj(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iy(0),this.expirationTimes=iy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vw(t,e,n,r,i,s,o,a,l){return t=new hj(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tw(s),t}function dj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mI(t){if(!t)return Ol;t=t._reactInternals;e:{if(sc(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Si(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Si(n))return mN(t,n,e)}return e}function gI(t,e,n,r,i,s,o,a,l){return t=vw(n,r,!0,t,i,s,o,a,l),t.context=mI(null),n=t.current,r=oi(),i=Tl(n),s=ta(r,i),s.callback=e??null,El(n,s,i),t.current.lanes=i,vp(t,i,r),Ei(t,r),t}function U0(t,e,n,r){var i=e.current,s=oi(),o=Tl(i);return n=mI(n),e.context===null?e.context=n:e.pendingContext=n,e=ta(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=El(i,e,o),t!==null&&(Bs(t,i,o,s),Km(t,i,o)),o}function Wg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ww(t,e){pS(t,e),(t=t.alternate)&&pS(t,e)}function fj(){return null}var yI=typeof reportError=="function"?reportError:function(t){console.error(t)};function xw(t){this._internalRoot=t}z0.prototype.render=xw.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));U0(t,e,null,null)};z0.prototype.unmount=xw.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qu(function(){U0(null,t,null,null)}),e[ha]=null}};function z0(t){this._internalRoot=t}z0.prototype.unstable_scheduleHydration=function(t){if(t){var e=KT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cl.length&&e!==0&&e<cl[n].priority;n++);cl.splice(n,0,t),n===0&&QT(t)}};function bw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function q0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mS(){}function pj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Wg(o);s.call(u)}}var o=gI(e,r,t,0,null,!1,!1,"",mS);return t._reactRootContainer=o,t[ha]=o.current,Ff(t.nodeType===8?t.parentNode:t),Qu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Wg(l);a.call(u)}}var l=vw(t,0,!1,null,null,!1,!1,"",mS);return t._reactRootContainer=l,t[ha]=l.current,Ff(t.nodeType===8?t.parentNode:t),Qu(function(){U0(e,l,n,r)}),l}function $0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Wg(o);a.call(l)}}U0(e,o,t,i)}else o=pj(n,e,t,i,r);return Wg(o)}WT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qd(e.pendingLanes);n!==0&&(B5(e,n|1),Ei(e,Vn()),!(qt&6)&&(Oh=Vn()+500,Xl()))}break;case 13:Qu(function(){var r=da(t,1);if(r!==null){var i=oi();Bs(r,t,1,i)}}),ww(t,1)}};U5=function(t){if(t.tag===13){var e=da(t,134217728);if(e!==null){var n=oi();Bs(e,t,134217728,n)}ww(t,134217728)}};GT=function(t){if(t.tag===13){var e=Tl(t),n=da(t,e);if(n!==null){var r=oi();Bs(n,t,e,r)}ww(t,e)}};KT=function(){return tn};YT=function(t,e){var n=tn;try{return tn=t,e()}finally{tn=n}};Dv=function(t,e,n){switch(e){case"input":if(Nv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=D0(r);if(!i)throw Error(Fe(90));TT(r),Nv(r,i)}}}break;case"textarea":IT(t,n);break;case"select":e=n.value,e!=null&&ph(t,!!n.multiple,e,!1)}};jT=pw;OT=Qu;var mj={usingClientEntryPoint:!1,Events:[xp,eh,D0,RT,DT,pw]},Vd={findFiberByHostInstance:Ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gj={bundleType:Vd.bundleType,version:Vd.version,rendererPackageName:Vd.rendererPackageName,rendererConfig:Vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VT(t),t===null?null:t.stateNode},findFiberByHostInstance:Vd.findFiberByHostInstance||fj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Am.isDisabled&&Am.supportsFiber)try{C0=Am.inject(gj),vo=Am}catch{}}Ki.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mj;Ki.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bw(e))throw Error(Fe(200));return dj(t,e,null,n)};Ki.createRoot=function(t,e){if(!bw(t))throw Error(Fe(299));var n=!1,r="",i=yI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vw(t,1,!1,null,null,n,!1,r,i),t[ha]=e.current,Ff(t.nodeType===8?t.parentNode:t),new xw(e)};Ki.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=VT(e),t=t===null?null:t.stateNode,t};Ki.flushSync=function(t){return Qu(t)};Ki.hydrate=function(t,e,n){if(!q0(e))throw Error(Fe(200));return $0(null,t,e,!0,n)};Ki.hydrateRoot=function(t,e,n){if(!bw(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gI(e,null,t,1,n??null,i,!1,s,o),t[ha]=e.current,Ff(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new z0(e)};Ki.render=function(t,e,n){if(!q0(e))throw Error(Fe(200));return $0(null,t,e,!1,n)};Ki.unmountComponentAtNode=function(t){if(!q0(t))throw Error(Fe(40));return t._reactRootContainer?(Qu(function(){$0(null,null,t,!1,function(){t._reactRootContainer=null,t[ha]=null})}),!0):!1};Ki.unstable_batchedUpdates=pw;Ki.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!q0(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return $0(t,e,n,!1,r)};Ki.version="18.3.1-next-f1338f8080-20240426";function vI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vI)}catch(t){console.error(t)}}vI(),vT.exports=Ki;var yj=vT.exports,wI,gS=yj;wI=gS.createRoot,gS.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gf.apply(this,arguments)}var yl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(yl||(yl={}));const yS="popstate";function vj(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return f2("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gg(i)}return xj(e,n,null,t)}function $n(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wj(){return Math.random().toString(36).substr(2,8)}function vS(t,e){return{usr:t.state,key:t.key,idx:e}}function f2(t,e,n,r){return n===void 0&&(n=null),Gf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?td(e):e,{state:n,key:e&&e.key||r||wj()})}function Gg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function td(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function xj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=yl.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(Gf({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){a=yl.Pop;let N=c(),w=N==null?null:N-u;u=N,l&&l({action:a,location:b.location,delta:w})}function m(N,w){a=yl.Push;let S=f2(b.location,N,w);u=c()+1;let A=vS(S,u),O=b.createHref(S);try{o.pushState(A,"",O)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;i.location.assign(O)}s&&l&&l({action:a,location:b.location,delta:1})}function p(N,w){a=yl.Replace;let S=f2(b.location,N,w);u=c();let A=vS(S,u),O=b.createHref(S);o.replaceState(A,"",O),s&&l&&l({action:a,location:b.location,delta:0})}function _(N){let w=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof N=="string"?N:Gg(N);return S=S.replace(/ $/,"%20"),$n(w,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,w)}let b={get action(){return a},get location(){return t(i,o)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(yS,h),l=N,()=>{i.removeEventListener(yS,h),l=null}},createHref(N){return e(i,N)},createURL:_,encodeLocation(N){let w=_(N);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(N){return o.go(N)}};return b}var wS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wS||(wS={}));function bj(t,e,n){return n===void 0&&(n="/"),_j(t,e,n,!1)}function _j(t,e,n,r){let i=typeof e=="string"?td(e):e,s=_w(i.pathname||"/",n);if(s==null)return null;let o=bI(t);Sj(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Dj(s);a=Lj(o[l],u,r)}return a}function bI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&($n(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Il([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&($n(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bI(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Cj(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of _I(s.path))i(s,o,l)}),e}function _I(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=_I(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Sj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Pj(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ej=/^:[\w-]+$/,Aj=3,Tj=2,Nj=1,Ij=10,kj=-2,xS=t=>t==="*";function Cj(t,e){let n=t.split("/"),r=n.length;return n.some(xS)&&(r+=kj),e&&(r+=Tj),n.filter(i=>!xS(i)).reduce((i,s)=>i+(Ej.test(s)?Aj:s===""?Nj:Ij),r)}function Pj(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Lj(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=bS({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),m=l.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=bS({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:Il([s,h.pathname]),pathnameBase:Fj(Il([s,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(s=Il([s,h.pathnameBase]))}return o}function bS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Rj(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,h)=>{let{paramName:m,isOptional:p}=c;if(m==="*"){let b=a[h]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const _=a[h];return p&&!_?u[m]=void 0:u[m]=(_||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Rj(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Dj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _w(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jj(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?td(t):t;return{pathname:n?n.startsWith("/")?n:Oj(n,e):e,search:Vj(r),hash:Bj(i)}}function Oj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ay(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Sw(t,e){let n=Mj(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Ew(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=td(t):(i=Gf({},t),$n(!i.pathname||!i.pathname.includes("?"),Ay("?","pathname","search",i)),$n(!i.pathname||!i.pathname.includes("#"),Ay("#","pathname","hash",i)),$n(!i.search||!i.search.includes("#"),Ay("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;i.pathname=m.join("/")}a=h>=0?e[h]:"/"}let l=jj(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Il=t=>t.join("/").replace(/\/\/+/g,"/"),Fj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Bj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Uj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const SI=["post","put","patch","delete"];new Set(SI);const zj=["get",...SI];new Set(zj);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kf(){return Kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kf.apply(this,arguments)}const Aw=ee.createContext(null),qj=ee.createContext(null),Jl=ee.createContext(null),H0=ee.createContext(null),ba=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),EI=ee.createContext(null);function $j(t,e){let{relative:n}=e===void 0?{}:e;nd()||$n(!1);let{basename:r,navigator:i}=ee.useContext(Jl),{hash:s,pathname:o,search:a}=NI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Il([r,o])),i.createHref({pathname:l,search:a,hash:s})}function nd(){return ee.useContext(H0)!=null}function oc(){return nd()||$n(!1),ee.useContext(H0).location}function AI(t){ee.useContext(Jl).static||ee.useLayoutEffect(t)}function _a(){let{isDataRoute:t}=ee.useContext(ba);return t?rO():Hj()}function Hj(){nd()||$n(!1);let t=ee.useContext(Aw),{basename:e,future:n,navigator:r}=ee.useContext(Jl),{matches:i}=ee.useContext(ba),{pathname:s}=oc(),o=JSON.stringify(Sw(i,n.v7_relativeSplatPath)),a=ee.useRef(!1);return AI(()=>{a.current=!0}),ee.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Ew(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Il([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}function TI(){let{matches:t}=ee.useContext(ba),e=t[t.length-1];return e?e.params:{}}function NI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=ee.useContext(Jl),{matches:i}=ee.useContext(ba),{pathname:s}=oc(),o=JSON.stringify(Sw(i,r.v7_relativeSplatPath));return ee.useMemo(()=>Ew(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Wj(t,e){return Gj(t,e)}function Gj(t,e,n,r){nd()||$n(!1);let{navigator:i}=ee.useContext(Jl),{matches:s}=ee.useContext(ba),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=oc(),c;if(e){var h;let N=typeof e=="string"?td(e):e;l==="/"||(h=N.pathname)!=null&&h.startsWith(l)||$n(!1),c=N}else c=u;let m=c.pathname||"/",p=m;if(l!=="/"){let N=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let _=bj(t,{pathname:p}),b=Jj(_&&_.map(N=>Object.assign({},N,{params:Object.assign({},a,N.params),pathname:Il([l,i.encodeLocation?i.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?l:Il([l,i.encodeLocation?i.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),s,n,r);return e&&b?ee.createElement(H0.Provider,{value:{location:Kf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:yl.Pop}},b):b}function Kj(){let t=nO(),e=Uj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},e),n?ee.createElement("pre",{style:i},n):null,null)}const Yj=ee.createElement(Kj,null);class Qj extends ee.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ee.createElement(ba.Provider,{value:this.props.routeContext},ee.createElement(EI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Xj(t){let{routeContext:e,match:n,children:r}=t,i=ee.useContext(Aw);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),ee.createElement(ba.Provider,{value:e},r)}function Jj(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);c>=0||$n(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:m,errors:p}=n,_=h.route.loader&&m[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||_){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,m)=>{let p,_=!1,b=null,N=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||Yj,l&&(u<0&&m===0?(_=!0,N=null):u===m&&(_=!0,N=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),S=()=>{let A;return p?A=b:_?A=N:h.route.Component?A=ee.createElement(h.route.Component,null):h.route.element?A=h.route.element:A=c,ee.createElement(Xj,{match:h,routeContext:{outlet:c,matches:w,isDataRoute:n!=null},children:A})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?ee.createElement(Qj,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):S()},null)}var II=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(II||{}),Kg=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Kg||{});function Zj(t){let e=ee.useContext(Aw);return e||$n(!1),e}function eO(t){let e=ee.useContext(qj);return e||$n(!1),e}function tO(t){let e=ee.useContext(ba);return e||$n(!1),e}function kI(t){let e=tO(),n=e.matches[e.matches.length-1];return n.route.id||$n(!1),n.route.id}function nO(){var t;let e=ee.useContext(EI),n=eO(Kg.UseRouteError),r=kI(Kg.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rO(){let{router:t}=Zj(II.UseNavigateStable),e=kI(Kg.UseNavigateStable),n=ee.useRef(!1);return AI(()=>{n.current=!0}),ee.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Kf({fromRouteId:e},s)))},[t,e])}const _S={};function iO(t,e){_S[e]||(_S[e]=!0,console.warn(e))}const SS=(t,e,n)=>iO(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function sO(t,e){t!=null&&t.v7_startTransition||SS("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&!e&&SS("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function ES(t){let{to:e,replace:n,state:r,relative:i}=t;nd()||$n(!1);let{future:s,static:o}=ee.useContext(Jl),{matches:a}=ee.useContext(ba),{pathname:l}=oc(),u=_a(),c=Ew(e,Sw(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(c);return ee.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function os(t){$n(!1)}function oO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=yl.Pop,navigator:s,static:o=!1,future:a}=t;nd()&&$n(!1);let l=e.replace(/^\/*/,"/"),u=ee.useMemo(()=>({basename:l,navigator:s,static:o,future:Kf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=td(r));let{pathname:c="/",search:h="",hash:m="",state:p=null,key:_="default"}=r,b=ee.useMemo(()=>{let N=_w(c,l);return N==null?null:{location:{pathname:N,search:h,hash:m,state:p,key:_},navigationType:i}},[l,c,h,m,p,_,i]);return b==null?null:ee.createElement(Jl.Provider,{value:u},ee.createElement(H0.Provider,{children:n,value:b}))}function aO(t){let{children:e,location:n}=t;return Wj(p2(e),n)}new Promise(()=>{});function p2(t,e){e===void 0&&(e=[]);let n=[];return ee.Children.forEach(t,(r,i)=>{if(!ee.isValidElement(r))return;let s=[...e,i];if(r.type===ee.Fragment){n.push.apply(n,p2(r.props.children,s));return}r.type!==os&&$n(!1),!r.props.index||!r.props.children||$n(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=p2(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m2.apply(this,arguments)}function lO(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cO(t,e){return t.button===0&&(!e||e==="_self")&&!uO(t)}const hO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],dO="6";try{window.__reactRouterVersion=dO}catch{}const fO="startTransition",AS=o8[fO];function pO(t){let{basename:e,children:n,future:r,window:i}=t,s=ee.useRef();s.current==null&&(s.current=vj({window:i,v5Compat:!0}));let o=s.current,[a,l]=ee.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=ee.useCallback(h=>{u&&AS?AS(()=>l(h)):l(h)},[l,u]);return ee.useLayoutEffect(()=>o.listen(c),[o,c]),ee.useEffect(()=>sO(r),[r]),ee.createElement(oO,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ho=ee.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,m=lO(e,hO),{basename:p}=ee.useContext(Jl),_,b=!1;if(typeof u=="string"&&gO.test(u)&&(_=u,mO))try{let A=new URL(window.location.href),O=u.startsWith("//")?new URL(A.protocol+u):new URL(u),K=_w(O.pathname,p);O.origin===A.origin&&K!=null?u=K+O.search+O.hash:b=!0}catch{}let N=$j(u,{relative:i}),w=yO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function S(A){r&&r(A),A.defaultPrevented||w(A)}return ee.createElement("a",m2({},m,{href:_||N,onClick:b||s?r:S,ref:n,target:l}))});var TS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(TS||(TS={}));var NS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(NS||(NS={}));function yO(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=_a(),u=oc(),c=NI(t,{relative:o});return ee.useCallback(h=>{if(cO(h,n)){h.preventDefault();let m=r!==void 0?r:Gg(u)===Gg(c);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function vO(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}function W0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const g2=t=>Array.isArray(t);function CI(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Yf(t){return typeof t=="string"||Array.isArray(t)}function IS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Tw(t,e,n,r){if(typeof e=="function"){const[i,s]=IS(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=IS(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function G0(t,e,n){const r=t.getProps();return Tw(r,e,n!==void 0?n:r.custom,t)}const Nw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Iw=["initial",...Nw],_p=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ac=new Set(_p),na=t=>t*1e3,ra=t=>t/1e3,wO={type:"spring",stiffness:500,damping:25,restSpeed:10},xO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bO={type:"keyframes",duration:.8},_O={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SO=(t,{keyframes:e})=>e.length>2?bO:ac.has(t)?t.startsWith("scale")?xO(e[1]):wO:_O;function kw(t,e){return t?t[e]||t.default||t:void 0}const EO={skipAnimations:!1,useManualTiming:!1},AO=t=>t!==null;function K0(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(AO),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Gr=t=>t;function TO(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(u){s.has(u)&&(l.schedule(u),t()),u(o)}const l={schedule:(u,c=!1,h=!1)=>{const p=h&&r?e:n;return c&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(o=u,r){i=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(a),r=!1,i&&(i=!1,l.process(u))}};return l}const Tm=["read","resolveKeyframes","update","preRender","render","postRender"],NO=40;function PI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Tm.reduce((w,S)=>(w[S]=TO(s),w),{}),{read:a,resolveKeyframes:l,update:u,preRender:c,render:h,postRender:m}=o,p=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,NO),1),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),h.process(i),m.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},_=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:Tm.reduce((w,S)=>{const A=o[S];return w[S]=(O,K=!1,q=!1)=>(n||_(),A.schedule(O,K,q)),w},{}),cancel:w=>{for(let S=0;S<Tm.length;S++)o[Tm[S]].cancel(w)},state:i,steps:o}}const{schedule:rn,cancel:Ml,state:Sr,steps:Ty}=PI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gr,!0),LI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,IO=1e-7,kO=12;function CO(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=LI(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>IO&&++a<kO);return o}function Sp(t,e,n,r){if(t===e&&n===r)return Gr;const i=s=>CO(s,0,1,t,n);return s=>s===0||s===1?s:LI(i(s),e,r)}const RI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DI=t=>e=>1-t(1-e),jI=Sp(.33,1.53,.69,.99),Cw=DI(jI),OI=RI(Cw),MI=t=>(t*=2)<1?.5*Cw(t):.5*(2-Math.pow(2,-10*(t-1))),Pw=t=>1-Math.sin(Math.acos(t)),FI=DI(Pw),VI=RI(Pw),BI=t=>/^0[^.\s]+$/u.test(t);function PO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||BI(t):!0}let y2=Gr;const UI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),zI=t=>e=>typeof e=="string"&&e.startsWith(t),qI=zI("--"),LO=zI("var(--"),Lw=t=>LO(t)?RO.test(t.split("/*")[0].trim()):!1,RO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,DO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jO(t){const e=DO.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function $I(t,e,n=1){const[r,i]=jO(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return UI(o)?parseFloat(o):o}return Lw(i)?$I(i,e,n+1):i}const Fl=(t,e,n)=>n>e?e:n<t?t:n,rd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qf={...rd,transform:t=>Fl(0,1,t)},Nm={...rd,default:1},Ep=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ol=Ep("deg"),xo=Ep("%"),dt=Ep("px"),OO=Ep("vh"),MO=Ep("vw"),kS={...xo,parse:t=>xo.parse(t)/100,transform:t=>xo.transform(t*100)},FO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),CS=t=>t===rd||t===dt,PS=(t,e)=>parseFloat(t.split(", ")[e]),LS=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return PS(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?PS(s[1],t):0}},VO=new Set(["x","y","z"]),BO=_p.filter(t=>!VO.has(t));function UO(t){const e=[];return BO.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Mh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:LS(4,13),y:LS(5,14)};Mh.translateX=Mh.x;Mh.translateY=Mh.y;const HI=t=>e=>e.test(t),zO={test:t=>t==="auto",parse:t=>t},WI=[rd,dt,xo,ol,MO,OO,zO],RS=t=>WI.find(HI(t)),$u=new Set;let v2=!1,w2=!1;function GI(){if(w2){const t=Array.from($u).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=UO(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}w2=!1,v2=!1,$u.forEach(t=>t.complete()),$u.clear()}function KI(){$u.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(w2=!0)})}function qO(){KI(),GI()}class Rw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?($u.add(this),v2||(v2=!0,rn.read(KI),rn.resolveKeyframes(GI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),$u.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,$u.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gf=t=>Math.round(t*1e5)/1e5,Dw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $O(t){return t==null}const HO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jw=(t,e)=>n=>!!(typeof n=="string"&&HO.test(n)&&n.startsWith(t)||e&&!$O(n)&&Object.prototype.hasOwnProperty.call(n,e)),YI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Dw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},WO=t=>Fl(0,255,t),Ny={...rd,transform:t=>Math.round(WO(t))},Vu={test:jw("rgb","red"),parse:YI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ny.transform(t)+", "+Ny.transform(e)+", "+Ny.transform(n)+", "+gf(Qf.transform(r))+")"};function GO(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x2={test:jw("#"),parse:GO,transform:Vu.transform},ah={test:jw("hsl","hue"),parse:YI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+xo.transform(gf(e))+", "+xo.transform(gf(n))+", "+gf(Qf.transform(r))+")"},Br={test:t=>Vu.test(t)||x2.test(t)||ah.test(t),parse:t=>Vu.test(t)?Vu.parse(t):ah.test(t)?ah.parse(t):x2.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vu.transform(t):ah.transform(t)},KO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Dw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(KO))===null||n===void 0?void 0:n.length)||0)>0}const QI="number",XI="color",QO="var",XO="var(",DS="${}",JO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(JO,l=>(Br.test(l)?(r.color.push(s),i.push(XI),n.push(Br.parse(l))):l.startsWith(XO)?(r.var.push(s),i.push(QO),n.push(l)):(r.number.push(s),i.push(QI),n.push(parseFloat(l))),++s,DS)).split(DS);return{values:n,split:a,indexes:r,types:i}}function JI(t){return Xf(t).values}function ZI(t){const{split:e,types:n}=Xf(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===QI?s+=gf(i[o]):a===XI?s+=Br.transform(i[o]):s+=i[o]}return s}}const ZO=t=>typeof t=="number"?0:t;function e7(t){const e=JI(t);return ZI(t)(e.map(ZO))}const Vl={test:YO,parse:JI,createTransformer:ZI,getAnimatableNone:e7},t7=new Set(["brightness","contrast","saturate","opacity"]);function n7(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Dw)||[];if(!r)return t;const i=n.replace(r,"");let s=t7.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const r7=/\b([a-z-]*)\(.*?\)/gu,b2={...Vl,getAnimatableNone:t=>{const e=t.match(r7);return e?e.map(n7).join(" "):t}},i7={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt},s7={rotate:ol,rotateX:ol,rotateY:ol,rotateZ:ol,scale:Nm,scaleX:Nm,scaleY:Nm,scaleZ:Nm,skew:ol,skewX:ol,skewY:ol,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:Qf,originX:kS,originY:kS,originZ:dt},jS={...rd,transform:Math.round},Ow={...i7,...s7,zIndex:jS,size:dt,fillOpacity:Qf,strokeOpacity:Qf,numOctaves:jS},o7={...Ow,color:Br,backgroundColor:Br,outlineColor:Br,fill:Br,stroke:Br,borderColor:Br,borderTopColor:Br,borderRightColor:Br,borderBottomColor:Br,borderLeftColor:Br,filter:b2,WebkitFilter:b2},Mw=t=>o7[t];function ek(t,e){let n=Mw(t);return n!==b2&&(n=Vl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const a7=new Set(["auto","none","0"]);function l7(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!a7.has(s)&&Xf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=ek(n,i)}class tk extends Rw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Lw(u))){const c=$I(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!FO.has(r)||e.length!==2)return;const[i,s]=e,o=RS(i),a=RS(s);if(o!==a)if(CS(o)&&CS(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)PO(e[i])&&r.push(i);r.length&&l7(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Mh[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function Fw(t){return typeof t=="function"}let tg;function u7(){tg=void 0}const bo={now:()=>(tg===void 0&&bo.set(Sr.isProcessing||EO.useManualTiming?Sr.timestamp:performance.now()),tg),set:t=>{tg=t,queueMicrotask(u7)}},OS=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Vl.test(t)||t==="0")&&!t.startsWith("url("));function c7(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function h7(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=OS(i,e),a=OS(s,e);return!o||!a?!1:c7(t)||(n==="spring"||Fw(n))&&r}const d7=40;class nk{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bo.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>d7?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=bo.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:u}=this.options;if(!u&&!h7(e,r,i,s))if(o)this.options.duration=0;else{l==null||l(K0(e,this.options,n)),a==null||a(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,n);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...c},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function rk(t,e){return e?t*(1e3/e):0}const f7=5;function ik(t,e,n){const r=Math.max(e-f7,0);return rk(n-t(r),e-r)}const Iy=.001,p7=.01,m7=10,g7=.05,y7=1;function v7({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Fl(g7,y7,o),t=Fl(p7,m7,ra(t)),o<1?(i=u=>{const c=u*o,h=c*t,m=c-n,p=_2(u,o),_=Math.exp(-h);return Iy-m/p*_},s=u=>{const h=u*o*t,m=h*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,_=Math.exp(-h),b=_2(Math.pow(u,2),o);return(-i(u)+Iy>0?-1:1)*((m-p)*_)/b}):(i=u=>{const c=Math.exp(-u*t),h=(u-n)*t+1;return-Iy+c*h},s=u=>{const c=Math.exp(-u*t),h=(n-u)*(t*t);return c*h});const a=5/t,l=x7(i,s,a);if(t=na(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const w7=12;function x7(t,e,n){let r=n;for(let i=1;i<w7;i++)r=r-t(r)/e(r);return r}function _2(t,e){return t*Math.sqrt(1-e*e)}const b7=["duration","bounce"],_7=["stiffness","damping","mass"];function MS(t,e){return e.some(n=>t[n]!==void 0)}function S7(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!MS(t,_7)&&MS(t,b7)){const n=v7(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function sk({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:c,velocity:h,isResolvedFromDuration:m}=S7({...r,velocity:-ra(r.velocity||0)}),p=h||0,_=l/(2*Math.sqrt(a*u)),b=s-i,N=ra(Math.sqrt(a/u)),w=Math.abs(b)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let S;if(_<1){const A=_2(N,_);S=O=>{const K=Math.exp(-_*N*O);return s-K*((p+_*N*b)/A*Math.sin(A*O)+b*Math.cos(A*O))}}else if(_===1)S=A=>s-Math.exp(-N*A)*(b+(p+N*b)*A);else{const A=N*Math.sqrt(_*_-1);S=O=>{const K=Math.exp(-_*N*O),q=Math.min(A*O,300);return s-K*((p+_*N*b)*Math.sinh(q)+A*b*Math.cosh(q))/A}}return{calculatedDuration:m&&c||null,next:A=>{const O=S(A);if(m)o.done=A>=c;else{let K=0;_<1&&(K=A===0?na(p):ik(S,A,O));const q=Math.abs(K)<=n,D=Math.abs(s-O)<=e;o.done=q&&D}return o.value=o.done?s:O,o}}}function FS({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const h=t[0],m={done:!1,value:h},p=T=>a!==void 0&&T<a||l!==void 0&&T>l,_=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let b=n*e;const N=h+b,w=o===void 0?N:o(N);w!==N&&(b=w-h);const S=T=>-b*Math.exp(-T/r),A=T=>w+S(T),O=T=>{const L=S(T),F=A(T);m.done=Math.abs(L)<=u,m.value=m.done?w:F};let K,q;const D=T=>{p(m.value)&&(K=T,q=sk({keyframes:[m.value,_(m.value)],velocity:ik(A,T,m.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return D(0),{calculatedDuration:null,next:T=>{let L=!1;return!q&&K===void 0&&(L=!0,O(T),D(T)),K!==void 0&&T>=K?q.next(T-K):(!L&&O(T),m)}}}const E7=Sp(.42,0,1,1),A7=Sp(0,0,.58,1),ok=Sp(.42,0,.58,1),T7=t=>Array.isArray(t)&&typeof t[0]!="number",Vw=t=>Array.isArray(t)&&typeof t[0]=="number",VS={linear:Gr,easeIn:E7,easeInOut:ok,easeOut:A7,circIn:Pw,circInOut:VI,circOut:FI,backIn:Cw,backInOut:OI,backOut:jI,anticipate:MI},BS=t=>{if(Vw(t)){y2(t.length===4);const[e,n,r,i]=t;return Sp(e,n,r,i)}else if(typeof t=="string")return y2(VS[t]!==void 0),VS[t];return t},N7=(t,e)=>n=>e(t(n)),ia=(...t)=>t.reduce(N7),Fh=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},En=(t,e,n)=>t+(e-t)*n;function ky(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function I7({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=ky(l,a,t+1/3),s=ky(l,a,t),o=ky(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Yg(t,e){return n=>n>0?e:t}const Cy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},k7=[x2,Vu,ah],C7=t=>k7.find(e=>e.test(t));function US(t){const e=C7(t);if(!e)return!1;let n=e.parse(t);return e===ah&&(n=I7(n)),n}const zS=(t,e)=>{const n=US(t),r=US(e);if(!n||!r)return Yg(t,e);const i={...n};return s=>(i.red=Cy(n.red,r.red,s),i.green=Cy(n.green,r.green,s),i.blue=Cy(n.blue,r.blue,s),i.alpha=En(n.alpha,r.alpha,s),Vu.transform(i))},S2=new Set(["none","hidden"]);function P7(t,e){return S2.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function L7(t,e){return n=>En(t,e,n)}function Bw(t){return typeof t=="number"?L7:typeof t=="string"?Lw(t)?Yg:Br.test(t)?zS:j7:Array.isArray(t)?ak:typeof t=="object"?Br.test(t)?zS:R7:Yg}function ak(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Bw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function R7(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Bw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function D7(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const j7=(t,e)=>{const n=Vl.createTransformer(e),r=Xf(t),i=Xf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?S2.has(t)&&!i.values.length||S2.has(e)&&!r.values.length?P7(t,e):ia(ak(D7(r,i),i.values),n):Yg(t,e)};function lk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?En(t,e,n):Bw(t)(t,e)}function O7(t,e,n){const r=[],i=n||lk,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Gr:e;a=ia(l,a)}r.push(a)}return r}function M7(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(y2(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=O7(e,r,i),a=o.length,l=u=>{let c=0;if(a>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const h=Fh(t[c],t[c+1],u);return o[c](h)};return n?u=>l(Fl(t[0],t[s-1],u)):l}function F7(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fh(0,e,r);t.push(En(n,1,i))}}function V7(t){const e=[0];return F7(e,t.length-1),e}function B7(t,e){return t.map(n=>n*e)}function U7(t,e){return t.map(()=>e||ok).splice(0,t.length-1)}function Qg({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=T7(r)?r.map(BS):BS(r),s={done:!1,value:e[0]},o=B7(n&&n.length===e.length?n:V7(e),t),a=M7(o,e,{ease:Array.isArray(i)?i:U7(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const qS=2e4;function z7(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<qS;)e+=n,r=t.next(e);return e>=qS?1/0:e}const q7=t=>{const e=({timestamp:n})=>t(n);return{start:()=>rn.update(e,!0),stop:()=>Ml(e),now:()=>Sr.isProcessing?Sr.timestamp:bo.now()}},$7={decay:FS,inertia:FS,tween:Qg,keyframes:Qg,spring:sk},H7=t=>t/100;class Uw extends nk{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Rw,a=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=Fw(n)?n:$7[n]||Qg;let l,u;a!==Qg&&typeof e[0]!="number"&&(l=ia(H7,lk(e[0],e[1])),e=[0,100]);const c=a({...this.options,keyframes:e});s==="mirror"&&(u=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=z7(c));const{calculatedDuration:h}=c,m=h+i,p=m*(r+1)-i;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:m,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:m,repeat:p,repeatType:_,repeatDelay:b,onUpdate:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?w<0:w>c;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let A=this.currentTime,O=s;if(p){const T=Math.min(this.currentTime,c)/h;let L=Math.floor(T),F=T%1;!F&&T>=1&&(F=1),F===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(_==="reverse"?(F=1-F,b&&(F-=b/h)):_==="mirror"&&(O=o)),A=Fl(0,1,F)*h}const K=S?{done:!1,value:l[0]}:O.next(A);a&&(K.value=a(K.value));let{done:q}=K;!S&&u!==null&&(q=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&q);return D&&i!==void 0&&(K.value=K0(l,this.options,i)),N&&N(K.value),D&&this.finish(),K}get duration(){const{resolved:e}=this;return e?ra(e.calculatedDuration):0}get time(){return ra(this.currentTime)}set time(e){e=na(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ra(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=q7,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const W7=new Set(["opacity","clipPath","filter","transform"]),G7=10,K7=(t,e)=>{let n="";const r=Math.max(Math.round(e/G7),2);for(let i=0;i<r;i++)n+=t(Fh(0,r-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function zw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Y7={linearEasing:void 0};function Q7(t,e){const n=zw(t);return()=>{var r;return(r=Y7[e])!==null&&r!==void 0?r:n()}}const Xg=Q7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function uk(t){return!!(typeof t=="function"&&Xg()||!t||typeof t=="string"&&(t in E2||Xg())||Vw(t)||Array.isArray(t)&&t.every(uk))}const Jd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,E2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jd([0,.65,.55,1]),circOut:Jd([.55,0,1,.45]),backIn:Jd([.31,.01,.66,-.59]),backOut:Jd([.33,1.53,.69,.99])};function ck(t,e){if(t)return typeof t=="function"&&Xg()?K7(t,e):Vw(t)?Jd(t):Array.isArray(t)?t.map(n=>ck(n,e)||E2.easeOut):E2[t]}function X7(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const c=ck(a,i);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:r,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function $S(t,e){t.timeline=e,t.onfinish=null}const J7=zw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jg=10,Z7=2e4;function eM(t){return Fw(t.type)||t.type==="spring"||!uk(t.ease)}function tM(t,e){const n=new Uw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Z7;)r=n.sample(s),i.push(r.value),s+=Jg;return{times:void 0,keyframes:i,duration:s-Jg,ease:"linear"}}const hk={anticipate:MI,backInOut:OI,circInOut:VI};function nM(t){return t in hk}class HS extends nk{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new tk(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:i=300,times:s,ease:o,type:a,motionValue:l,name:u,startTime:c}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(typeof o=="string"&&Xg()&&nM(o)&&(o=hk[o]),eM(this.options)){const{onComplete:m,onUpdate:p,motionValue:_,element:b,...N}=this.options,w=tM(e,N);e=w.keyframes,e.length===1&&(e[1]=e[0]),i=w.duration,s=w.times,o=w.ease,a="keyframes"}const h=X7(l.owner.current,u,e,{...this.options,duration:i,times:s,ease:o});return h.startTime=c??this.calcStartTime(),this.pendingTimeline?($S(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:m}=this.options;l.set(K0(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ra(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ra(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=na(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Gr;const{animation:r}=n;$S(r,e)}return Gr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:h,element:m,...p}=this.options,_=new Uw({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),b=na(this.time);u.setWithVelocity(_.sample(b-Jg).value,_.sample(b).value,Jg)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;return J7()&&r&&W7.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const rM=zw(()=>window.ScrollTimeline!==void 0);class iM{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>rM()&&i.attachTimeline?i.attachTimeline(e):n(i));return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function sM({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const qw=(t,e,n,r={},i,s)=>o=>{const a=kw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-na(l);let c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};sM(a)||(c={...c,...SO(t,c)}),c.duration&&(c.duration=na(c.duration)),c.repeatDelay&&(c.repeatDelay=na(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let h=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const m=K0(c.keyframes,a);if(m!==void 0)return rn.update(()=>{c.onUpdate(m),c.onComplete()}),new iM([])}return!s&&HS.supports(c)?new HS(c):new Uw(c)},oM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),aM=t=>g2(t)?t[t.length-1]||0:t;function $w(t,e){t.indexOf(e)===-1&&t.push(e)}function Hw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ww{constructor(){this.subscriptions=[]}add(e){return $w(this.subscriptions,e),()=>Hw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const WS=30,lM=t=>!isNaN(parseFloat(t));class uM{constructor(e,n={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=bo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=lM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ww);const r=this.events[e].add(n);return e==="change"?()=>{r(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>WS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,WS);return rk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jf(t,e){return new uM(t,e)}function cM(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Jf(n))}function hM(t,e){const n=G0(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=aM(s[o]);cM(t,o,a)}}const Gw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dM="framerAppearId",dk="data-"+Gw(dM);function fk(t){return t.props[dk]}const Wr=t=>!!(t&&t.getVelocity);function fM(t){return!!(Wr(t)&&t.add)}function A2(t,e){const n=t.getValue("willChange");if(fM(n))return n.add(e)}function pM({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function pk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const u=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),p=l[h];if(p===void 0||c&&pM(c,h))continue;const _={delay:n,...kw(o||{},h)};let b=!1;if(window.MotionHandoffAnimation){const w=fk(t);if(w){const S=window.MotionHandoffAnimation(w,h,rn);S!==null&&(_.startTime=S,b=!0)}}A2(t,h),m.start(qw(h,m,p,t.shouldReduceMotion&&ac.has(h)?{type:!1}:_,t,b));const N=m.animation;N&&u.push(N)}return a&&Promise.all(u).then(()=>{rn.update(()=>{a&&hM(t,a)})}),u}function T2(t,e,n={}){var r;const i=G0(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(pk(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:m}=s;return mM(t,e,c+u,h,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[o,a]:[a,o];return u().then(()=>c())}else return Promise.all([o(),a(n.delay)])}function mM(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(gM).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(T2(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function gM(t,e){return t.sortNodePosition(e)}function yM(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>T2(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=T2(t,e,n);else{const i=typeof e=="function"?G0(t,e,n.custom):e;r=Promise.all(pk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const vM=Iw.length;function mk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vM;n++){const r=Iw[n],i=t.props[r];(Yf(i)||i===!1)&&(e[r]=i)}return e}const wM=[...Nw].reverse(),xM=Nw.length;function bM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>yM(t,n,r)))}function _M(t){let e=bM(t),n=GS(),r=!0;const i=l=>(u,c)=>{var h;const m=G0(t,c,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:p,transitionEnd:_,...b}=m;u={...u,...b,..._}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=mk(t.parent)||{},h=[],m=new Set;let p={},_=1/0;for(let N=0;N<xM;N++){const w=wM[N],S=n[w],A=u[w]!==void 0?u[w]:c[w],O=Yf(A),K=w===l?S.isActive:null;K===!1&&(_=N);let q=A===c[w]&&A!==u[w]&&O;if(q&&r&&t.manuallyAnimateOnMount&&(q=!1),S.protectedKeys={...p},!S.isActive&&K===null||!A&&!S.prevProp||W0(A)||typeof A=="boolean")continue;const D=SM(S.prevProp,A);let T=D||w===l&&S.isActive&&!q&&O||N>_&&O,L=!1;const F=Array.isArray(A)?A:[A];let I=F.reduce(i(w),{});K===!1&&(I={});const{prevResolvedValues:C={}}=S,j={...C,...I},Y=ue=>{T=!0,m.has(ue)&&(L=!0,m.delete(ue)),S.needsAnimating[ue]=!0;const X=t.getValue(ue);X&&(X.liveStyle=!1)};for(const ue in j){const X=I[ue],re=C[ue];if(p.hasOwnProperty(ue))continue;let z=!1;g2(X)&&g2(re)?z=!CI(X,re):z=X!==re,z?X!=null?Y(ue):m.add(ue):X!==void 0&&m.has(ue)?Y(ue):S.protectedKeys[ue]=!0}S.prevProp=A,S.prevResolvedValues=I,S.isActive&&(p={...p,...I}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(q&&D)||L)&&h.push(...F.map(ue=>({animation:ue,options:{type:w}})))}if(m.size){const N={};m.forEach(w=>{const S=t.getBaseTarget(w),A=t.getValue(w);A&&(A.liveStyle=!0),N[w]=S??null}),h.push({animation:N})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(h):Promise.resolve()}function a(l,u){var c;if(n[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(m=>{var p;return(p=m.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const h=o(l);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=GS(),r=!0}}}function SM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!CI(e,t):!1}function Tu(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GS(){return{animate:Tu(!0),whileInView:Tu(),whileHover:Tu(),whileTap:Tu(),whileDrag:Tu(),whileFocus:Tu(),exit:Tu()}}class Zl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EM extends Zl{constructor(e){super(e),e.animationState||(e.animationState=_M(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();W0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let AM=0;class TM extends Zl{constructor(){super(...arguments),this.id=AM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const NM={animation:{Feature:EM},exit:{Feature:TM}},gk=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Y0(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const IM=t=>e=>gk(e)&&t(e,Y0(e));function Jo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sa(t,e,n,r){return Jo(t,e,IM(n),r)}const KS=(t,e)=>Math.abs(t-e);function kM(t,e){const n=KS(t.x,e.x),r=KS(t.y,e.y);return Math.sqrt(n**2+r**2)}class yk{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Ly(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=kM(h.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:_}=h,{timestamp:b}=Sr;this.history.push({..._,timestamp:b});const{onStart:N,onMove:w}=this.handlers;m||(N&&N(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Py(m,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:p,onSessionEnd:_,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=Ly(h.type==="pointercancel"?this.lastMoveEventInfo:Py(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,N),_&&_(h,N)},!gk(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Y0(e),a=Py(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=Sr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,Ly(a,this.history)),this.removeListeners=ia(sa(this.contextWindow,"pointermove",this.handlePointerMove),sa(this.contextWindow,"pointerup",this.handlePointerUp),sa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ml(this.updatePoint)}}function Py(t,e){return e?{point:e(t.point)}:t}function YS(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ly({point:t},e){return{point:t,delta:YS(t,vk(e)),offset:YS(t,CM(e)),velocity:PM(e,.1)}}function CM(t){return t[0]}function vk(t){return t[t.length-1]}function PM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>na(e)));)n--;if(!r)return{x:0,y:0};const s=ra(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function wk(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const QS=wk("dragHorizontal"),XS=wk("dragVertical");function xk(t){let e=!1;if(t==="y")e=XS();else if(t==="x")e=QS();else{const n=QS(),r=XS();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function bk(){const t=xk(!0);return t?(t(),!1):!0}function lh(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const _k=1e-4,LM=1-_k,RM=1+_k,Sk=.01,DM=0-Sk,jM=0+Sk;function Gi(t){return t.max-t.min}function OM(t,e,n){return Math.abs(t-e)<=n}function JS(t,e,n,r=.5){t.origin=r,t.originPoint=En(e.min,e.max,t.origin),t.scale=Gi(n)/Gi(e),t.translate=En(n.min,n.max,t.origin)-t.originPoint,(t.scale>=LM&&t.scale<=RM||isNaN(t.scale))&&(t.scale=1),(t.translate>=DM&&t.translate<=jM||isNaN(t.translate))&&(t.translate=0)}function yf(t,e,n,r){JS(t.x,e.x,n.x,r?r.originX:void 0),JS(t.y,e.y,n.y,r?r.originY:void 0)}function ZS(t,e,n){t.min=n.min+e.min,t.max=t.min+Gi(e)}function MM(t,e,n){ZS(t.x,e.x,n.x),ZS(t.y,e.y,n.y)}function e4(t,e,n){t.min=e.min-n.min,t.max=t.min+Gi(e)}function vf(t,e,n){e4(t.x,e.x,n.x),e4(t.y,e.y,n.y)}function FM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?En(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?En(n,t,r.max):Math.min(t,n)),t}function t4(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function VM(t,{top:e,left:n,bottom:r,right:i}){return{x:t4(t.x,n,i),y:t4(t.y,e,r)}}function n4(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BM(t,e){return{x:n4(t.x,e.x),y:n4(t.y,e.y)}}function UM(t,e){let n=.5;const r=Gi(t),i=Gi(e);return i>r?n=Fh(e.min,e.max-r,t.min):r>i&&(n=Fh(t.min,t.max-i,e.min)),Fl(0,1,n)}function zM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const N2=.35;function qM(t=N2){return t===!1?t=0:t===!0&&(t=N2),{x:r4(t,"left","right"),y:r4(t,"top","bottom")}}function r4(t,e,n){return{min:i4(t,e),max:i4(t,n)}}function i4(t,e){return typeof t=="number"?t:t[e]||0}const s4=()=>({translate:0,scale:1,origin:0,originPoint:0}),uh=()=>({x:s4(),y:s4()}),o4=()=>({min:0,max:0}),Mn=()=>({x:o4(),y:o4()});function as(t){return[t("x"),t("y")]}function Ek({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $M({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function HM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ry(t){return t===void 0||t===1}function I2({scale:t,scaleX:e,scaleY:n}){return!Ry(t)||!Ry(e)||!Ry(n)}function ku(t){return I2(t)||Ak(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ak(t){return a4(t.x)||a4(t.y)}function a4(t){return t&&t!=="0%"}function Zg(t,e,n){const r=t-n,i=e*r;return n+i}function l4(t,e,n,r,i){return i!==void 0&&(t=Zg(t,i,r)),Zg(t,n,r)+e}function k2(t,e=0,n=1,r,i){t.min=l4(t.min,e,n,r,i),t.max=l4(t.max,e,n,r,i)}function Tk(t,{x:e,y:n}){k2(t.x,e.translate,e.scale,e.originPoint),k2(t.y,n.translate,n.scale,n.originPoint)}const u4=.999999999999,c4=1.0000000000001;function WM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&hh(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Tk(t,o)),r&&ku(s.latestValues)&&hh(t,s.latestValues))}e.x<c4&&e.x>u4&&(e.x=1),e.y<c4&&e.y>u4&&(e.y=1)}function ch(t,e){t.min=t.min+e,t.max=t.max+e}function h4(t,e,n,r,i=.5){const s=En(t.min,t.max,i);k2(t,e,n,s,r)}function hh(t,e){h4(t.x,e.x,e.scaleX,e.scale,e.originX),h4(t.y,e.y,e.scaleY,e.scale,e.originY)}function Nk(t,e){return Ek(HM(t.getBoundingClientRect(),e))}function GM(t,e,n){const r=Nk(t,n),{scroll:i}=e;return i&&(ch(r.x,i.offset.x),ch(r.y,i.offset.y)),r}const Ik=({current:t})=>t?t.ownerDocument.defaultView:null,KM=new WeakMap;class YM{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Mn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Y0(c,"page").point)},s=(c,h)=>{const{drag:m,dragPropagation:p,onDragStart:_}=this.getProps();if(m&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=xk(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),as(N=>{let w=this.getAxisMotionValue(N).get()||0;if(xo.test(w)){const{projection:S}=this.visualElement;if(S&&S.layout){const A=S.layout.layoutBox[N];A&&(w=Gi(A)*(parseFloat(w)/100))}}this.originPoint[N]=w}),_&&rn.postRender(()=>_(c,h)),A2(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(c,h)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:_,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:N}=h;if(p&&this.currentDirection===null){this.currentDirection=QM(N),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,N),this.updateAxis("y",h.point,N),this.visualElement.render(),b&&b(c,h)},a=(c,h)=>this.stop(c,h),l=()=>as(c=>{var h;return this.getAnimationState(c)==="paused"&&((h=this.getAxisMotionValue(c).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new yk(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Ik(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&rn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Im(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=FM(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&lh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=VM(i.layoutBox,n):this.constraints=!1,this.elastic=qM(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&as(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zM(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!lh(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=GM(r,i.root,this.visualElement.getTransformPagePoint());let o=BM(i.layout.layoutBox,s);if(n){const a=n($M(o));this.hasMutatedConstraints=!!a,a&&(o=Ek(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=as(c=>{if(!Im(c,n,this.currentDirection))return;let h=l&&l[c]||{};o&&(h={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,_={type:"inertia",velocity:r?e[c]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(c,_)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return A2(this.visualElement,e),r.start(qw(e,r,0,n,this.visualElement,!1))}stopAnimation(){as(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){as(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){as(n=>{const{drag:r}=this.getProps();if(!Im(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-En(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!lh(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};as(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=UM({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),as(o=>{if(!Im(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(En(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;KM.set(this.visualElement,this);const e=this.visualElement.current,n=sa(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();lh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),rn.read(r);const o=Jo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(as(c=>{const h=this.getAxisMotionValue(c);h&&(this.originPoint[c]+=l[c].translate,h.set(h.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=N2,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Im(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function QM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class XM extends Zl{constructor(e){super(e),this.removeGroupControls=Gr,this.removeListeners=Gr,this.controls=new YM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gr}unmount(){this.removeGroupControls(),this.removeListeners()}}const d4=t=>(e,n)=>{t&&rn.postRender(()=>t(e,n))};class JM extends Zl{constructor(){super(...arguments),this.removePointerDownListener=Gr}onPointerDown(e){this.session=new yk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ik(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:d4(e),onStart:d4(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&rn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=sa(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Q0=ee.createContext(null);function ZM(){const t=ee.useContext(Q0);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=ee.useId();ee.useEffect(()=>r(i),[]);const s=ee.useCallback(()=>n&&n(i),[i,n]);return!e&&n?[!1,s]:[!0]}const Kw=ee.createContext({}),kk=ee.createContext({}),ng={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f4(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const n=f4(t,e.target.x),r=f4(t,e.target.y);return`${n}% ${r}%`}},eF={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Vl.parse(t);if(i.length>5)return r;const s=Vl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=En(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}},e0={};function tF(t){Object.assign(e0,t)}const{schedule:Yw,cancel:qee}=PI(queueMicrotask,!1);class nF extends ee.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;tF(rF),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ng.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ck(t){const[e,n]=ZM(),r=ee.useContext(Kw);return y.jsx(nF,{...t,layoutGroup:r,switchLayoutGroup:ee.useContext(kk),isPresent:e,safeToRemove:n})}const rF={borderRadius:{...Bd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bd,borderTopRightRadius:Bd,borderBottomLeftRadius:Bd,borderBottomRightRadius:Bd,boxShadow:eF},Pk=["TopLeft","TopRight","BottomLeft","BottomRight"],iF=Pk.length,p4=t=>typeof t=="string"?parseFloat(t):t,m4=t=>typeof t=="number"||dt.test(t);function sF(t,e,n,r,i,s){i?(t.opacity=En(0,n.opacity!==void 0?n.opacity:1,oF(r)),t.opacityExit=En(e.opacity!==void 0?e.opacity:1,0,aF(r))):s&&(t.opacity=En(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<iF;o++){const a=`border${Pk[o]}Radius`;let l=g4(e,a),u=g4(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||m4(l)===m4(u)?(t[a]=Math.max(En(p4(l),p4(u),r),0),(xo.test(u)||xo.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=En(e.rotate||0,n.rotate||0,r))}function g4(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const oF=Lk(0,.5,FI),aF=Lk(.5,.95,Gr);function Lk(t,e,n){return r=>r<t?0:r>e?1:n(Fh(t,e,r))}function y4(t,e){t.min=e.min,t.max=e.max}function ss(t,e){y4(t.x,e.x),y4(t.y,e.y)}function v4(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function w4(t,e,n,r,i){return t-=e,t=Zg(t,1/n,r),i!==void 0&&(t=Zg(t,1/i,r)),t}function lF(t,e=0,n=1,r=.5,i,s=t,o=t){if(xo.test(e)&&(e=parseFloat(e),e=En(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=En(s.min,s.max,r);t===s&&(a-=e),t.min=w4(t.min,e,n,a,i),t.max=w4(t.max,e,n,a,i)}function x4(t,e,[n,r,i],s,o){lF(t,e[n],e[r],e[i],e.scale,s,o)}const uF=["x","scaleX","originX"],cF=["y","scaleY","originY"];function b4(t,e,n,r){x4(t.x,e,uF,n?n.x:void 0,r?r.x:void 0),x4(t.y,e,cF,n?n.y:void 0,r?r.y:void 0)}function _4(t){return t.translate===0&&t.scale===1}function Rk(t){return _4(t.x)&&_4(t.y)}function S4(t,e){return t.min===e.min&&t.max===e.max}function hF(t,e){return S4(t.x,e.x)&&S4(t.y,e.y)}function E4(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Dk(t,e){return E4(t.x,e.x)&&E4(t.y,e.y)}function A4(t){return Gi(t.x)/Gi(t.y)}function T4(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class dF{constructor(){this.members=[]}add(e){$w(this.members,e),e.scheduleRender()}remove(e){if(Hw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fF(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:h,rotateY:m,skewX:p,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),_&&(r+=`skewY(${_}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const pF=(t,e)=>t.depth-e.depth;class mF{constructor(){this.children=[],this.isDirty=!1}add(e){$w(this.children,e),this.isDirty=!0}remove(e){Hw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pF),this.isDirty=!1,this.children.forEach(e)}}function rg(t){const e=Wr(t)?t.get():t;return oM(e)?e.toValue():e}function gF(t,e){const n=bo.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ml(r),t(s-e))};return rn.read(r,!0),()=>Ml(r)}function yF(t){return t instanceof SVGElement&&t.tagName!=="svg"}function vF(t,e,n){const r=Wr(t)?t:Jf(t);return r.start(qw("",r,e,n)),r.animation}const Cu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Zd=typeof window<"u"&&window.MotionDebug!==void 0,Dy=["","X","Y","Z"],wF={visibility:"hidden"},N4=1e3;let xF=0;function jy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function jk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=fk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",rn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&jk(r)}function Ok({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=xF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Zd&&(Cu.totalNodes=Cu.resolvedTargetDeltas=Cu.recalculatedProjection=0),this.nodes.forEach(SF),this.nodes.forEach(IF),this.nodes.forEach(kF),this.nodes.forEach(EF),Zd&&window.MotionDebug.record(Cu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new mF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ww),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yF(o),this.instance=o;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=gF(m,250),ng.hasAnimatedSinceResize&&(ng.hasAnimatedSinceResize=!1,this.nodes.forEach(k4))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:p,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||c.getDefaultTransition()||DF,{onLayoutAnimationStart:N,onLayoutAnimationComplete:w}=c.getProps(),S=!this.targetLayout||!Dk(this.targetLayout,_)||p,A=!m&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,A);const O={...kw(b,"layout"),onPlay:N,onComplete:w};(c.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else m||k4(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ml(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const h=this.path[c];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(I4);return}this.isUpdating||this.nodes.forEach(TF),this.isUpdating=!1,this.nodes.forEach(NF),this.nodes.forEach(bF),this.nodes.forEach(_F),this.clearAllSnapshots();const a=bo.now();Sr.delta=Fl(0,1e3/60,a-Sr.timestamp),Sr.timestamp=a,Sr.isProcessing=!0,Ty.update.process(Sr),Ty.preRender.process(Sr),Ty.render.process(Sr),Sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AF),this.sharedNodes.forEach(PF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Rk(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&(a||ku(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),jF(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Mn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(OF))){const{scroll:c}=this.root;c&&(ch(l.x,c.offset.x),ch(l.y,c.offset.y))}return l}removeElementScroll(o){var a;const l=Mn();if(ss(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:m}=c;c!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&ss(l,o),ch(l.x,h.offset.x),ch(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=Mn();ss(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&hh(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),ku(c.latestValues)&&hh(l,c.latestValues)}return ku(this.latestValues)&&hh(l,this.latestValues),l}removeTransform(o){const a=Mn();ss(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ku(u.latestValues))continue;I2(u.latestValues)&&u.updateSnapshot();const c=Mn(),h=u.measurePageBox();ss(c,h),b4(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return ku(this.latestValues)&&b4(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Sr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),vf(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Mn(),this.targetWithTransforms=Mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ss(this.target,this.layout.layoutBox),Tk(this.target,this.targetDelta)):ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Mn(),this.relativeTargetOrigin=Mn(),vf(this.relativeTargetOrigin,this.target,p.target),ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Zd&&Cu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I2(this.parent.latestValues)||Ak(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Sr.timestamp&&(u=!1),u)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;ss(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;WM(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Mn());const{target:_}=a;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(v4(this.prevProjectionDelta.x,this.projectionDelta.x),v4(this.prevProjectionDelta.y,this.projectionDelta.y)),yf(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!T4(this.projectionDelta.x,this.prevProjectionDelta.x)||!T4(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),Zd&&Cu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uh(),this.projectionDelta=uh(),this.projectionDeltaWithTransform=uh()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},h=uh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Mn(),p=l?l.source:void 0,_=this.layout?this.layout.source:void 0,b=p!==_,N=this.getStack(),w=!N||N.members.length<=1,S=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(RF));this.animationProgress=0;let A;this.mixTargetDelta=O=>{const K=O/1e3;C4(h.x,o.x,K),C4(h.y,o.y,K),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),LF(this.relativeTarget,this.relativeTargetOrigin,m,K),A&&hF(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Mn()),ss(A,this.relativeTarget)),b&&(this.animationValues=c,sF(c,u,this.latestValues,K,S,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ml(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{ng.hasAnimatedSinceResize=!0,this.currentAnimation=vF(0,N4,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(N4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&Mk(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Mn();const h=Gi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const m=Gi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}ss(a,l),hh(a,c),yf(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new dF),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&jy("z",o,u,this.animationValues);for(let c=0;c<Dy.length;c++)jy(`rotate${Dy[c]}`,o,u,this.animationValues),jy(`skew${Dy[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wF;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=rg(o==null?void 0:o.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=rg(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ku(this.latestValues)&&(b.transform=c?c({},""):"none",this.hasProjected=!1),b}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=fF(this.projectionDeltaWithTransform,this.treeScale,m),c&&(u.transform=c(m,u.transform));const{x:p,y:_}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in e0){if(m[b]===void 0)continue;const{correct:N,applyTo:w}=e0[b],S=u.transform==="none"?m[b]:N(m[b],h);if(w){const A=w.length;for(let O=0;O<A;O++)u[w[O]]=S}else u[b]=S}return this.options.layoutId&&(u.pointerEvents=h===this?rg(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(I4),this.root.sharedNodes.clear()}}}function bF(t){t.updateLayout()}function _F(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?as(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Gi(m);m.min=r[h].min,m.max=m.min+p}):Mk(s,n.layoutBox,r)&&as(h=>{const m=o?n.measuredBox[h]:n.layoutBox[h],p=Gi(r[h]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=uh();yf(a,r,n.layoutBox);const l=uh();o?yf(l,t.applyTransform(i,!0),n.measuredBox):yf(l,r,n.layoutBox);const u=!Rk(a);let c=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:p}=h;if(m&&p){const _=Mn();vf(_,n.layoutBox,m.layoutBox);const b=Mn();vf(b,r,p.layoutBox),Dk(_,b)||(c=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function SF(t){Zd&&Cu.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function EF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function AF(t){t.clearSnapshot()}function I4(t){t.clearMeasurements()}function TF(t){t.isLayoutDirty=!1}function NF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function k4(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function IF(t){t.resolveTargetDelta()}function kF(t){t.calcProjection()}function CF(t){t.resetSkewAndRotation()}function PF(t){t.removeLeadSnapshot()}function C4(t,e,n){t.translate=En(e.translate,0,n),t.scale=En(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function P4(t,e,n,r){t.min=En(e.min,n.min,r),t.max=En(e.max,n.max,r)}function LF(t,e,n,r){P4(t.x,e.x,n.x,r),P4(t.y,e.y,n.y,r)}function RF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const DF={duration:.45,ease:[.4,0,.1,1]},L4=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),R4=L4("applewebkit/")&&!L4("chrome/")?Math.round:Gr;function D4(t){t.min=R4(t.min),t.max=R4(t.max)}function jF(t){D4(t.x),D4(t.y)}function Mk(t,e,n){return t==="position"||t==="preserve-aspect"&&!OM(A4(e),A4(n),.2)}function OF(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const MF=Ok({attachResizeListener:(t,e)=>Jo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Oy={current:void 0},Fk=Ok({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Oy.current){const t=new MF({});t.mount(window),t.setOptions({layoutScroll:!0}),Oy.current=t}return Oy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FF={pan:{Feature:JM},drag:{Feature:XM,ProjectionNode:Fk,MeasureLayout:Ck}};function j4(t,e){const n=e?"pointerenter":"pointerleave",r=e?"onHoverStart":"onHoverEnd",i=(s,o)=>{if(s.pointerType==="touch"||bk())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e);const l=a[r];l&&rn.postRender(()=>l(s,o))};return sa(t.current,n,i,{passive:!t.getProps()[r]})}class VF extends Zl{mount(){this.unmount=ia(j4(this.node,!0),j4(this.node,!1))}unmount(){}}class BF extends Zl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ia(Jo(this.node.current,"focus",()=>this.onFocus()),Jo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Vk=(t,e)=>e?t===e?!0:Vk(t,e.parentElement):!1;function My(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Y0(n))}class UF extends Zl{constructor(){super(...arguments),this.removeStartListeners=Gr,this.removeEndListeners=Gr,this.removeAccessibleListeners=Gr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=sa(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:h}=this.node.getProps(),m=!h&&!Vk(this.node.current,a.target)?c:u;m&&rn.update(()=>m(a,l))},{passive:!(r.onTap||r.onPointerUp)}),o=sa(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ia(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||My("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&rn.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=Jo(this.node.current,"keyup",o),My("down",(a,l)=>{this.startPress(a,l)})},n=Jo(this.node.current,"keydown",e),r=()=>{this.isPressing&&My("cancel",(s,o)=>this.cancelPress(s,o))},i=Jo(this.node.current,"blur",r);this.removeAccessibleListeners=ia(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&rn.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!bk()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&rn.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=sa(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Jo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ia(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const C2=new WeakMap,Fy=new WeakMap,zF=t=>{const e=C2.get(t.target);e&&e(t)},qF=t=>{t.forEach(zF)};function $F({root:t,...e}){const n=t||document;Fy.has(n)||Fy.set(n,{});const r=Fy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(qF,{root:t,...e})),r[i]}function HF(t,e,n){const r=$F(e);return C2.set(t,n),r.observe(t),()=>{C2.delete(t),r.unobserve(t)}}const WF={some:0,all:1};class GF extends Zl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:WF[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:h}=this.node.getProps(),m=u?c:h;m&&m(l)};return HF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KF(e,n))&&this.startObserver()}unmount(){}}function KF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const YF={inView:{Feature:GF},tap:{Feature:UF},focus:{Feature:BF},hover:{Feature:VF}},QF={layout:{ProjectionNode:Fk,MeasureLayout:Ck}},Qw=ee.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),X0=ee.createContext({}),Xw=typeof window<"u",Bk=Xw?ee.useLayoutEffect:ee.useEffect,Uk=ee.createContext({strict:!1});function XF(t,e,n,r,i){var s,o;const{visualElement:a}=ee.useContext(X0),l=ee.useContext(Uk),u=ee.useContext(Q0),c=ee.useContext(Qw).reducedMotion,h=ee.useRef();r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const m=h.current,p=ee.useContext(kk);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&JF(h.current,n,i,p);const _=ee.useRef(!1);ee.useInsertionEffect(()=>{m&&_.current&&m.update(n,u)});const b=n[dk],N=ee.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return Bk(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Yw.render(m.render),N.current&&m.animationState&&m.animationState.animateChanges())}),ee.useEffect(()=>{m&&(!N.current&&m.animationState&&m.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,b)}),N.current=!1))}),m}function JF(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:zk(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&lh(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function zk(t){if(t)return t.options.allowProjection!==!1?t.projection:zk(t.parent)}function ZF(t,e,n){return ee.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):lh(n)&&(n.current=r))},[e])}function J0(t){return W0(t.animate)||Iw.some(e=>Yf(t[e]))}function qk(t){return!!(J0(t)||t.variants)}function e9(t,e){if(J0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Yf(n)?n:void 0,animate:Yf(r)?r:void 0}}return t.inherit!==!1?e:{}}function t9(t){const{initial:e,animate:n}=e9(t,ee.useContext(X0));return ee.useMemo(()=>({initial:e,animate:n}),[O4(e),O4(n)])}function O4(t){return Array.isArray(t)?t.join(" "):t}const M4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vh={};for(const t in M4)Vh[t]={isEnabled:e=>M4[t].some(n=>!!e[n])};function n9(t){for(const e in t)Vh[e]={...Vh[e],...t[e]}}const r9=Symbol.for("motionComponentSymbol");function i9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&n9(t);function s(a,l){let u;const c={...ee.useContext(Qw),...a,layoutId:s9(a)},{isStatic:h}=c,m=t9(a),p=r(a,h);if(!h&&Xw){o9();const _=a9(c);u=_.MeasureLayout,m.visualElement=XF(i,p,c,e,_.ProjectionNode)}return y.jsxs(X0.Provider,{value:m,children:[u&&m.visualElement?y.jsx(u,{visualElement:m.visualElement,...c}):null,n(i,a,ZF(p,m.visualElement,l),p,h,m.visualElement)]})}const o=ee.forwardRef(s);return o[r9]=i,o}function s9({layoutId:t}){const e=ee.useContext(Kw).id;return e&&t!==void 0?e+"-"+t:t}function o9(t,e){ee.useContext(Uk).strict}function a9(t){const{drag:e,layout:n}=Vh;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const l9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jw(t){return typeof t!="string"||t.includes("-")?!1:!!(l9.indexOf(t)>-1||/[A-Z]/u.test(t))}function $k(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wk(t,e,n,r){$k(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Hk.has(i)?i:Gw(i),e.attrs[i])}function Gk(t,{layout:e,layoutId:n}){return ac.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!e0[t]||t==="opacity")}function Zw(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Wr(i[o])||e.style&&Wr(e.style[o])||Gk(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Kk(t,e,n){const r=Zw(t,e,n);for(const i in t)if(Wr(t[i])||Wr(e[i])){const s=_p.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function ex(t){const e=ee.useRef(null);return e.current===null&&(e.current=t()),e.current}function u9({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:c9(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const Yk=t=>(e,n)=>{const r=ee.useContext(X0),i=ee.useContext(Q0),s=()=>u9(t,e,r,i);return n?s():ex(s)};function c9(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=rg(s[m]);let{initial:o,animate:a}=t;const l=J0(t),u=qk(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const h=c?a:o;if(h&&typeof h!="boolean"&&!W0(h)){const m=Array.isArray(h)?h:[h];for(let p=0;p<m.length;p++){const _=Tw(t,m[p]);if(_){const{transitionEnd:b,transition:N,...w}=_;for(const S in w){let A=w[S];if(Array.isArray(A)){const O=c?A.length-1:0;A=A[O]}A!==null&&(i[S]=A)}for(const S in b)i[S]=b[S]}}}return i}const tx=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Qk=()=>({...tx(),attrs:{}}),Xk=(t,e)=>e&&typeof t=="number"?e.transform(t):t,h9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},d9=_p.length;function f9(t,e,n){let r="",i=!0;for(let s=0;s<d9;s++){const o=_p[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=Xk(a,Ow[o]);if(!l){i=!1;const c=h9[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function nx(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(ac.has(l)){o=!0;continue}else if(qI(l)){i[l]=u;continue}else{const c=Xk(u,Ow[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=f9(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}function F4(t,e,n){return typeof t=="string"?t:dt.transform(e+n*t)}function p9(t,e,n){const r=F4(e,t.x,t.width),i=F4(n,t.y,t.height);return`${r} ${i}`}const m9={offset:"stroke-dashoffset",array:"stroke-dasharray"},g9={offset:"strokeDashoffset",array:"strokeDasharray"};function y9(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?m9:g9;t[s.offset]=dt.transform(-r);const o=dt.transform(e),a=dt.transform(n);t[s.array]=`${o} ${a}`}function rx(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},c,h){if(nx(t,u,h),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p,dimensions:_}=t;m.transform&&(_&&(p.transform=m.transform),delete m.transform),_&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=p9(_,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&y9(m,o,a,l,!1)}const ix=t=>typeof t=="string"&&t.toLowerCase()==="svg",v9={useVisualState:Yk({scrapeMotionValuesFromProps:Kk,createRenderState:Qk,onMount:(t,e,{renderState:n,latestValues:r})=>{rn.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),rn.render(()=>{rx(n,r,ix(e.tagName),t.transformTemplate),Wk(e,n)})}})},w9={useVisualState:Yk({scrapeMotionValuesFromProps:Zw,createRenderState:tx})};function Jk(t,e,n){for(const r in e)!Wr(e[r])&&!Gk(r,n)&&(t[r]=e[r])}function x9({transformTemplate:t},e){return ee.useMemo(()=>{const n=tx();return nx(n,e,t),Object.assign({},n.vars,n.style)},[e])}function b9(t,e){const n=t.style||{},r={};return Jk(r,n,t),Object.assign(r,x9(t,e)),r}function _9(t,e){const n={},r=b9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const S9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function t0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||S9.has(t)}let Zk=t=>!t0(t);function E9(t){t&&(Zk=e=>e.startsWith("on")?!t0(e):t(e))}try{E9(require("@emotion/is-prop-valid").default)}catch{}function A9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Zk(i)||n===!0&&t0(i)||!e&&!t0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function T9(t,e,n,r){const i=ee.useMemo(()=>{const s=Qk();return rx(s,e,ix(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Jk(s,t.style,t),i.style={...s,...i.style}}return i}function N9(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(Jw(n)?T9:_9)(r,s,o,n),u=A9(r,typeof n=="string",t),c=n!==ee.Fragment?{...u,...l,ref:i}:{},{children:h}=r,m=ee.useMemo(()=>Wr(h)?h.get():h,[h]);return ee.createElement(n,{...c,children:m})}}function I9(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Jw(r)?v9:w9,preloadedFeatures:t,useRender:N9(i),createVisualElement:e,Component:r};return i9(o)}}const P2={current:null},eC={current:!1};function k9(){if(eC.current=!0,!!Xw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>P2.current=t.matches;t.addListener(e),e()}else P2.current=!1}function C9(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Wr(i))t.addValue(r,i);else if(Wr(s))t.addValue(r,Jf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Jf(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const V4=new WeakMap,P9=[...WI,Br,Vl],L9=t=>P9.find(HI(t)),B4=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class R9{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Rw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=bo.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,rn.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=J0(n),this.isVariantNode=qk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const p=h[m];l[m]!==void 0&&Wr(p)&&p.set(l[m],!1)}}mount(e){this.current=e,V4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),eC.current||k9(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){V4.delete(this.current),this.projection&&this.projection.unmount(),Ml(this.notifyUpdate),Ml(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ac.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&rn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vh){const n=Vh[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<B4.length;r++){const i=B4[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=C9(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Jf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(UI(i)||BI(i))?i=parseFloat(i):!L9(i)&&Vl.test(n)&&(i=ek(e,n)),this.setBaseTarget(e,Wr(i)?i.get():i)),Wr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Tw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Wr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ww),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class tC extends R9{constructor(){super(...arguments),this.KeyframeResolver=tk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}}function D9(t){return window.getComputedStyle(t)}class j9 extends tC{constructor(){super(...arguments),this.type="html",this.renderInstance=$k}readValueFromInstance(e,n){if(ac.has(n)){const r=Mw(n);return r&&r.default||0}else{const r=D9(e),i=(qI(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Nk(e,n)}build(e,n,r){nx(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Zw(e,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class O9 extends tC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Mn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ac.has(n)){const r=Mw(n);return r&&r.default||0}return n=Hk.has(n)?n:Gw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Kk(e,n,r)}build(e,n,r){rx(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Wk(e,n,r,i)}mount(e){this.isSVGTag=ix(e.tagName),super.mount(e)}}const M9=(t,e)=>Jw(t)?new O9(e):new j9(e,{allowProjection:t!==ee.Fragment}),F9=I9({...NM,...YF,...FF,...QF},M9),at=vO(F9);class V9 extends ee.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B9({children:t,isPresent:e}){const n=ee.useId(),r=ee.useRef(null),i=ee.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=ee.useContext(Qw);return ee.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:u}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),y.jsx(V9,{isPresent:e,childRef:r,sizeRef:i,children:ee.cloneElement(t,{ref:r})})}const U9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ex(z9),l=ee.useId(),u=ee.useCallback(h=>{a.set(h,!0);for(const m of a.values())if(!m)return;r&&r()},[a,r]),c=ee.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:u,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),u]:[n,u]);return ee.useMemo(()=>{a.forEach((h,m)=>a.set(m,!1))},[n]),ee.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=y.jsx(B9,{isPresent:n,children:t})),y.jsx(Q0.Provider,{value:c,children:t})};function z9(){return new Map}const km=t=>t.key||"";function U4(t){const e=[];return ee.Children.forEach(t,n=>{ee.isValidElement(n)&&e.push(n)}),e}const nC=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=ee.useMemo(()=>U4(t),[t]),l=a.map(km),u=ee.useRef(!0),c=ee.useRef(a),h=ex(()=>new Map),[m,p]=ee.useState(a),[_,b]=ee.useState(a);Bk(()=>{u.current=!1,c.current=a;for(let S=0;S<_.length;S++){const A=km(_[S]);l.includes(A)?h.delete(A):h.get(A)!==!0&&h.set(A,!1)}},[_,l.length,l.join("-")]);const N=[];if(a!==m){let S=[...a];for(let A=0;A<_.length;A++){const O=_[A],K=km(O);l.includes(K)||(S.splice(A,0,O),N.push(O))}o==="wait"&&N.length&&(S=N),b(U4(S)),p(a);return}const{forceRender:w}=ee.useContext(Kw);return y.jsx(y.Fragment,{children:_.map(S=>{const A=km(S),O=a===_||l.includes(A),K=()=>{if(h.has(A))h.set(A,!0);else return;let q=!0;h.forEach(D=>{D||(q=!1)}),q&&(w==null||w(),b(c.current),i&&i())};return y.jsx(U9,{isPresent:O,initial:!u.current||r?void 0:!1,custom:O?void 0:n,presenceAffectsLayout:s,mode:o,onExitComplete:O?void 0:K,children:S},A)})})},q9={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},z4=t=>{let e;const n=new Set,r=(c,h)=>{const m=typeof c=="function"?c(e):c;if(!Object.is(m,e)){const p=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(_=>_(e,p))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(q9?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,i,l);return l},$9=t=>t?z4(t):z4;var rC={exports:{}},iC={},sC={exports:{}},oC={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh=ee;function H9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var W9=typeof Object.is=="function"?Object.is:H9,G9=Bh.useState,K9=Bh.useEffect,Y9=Bh.useLayoutEffect,Q9=Bh.useDebugValue;function X9(t,e){var n=e(),r=G9({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Y9(function(){i.value=n,i.getSnapshot=e,Vy(i)&&s({inst:i})},[t,n,e]),K9(function(){return Vy(i)&&s({inst:i}),t(function(){Vy(i)&&s({inst:i})})},[t]),Q9(n),n}function Vy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!W9(t,n)}catch{return!0}}function J9(t,e){return e()}var Z9=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?J9:X9;oC.useSyncExternalStore=Bh.useSyncExternalStore!==void 0?Bh.useSyncExternalStore:Z9;sC.exports=oC;var eV=sC.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0=ee,tV=eV;function nV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rV=typeof Object.is=="function"?Object.is:nV,iV=tV.useSyncExternalStore,sV=Z0.useRef,oV=Z0.useEffect,aV=Z0.useMemo,lV=Z0.useDebugValue;iC.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=sV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=aV(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&o.hasValue){var _=o.value;if(i(_,p))return h=_}return h=p}if(_=h,rV(c,p))return _;var b=r(p);return i!==void 0&&i(_,b)?_:(c=p,h=b)}var u=!1,c,h,m=n===void 0?null:n;return[function(){return l(e())},m===null?void 0:function(){return l(m())}]},[e,n,r,i]);var a=iV(t,s[0],s[1]);return oV(function(){o.hasValue=!0,o.value=a},[a]),lV(a),a};rC.exports=iC;var uV=rC.exports;const cV=I0(uV),sx={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:hV}=gT,{useSyncExternalStoreWithSelector:dV}=cV;let q4=!1;const fV=t=>t;function pV(t,e=fV,n){(sx?"production":void 0)!=="production"&&n&&!q4&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),q4=!0);const r=dV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return hV(r),r}const $4=t=>{(sx?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?$9(t):t,n=(r,i)=>pV(e,r,i);return Object.assign(n,e),n},aC=t=>t?$4(t):$4;var mV=t=>((sx?"production":void 0)!=="production"&&console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),aC(t));const ig=mV(t=>({notifications:[{id:"1",message:"Your appointment with Dr. Smith is confirmed for tomorrow at 3:00 PM.",timestamp:"2024-11-20 10:00 AM",read:!1},{id:"2",message:"New message from your health coach: 'Reminder to complete your daily exercise.'",timestamp:"2024-11-19 09:30 AM",read:!0},{id:"3",message:"Your recent health check results are now available in your profile.",timestamp:"2024-11-18 08:00 PM",read:!1}],markAsRead:e=>t(n=>({notifications:n.notifications.map(r=>r.id===e?{...r,read:!0}:r)})),markAllAsRead:()=>t(e=>({notifications:e.notifications.map(n=>({...n,read:!0}))})),addNotification:e=>t(n=>({notifications:[...n.notifications,e]}))})),gV=()=>{};var H4={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},uC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,h=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[c],n[h],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new vV;const m=s<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const _=u<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wV=function(t){const e=lC(t);return uC.encodeByteArray(e,!0)},n0=function(t){return wV(t).replace(/\./g,"")},cC=function(t){try{return uC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=()=>xV().__FIREBASE_DEFAULTS__,_V=()=>{if(typeof process>"u"||typeof H4>"u")return;const t=H4.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cC(t[1]);return e&&JSON.parse(e)},e1=()=>{try{return gV()||bV()||_V()||SV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hC=t=>{var e,n;return(n=(e=e1())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EV=t=>{const e=hC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dC=()=>{var t;return(t=e1())===null||t===void 0?void 0:t.config},fC=t=>{var e;return(e=e1())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){return t.endsWith(".cloudworkstations.dev")}async function pC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[n0(JSON.stringify(n)),n0(JSON.stringify(o)),""].join(".")}const wf={};function NV(){const t={prod:[],emulator:[]};for(const e of Object.keys(wf))wf[e]?t.emulator.push(e):t.prod.push(e);return t}function IV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let W4=!1;function mC(t,e){if(typeof window>"u"||typeof document>"u"||!Ap(window.location.host)||wf[t]===e||wf[t]||W4)return;wf[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=NV().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,p){m.setAttribute("width","24"),m.setAttribute("id",p),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{W4=!0,o()},m}function c(m,p){m.setAttribute("id",p),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=IV(r),p=n("text"),_=document.getElementById(p)||document.createElement("span"),b=n("learnmore"),N=document.getElementById(b)||document.createElement("a"),w=n("preprendIcon"),S=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;a(A),c(N,b);const O=u();l(S,w),A.append(S,_,N,O),document.body.appendChild(A)}s?(_.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qr())}function CV(){var t;const e=(t=e1())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DV(){const t=Qr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jV(){return!CV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OV(){try{return typeof indexedDB=="object"}catch{return!1}}function MV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV="FirebaseError";class Sa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FV,Object.setPrototypeOf(this,Sa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tp.prototype.create)}}class Tp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?VV(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sa(i,a,r)}}function VV(t,e){return t.replace(BV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BV=/\{\$([^}]+)}/g;function UV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(G4(s)&&G4(o)){if(!pa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function G4(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ef(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function tf(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function zV(t,e){const n=new qV(t,e);return n.subscribe.bind(n)}class qV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$V(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=By),i.error===void 0&&(i.error=By),i.complete===void 0&&(i.complete=By);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $V(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function By(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t){return t&&t._delegate?t._delegate:t}class Xu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GV(e))try{this.getOrInitializeService({instanceIdentifier:Pu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Pu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pu){return this.instances.has(e)}getOptions(e=Pu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pu){return this.component?this.component.multipleInstances?e:Pu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WV(t){return t===Pu?void 0:t}function GV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ft||(Ft={}));const YV={debug:Ft.DEBUG,verbose:Ft.VERBOSE,info:Ft.INFO,warn:Ft.WARN,error:Ft.ERROR,silent:Ft.SILENT},QV=Ft.INFO,XV={[Ft.DEBUG]:"log",[Ft.VERBOSE]:"log",[Ft.INFO]:"info",[Ft.WARN]:"warn",[Ft.ERROR]:"error"},JV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=XV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ox{constructor(e){this.name=e,this._logLevel=QV,this._logHandler=JV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ft.DEBUG,...e),this._logHandler(this,Ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ft.VERBOSE,...e),this._logHandler(this,Ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ft.INFO,...e),this._logHandler(this,Ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ft.WARN,...e),this._logHandler(this,Ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ft.ERROR,...e),this._logHandler(this,Ft.ERROR,...e)}}const ZV=(t,e)=>e.some(n=>t instanceof n);let K4,Y4;function eB(){return K4||(K4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tB(){return Y4||(Y4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gC=new WeakMap,L2=new WeakMap,yC=new WeakMap,Uy=new WeakMap,ax=new WeakMap;function nB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(kl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gC.set(n,t)}).catch(()=>{}),ax.set(e,t),e}function rB(t){if(L2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});L2.set(t,e)}let R2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return L2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iB(t){R2=t(R2)}function sB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zy(this),e,...n);return yC.set(r,e.sort?e.sort():[e]),kl(r)}:tB().includes(t)?function(...e){return t.apply(zy(this),e),kl(gC.get(this))}:function(...e){return kl(t.apply(zy(this),e))}}function oB(t){return typeof t=="function"?sB(t):(t instanceof IDBTransaction&&rB(t),ZV(t,eB())?new Proxy(t,R2):t)}function kl(t){if(t instanceof IDBRequest)return nB(t);if(Uy.has(t))return Uy.get(t);const e=oB(t);return e!==t&&(Uy.set(t,e),ax.set(e,t)),e}const zy=t=>ax.get(t);function aB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=kl(o);return r&&o.addEventListener("upgradeneeded",l=>{r(kl(o.result),l.oldVersion,l.newVersion,kl(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const lB=["get","getKey","getAll","getAllKeys","count"],uB=["put","add","delete","clear"],qy=new Map;function Q4(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qy.get(e))return qy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=uB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lB.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return qy.set(e,s),s}iB(t=>({...t,get:(e,n,r)=>Q4(e,n)||t.get(e,n,r),has:(e,n)=>!!Q4(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const D2="@firebase/app",X4="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma=new ox("@firebase/app"),dB="@firebase/app-compat",fB="@firebase/analytics-compat",pB="@firebase/analytics",mB="@firebase/app-check-compat",gB="@firebase/app-check",yB="@firebase/auth",vB="@firebase/auth-compat",wB="@firebase/database",xB="@firebase/data-connect",bB="@firebase/database-compat",_B="@firebase/functions",SB="@firebase/functions-compat",EB="@firebase/installations",AB="@firebase/installations-compat",TB="@firebase/messaging",NB="@firebase/messaging-compat",IB="@firebase/performance",kB="@firebase/performance-compat",CB="@firebase/remote-config",PB="@firebase/remote-config-compat",LB="@firebase/storage",RB="@firebase/storage-compat",DB="@firebase/firestore",jB="@firebase/ai",OB="@firebase/firestore-compat",MB="firebase",FB="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="[DEFAULT]",VB={[D2]:"fire-core",[dB]:"fire-core-compat",[pB]:"fire-analytics",[fB]:"fire-analytics-compat",[gB]:"fire-app-check",[mB]:"fire-app-check-compat",[yB]:"fire-auth",[vB]:"fire-auth-compat",[wB]:"fire-rtdb",[xB]:"fire-data-connect",[bB]:"fire-rtdb-compat",[_B]:"fire-fn",[SB]:"fire-fn-compat",[EB]:"fire-iid",[AB]:"fire-iid-compat",[TB]:"fire-fcm",[NB]:"fire-fcm-compat",[IB]:"fire-perf",[kB]:"fire-perf-compat",[CB]:"fire-rc",[PB]:"fire-rc-compat",[LB]:"fire-gcs",[RB]:"fire-gcs-compat",[DB]:"fire-fst",[OB]:"fire-fst-compat",[jB]:"fire-vertex","fire-js":"fire-js",[MB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map,BB=new Map,O2=new Map;function J4(t,e){try{t.container.addComponent(e)}catch(n){ma.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uh(t){const e=t.name;if(O2.has(e))return ma.debug(`There were multiple attempts to register component ${e}.`),!1;O2.set(e,t);for(const n of r0.values())J4(n,t);for(const n of BB.values())J4(n,t);return!0}function lx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bi(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cl=new Tp("app","Firebase",UB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=FB;function vC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:j2,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Cl.create("bad-app-name",{appName:String(i)});if(n||(n=dC()),!n)throw Cl.create("no-options");const s=r0.get(i);if(s){if(pa(n,s.options)&&pa(r,s.config))return s;throw Cl.create("duplicate-app",{appName:i})}const o=new KV(i);for(const l of O2.values())o.addComponent(l);const a=new zB(n,r,o);return r0.set(i,a),a}function wC(t=j2){const e=r0.get(t);if(!e&&t===j2&&dC())return vC();if(!e)throw Cl.create("no-app",{appName:t});return e}function Pl(t,e,n){var r;let i=(r=VB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ma.warn(a.join(" "));return}Uh(new Xu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB="firebase-heartbeat-database",$B=1,Zf="firebase-heartbeat-store";let $y=null;function xC(){return $y||($y=aB(qB,$B,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Zf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cl.create("idb-open",{originalErrorMessage:t.message})})),$y}async function HB(t){try{const n=(await xC()).transaction(Zf),r=await n.objectStore(Zf).get(bC(t));return await n.done,r}catch(e){if(e instanceof Sa)ma.warn(e.message);else{const n=Cl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ma.warn(n.message)}}}async function Z4(t,e){try{const r=(await xC()).transaction(Zf,"readwrite");await r.objectStore(Zf).put(e,bC(t)),await r.done}catch(n){if(n instanceof Sa)ma.warn(n.message);else{const r=Cl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ma.warn(r.message)}}}function bC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WB=1024,GB=30;class KB{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new QB(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=eE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>GB){const o=XB(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ma.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=eE(),{heartbeatsToSend:r,unsentEntries:i}=YB(this._heartbeatsCache.heartbeats),s=n0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ma.warn(n),""}}}function eE(){return new Date().toISOString().substring(0,10)}function YB(t,e=WB){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),tE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),tE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class QB{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OV()?MV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await HB(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z4(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Z4(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function tE(t){return n0(JSON.stringify({version:2,heartbeats:t})).length}function XB(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JB(t){Uh(new Xu("platform-logger",e=>new cB(e),"PRIVATE")),Uh(new Xu("heartbeat",e=>new KB(e),"PRIVATE")),Pl(D2,X4,t),Pl(D2,X4,"esm2017"),Pl("fire-js","")}JB("");var ZB="firebase",eU="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pl(ZB,eU,"app");function ux(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function _C(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tU=_C,SC=new Tp("auth","Firebase",_C());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new ox("@firebase/auth");function nU(t,...e){i0.logLevel<=Ft.WARN&&i0.warn(`Auth (${id}): ${t}`,...e)}function sg(t,...e){i0.logLevel<=Ft.ERROR&&i0.error(`Auth (${id}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(t,...e){throw hx(t,...e)}function Us(t,...e){return hx(t,...e)}function cx(t,e,n){const r=Object.assign(Object.assign({},tU()),{[e]:n});return new Tp("auth","Firebase",r).create(e,{appName:t.name})}function oa(t){return cx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rU(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ys(t,"argument-error"),cx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return SC.create(t,...e)}function mt(t,e,...n){if(!t)throw hx(e,...n)}function Zo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sg(e),new Error(e)}function ga(t,e){t||Zo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iU(){return nE()==="http:"||nE()==="https:"}function nE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iU()||LV()||"connection"in navigator)?navigator.onLine:!0}function oU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){this.shortDelay=e,this.longDelay=n,ga(n>e,"Short delay should be less than long delay!"),this.isMobile=kV()||RV()}get(){return sU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t,e){ga(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uU=new Ip(3e4,6e4);function eu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function tu(t,e,n,r,i={}){return AC(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Np(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return PV()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ap(t.emulatorConfig.host)&&(u.credentials="include"),EC.fetch()(await TC(t,t.config.apiHost,n,a),u)})}async function AC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},aU),e);try{const i=new hU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Cm(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Cm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Cm(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cx(t,c,u);ys(t,c)}}catch(i){if(i instanceof Sa)throw i;ys(t,"network-request-failed",{message:String(i)})}}async function kp(t,e,n,r,i={}){const s=await tu(t,e,n,r,i);return"mfaPendingCredential"in s&&ys(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function TC(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?dx(t.config,i):`${t.config.apiScheme}://${i}`;return lU.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function cU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Us(this.auth,"network-request-failed")),uU.get())})}}function Cm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Us(t,e,r);return i.customData._tokenResponse=n,i}function rE(t){return t!==void 0&&t.enterprise!==void 0}class dU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fU(t,e){return tu(t,"GET","/v2/recaptchaConfig",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(t,e){return tu(t,"POST","/v1/accounts:delete",e)}async function s0(t,e){return tu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mU(t,e=!1){const n=tr(t),r=await n.getIdToken(e),i=fx(r);mt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:xf(Hy(i.auth_time)),issuedAtTime:xf(Hy(i.iat)),expirationTime:xf(Hy(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hy(t){return Number(t)*1e3}function fx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sg("JWT malformed, contained fewer than 3 sections"),null;try{const i=cC(n);return i?JSON.parse(i):(sg("Failed to decode base64 JWT payload"),null)}catch(i){return sg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iE(t){const e=fx(t);return mt(e,"internal-error"),mt(typeof e.exp<"u","internal-error"),mt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sa&&gU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xf(this.lastLoginAt),this.creationTime=xf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o0(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ep(t,s0(n,{idToken:r}));mt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NC(s.providerUserInfo):[],a=wU(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new F2(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function vU(t){const e=tr(t);await o0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NC(t){return t.map(e=>{var{providerId:n}=e,r=ux(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xU(t,e){const n=await AC(t,{},async()=>{const r=Np({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await TC(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",EC.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bU(t,e){return tu(t,"POST","/v2/accounts:revokeToken",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){mt(e.idToken,"internal-error"),mt(typeof e.idToken<"u","internal-error"),mt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){mt(e.length!==0,"internal-error");const n=iE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(mt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new xh;return r&&(mt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(mt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(mt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xh,this.toJSON())}_performRefresh(){return Zo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e){mt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ms{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=ux(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new F2(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ep(this,this.stsTokenManager.getToken(this.auth,e));return mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mU(this,e)}reload(){return vU(this)}_assign(e){this!==e&&(mt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await o0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bi(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await ep(this,pU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:A,emailVerified:O,isAnonymous:K,providerData:q,stsTokenManager:D}=n;mt(A&&D,e,"internal-error");const T=xh.fromJSON(this.name,D);mt(typeof A=="string",e,"internal-error"),tl(h,e.name),tl(m,e.name),mt(typeof O=="boolean",e,"internal-error"),mt(typeof K=="boolean",e,"internal-error"),tl(p,e.name),tl(_,e.name),tl(b,e.name),tl(N,e.name),tl(w,e.name),tl(S,e.name);const L=new Ms({uid:A,auth:e,email:m,emailVerified:O,displayName:h,isAnonymous:K,photoURL:_,phoneNumber:p,tenantId:b,stsTokenManager:T,createdAt:w,lastLoginAt:S});return q&&Array.isArray(q)&&(L.providerData=q.map(F=>Object.assign({},F))),N&&(L._redirectEventId=N),L}static async _fromIdTokenResponse(e,n,r=!1){const i=new xh;i.updateFromServerResponse(n);const s=new Ms({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await o0(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];mt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?NC(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new xh;a.updateFromIdToken(r);const l=new Ms({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new F2(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Map;function ea(t){ga(t instanceof Function,"Expected a class definition");let e=sE.get(t);return e?(ga(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}IC.type="NONE";const oE=IC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t,e,n){return`firebase:${t}:${e}:${n}`}class bh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=og(this.userKey,i.apiKey,s),this.fullPersistenceKey=og("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await s0(this.auth,{idToken:e}).catch(()=>{});return n?Ms._fromGetAccountInfoResponse(this.auth,n,e):null}return Ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bh(ea(oE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ea(oE);const o=og(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let h;if(typeof c=="string"){const m=await s0(e,{idToken:c}).catch(()=>{});if(!m)break;h=await Ms._fromGetAccountInfoResponse(e,m,c)}else h=Ms._fromJSON(e,c);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bh(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new bh(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DC(e))return"Blackberry";if(jC(e))return"Webos";if(CC(e))return"Safari";if((e.includes("chrome/")||PC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kC(t=Qr()){return/firefox\//i.test(t)}function CC(t=Qr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PC(t=Qr()){return/crios\//i.test(t)}function LC(t=Qr()){return/iemobile/i.test(t)}function RC(t=Qr()){return/android/i.test(t)}function DC(t=Qr()){return/blackberry/i.test(t)}function jC(t=Qr()){return/webos/i.test(t)}function px(t=Qr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _U(t=Qr()){var e;return px(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function SU(){return DV()&&document.documentMode===10}function OC(t=Qr()){return px(t)||RC(t)||jC(t)||DC(t)||/windows phone/i.test(t)||LC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e=[]){let n;switch(t){case"Browser":n=aE(Qr());break;case"Worker":n=`${aE(Qr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${id}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e={}){return tu(t,"GET","/v2/passwordPolicy",eu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=6;class NU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lE(this),this.idTokenSubscription=new lE(this),this.beforeStateQueue=new EU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ea(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await bh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await s0(this,{idToken:e}),r=await Ms._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Bi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await o0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bi(this.app))return Promise.reject(oa(this));const n=e?tr(e):null;return n&&mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&mt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bi(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bi(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AU(this),n=new NU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await bU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ea(e)||this._popupRedirectResolver;mt(n,this,"argument-error"),this.redirectPersistenceManager=await bh.create(this,[ea(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(mt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Bi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&nU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function nu(t){return tr(t)}class lE{constructor(e){this.auth=e,this.observer=null,this.addObserver=zV(n=>this.observer=n)}get next(){return mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kU(t){t1=t}function FC(t){return t1.loadJS(t)}function CU(){return t1.recaptchaEnterpriseScript}function PU(){return t1.gapiScript}function LU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class RU{constructor(){this.enterprise=new DU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class DU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const jU="recaptcha-enterprise",VC="NO_RECAPTCHA";class OU{constructor(e){this.type=jU,this.auth=nu(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{fU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new dU(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;rE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(VC)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RU().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&rE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=CU();l.length!==0&&(l+=a),FC(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function uE(t,e,n,r=!1,i=!1){const s=new OU(t);let o;if(i)o=VC;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function V2(t,e,n,r,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await uE(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await uE(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(t,e){const n=lx(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(pa(s,e??{}))return i;ys(i,"already-initialized")}return n.initialize({options:e})}function FU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ea);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VU(t,e,n){const r=nu(t);mt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=BC(e),{host:o,port:a}=BU(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){mt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),mt(pa(u,r.config.emulator)&&pa(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Ap(o)?(pC(`${s}//${o}${l}`),mC("Auth",!0)):UU()}function BC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BU(t){const e=BC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:cE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:cE(o)}}}function cE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zo("not implemented")}_getIdTokenResponse(e){return Zo("not implemented")}_linkToIdToken(e,n){return Zo("not implemented")}_getReauthenticationResolver(e){return Zo("not implemented")}}async function zU(t,e){return tu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e){return kp(t,"POST","/v1/accounts:signInWithPassword",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(t,e){return kp(t,"POST","/v1/accounts:signInWithEmailLink",eu(t,e))}async function HU(t,e){return kp(t,"POST","/v1/accounts:signInWithEmailLink",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends mx{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new tp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new tp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V2(e,n,"signInWithPassword",qU);case"emailLink":return $U(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return V2(e,r,"signUpPassword",zU);case"emailLink":return HU(e,{idToken:n,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t,e){return kp(t,"POST","/v1/accounts:signInWithIdp",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="http://localhost";class Ju extends mx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ju(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ys("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=ux(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ju(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _h(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_h(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_h(e,n)}buildRequest(){const e={requestUri:WU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Np(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KU(t){const e=ef(tf(t)).link,n=e?ef(tf(e)).deep_link_id:null,r=ef(tf(t)).deep_link_id;return(r?ef(tf(r)).link:null)||r||n||e||t}class gx{constructor(e){var n,r,i,s,o,a;const l=ef(tf(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=GU((i=l.mode)!==null&&i!==void 0?i:null);mt(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=KU(e);try{return new gx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(){this.providerId=sd.PROVIDER_ID}static credential(e,n){return tp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=gx.parseLink(n);return mt(r,"argument-error"),tp._fromEmailAndCode(e,r.code,r.tenantId)}}sd.PROVIDER_ID="password";sd.EMAIL_PASSWORD_SIGN_IN_METHOD="password";sd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends yx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Cp{constructor(){super("facebook.com")}static credential(e){return Ju._fromParams({providerId:dl.PROVIDER_ID,signInMethod:dl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dl.credentialFromTaggedObject(e)}static credentialFromError(e){return dl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dl.credential(e.oauthAccessToken)}catch{return null}}}dl.FACEBOOK_SIGN_IN_METHOD="facebook.com";dl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Cp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ju._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return mo.credential(n,r)}catch{return null}}}mo.GOOGLE_SIGN_IN_METHOD="google.com";mo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Cp{constructor(){super("github.com")}static credential(e){return Ju._fromParams({providerId:fl.PROVIDER_ID,signInMethod:fl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fl.credentialFromTaggedObject(e)}static credentialFromError(e){return fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fl.credential(e.oauthAccessToken)}catch{return null}}}fl.GITHUB_SIGN_IN_METHOD="github.com";fl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Cp{constructor(){super("twitter.com")}static credential(e,n){return Ju._fromParams({providerId:pl.PROVIDER_ID,signInMethod:pl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pl.credentialFromTaggedObject(e)}static credentialFromError(e){return pl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return pl.credential(n,r)}catch{return null}}}pl.TWITTER_SIGN_IN_METHOD="twitter.com";pl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(t,e){return kp(t,"POST","/v1/accounts:signUp",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ms._fromIdTokenResponse(e,r,i),o=hE(r);return new Zu({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=hE(r);return new Zu({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function hE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends Sa{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,a0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new a0(e,n,r,i)}}function UC(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?a0._fromErrorAndOperation(t,s,e,r):s})}async function QU(t,e,n=!1){const r=await ep(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zu._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e,n=!1){const{auth:r}=t;if(Bi(r.app))return Promise.reject(oa(r));const i="reauthenticate";try{const s=await ep(t,UC(r,i,e,t),n);mt(s.idToken,r,"internal-error");const o=fx(s.idToken);mt(o,r,"internal-error");const{sub:a}=o;return mt(t.uid===a,r,"user-mismatch"),Zu._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ys(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e,n=!1){if(Bi(t.app))return Promise.reject(oa(t));const r="signIn",i=await UC(t,r,e),s=await Zu._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function JU(t,e){return zC(nu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t){const e=nu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZU(t,e,n){if(Bi(t.app))return Promise.reject(oa(t));const r=nu(t),o=await V2(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YU).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&qC(t),l}),a=await Zu._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function ez(t,e,n){return Bi(t.app)?Promise.reject(oa(t)):JU(tr(t),sd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qC(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t,e){return tr(t).setPersistence(e)}function tz(t,e,n,r){return tr(t).onIdTokenChanged(e,n,r)}function nz(t,e,n){return tr(t).beforeAuthStateChanged(e,n)}function rz(t,e,n,r){return tr(t).onAuthStateChanged(e,n,r)}function iz(t){return tr(t).signOut()}const l0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(l0,"1"),this.storage.removeItem(l0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=1e3,oz=10;class WC extends HC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);SU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,oz):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},sz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WC.type="LOCAL";const az=WC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC extends HC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}GC.type="SESSION";const n1=GC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lz(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new r1(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await lz(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r1.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=vx("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(){return window}function cz(t){_o().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){return typeof _o().WorkerGlobalScope<"u"&&typeof _o().importScripts=="function"}async function hz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dz(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fz(){return KC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="firebaseLocalStorageDb",pz=1,u0="firebaseLocalStorage",QC="fbase_key";class Pp{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function i1(t,e){return t.transaction([u0],e?"readwrite":"readonly").objectStore(u0)}function mz(){const t=indexedDB.deleteDatabase(YC);return new Pp(t).toPromise()}function B2(){const t=indexedDB.open(YC,pz);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(u0,{keyPath:QC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(u0)?e(r):(r.close(),await mz(),e(await B2()))})})}async function dE(t,e,n){const r=i1(t,!0).put({[QC]:e,value:n});return new Pp(r).toPromise()}async function gz(t,e){const n=i1(t,!1).get(e),r=await new Pp(n).toPromise();return r===void 0?null:r.value}function fE(t,e){const n=i1(t,!0).delete(e);return new Pp(n).toPromise()}const yz=800,vz=3;class XC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await B2(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>vz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=r1._getInstance(fz()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await hz(),!this.activeServiceWorker)return;this.sender=new uz(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await B2();return await dE(e,l0,"1"),await fE(e,l0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>gz(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=i1(i,!1).getAll();return new Pp(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XC.type="LOCAL";const wz=XC;new Ip(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){return e?ea(e):(mt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends mx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _h(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _h(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _h(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xz(t){return zC(t.auth,new wx(t),t.bypassAuthState)}function bz(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),XU(n,new wx(t),t.bypassAuthState)}async function _z(t){const{auth:e,user:n}=t;return mt(n,e,"internal-error"),QU(n,new wx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xz;case"linkViaPopup":case"linkViaRedirect":return _z;case"reauthViaPopup":case"reauthViaRedirect":return bz;default:ys(this.auth,"internal-error")}}resolve(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ga(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=new Ip(2e3,1e4);async function eP(t,e,n){if(Bi(t.app))return Promise.reject(Us(t,"operation-not-supported-in-this-environment"));const r=nu(t);rU(t,e,yx);const i=JC(r,n);return new Bu(r,"signInViaPopup",e,i).executeNotNull()}class Bu extends ZC{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bu.currentPopupAction&&Bu.currentPopupAction.cancel(),Bu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return mt(e,this.auth,"internal-error"),e}async onExecution(){ga(this.filter.length===1,"Popup operations only handle one event");const e=vx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Sz.get())};e()}}Bu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez="pendingRedirect",ag=new Map;class Az extends ZC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ag.get(this.auth._key());if(!e){try{const r=await Tz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ag.set(this.auth._key(),e)}return this.bypassAuthState||ag.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tz(t,e){const n=kz(e),r=Iz(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Nz(t,e){ag.set(t._key(),e)}function Iz(t){return ea(t._redirectPersistence)}function kz(t){return og(Ez,t.config.apiKey,t.name)}async function Cz(t,e,n=!1){if(Bi(t.app))return Promise.reject(oa(t));const r=nu(t),i=JC(r,e),o=await new Az(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=10*60*1e3;class Lz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rz(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Us(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pz&&this.cachedEventUids.clear(),this.cachedEventUids.has(pE(e))}saveEventToCache(e){this.cachedEventUids.add(pE(e)),this.lastProcessedEventTime=Date.now()}}function pE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rz(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz(t,e={}){return tu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Oz=/^https?/;async function Mz(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Dz(t);for(const n of e)try{if(Fz(n))return}catch{}ys(t,"unauthorized-domain")}function Fz(t){const e=M2(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Oz.test(n))return!1;if(jz.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new Ip(3e4,6e4);function mE(){const t=_o().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Bz(t){return new Promise((e,n)=>{var r,i,s;function o(){mE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mE(),n(Us(t,"network-request-failed"))},timeout:Vz.get()})}if(!((i=(r=_o().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_o().gapi)===null||s===void 0)&&s.load)o();else{const a=LU("iframefcb");return _o()[a]=()=>{gapi.load?o():n(Us(t,"network-request-failed"))},FC(`${PU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lg=null,e})}let lg=null;function Uz(t){return lg=lg||Bz(t),lg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=new Ip(5e3,15e3),qz="__/auth/iframe",$z="emulator/auth/iframe",Hz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Gz(t){const e=t.config;mt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dx(e,$z):`https://${t.config.authDomain}/${qz}`,r={apiKey:e.apiKey,appName:t.name,v:id},i=Wz.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Np(r).slice(1)}`}async function Kz(t){const e=await Uz(t),n=_o().gapi;return mt(n,t,"internal-error"),e.open({where:document.body,url:Gz(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hz,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Us(t,"network-request-failed"),a=_o().setTimeout(()=>{s(o)},zz.get());function l(){_o().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qz=500,Xz=600,Jz="_blank",Zz="http://localhost";class gE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eq(t,e,n,r=Qz,i=Xz){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Yz),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Qr().toLowerCase();n&&(a=PC(u)?Jz:n),kC(u)&&(e=e||Zz,l.scrollbars="yes");const c=Object.entries(l).reduce((m,[p,_])=>`${m}${p}=${_},`,"");if(_U(u)&&a!=="_self")return tq(e||"",a),new gE(null);const h=window.open(e||"",a,c);mt(h,t,"popup-blocked");try{h.focus()}catch{}return new gE(h)}function tq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq="__/auth/handler",rq="emulator/auth/handler",iq=encodeURIComponent("fac");async function yE(t,e,n,r,i,s){mt(t.config.authDomain,t,"auth-domain-config-required"),mt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:id,eventId:i};if(e instanceof yx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,h]of Object.entries({}))o[c]=h}if(e instanceof Cp){const c=e.getScopes().filter(h=>h!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${iq}=${encodeURIComponent(l)}`:"";return`${sq(t)}?${Np(a).slice(1)}${u}`}function sq({config:t}){return t.emulator?dx(t,rq):`https://${t.authDomain}/${nq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="webStorageSupport";class oq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n1,this._completeRedirectFn=Cz,this._overrideRedirectResult=Nz}async _openPopup(e,n,r,i){var s;ga((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await yE(e,n,r,M2(),i);return eq(e,o,vx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await yE(e,n,r,M2(),i);return cz(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ga(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Kz(e),r=new Lz(e);return n.register("authEvent",i=>(mt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wy,{type:Wy},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wy];o!==void 0&&n(!!o),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Mz(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return OC()||CC()||px()}}const aq=oq;var vE="@firebase/auth",wE="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cq(t){Uh(new Xu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;mt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MC(t)},u=new IU(r,i,s,l);return FU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Uh(new Xu("auth-internal",e=>{const n=nu(e.getProvider("auth").getImmediate());return(r=>new lq(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pl(vE,wE,uq(t)),Pl(vE,wE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=5*60,dq=fC("authIdTokenMaxAge")||hq;let xE=null;const fq=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>dq)return;const i=n==null?void 0:n.token;xE!==i&&(xE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function pq(t=wC()){const e=lx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=MU(t,{popupRedirectResolver:aq,persistence:[wz,az,n1]}),r=fC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=fq(s.toString());nz(n,o,()=>o(n.currentUser)),tz(n,a=>o(a))}}const i=hC("auth");return i&&VU(n,`http://${i}`),n}function mq(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}kU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Us("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mq().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cq("Browser");var bE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ll,nP;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,T){function L(){}L.prototype=T.prototype,D.D=T.prototype,D.prototype=new L,D.prototype.constructor=D,D.C=function(F,I,C){for(var j=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)j[Y-2]=arguments[Y];return T.prototype[I].apply(F,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,T,L){L||(L=0);var F=Array(16);if(typeof T=="string")for(var I=0;16>I;++I)F[I]=T.charCodeAt(L++)|T.charCodeAt(L++)<<8|T.charCodeAt(L++)<<16|T.charCodeAt(L++)<<24;else for(I=0;16>I;++I)F[I]=T[L++]|T[L++]<<8|T[L++]<<16|T[L++]<<24;T=D.g[0],L=D.g[1],I=D.g[2];var C=D.g[3],j=T+(C^L&(I^C))+F[0]+3614090360&4294967295;T=L+(j<<7&4294967295|j>>>25),j=C+(I^T&(L^I))+F[1]+3905402710&4294967295,C=T+(j<<12&4294967295|j>>>20),j=I+(L^C&(T^L))+F[2]+606105819&4294967295,I=C+(j<<17&4294967295|j>>>15),j=L+(T^I&(C^T))+F[3]+3250441966&4294967295,L=I+(j<<22&4294967295|j>>>10),j=T+(C^L&(I^C))+F[4]+4118548399&4294967295,T=L+(j<<7&4294967295|j>>>25),j=C+(I^T&(L^I))+F[5]+1200080426&4294967295,C=T+(j<<12&4294967295|j>>>20),j=I+(L^C&(T^L))+F[6]+2821735955&4294967295,I=C+(j<<17&4294967295|j>>>15),j=L+(T^I&(C^T))+F[7]+4249261313&4294967295,L=I+(j<<22&4294967295|j>>>10),j=T+(C^L&(I^C))+F[8]+1770035416&4294967295,T=L+(j<<7&4294967295|j>>>25),j=C+(I^T&(L^I))+F[9]+2336552879&4294967295,C=T+(j<<12&4294967295|j>>>20),j=I+(L^C&(T^L))+F[10]+4294925233&4294967295,I=C+(j<<17&4294967295|j>>>15),j=L+(T^I&(C^T))+F[11]+2304563134&4294967295,L=I+(j<<22&4294967295|j>>>10),j=T+(C^L&(I^C))+F[12]+1804603682&4294967295,T=L+(j<<7&4294967295|j>>>25),j=C+(I^T&(L^I))+F[13]+4254626195&4294967295,C=T+(j<<12&4294967295|j>>>20),j=I+(L^C&(T^L))+F[14]+2792965006&4294967295,I=C+(j<<17&4294967295|j>>>15),j=L+(T^I&(C^T))+F[15]+1236535329&4294967295,L=I+(j<<22&4294967295|j>>>10),j=T+(I^C&(L^I))+F[1]+4129170786&4294967295,T=L+(j<<5&4294967295|j>>>27),j=C+(L^I&(T^L))+F[6]+3225465664&4294967295,C=T+(j<<9&4294967295|j>>>23),j=I+(T^L&(C^T))+F[11]+643717713&4294967295,I=C+(j<<14&4294967295|j>>>18),j=L+(C^T&(I^C))+F[0]+3921069994&4294967295,L=I+(j<<20&4294967295|j>>>12),j=T+(I^C&(L^I))+F[5]+3593408605&4294967295,T=L+(j<<5&4294967295|j>>>27),j=C+(L^I&(T^L))+F[10]+38016083&4294967295,C=T+(j<<9&4294967295|j>>>23),j=I+(T^L&(C^T))+F[15]+3634488961&4294967295,I=C+(j<<14&4294967295|j>>>18),j=L+(C^T&(I^C))+F[4]+3889429448&4294967295,L=I+(j<<20&4294967295|j>>>12),j=T+(I^C&(L^I))+F[9]+568446438&4294967295,T=L+(j<<5&4294967295|j>>>27),j=C+(L^I&(T^L))+F[14]+3275163606&4294967295,C=T+(j<<9&4294967295|j>>>23),j=I+(T^L&(C^T))+F[3]+4107603335&4294967295,I=C+(j<<14&4294967295|j>>>18),j=L+(C^T&(I^C))+F[8]+1163531501&4294967295,L=I+(j<<20&4294967295|j>>>12),j=T+(I^C&(L^I))+F[13]+2850285829&4294967295,T=L+(j<<5&4294967295|j>>>27),j=C+(L^I&(T^L))+F[2]+4243563512&4294967295,C=T+(j<<9&4294967295|j>>>23),j=I+(T^L&(C^T))+F[7]+1735328473&4294967295,I=C+(j<<14&4294967295|j>>>18),j=L+(C^T&(I^C))+F[12]+2368359562&4294967295,L=I+(j<<20&4294967295|j>>>12),j=T+(L^I^C)+F[5]+4294588738&4294967295,T=L+(j<<4&4294967295|j>>>28),j=C+(T^L^I)+F[8]+2272392833&4294967295,C=T+(j<<11&4294967295|j>>>21),j=I+(C^T^L)+F[11]+1839030562&4294967295,I=C+(j<<16&4294967295|j>>>16),j=L+(I^C^T)+F[14]+4259657740&4294967295,L=I+(j<<23&4294967295|j>>>9),j=T+(L^I^C)+F[1]+2763975236&4294967295,T=L+(j<<4&4294967295|j>>>28),j=C+(T^L^I)+F[4]+1272893353&4294967295,C=T+(j<<11&4294967295|j>>>21),j=I+(C^T^L)+F[7]+4139469664&4294967295,I=C+(j<<16&4294967295|j>>>16),j=L+(I^C^T)+F[10]+3200236656&4294967295,L=I+(j<<23&4294967295|j>>>9),j=T+(L^I^C)+F[13]+681279174&4294967295,T=L+(j<<4&4294967295|j>>>28),j=C+(T^L^I)+F[0]+3936430074&4294967295,C=T+(j<<11&4294967295|j>>>21),j=I+(C^T^L)+F[3]+3572445317&4294967295,I=C+(j<<16&4294967295|j>>>16),j=L+(I^C^T)+F[6]+76029189&4294967295,L=I+(j<<23&4294967295|j>>>9),j=T+(L^I^C)+F[9]+3654602809&4294967295,T=L+(j<<4&4294967295|j>>>28),j=C+(T^L^I)+F[12]+3873151461&4294967295,C=T+(j<<11&4294967295|j>>>21),j=I+(C^T^L)+F[15]+530742520&4294967295,I=C+(j<<16&4294967295|j>>>16),j=L+(I^C^T)+F[2]+3299628645&4294967295,L=I+(j<<23&4294967295|j>>>9),j=T+(I^(L|~C))+F[0]+4096336452&4294967295,T=L+(j<<6&4294967295|j>>>26),j=C+(L^(T|~I))+F[7]+1126891415&4294967295,C=T+(j<<10&4294967295|j>>>22),j=I+(T^(C|~L))+F[14]+2878612391&4294967295,I=C+(j<<15&4294967295|j>>>17),j=L+(C^(I|~T))+F[5]+4237533241&4294967295,L=I+(j<<21&4294967295|j>>>11),j=T+(I^(L|~C))+F[12]+1700485571&4294967295,T=L+(j<<6&4294967295|j>>>26),j=C+(L^(T|~I))+F[3]+2399980690&4294967295,C=T+(j<<10&4294967295|j>>>22),j=I+(T^(C|~L))+F[10]+4293915773&4294967295,I=C+(j<<15&4294967295|j>>>17),j=L+(C^(I|~T))+F[1]+2240044497&4294967295,L=I+(j<<21&4294967295|j>>>11),j=T+(I^(L|~C))+F[8]+1873313359&4294967295,T=L+(j<<6&4294967295|j>>>26),j=C+(L^(T|~I))+F[15]+4264355552&4294967295,C=T+(j<<10&4294967295|j>>>22),j=I+(T^(C|~L))+F[6]+2734768916&4294967295,I=C+(j<<15&4294967295|j>>>17),j=L+(C^(I|~T))+F[13]+1309151649&4294967295,L=I+(j<<21&4294967295|j>>>11),j=T+(I^(L|~C))+F[4]+4149444226&4294967295,T=L+(j<<6&4294967295|j>>>26),j=C+(L^(T|~I))+F[11]+3174756917&4294967295,C=T+(j<<10&4294967295|j>>>22),j=I+(T^(C|~L))+F[2]+718787259&4294967295,I=C+(j<<15&4294967295|j>>>17),j=L+(C^(I|~T))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+(I+(j<<21&4294967295|j>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+C&4294967295}r.prototype.u=function(D,T){T===void 0&&(T=D.length);for(var L=T-this.blockSize,F=this.B,I=this.h,C=0;C<T;){if(I==0)for(;C<=L;)i(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<T;)if(F[I++]=D.charCodeAt(C++),I==this.blockSize){i(this,F),I=0;break}}else for(;C<T;)if(F[I++]=D[C++],I==this.blockSize){i(this,F),I=0;break}}this.h=I,this.o+=T},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;var L=8*this.o;for(T=D.length-8;T<D.length;++T)D[T]=L&255,L/=256;for(this.u(D),D=Array(16),T=L=0;4>T;++T)for(var F=0;32>F;F+=8)D[L++]=this.g[T]>>>F&255;return D};function s(D,T){var L=a;return Object.prototype.hasOwnProperty.call(L,D)?L[D]:L[D]=T(D)}function o(D,T){this.h=T;for(var L=[],F=!0,I=D.length-1;0<=I;I--){var C=D[I]|0;F&&C==T||(L[I]=C,F=!1)}this.g=L}var a={};function l(D){return-128<=D&&128>D?s(D,function(T){return new o([T|0],0>T?-1:0)}):new o([D|0],0>D?-1:0)}function u(D){if(isNaN(D)||!isFinite(D))return h;if(0>D)return N(u(-D));for(var T=[],L=1,F=0;D>=L;F++)T[F]=D/L|0,L*=4294967296;return new o(T,0)}function c(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return N(c(D.substring(1),T));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var L=u(Math.pow(T,8)),F=h,I=0;I<D.length;I+=8){var C=Math.min(8,D.length-I),j=parseInt(D.substring(I,I+C),T);8>C?(C=u(Math.pow(T,C)),F=F.j(C).add(u(j))):(F=F.j(L),F=F.add(u(j)))}return F}var h=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();for(var D=0,T=1,L=0;L<this.g.length;L++){var F=this.i(L);D+=(0<=F?F:4294967296+F)*T,T*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(b(this))return"-"+N(this).toString(D);for(var T=u(Math.pow(D,6)),L=this,F="";;){var I=O(L,T).g;L=w(L,I.j(T));var C=((0<L.g.length?L.g[0]:L.h)>>>0).toString(D);if(L=I,_(L))return C+F;for(;6>C.length;)C="0"+C;F=C+F}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(var T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function b(D){return D.h==-1}t.l=function(D){return D=w(this,D),b(D)?-1:_(D)?0:1};function N(D){for(var T=D.g.length,L=[],F=0;F<T;F++)L[F]=~D.g[F];return new o(L,~D.h).add(m)}t.abs=function(){return b(this)?N(this):this},t.add=function(D){for(var T=Math.max(this.g.length,D.g.length),L=[],F=0,I=0;I<=T;I++){var C=F+(this.i(I)&65535)+(D.i(I)&65535),j=(C>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);F=j>>>16,C&=65535,j&=65535,L[I]=j<<16|C}return new o(L,L[L.length-1]&-2147483648?-1:0)};function w(D,T){return D.add(N(T))}t.j=function(D){if(_(this)||_(D))return h;if(b(this))return b(D)?N(this).j(N(D)):N(N(this).j(D));if(b(D))return N(this.j(N(D)));if(0>this.l(p)&&0>D.l(p))return u(this.m()*D.m());for(var T=this.g.length+D.g.length,L=[],F=0;F<2*T;F++)L[F]=0;for(F=0;F<this.g.length;F++)for(var I=0;I<D.g.length;I++){var C=this.i(F)>>>16,j=this.i(F)&65535,Y=D.i(I)>>>16,le=D.i(I)&65535;L[2*F+2*I]+=j*le,S(L,2*F+2*I),L[2*F+2*I+1]+=C*le,S(L,2*F+2*I+1),L[2*F+2*I+1]+=j*Y,S(L,2*F+2*I+1),L[2*F+2*I+2]+=C*Y,S(L,2*F+2*I+2)}for(F=0;F<T;F++)L[F]=L[2*F+1]<<16|L[2*F];for(F=T;F<2*T;F++)L[F]=0;return new o(L,0)};function S(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function A(D,T){this.g=D,this.h=T}function O(D,T){if(_(T))throw Error("division by zero");if(_(D))return new A(h,h);if(b(D))return T=O(N(D),T),new A(N(T.g),N(T.h));if(b(T))return T=O(D,N(T)),new A(N(T.g),T.h);if(30<D.g.length){if(b(D)||b(T))throw Error("slowDivide_ only works with positive integers.");for(var L=m,F=T;0>=F.l(D);)L=K(L),F=K(F);var I=q(L,1),C=q(F,1);for(F=q(F,2),L=q(L,2);!_(F);){var j=C.add(F);0>=j.l(D)&&(I=I.add(L),C=j),F=q(F,1),L=q(L,1)}return T=w(D,I.j(T)),new A(I,T)}for(I=h;0<=D.l(T);){for(L=Math.max(1,Math.floor(D.m()/T.m())),F=Math.ceil(Math.log(L)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),C=u(L),j=C.j(T);b(j)||0<j.l(D);)L-=F,C=u(L),j=C.j(T);_(C)&&(C=m),I=I.add(C),D=w(D,j)}return new A(I,D)}t.A=function(D){return O(this,D).h},t.and=function(D){for(var T=Math.max(this.g.length,D.g.length),L=[],F=0;F<T;F++)L[F]=this.i(F)&D.i(F);return new o(L,this.h&D.h)},t.or=function(D){for(var T=Math.max(this.g.length,D.g.length),L=[],F=0;F<T;F++)L[F]=this.i(F)|D.i(F);return new o(L,this.h|D.h)},t.xor=function(D){for(var T=Math.max(this.g.length,D.g.length),L=[],F=0;F<T;F++)L[F]=this.i(F)^D.i(F);return new o(L,this.h^D.h)};function K(D){for(var T=D.g.length+1,L=[],F=0;F<T;F++)L[F]=D.i(F)<<1|D.i(F-1)>>>31;return new o(L,D.h)}function q(D,T){var L=T>>5;T%=32;for(var F=D.g.length-L,I=[],C=0;C<F;C++)I[C]=0<T?D.i(C+L)>>>T|D.i(C+L+1)<<32-T:D.i(C+L);return new o(I,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nP=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Ll=o}).apply(typeof bE<"u"?bE:typeof self<"u"?self:typeof window<"u"?window:{});var Pm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rP,nf,iP,ug,U2,sP,oP,aP;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,E,P){return f==Array.prototype||f==Object.prototype||(f[E]=P.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pm=="object"&&Pm];for(var E=0;E<f.length;++E){var P=f[E];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(f,E){if(E)e:{var P=r;f=f.split(".");for(var H=0;H<f.length-1;H++){var de=f[H];if(!(de in P))break e;P=P[de]}f=f[f.length-1],H=P[f],E=E(H),E!=H&&E!=null&&e(P,f,{configurable:!0,writable:!0,value:E})}}function s(f,E){f instanceof String&&(f+="");var P=0,H=!1,de={next:function(){if(!H&&P<f.length){var we=P++;return{value:E(we,f[we]),done:!1}}return H=!0,{done:!0,value:void 0}}};return de[Symbol.iterator]=function(){return de},de}i("Array.prototype.values",function(f){return f||function(){return s(this,function(E,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var E=typeof f;return E=E!="object"?E:f?Array.isArray(f)?"array":E:"null",E=="array"||E=="object"&&typeof f.length=="number"}function u(f){var E=typeof f;return E=="object"&&f!=null||E=="function"}function c(f,E,P){return f.call.apply(f.bind,arguments)}function h(f,E,P){if(!f)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var de=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(de,H),f.apply(E,de)}}return function(){return f.apply(E,arguments)}}function m(f,E,P){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:h,m.apply(null,arguments)}function p(f,E){var P=Array.prototype.slice.call(arguments,1);return function(){var H=P.slice();return H.push.apply(H,arguments),f.apply(this,H)}}function _(f,E){function P(){}P.prototype=E.prototype,f.aa=E.prototype,f.prototype=new P,f.prototype.constructor=f,f.Qb=function(H,de,we){for(var je=Array(arguments.length-2),At=2;At<arguments.length;At++)je[At-2]=arguments[At];return E.prototype[de].apply(H,je)}}function b(f){const E=f.length;if(0<E){const P=Array(E);for(let H=0;H<E;H++)P[H]=f[H];return P}return[]}function N(f,E){for(let P=1;P<arguments.length;P++){const H=arguments[P];if(l(H)){const de=f.length||0,we=H.length||0;f.length=de+we;for(let je=0;je<we;je++)f[de+je]=H[je]}else f.push(H)}}class w{constructor(E,P){this.i=E,this.j=P,this.h=0,this.g=null}get(){let E;return 0<this.h?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function S(f){return/^[\s\xa0]*$/.test(f)}function A(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function O(f){return O[" "](f),f}O[" "]=function(){};var K=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function q(f,E,P){for(const H in f)E.call(P,f[H],H,f)}function D(f,E){for(const P in f)E.call(void 0,f[P],P,f)}function T(f){const E={};for(const P in f)E[P]=f[P];return E}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,E){let P,H;for(let de=1;de<arguments.length;de++){H=arguments[de];for(P in H)f[P]=H[P];for(let we=0;we<L.length;we++)P=L[we],Object.prototype.hasOwnProperty.call(H,P)&&(f[P]=H[P])}}function I(f){var E=1;f=f.split(":");const P=[];for(;0<E&&f.length;)P.push(f.shift()),E--;return f.length&&P.push(f.join(":")),P}function C(f){a.setTimeout(()=>{throw f},0)}function j(){var f=re;let E=null;return f.g&&(E=f.g,f.g=f.g.next,f.g||(f.h=null),E.next=null),E}class Y{constructor(){this.h=this.g=null}add(E,P){const H=le.get();H.set(E,P),this.h?this.h.next=H:this.g=H,this.h=H}}var le=new w(()=>new he,f=>f.reset());class he{constructor(){this.next=this.g=this.h=null}set(E,P){this.h=E,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,X=!1,re=new Y,z=()=>{const f=a.Promise.resolve(void 0);ue=()=>{f.then(Ae)}};var Ae=()=>{for(var f;f=j();){try{f.h.call(f.g)}catch(P){C(P)}var E=le;E.j(f),100>E.h&&(E.h++,f.next=E.g,E.g=f)}X=!1};function M(){this.s=this.s,this.C=this.C}M.prototype.s=!1,M.prototype.ma=function(){this.s||(this.s=!0,this.N())},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(f,E){this.type=f,this.g=this.target=E,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,E=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const P=()=>{};a.addEventListener("test",P,E),a.removeEventListener("test",P,E)}catch{}return f}();function ne(f,E){if(R.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var P=this.type=f.type,H=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=E,E=f.relatedTarget){if(K){e:{try{O(E.nodeName);var de=!0;break e}catch{}de=!1}de||(E=null)}}else P=="mouseover"?E=f.fromElement:P=="mouseout"&&(E=f.toElement);this.relatedTarget=E,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:se[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ne.aa.h.call(this)}}_(ne,R);var se={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),xe=0;function be(f,E,P,H,de){this.listener=f,this.proxy=null,this.src=E,this.type=P,this.capture=!!H,this.ha=de,this.key=++xe,this.da=this.fa=!1}function Oe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function De(f){this.src=f,this.g={},this.h=0}De.prototype.add=function(f,E,P,H,de){var we=f.toString();f=this.g[we],f||(f=this.g[we]=[],this.h++);var je=qe(f,E,H,de);return-1<je?(E=f[je],P||(E.fa=!1)):(E=new be(E,this.src,we,!!H,de),E.fa=P,f.push(E)),E};function $e(f,E){var P=E.type;if(P in f.g){var H=f.g[P],de=Array.prototype.indexOf.call(H,E,void 0),we;(we=0<=de)&&Array.prototype.splice.call(H,de,1),we&&(Oe(E),f.g[P].length==0&&(delete f.g[P],f.h--))}}function qe(f,E,P,H){for(var de=0;de<f.length;++de){var we=f[de];if(!we.da&&we.listener==E&&we.capture==!!P&&we.ha==H)return de}return-1}var ot="closure_lm_"+(1e6*Math.random()|0),Se={};function te(f,E,P,H,de){if(Array.isArray(E)){for(var we=0;we<E.length;we++)te(f,E[we],P,H,de);return null}return P=xt(P),f&&f[ge]?f.K(E,P,u(H)?!!H.capture:!!H,de):yt(f,E,P,!1,H,de)}function yt(f,E,P,H,de,we){if(!E)throw Error("Invalid event type");var je=u(de)?!!de.capture:!!de,At=st(f);if(At||(f[ot]=At=new De(f)),P=At.add(E,P,H,je,we),P.proxy)return P;if(H=rt(),P.proxy=H,H.src=f,H.listener=P,f.addEventListener)Z||(de=je),de===void 0&&(de=!1),f.addEventListener(E.toString(),H,de);else if(f.attachEvent)f.attachEvent(Ke(E.toString()),H);else if(f.addListener&&f.removeListener)f.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return P}function rt(){function f(P){return E.call(f.src,f.listener,P)}const E=He;return f}function Me(f,E,P,H,de){if(Array.isArray(E))for(var we=0;we<E.length;we++)Me(f,E[we],P,H,de);else H=u(H)?!!H.capture:!!H,P=xt(P),f&&f[ge]?(f=f.i,E=String(E).toString(),E in f.g&&(we=f.g[E],P=qe(we,P,H,de),-1<P&&(Oe(we[P]),Array.prototype.splice.call(we,P,1),we.length==0&&(delete f.g[E],f.h--)))):f&&(f=st(f))&&(E=f.g[E.toString()],f=-1,E&&(f=qe(E,P,H,de)),(P=-1<f?E[f]:null)&&Be(P))}function Be(f){if(typeof f!="number"&&f&&!f.da){var E=f.src;if(E&&E[ge])$e(E.i,f);else{var P=f.type,H=f.proxy;E.removeEventListener?E.removeEventListener(P,H,f.capture):E.detachEvent?E.detachEvent(Ke(P),H):E.addListener&&E.removeListener&&E.removeListener(H),(P=st(E))?($e(P,f),P.h==0&&(P.src=null,E[ot]=null)):Oe(f)}}}function Ke(f){return f in Se?Se[f]:Se[f]="on"+f}function He(f,E){if(f.da)f=!0;else{E=new ne(E,this);var P=f.listener,H=f.ha||f.src;f.fa&&Be(f),f=P.call(H,E)}return f}function st(f){return f=f[ot],f instanceof De?f:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(f){return typeof f=="function"?f:(f[ht]||(f[ht]=function(E){return f.handleEvent(E)}),f[ht])}function me(){M.call(this),this.i=new De(this),this.M=this,this.F=null}_(me,M),me.prototype[ge]=!0,me.prototype.removeEventListener=function(f,E,P,H){Me(this,f,E,P,H)};function Te(f,E){var P,H=f.F;if(H)for(P=[];H;H=H.F)P.push(H);if(f=f.M,H=E.type||E,typeof E=="string")E=new R(E,f);else if(E instanceof R)E.target=E.target||f;else{var de=E;E=new R(H,f),F(E,de)}if(de=!0,P)for(var we=P.length-1;0<=we;we--){var je=E.g=P[we];de=Ye(je,H,!0,E)&&de}if(je=E.g=f,de=Ye(je,H,!0,E)&&de,de=Ye(je,H,!1,E)&&de,P)for(we=0;we<P.length;we++)je=E.g=P[we],de=Ye(je,H,!1,E)&&de}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var f=this.i,E;for(E in f.g){for(var P=f.g[E],H=0;H<P.length;H++)Oe(P[H]);delete f.g[E],f.h--}}this.F=null},me.prototype.K=function(f,E,P,H){return this.i.add(String(f),E,!1,P,H)},me.prototype.L=function(f,E,P,H){return this.i.add(String(f),E,!0,P,H)};function Ye(f,E,P,H){if(E=f.i.g[String(E)],!E)return!0;E=E.concat();for(var de=!0,we=0;we<E.length;++we){var je=E[we];if(je&&!je.da&&je.capture==P){var At=je.listener,Ot=je.ha||je.src;je.fa&&$e(f.i,je),de=At.call(Ot,H)!==!1&&de}}return de&&!H.defaultPrevented}function Ue(f,E,P){if(typeof f=="function")P&&(f=m(f,P));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(E)?-1:a.setTimeout(f,E||0)}function Je(f){f.g=Ue(()=>{f.g=null,f.i&&(f.i=!1,Je(f))},f.l);const E=f.h;f.h=null,f.m.apply(null,E)}class ze extends M{constructor(E,P){super(),this.m=E,this.l=P,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Je(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(f){M.call(this),this.h=f,this.g={}}_(Wt,M);var bt=[];function Hn(f){q(f.g,function(E,P){this.g.hasOwnProperty(P)&&Be(E)},f),f.g={}}Wt.prototype.N=function(){Wt.aa.N.call(this),Hn(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dt=a.JSON.stringify,Pt=a.JSON.parse,nr=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Et(){}Et.prototype.h=null;function Gs(f){return f.h||(f.h=f.i())}function mn(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ki(){R.call(this,"d")}_(ki,R);function un(){R.call(this,"c")}_(un,R);var ut={},Ut=null;function Qi(){return Ut=Ut||new me}ut.La="serverreachability";function Wn(f){R.call(this,ut.La,f)}_(Wn,R);function kr(f){const E=Qi();Te(E,new Wn(E))}ut.STAT_EVENT="statevent";function Ci(f,E){R.call(this,ut.STAT_EVENT,f),this.stat=E}_(Ci,R);function tt(f){const E=Qi();Te(E,new Ci(E,f))}ut.Ma="timingevent";function ci(f,E){R.call(this,ut.Ma,f),this.size=E}_(ci,R);function Cr(f,E){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},E)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function Rn(f,E,P,H,de,we){f.info(function(){if(f.g)if(we)for(var je="",At=we.split("&"),Ot=0;Ot<At.length;Ot++){var Tt=At[Ot].split("=");if(1<Tt.length){var Kt=Tt[0];Tt=Tt[1];var sn=Kt.split("_");je=2<=sn.length&&sn[1]=="type"?je+(Kt+"="+Tt+"&"):je+(Kt+"=redacted&")}}else je=null;else je=we;return"XMLHTTP REQ ("+H+") [attempt "+de+"]: "+E+`
`+P+`
`+je})}function In(f,E,P,H,de,we,je){f.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+de+"]: "+E+`
`+P+`
`+we+" "+je})}function Kn(f,E,P,H){f.info(function(){return"XMLHTTP TEXT ("+E+"): "+vs(f,P)+(H?" "+H:"")})}function Aa(f,E){f.info(function(){return"TIMEOUT: "+E})}Gn.prototype.info=function(){};function vs(f,E){if(!f.g)return E;if(!E)return null;try{var P=JSON.parse(E);if(P){for(f=0;f<P.length;f++)if(Array.isArray(P[f])){var H=P[f];if(!(2>H.length)){var de=H[1];if(Array.isArray(de)&&!(1>de.length)){var we=de[0];if(we!="noop"&&we!="stop"&&we!="close")for(var je=1;je<de.length;je++)de[je]=""}}}}return Dt(P)}catch{return E}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},hi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jr;function Zr(){}_(Zr,Et),Zr.prototype.g=function(){return new XMLHttpRequest},Zr.prototype.i=function(){return{}},Jr=new Zr;function Dn(f,E,P,H){this.j=f,this.i=E,this.l=P,this.R=H||1,this.U=new Wt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pi}function Pi(){this.i=null,this.g="",this.h=!1}var Ks={},Ys={};function Qs(f,E,P){f.L=1,f.v=Do(ei(E)),f.m=P,f.P=!0,ko(f,null)}function ko(f,E){f.F=Date.now(),Ta(f),f.A=ei(f.v);var P=f.A,H=f.R;Array.isArray(H)||(H=[String(H)]),vt(P.i,"t",H),f.C=0,P=f.j.J,f.h=new Pi,f.g=V(f.j,P?E:null,!f.m),0<f.O&&(f.M=new ze(m(f.Y,f,f.g),f.O)),E=f.U,P=f.g,H=f.ca;var de="readystatechange";Array.isArray(de)||(de&&(bt[0]=de.toString()),de=bt);for(var we=0;we<de.length;we++){var je=te(P,de[we],H||E.handleEvent,!1,E.h||E);if(!je)break;E.g[je.key]=je}E=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),E["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,E)):(f.u="GET",f.g.ea(f.A,f.u,null,E)),kr(),Rn(f.i,f.u,f.A,f.l,f.R,f.m)}Dn.prototype.ca=function(f){f=f.target;const E=this.M;E&&rr(f)==3?E.j():this.Y(f)},Dn.prototype.Y=function(f){try{if(f==this.g)e:{const sn=rr(this.g);var E=this.g.Ba();const Ts=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||_c(this.g)))){this.J||sn!=4||E==7||(E==8||0>=Ts?kr(3):kr(2)),Xs(this);var P=this.g.Z();this.X=P;t:if(Co(this)){var H=_c(this.g);f="";var de=H.length,we=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),Js(this);var je="";break t}this.h.i=new a.TextDecoder}for(E=0;E<de;E++)this.h.h=!0,f+=this.h.i.decode(H[E],{stream:!(we&&E==de-1)});H.length=0,this.h.g+=f,this.C=0,je=this.h.g}else je=this.g.oa();if(this.o=P==200,In(this.i,this.u,this.A,this.l,this.R,sn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var At,Ot=this.g;if((At=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(At)){var Tt=At;break t}}Tt=null}if(P=Tt)Kn(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Po(this,P);else{this.o=!1,this.s=3,tt(12),ws(this),Js(this);break e}}if(this.P){P=!0;let vr;for(;!this.J&&this.C<je.length;)if(vr=fc(this,je),vr==Ys){sn==4&&(this.s=4,tt(14),P=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==Ks){this.s=4,tt(15),Kn(this.i,this.l,je,"[Invalid Chunk]"),P=!1;break}else Kn(this.i,this.l,vr,null),Po(this,vr);if(Co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||je.length!=0||this.h.h||(this.s=1,tt(16),P=!1),this.o=this.o&&P,!P)Kn(this.i,this.l,je,"[Invalid Chunked Response]"),ws(this),Js(this);else if(0<je.length&&!this.W){this.W=!0;var Kt=this.j;Kt.g==this&&Kt.ba&&!Kt.M&&(Kt.j.info("Great, no buffering proxy detected. Bytes received: "+je.length),Ba(Kt),Kt.M=!0,tt(11))}}else Kn(this.i,this.l,je,null),Po(this,je);sn==4&&ws(this),this.o&&!this.J&&(sn==4?ro(this.j,this):(this.o=!1,Ta(this)))}else to(this.g),P==400&&0<je.indexOf("Unknown SID")?(this.s=3,tt(12)):(this.s=0,tt(13)),ws(this),Js(this)}}}catch{}finally{}};function Co(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function fc(f,E){var P=f.C,H=E.indexOf(`
`,P);return H==-1?Ys:(P=Number(E.substring(P,H)),isNaN(P)?Ks:(H+=1,H+P>E.length?Ys:(E=E.slice(H,H+P),f.C=H+P,E)))}Dn.prototype.cancel=function(){this.J=!0,ws(this)};function Ta(f){f.S=Date.now()+f.I,pc(f,f.I)}function pc(f,E){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Cr(m(f.ba,f),E)}function Xs(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Dn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Aa(this.i,this.A),this.L!=2&&(kr(),tt(17)),ws(this),this.s=2,Js(this)):pc(this,this.S-f)};function Js(f){f.j.G==0||f.J||ro(f.j,f)}function ws(f){Xs(f);var E=f.M;E&&typeof E.ma=="function"&&E.ma(),f.M=null,Hn(f.U),f.g&&(E=f.g,f.g=null,E.abort(),E.ma())}function Po(f,E){try{var P=f.j;if(P.G!=0&&(P.g==f||au(P.h,f))){if(!f.K&&au(P.h,f)&&P.G==3){try{var H=P.Da.g.parse(E)}catch{H=null}if(Array.isArray(H)&&H.length==3){var de=H;if(de[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<f.F)As(P),Oa(P);else break e;Vo(P),tt(18)}}else P.za=de[1],0<P.za-P.T&&37500>de[2]&&P.F&&P.v==0&&!P.C&&(P.C=Cr(m(P.Za,P),6e3));if(1>=Lo(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else Lr(P,11)}else if((f.K||P.g==f)&&As(P),!S(E))for(de=P.Da.g.parse(E),E=0;E<de.length;E++){let Tt=de[E];if(P.T=Tt[0],Tt=Tt[1],P.G==2)if(Tt[0]=="c"){P.K=Tt[1],P.ia=Tt[2];const Kt=Tt[3];Kt!=null&&(P.la=Kt,P.j.info("VER="+P.la));const sn=Tt[4];sn!=null&&(P.Aa=sn,P.j.info("SVER="+P.Aa));const Ts=Tt[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(H=1.5*Ts,P.L=H,P.j.info("backChannelRequestTimeoutMs_="+H)),H=P;const vr=f.g;if(vr){const io=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(io){var we=H.h;we.g||io.indexOf("spdy")==-1&&io.indexOf("quic")==-1&&io.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(gn(we,we.h),we.h=null))}if(H.D){const so=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;so&&(H.ya=so,Qt(H.I,H.D,so))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-f.F,P.j.info("Handshake RTT: "+P.R+"ms")),H=P;var je=f;if(H.qa=v(H,H.J?H.ia:null,H.W),je.K){lu(H.h,je);var At=je,Ot=H.L;Ot&&(At.I=Ot),At.B&&(Xs(At),Ta(At)),H.g=je}else Va(H);0<P.i.length&&Ma(P)}else Tt[0]!="stop"&&Tt[0]!="close"||Lr(P,7);else P.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Lr(P,7):Es(P):Tt[0]!="noop"&&P.l&&P.l.ta(Tt),P.v=0)}}kr(4)}catch{}}var pd=class{constructor(f,E){this.g=f,this.map=E}};function ou(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mc(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Lo(f){return f.h?1:f.g?f.g.size:0}function au(f,E){return f.h?f.h==E:f.g?f.g.has(E):!1}function gn(f,E){f.g?f.g.add(E):f.h=E}function lu(f,E){f.h&&f.h==E?f.h=null:f.g&&f.g.has(E)&&f.g.delete(E)}ou.prototype.cancel=function(){if(this.i=uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function uu(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let E=f.i;for(const P of f.g.values())E=E.concat(P.D);return E}return b(f.i)}function gc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var E=[],P=f.length,H=0;H<P;H++)E.push(f[H]);return E}E=[],P=0;for(H in f)E[P++]=f[H];return E}function cu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var E=[];f=f.length;for(var P=0;P<f;P++)E.push(P);return E}E=[],P=0;for(const H in f)E[P++]=H;return E}}}function yc(f,E){if(f.forEach&&typeof f.forEach=="function")f.forEach(E,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,E,void 0);else for(var P=cu(f),H=gc(f),de=H.length,we=0;we<de;we++)E.call(void 0,H[we],P&&P[we],f)}var di=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Na(f,E){if(f){f=f.split("&");for(var P=0;P<f.length;P++){var H=f[P].indexOf("="),de=null;if(0<=H){var we=f[P].substring(0,H);de=f[P].substring(H+1)}else we=f[P];E(we,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function kn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof kn){this.h=f.h,Ro(this,f.j),this.o=f.o,this.g=f.g,Ia(this,f.s),this.l=f.l;var E=f.i,P=new Zs;P.i=E.i,E.g&&(P.g=new Map(E.g),P.h=E.h),hu(this,P),this.m=f.m}else f&&(E=String(f).match(di))?(this.h=!1,Ro(this,E[1]||"",!0),this.o=jo(E[2]||""),this.g=jo(E[3]||"",!0),Ia(this,E[4]),this.l=jo(E[5]||"",!0),hu(this,E[6]||"",!0),this.m=jo(E[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}kn.prototype.toString=function(){var f=[],E=this.j;E&&f.push(xs(E,vc,!0),":");var P=this.g;return(P||E=="file")&&(f.push("//"),(E=this.o)&&f.push(xs(E,vc,!0),"@"),f.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&f.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&f.push("/"),f.push(xs(P,P.charAt(0)=="/"?bs:gd,!0))),(P=this.i.toString())&&f.push("?",P),(P=this.m)&&f.push("#",xs(P,Ca)),f.join("")};function ei(f){return new kn(f)}function Ro(f,E,P){f.j=P?jo(E,!0):E,f.j&&(f.j=f.j.replace(/:$/,""))}function Ia(f,E){if(E){if(E=Number(E),isNaN(E)||0>E)throw Error("Bad port number "+E);f.s=E}else f.s=null}function hu(f,E,P){E instanceof Zs?(f.i=E,yd(f.i,f.h)):(P||(E=xs(E,ka)),f.i=new Zs(E,f.h))}function Qt(f,E,P){f.i.set(E,P)}function Do(f){return Qt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function jo(f,E){return f?E?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function xs(f,E,P){return typeof f=="string"?(f=encodeURI(f).replace(E,md),P&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function md(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var vc=/[#\/\?@]/g,gd=/[#\?:]/g,bs=/[#\?]/g,ka=/[#\?@]/g,Ca=/#/g;function Zs(f,E){this.h=this.g=null,this.i=f||null,this.j=!!E}function yn(f){f.g||(f.g=new Map,f.h=0,f.i&&Na(f.i,function(E,P){f.add(decodeURIComponent(E.replace(/\+/g," ")),P)}))}t=Zs.prototype,t.add=function(f,E){yn(this),this.i=null,f=eo(this,f);var P=this.g.get(f);return P||this.g.set(f,P=[]),P.push(E),this.h+=1,this};function wc(f,E){yn(f),E=eo(f,E),f.g.has(E)&&(f.i=null,f.h-=f.g.get(E).length,f.g.delete(E))}function du(f,E){return yn(f),E=eo(f,E),f.g.has(E)}t.forEach=function(f,E){yn(this),this.g.forEach(function(P,H){P.forEach(function(de){f.call(E,de,H,this)},this)},this)},t.na=function(){yn(this);const f=Array.from(this.g.values()),E=Array.from(this.g.keys()),P=[];for(let H=0;H<E.length;H++){const de=f[H];for(let we=0;we<de.length;we++)P.push(E[H])}return P},t.V=function(f){yn(this);let E=[];if(typeof f=="string")du(this,f)&&(E=E.concat(this.g.get(eo(this,f))));else{f=Array.from(this.g.values());for(let P=0;P<f.length;P++)E=E.concat(f[P])}return E},t.set=function(f,E){return yn(this),this.i=null,f=eo(this,f),du(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[E]),this.h+=1,this},t.get=function(f,E){return f?(f=this.V(f),0<f.length?String(f[0]):E):E};function vt(f,E,P){wc(f,E),0<P.length&&(f.i=null,f.g.set(eo(f,E),b(P)),f.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],E=Array.from(this.g.keys());for(var P=0;P<E.length;P++){var H=E[P];const we=encodeURIComponent(String(H)),je=this.V(H);for(H=0;H<je.length;H++){var de=we;je[H]!==""&&(de+="="+encodeURIComponent(String(je[H]))),f.push(de)}}return this.i=f.join("&")};function eo(f,E){return E=String(E),f.j&&(E=E.toLowerCase()),E}function yd(f,E){E&&!f.j&&(yn(f),f.i=null,f.g.forEach(function(P,H){var de=H.toLowerCase();H!=de&&(wc(this,H),vt(this,de,P))},f)),f.j=E}function Xi(f,E){const P=new Gn;if(a.Image){const H=new Image;H.onload=p(Li,P,"TestLoadImage: loaded",!0,E,H),H.onerror=p(Li,P,"TestLoadImage: error",!1,E,H),H.onabort=p(Li,P,"TestLoadImage: abort",!1,E,H),H.ontimeout=p(Li,P,"TestLoadImage: timeout",!1,E,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=f}else E(!1)}function xc(f,E){const P=new Gn,H=new AbortController,de=setTimeout(()=>{H.abort(),Li(P,"TestPingServer: timeout",!1,E)},1e4);fetch(f,{signal:H.signal}).then(we=>{clearTimeout(de),we.ok?Li(P,"TestPingServer: ok",!0,E):Li(P,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(de),Li(P,"TestPingServer: error",!1,E)})}function Li(f,E,P,H,de){try{de&&(de.onload=null,de.onerror=null,de.onabort=null,de.ontimeout=null),H(P)}catch{}}function Pa(){this.g=new nr}function fu(f,E,P){const H=P||"";try{yc(f,function(de,we){let je=de;u(de)&&(je=Dt(de)),E.push(H+we+"="+encodeURIComponent(je))})}catch(de){throw E.push(H+"type="+encodeURIComponent("_badmap")),de}}function La(f){this.l=f.Ub||null,this.j=f.eb||!1}_(La,Et),La.prototype.g=function(){return new Ra(this.l,this.j)},La.prototype.i=function(f){return function(){return f}}({});function Ra(f,E){me.call(this),this.D=f,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Ra,me),t=Ra.prototype,t.open=function(f,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=E,this.readyState=1,Ri(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const E={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(E.body=f),(this.D||a).fetch(new Request(this.A,E)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_s(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bc(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function bc(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var E=f.value?f.value:new Uint8Array(0);(E=this.v.decode(E,{stream:!f.done}))&&(this.response=this.responseText+=E)}f.done?_s(this):Ri(this),this.readyState==3&&bc(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,_s(this))},t.Qa=function(f){this.g&&(this.response=f,_s(this))},t.ga=function(){this.g&&_s(this)};function _s(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Ri(f)}t.setRequestHeader=function(f,E){this.u.append(f,E)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],E=this.h.entries();for(var P=E.next();!P.done;)P=P.value,f.push(P[0]+": "+P[1]),P=E.next();return f.join(`\r
`)};function Ri(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ss(f){let E="";return q(f,function(P,H){E+=H,E+=":",E+=P,E+=`\r
`}),E}function pu(f,E,P){e:{for(H in P){var H=!1;break e}H=!0}H||(P=Ss(P),typeof f=="string"?P!=null&&encodeURIComponent(String(P)):Qt(f,E,P))}function Gt(f){me.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Gt,me);var mu=/^https?$/i,Da=["POST","PUT"];t=Gt.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,E,P,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);E=E?E.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jr.g(),this.v=this.o?Gs(this.o):Gs(Jr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(E,String(f),!0),this.B=!1}catch(we){gu(this,we);return}if(f=P||"",P=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var de in H)P.set(de,H[de]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const we of H.keys())P.set(we,H.get(we));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(P.keys()).find(we=>we.toLowerCase()=="content-type"),de=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Da,E,void 0))||H||de||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,je]of P)this.g.setRequestHeader(we,je);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Di(this),this.u=!0,this.g.send(f),this.u=!1}catch(we){gu(this,we)}};function gu(f,E){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=E,f.m=5,yu(f),Oo(f)}function yu(f){f.A||(f.A=!0,Te(f,"complete"),Te(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Te(this,"complete"),Te(this,"abort"),Oo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oo(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vu(this):this.bb())},t.bb=function(){vu(this)};function vu(f){if(f.h&&typeof o<"u"&&(!f.v[1]||rr(f)!=4||f.Z()!=2)){if(f.u&&rr(f)==4)Ue(f.Ea,0,f);else if(Te(f,"readystatechange"),rr(f)==4){f.h=!1;try{const je=f.Z();e:switch(je){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var P;if(!(P=E)){var H;if(H=je===0){var de=String(f.D).match(di)[1]||null;!de&&a.self&&a.self.location&&(de=a.self.location.protocol.slice(0,-1)),H=!mu.test(de?de.toLowerCase():"")}P=H}if(P)Te(f,"complete"),Te(f,"success");else{f.m=6;try{var we=2<rr(f)?f.g.statusText:""}catch{we=""}f.l=we+" ["+f.Z()+"]",yu(f)}}finally{Oo(f)}}}}function Oo(f,E){if(f.g){Di(f);const P=f.g,H=f.v[0]?()=>{}:null;f.g=null,f.v=null,E||Te(f,"ready");try{P.onreadystatechange=H}catch{}}}function Di(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function rr(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var E=this.g.responseText;return f&&E.indexOf(f)==0&&(E=E.substring(f.length)),Pt(E)}};function _c(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function to(f){const E={};f=(f.g&&2<=rr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<f.length;H++){if(S(f[H]))continue;var P=I(f[H]);const de=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const we=E[de]||[];E[de]=we,we.push(P)}D(E,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(f,E,P){return P&&P.internalChannelParams&&P.internalChannelParams[f]||E}function ja(f){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yr("baseRetryDelayMs",5e3,f),this.cb=yr("retryDelaySeedMs",1e4,f),this.Wa=yr("forwardChannelMaxRetries",2,f),this.wa=yr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new ou(f&&f.concurrentRequestLimit),this.Da=new Pa,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ja.prototype,t.la=8,t.G=1,t.connect=function(f,E,P,H){tt(0),this.W=f,this.H=E||{},P&&H!==void 0&&(this.H.OSID=P,this.H.OAID=H),this.F=this.X,this.I=v(this,null,this.W),Ma(this)};function Es(f){if(Mo(f),f.G==3){var E=f.U++,P=ei(f.I);if(Qt(P,"SID",f.K),Qt(P,"RID",E),Qt(P,"TYPE","terminate"),no(f,P),E=new Dn(f,f.j,E),E.L=2,E.v=Do(ei(P)),P=!1,a.navigator&&a.navigator.sendBeacon)try{P=a.navigator.sendBeacon(E.v.toString(),"")}catch{}!P&&a.Image&&(new Image().src=E.v,P=!0),P||(E.g=V(E.j,null),E.g.ea(E.v)),E.F=Date.now(),Ta(E)}za(f)}function Oa(f){f.g&&(Ba(f),f.g.cancel(),f.g=null)}function Mo(f){Oa(f),f.u&&(a.clearTimeout(f.u),f.u=null),As(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Ma(f){if(!mc(f.h)&&!f.s){f.s=!0;var E=f.Ga;ue||z(),X||(ue(),X=!0),re.add(E,f),f.B=0}}function wu(f,E){return Lo(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=E.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Cr(m(f.Ga,f,E),Ua(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const de=new Dn(this,this.j,f);let we=this.o;if(this.S&&(we?(we=T(we),F(we,this.S)):we=this.S),this.m!==null||this.O||(de.H=we,we=null),this.P)e:{for(var E=0,P=0;P<this.i.length;P++){t:{var H=this.i[P];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(E+=H,4096<E){E=P;break e}if(E===4096||P===this.i.length-1){E=P+1;break e}}E=1e3}else E=1e3;E=Fo(this,de,E),P=ei(this.I),Qt(P,"RID",f),Qt(P,"CVER",22),this.D&&Qt(P,"X-HTTP-Session-Id",this.D),no(this,P),we&&(this.O?E="headers="+encodeURIComponent(String(Ss(we)))+"&"+E:this.m&&pu(P,this.m,we)),gn(this.h,de),this.Ua&&Qt(P,"TYPE","init"),this.P?(Qt(P,"$req",E),Qt(P,"SID","null"),de.T=!0,Qs(de,P,null)):Qs(de,P,E),this.G=2}}else this.G==3&&(f?Fa(this,f):this.i.length==0||mc(this.h)||Fa(this))};function Fa(f,E){var P;E?P=E.l:P=f.U++;const H=ei(f.I);Qt(H,"SID",f.K),Qt(H,"RID",P),Qt(H,"AID",f.T),no(f,H),f.m&&f.o&&pu(H,f.m,f.o),P=new Dn(f,f.j,P,f.B+1),f.m===null&&(P.H=f.o),E&&(f.i=E.D.concat(f.i)),E=Fo(f,P,1e3),P.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),gn(f.h,P),Qs(P,H,E)}function no(f,E){f.H&&q(f.H,function(P,H){Qt(E,H,P)}),f.l&&yc({},function(P,H){Qt(E,H,P)})}function Fo(f,E,P){P=Math.min(f.i.length,P);var H=f.l?m(f.l.Na,f.l,f):null;e:{var de=f.i;let we=-1;for(;;){const je=["count="+P];we==-1?0<P?(we=de[0].g,je.push("ofs="+we)):we=0:je.push("ofs="+we);let At=!0;for(let Ot=0;Ot<P;Ot++){let Tt=de[Ot].g;const Kt=de[Ot].map;if(Tt-=we,0>Tt)we=Math.max(0,de[Ot].g-100),At=!1;else try{fu(Kt,je,"req"+Tt+"_")}catch{H&&H(Kt)}}if(At){H=je.join("&");break e}}}return f=f.i.splice(0,P),E.D=f,H}function Va(f){if(!f.g&&!f.u){f.Y=1;var E=f.Fa;ue||z(),X||(ue(),X=!0),re.add(E,f),f.v=0}}function Vo(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Cr(m(f.Fa,f),Ua(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Sc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Cr(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,tt(10),Oa(this),Sc(this))};function Ba(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Sc(f){f.g=new Dn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var E=ei(f.qa);Qt(E,"RID","rpc"),Qt(E,"SID",f.K),Qt(E,"AID",f.T),Qt(E,"CI",f.F?"0":"1"),!f.F&&f.ja&&Qt(E,"TO",f.ja),Qt(E,"TYPE","xmlhttp"),no(f,E),f.m&&f.o&&pu(E,f.m,f.o),f.L&&(f.g.I=f.L);var P=f.g;f=f.ia,P.L=1,P.v=Do(ei(E)),P.m=null,P.P=!0,ko(P,f)}t.Za=function(){this.C!=null&&(this.C=null,Oa(this),Vo(this),tt(19))};function As(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function ro(f,E){var P=null;if(f.g==E){As(f),Ba(f),f.g=null;var H=2}else if(au(f.h,E))P=E.D,lu(f.h,E),H=1;else return;if(f.G!=0){if(E.o)if(H==1){P=E.m?E.m.length:0,E=Date.now()-E.F;var de=f.B;H=Qi(),Te(H,new ci(H,P)),Ma(f)}else Va(f);else if(de=E.s,de==3||de==0&&0<E.X||!(H==1&&wu(f,E)||H==2&&Vo(f)))switch(P&&0<P.length&&(E=f.h,E.i=E.i.concat(P)),de){case 1:Lr(f,5);break;case 4:Lr(f,10);break;case 3:Lr(f,6);break;default:Lr(f,2)}}}function Ua(f,E){let P=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(P*=2),P*E}function Lr(f,E){if(f.j.info("Error code "+E),E==2){var P=m(f.fb,f),H=f.Xa;const de=!H;H=new kn(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ro(H,"https"),Do(H),de?Xi(H.toString(),P):xc(H.toString(),P)}else tt(2);f.G=0,f.l&&f.l.sa(E),za(f),Mo(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),tt(2)):(this.j.info("Failed to ping google.com"),tt(1))};function za(f){if(f.G=0,f.ka=[],f.l){const E=uu(f.h);(E.length!=0||f.i.length!=0)&&(N(f.ka,E),N(f.ka,f.i),f.h.i.length=0,b(f.i),f.i.length=0),f.l.ra()}}function v(f,E,P){var H=P instanceof kn?ei(P):new kn(P);if(H.g!="")E&&(H.g=E+"."+H.g),Ia(H,H.s);else{var de=a.location;H=de.protocol,E=E?E+"."+de.hostname:de.hostname,de=+de.port;var we=new kn(null);H&&Ro(we,H),E&&(we.g=E),de&&Ia(we,de),P&&(we.l=P),H=we}return P=f.D,E=f.ya,P&&E&&Qt(H,P,E),Qt(H,"VER",f.la),no(f,H),H}function V(f,E,P){if(E&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return E=f.Ca&&!f.pa?new Gt(new La({eb:P})):new Gt(f.pa),E.Ha(f.J),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function J(){}t=J.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ie(){}ie.prototype.g=function(f,E){return new fe(f,E)};function fe(f,E){me.call(this),this.g=new ja(E),this.l=f,this.h=E&&E.messageUrlParams||null,f=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(f?f["X-WebChannel-Content-Type"]=E.messageContentType:f={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.va&&(f?f["X-WebChannel-Client-Profile"]=E.va:f={"X-WebChannel-Client-Profile":E.va}),this.g.S=f,(f=E&&E.Sb)&&!S(f)&&(this.g.m=f),this.v=E&&E.supportsCrossDomainXhr||!1,this.u=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!S(E)&&(this.g.D=E,f=this.h,f!==null&&E in f&&(f=this.h,E in f&&delete f[E])),this.j=new Ge(this)}_(fe,me),fe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fe.prototype.close=function(){Es(this.g)},fe.prototype.o=function(f){var E=this.g;if(typeof f=="string"){var P={};P.__data__=f,f=P}else this.u&&(P={},P.__data__=Dt(f),f=P);E.i.push(new pd(E.Ya++,f)),E.G==3&&Ma(E)},fe.prototype.N=function(){this.g.l=null,delete this.j,Es(this.g),delete this.g,fe.aa.N.call(this)};function Ee(f){ki.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var E=f.__sm__;if(E){e:{for(const P in E){f=P;break e}f=void 0}(this.i=f)&&(f=this.i,E=E!==null&&f in E?E[f]:void 0),this.data=E}else this.data=f}_(Ee,ki);function Re(){un.call(this),this.status=1}_(Re,un);function Ge(f){this.g=f}_(Ge,J),Ge.prototype.ua=function(){Te(this.g,"a")},Ge.prototype.ta=function(f){Te(this.g,new Ee(f))},Ge.prototype.sa=function(f){Te(this.g,new Re)},Ge.prototype.ra=function(){Te(this.g,"b")},ie.prototype.createWebChannel=ie.prototype.g,fe.prototype.send=fe.prototype.o,fe.prototype.open=fe.prototype.m,fe.prototype.close=fe.prototype.close,aP=function(){return new ie},oP=function(){return Qi()},sP=ut,U2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,ug=Pr,hi.COMPLETE="complete",iP=hi,mn.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",me.prototype.listen=me.prototype.K,nf=mn,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,rP=Gt}).apply(typeof Pm<"u"?Pm:typeof self<"u"?self:typeof window<"u"?window:{});const _E="@firebase/firestore",SE="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ur.UNAUTHENTICATED=new Ur(null),Ur.GOOGLE_CREDENTIALS=new Ur("google-credentials-uid"),Ur.FIRST_PARTY=new Ur("first-party-uid"),Ur.MOCK_USER=new Ur("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new ox("@firebase/firestore");function qc(){return ec.logLevel}function Ze(t,...e){if(ec.logLevel<=Ft.DEBUG){const n=e.map(xx);ec.debug(`Firestore (${od}): ${t}`,...n)}}function ya(t,...e){if(ec.logLevel<=Ft.ERROR){const n=e.map(xx);ec.error(`Firestore (${od}): ${t}`,...n)}}function zh(t,...e){if(ec.logLevel<=Ft.WARN){const n=e.map(xx);ec.warn(`Firestore (${od}): ${t}`,...n)}}function xx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,lP(t,r,n)}function lP(t,e,n){let r=`FIRESTORE (${od}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ya(r),new Error(r)}function Yt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||lP(e,i,r)}function It(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class et extends Sa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ur.UNAUTHENTICATED))}shutdown(){}}class yq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vq{constructor(e){this.t=e,this.currentUser=Ur.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Yt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new aa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new aa,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new aa)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Yt(typeof r.accessToken=="string",31837,{l:r}),new uP(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Yt(e===null||typeof e=="string",2055,{h:e}),new Ur(e)}}class wq{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ur.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xq{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new wq(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ur.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class EE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bq{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Yt(this.o===void 0,3512);const r=s=>{s.error!=null&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Ze("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new EE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new EE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _q(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_q(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Lt(t,e){return t<e?-1:t>e?1:0}function z2(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Lt(r,i);{const s=cP(),o=Sq(s.encode(AE(t,n)),s.encode(AE(e,n)));return o!==0?o:Lt(r,i)}}n+=r>65535?2:1}return Lt(t.length,e.length)}function AE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Sq(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Lt(t[n],e[n]);return Lt(t.length,e.length)}function qh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=-62135596800,NE=1e6;class lr{static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*NE);return new lr(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new et(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new et(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<TE)throw new et(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new et(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/NE}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-TE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{static fromTimestamp(e){return new _t(e)}static min(){return new _t(new lr(0,0))}static max(){return new _t(new lr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="__name__";class fo{constructor(e,n,r){n===void 0?n=0:n>e.length&&gt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&gt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=fo.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Lt(e.length,n.length)}static compareSegments(e,n){const r=fo.isNumericId(e),i=fo.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?fo.extractNumericId(e).compare(fo.extractNumericId(n)):z2(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ll.fromString(e.substring(4,e.length-2))}}class wn extends fo{construct(e,n,r){return new wn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new et(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new wn(n)}static emptyPath(){return new wn([])}}const Eq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ar extends fo{construct(e,n,r){return new Ar(e,n,r)}static isValidIdentifier(e){return Eq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ar.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===IE}static keyField(){return new Ar([IE])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new et(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new et(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new et(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new et(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ar(n)}static emptyPath(){return new Ar([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.path=e}static fromPath(e){return new lt(wn.fromString(e))}static fromName(e){return new lt(wn.fromString(e).popFirst(5))}static empty(){return new lt(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new wn(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=-1;function Aq(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=_t.fromTimestamp(r===1e9?new lr(n+1,0):new lr(n,r));return new Bl(i,lt.empty(),e)}function Tq(t){return new Bl(t.readTime,t.key,np)}class Bl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bl(_t.min(),lt.empty(),np)}static max(){return new Bl(_t.max(),lt.empty(),np)}}function Nq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=lt.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kq{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(t){if(t.code!==Ce.FAILED_PRECONDITION||t.message!==Iq)throw t;Ze("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&gt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Pe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Pe?n:Pe.resolve(n)}catch(n){return Pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Pe.reject(n)}static resolve(e){return new Pe((n,r)=>{n(e)})}static reject(e){return new Pe((n,r)=>{r(e)})}static waitFor(e){return new Pe((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Pe.resolve(!1);for(const r of e)n=n.next(i=>i?Pe.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Pe((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new Pe((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Cq(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ld(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}s1.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=-1;function o1(t){return t==null}function c0(t){return t===0&&1/t==-1/0}function Pq(t){return typeof t=="number"&&Number.isInteger(t)&&!c0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="";function Lq(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kE(e)),e=Rq(t.get(n),e);return kE(e)}function Rq(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case dP:n+="";break;default:n+=s}}return n}function kE(t){return t+dP+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ru(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e,n){this.comparator=e,this.root=n||Er.EMPTY}insert(e,n){return new Nn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Er.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Er.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lm(this.root,e,this.comparator,!0)}}class Lm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Er{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Er.RED,this.left=i??Er.EMPTY,this.right=s??Er.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Er(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Er.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Er.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Er.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Er.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw gt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw gt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw gt(27949);return e+(this.isRed()?0:1)}}Er.EMPTY=null,Er.RED=!0,Er.BLACK=!1;Er.EMPTY=new class{constructor(){this.size=0}get key(){throw gt(57766)}get value(){throw gt(16141)}get color(){throw gt(16727)}get left(){throw gt(29726)}get right(){throw gt(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Er(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ur)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ur(this.comparator);return n.data=e,n}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Ar.comparator)}static empty(){return new zi([])}unionWith(e){let n=new ur(Ar.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new pP("Invalid base64 string: "+s):s}}(e);return new Ir(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ir.EMPTY_BYTE_STRING=new Ir("");const Dq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(t){if(Yt(!!t,39018),typeof t=="string"){let e=0;const n=Dq.exec(t);if(Yt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fn(t.seconds),nanos:Fn(t.nanos)}}function Fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zl(t){return typeof t=="string"?Ir.fromBase64String(t):Ir.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="server_timestamp",gP="__type__",yP="__previous_value__",vP="__local_write_time__";function _x(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[gP])===null||n===void 0?void 0:n.stringValue)===mP}function a1(t){const e=t.mapValue.fields[yP];return _x(e)?a1(e):e}function rp(t){const e=Ul(t.mapValue.fields[vP].timestampValue);return new lr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const h0="(default)";class ip{constructor(e,n){this.projectId=e,this.database=n||h0}static empty(){return new ip("","")}get isDefaultDatabase(){return this.database===h0}isEqual(e){return e instanceof ip&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP="__type__",xP="__max__",Rm={mapValue:{fields:{__type__:{stringValue:xP}}}},bP="__vector__",d0="value";function ql(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_x(t)?4:Mq(t)?9007199254740991:Oq(t)?10:11:gt(28295,{value:t})}function To(t,e){if(t===e)return!0;const n=ql(t);if(n!==ql(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rp(t).isEqual(rp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ul(i.timestampValue),a=Ul(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zl(i.bytesValue).isEqual(zl(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fn(i.geoPointValue.latitude)===Fn(s.geoPointValue.latitude)&&Fn(i.geoPointValue.longitude)===Fn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fn(i.integerValue)===Fn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fn(i.doubleValue),a=Fn(s.doubleValue);return o===a?c0(o)===c0(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return qh(t.arrayValue.values||[],e.arrayValue.values||[],To);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CE(o)!==CE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!To(o[l],a[l])))return!1;return!0}(t,e);default:return gt(52216,{left:t})}}function sp(t,e){return(t.values||[]).find(n=>To(n,e))!==void 0}function $h(t,e){if(t===e)return 0;const n=ql(t),r=ql(e);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fn(s.integerValue||s.doubleValue),l=Fn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return LE(t.timestampValue,e.timestampValue);case 4:return LE(rp(t),rp(e));case 5:return z2(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zl(s),l=zl(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Lt(a[u],l[u]);if(c!==0)return c}return Lt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Lt(Fn(s.latitude),Fn(o.latitude));return a!==0?a:Lt(Fn(s.longitude),Fn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const h=s.fields||{},m=o.fields||{},p=(a=h[d0])===null||a===void 0?void 0:a.arrayValue,_=(l=m[d0])===null||l===void 0?void 0:l.arrayValue,b=Lt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0);return b!==0?b:RE(p,_)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Rm.mapValue&&o===Rm.mapValue)return 0;if(s===Rm.mapValue)return 1;if(o===Rm.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let h=0;h<l.length&&h<c.length;++h){const m=z2(l[h],c[h]);if(m!==0)return m;const p=$h(a[l[h]],u[c[h]]);if(p!==0)return p}return Lt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw gt(23264,{Pe:n})}}function LE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=Ul(t),r=Ul(e),i=Lt(n.seconds,r.seconds);return i!==0?i:Lt(n.nanos,r.nanos)}function RE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=$h(n[i],r[i]);if(s)return s}return Lt(n.length,r.length)}function Hh(t){return q2(t)}function q2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ul(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return lt.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=q2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${q2(n.fields[o])}`;return i+"}"}(t.mapValue):gt(61005,{value:t})}function cg(t){switch(ql(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=a1(t);return e?16+cg(e):16;case 5:return 2*t.stringValue.length;case 6:return zl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+cg(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ru(r.fields,(s,o)=>{i+=s.length+cg(o)}),i}(t.mapValue);default:throw gt(13486,{value:t})}}function DE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $2(t){return!!t&&"integerValue"in t}function Sx(t){return!!t&&"arrayValue"in t}function jE(t){return!!t&&"nullValue"in t}function OE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hg(t){return!!t&&"mapValue"in t}function Oq(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[wP])===null||n===void 0?void 0:n.stringValue)===bP}function bf(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ru(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=bf(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=bf(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Mq(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.value=e}static empty(){return new xi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=bf(n)}setAll(e){let n=Ar.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=bf(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return To(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ru(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xi(bf(this.value))}}function _P(t){const e=[];return ru(t.fields,(n,r)=>{const i=new Ar([n]);if(hg(r)){const s=_P(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new qr(e,0,_t.min(),_t.min(),_t.min(),xi.empty(),0)}static newFoundDocument(e,n,r,i){return new qr(e,1,n,_t.min(),r,i,0)}static newNoDocument(e,n){return new qr(e,2,n,_t.min(),_t.min(),xi.empty(),0)}static newUnknownDocument(e,n){return new qr(e,3,n,_t.min(),_t.min(),xi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_t.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_t.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n){this.position=e,this.inclusive=n}}function ME(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=lt.comparator(lt.fromName(o.referenceValue),n.key):r=$h(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function FE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!To(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{}class er extends SP{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Bq(e,n,r):n==="array-contains"?new qq(e,r):n==="in"?new $q(e,r):n==="not-in"?new Hq(e,r):n==="array-contains-any"?new Wq(e,r):new er(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uq(e,r):new zq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($h(n,this.value)):n!==null&&ql(this.value)===ql(n)&&this.matchesComparison($h(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return gt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qs extends SP{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new qs(e,n)}matches(e){return EP(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function EP(t){return t.op==="and"}function AP(t){return Vq(t)&&EP(t)}function Vq(t){for(const e of t.filters)if(e instanceof qs)return!1;return!0}function H2(t){if(t instanceof er)return t.field.canonicalString()+t.op.toString()+Hh(t.value);if(AP(t))return t.filters.map(e=>H2(e)).join(",");{const e=t.filters.map(n=>H2(n)).join(",");return`${t.op}(${e})`}}function TP(t,e){return t instanceof er?function(r,i){return i instanceof er&&r.op===i.op&&r.field.isEqual(i.field)&&To(r.value,i.value)}(t,e):t instanceof qs?function(r,i){return i instanceof qs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TP(o,i.filters[a]),!0):!1}(t,e):void gt(19439)}function NP(t){return t instanceof er?function(n){return`${n.field.canonicalString()} ${n.op} ${Hh(n.value)}`}(t):t instanceof qs?function(n){return n.op.toString()+" {"+n.getFilters().map(NP).join(" ,")+"}"}(t):"Filter"}class Bq extends er{constructor(e,n,r){super(e,n,r),this.key=lt.fromName(r.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Uq extends er{constructor(e,n){super(e,"in",n),this.keys=IP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class zq extends er{constructor(e,n){super(e,"not-in",n),this.keys=IP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>lt.fromName(r.referenceValue))}class qq extends er{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sx(n)&&sp(n.arrayValue,this.value)}}class $q extends er{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sp(this.value.arrayValue,n)}}class Hq extends er{constructor(e,n){super(e,"not-in",n)}matches(e){if(sp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sp(this.value.arrayValue,n)}}class Wq extends er{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Ie=null}}function VE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gq(t,e,n,r,i,s,o)}function Ex(t){const e=It(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>H2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),o1(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hh(r)).join(",")),e.Ie=n}return e.Ie}function Ax(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Fq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FE(t.startAt,e.startAt)&&FE(t.endAt,e.endAt)}function W2(t){return lt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Kq(t,e,n,r,i,s,o,a){return new ud(t,e,n,r,i,s,o,a)}function l1(t){return new ud(t)}function BE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function kP(t){return t.collectionGroup!==null}function _f(t){const e=It(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ee.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ur(Ar.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ee.push(new op(s,r))}),n.has(Ar.keyField().canonicalString())||e.Ee.push(new op(Ar.keyField(),r))}return e.Ee}function So(t){const e=It(t);return e.de||(e.de=Yq(e,_f(t))),e.de}function Yq(t,e){if(t.limitType==="F")return VE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new op(i.field,s)});const n=t.endAt?new f0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new f0(t.startAt.position,t.startAt.inclusive):null;return VE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function G2(t,e){const n=t.filters.concat([e]);return new ud(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function p0(t,e,n){return new ud(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function u1(t,e){return Ax(So(t),So(e))&&t.limitType===e.limitType}function CP(t){return`${Ex(So(t))}|lt:${t.limitType}`}function $c(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>NP(i)).join(", ")}]`),o1(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Hh(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Hh(i)).join(",")),`Target(${r})`}(So(t))}; limitType=${t.limitType})`}function c1(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):lt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _f(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,_f(r),i)||r.endAt&&!function(o,a,l){const u=ME(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,_f(r),i))}(t,e)}function Qq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PP(t){return(e,n)=>{let r=!1;for(const i of _f(t)){const s=Xq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Xq(t,e,n){const r=t.field.isKeyField()?lt.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?$h(l,u):gt(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return gt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return fP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=new Nn(lt.comparator);function va(){return Jq}const LP=new Nn(lt.comparator);function rf(...t){let e=LP;for(const n of t)e=e.insert(n.key,n);return e}function RP(t){let e=LP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Uu(){return Sf()}function DP(){return Sf()}function Sf(){return new lc(t=>t.toString(),(t,e)=>t.isEqual(e))}const Zq=new Nn(lt.comparator),e$=new ur(lt.comparator);function Vt(...t){let e=e$;for(const n of t)e=e.add(n);return e}const t$=new ur(Lt);function n$(){return t$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:c0(e)?"-0":e}}function jP(t){return{integerValue:""+t}}function OP(t,e){return Pq(e)?jP(e):Tx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this._=void 0}}function r$(t,e,n){return t instanceof m0?function(i,s){const o={fields:{[gP]:{stringValue:mP},[vP]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_x(s)&&(s=a1(s)),s&&(o.fields[yP]=s),{mapValue:o}}(n,e):t instanceof Wh?FP(t,e):t instanceof Gh?VP(t,e):function(i,s){const o=MP(i,s),a=UE(o)+UE(i.Re);return $2(o)&&$2(i.Re)?jP(a):Tx(i.serializer,a)}(t,e)}function i$(t,e,n){return t instanceof Wh?FP(t,e):t instanceof Gh?VP(t,e):n}function MP(t,e){return t instanceof ap?function(r){return $2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class m0 extends h1{}class Wh extends h1{constructor(e){super(),this.elements=e}}function FP(t,e){const n=BP(e);for(const r of t.elements)n.some(i=>To(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gh extends h1{constructor(e){super(),this.elements=e}}function VP(t,e){let n=BP(e);for(const r of t.elements)n=n.filter(i=>!To(i,r));return{arrayValue:{values:n}}}class ap extends h1{constructor(e,n){super(),this.serializer=e,this.Re=n}}function UE(t){return Fn(t.integerValue||t.doubleValue)}function BP(t){return Sx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.field=e,this.transform=n}}function s$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wh&&i instanceof Wh||r instanceof Gh&&i instanceof Gh?qh(r.elements,i.elements,To):r instanceof ap&&i instanceof ap?To(r.Re,i.Re):r instanceof m0&&i instanceof m0}(t.transform,e.transform)}class o${constructor(e,n){this.version=e,this.transformResults=n}}class ps{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ps}static exists(e){return new ps(void 0,e)}static updateTime(e){return new ps(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class d1{}function UP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ix(t.key,ps.none()):new Lp(t.key,t.data,ps.none());{const n=t.data,r=xi.empty();let i=new ur(Ar.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new iu(t.key,r,new zi(i.toArray()),ps.none())}}function a$(t,e,n){t instanceof Lp?function(i,s,o){const a=i.value.clone(),l=qE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof iu?function(i,s,o){if(!dg(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(zP(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ef(t,e,n,r){return t instanceof Lp?function(s,o,a,l){if(!dg(s.precondition,o))return a;const u=s.value.clone(),c=$E(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof iu?function(s,o,a,l){if(!dg(s.precondition,o))return a;const u=$E(s.fieldTransforms,l,o),c=o.data;return c.setAll(zP(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return dg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l$(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=MP(r.transform,i||null);s!=null&&(n===null&&(n=xi.empty()),n.set(r.field,s))}return n||null}function zE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qh(r,i,(s,o)=>s$(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lp extends d1{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class iu extends d1{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qE(t,e,n){const r=new Map;Yt(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i$(o,a,n[i]))}return r}function $E(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,r$(s,o,e))}return r}class Ix extends d1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u$ extends d1{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&a$(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ef(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DP();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=UP(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(_t.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vt())}isEqual(e){return this.batchId===e.batchId&&qh(this.mutations,e.mutations,(n,r)=>zE(n,r))&&qh(this.baseMutations,e.baseMutations,(n,r)=>zE(n,r))}}class kx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Yt(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return Zq}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new kx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn,Bt;function f$(t){switch(t){case Ce.OK:return gt(64938);case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0;default:return gt(15467,{code:t})}}function qP(t){if(t===void 0)return ya("GRPC error has no .code"),Ce.UNKNOWN;switch(t){case Xn.OK:return Ce.OK;case Xn.CANCELLED:return Ce.CANCELLED;case Xn.UNKNOWN:return Ce.UNKNOWN;case Xn.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case Xn.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case Xn.INTERNAL:return Ce.INTERNAL;case Xn.UNAVAILABLE:return Ce.UNAVAILABLE;case Xn.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case Xn.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case Xn.NOT_FOUND:return Ce.NOT_FOUND;case Xn.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case Xn.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case Xn.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case Xn.ABORTED:return Ce.ABORTED;case Xn.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case Xn.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case Xn.DATA_LOSS:return Ce.DATA_LOSS;default:return gt(39323,{code:t})}}(Bt=Xn||(Xn={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=new Ll([4294967295,4294967295],0);function HE(t){const e=cP().encode(t),n=new nP;return n.update(e),new Uint8Array(n.digest())}function WE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ll([n,r],0),new Ll([i,s],0)]}class Cx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new sf(`Invalid padding: ${n}`);if(r<0)throw new sf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sf(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new sf(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Ll.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(Ll.fromNumber(r)));return i.compare(p$)===1&&(i=new Ll([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=HE(e),[r,i]=WE(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);if(!this.Se(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Cx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=HE(e),[r,i]=WE(n);for(let s=0;s<this.hashCount;s++){const o=this.we(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class sf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new f1(_t.min(),i,new Nn(Lt),va(),Vt())}}class Rp{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rp(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}}class $P{constructor(e,n){this.targetId=e,this.Ce=n}}class HP{constructor(e,n,r=Ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class GE{constructor(){this.Fe=0,this.Me=KE(),this.xe=Ir.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Vt(),n=Vt(),r=Vt();return this.Me.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:gt(38017,{changeType:s})}}),new Rp(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=KE()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Yt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class m${constructor(e){this.ze=e,this.je=new Map,this.He=va(),this.Je=Dm(),this.Ye=Dm(),this.Ze=new Nn(Lt)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:gt(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){const n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){const s=i.target;if(W2(s))if(r===0){const o=new lt(s.path);this.tt(n,o,qr.newNoDocument(o,_t.min()))}else Yt(r===1,20013,{expectedCount:r});else{const o=this.ut(n);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=zl(r).toUint8Array()}catch(l){if(l instanceof pP)return zh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cx(o,i,s)}catch(l){return zh(l instanceof sf?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,s,null),i++)}),i}It(e){const n=new Map;this.je.forEach((s,o)=>{const a=this._t(o);if(a){if(s.current&&W2(a.target)){const l=new lt(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,qr.newNoDocument(l,e))}s.Le&&(n.set(o,s.qe()),s.Qe())}});let r=Vt();this.Ye.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this._t(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.He.forEach((s,o)=>o.setReadTime(e));const i=new f1(e,n,this.Ze,this.He,r);return this.He=va(),this.Je=Dm(),this.Ye=Dm(),this.Ze=new Nn(Lt),i}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new GE,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new ur(Lt),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new ur(Lt),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Ze("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new GE),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Dm(){return new Nn(lt.comparator)}function KE(){return new Nn(lt.comparator)}const g$={asc:"ASCENDING",desc:"DESCENDING"},y$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v$={and:"AND",or:"OR"};class w${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K2(t,e){return t.useProto3Json||o1(e)?e:{value:e}}function g0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function x$(t,e){return g0(t,e.toTimestamp())}function Eo(t){return Yt(!!t,49232),_t.fromTimestamp(function(n){const r=Ul(n);return new lr(r.seconds,r.nanos)}(t))}function Px(t,e){return Y2(t,e).canonicalString()}function Y2(t,e){const n=function(i){return new wn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GP(t){const e=wn.fromString(t);return Yt(JP(e),10190,{key:e.toString()}),e}function Q2(t,e){return Px(t.databaseId,e.path)}function Gy(t,e){const n=GP(e);if(n.get(1)!==t.databaseId.projectId)throw new et(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new et(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new lt(YP(n))}function KP(t,e){return Px(t.databaseId,e)}function b$(t){const e=GP(t);return e.length===4?wn.emptyPath():YP(e)}function X2(t){return new wn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YP(t){return Yt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function YE(t,e,n){return{name:Q2(t,e),fields:n.value.mapValue.fields}}function _$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:gt(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Yt(c===void 0||typeof c=="string",58123),Ir.fromBase64String(c||"")):(Yt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ir.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ce.UNKNOWN:qP(u.code);return new et(c,u.message||"")}(o);n=new HP(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gy(t,r.document.name),s=Eo(r.document.updateTime),o=r.document.createTime?Eo(r.document.createTime):_t.min(),a=new xi({mapValue:{fields:r.document.fields}}),l=qr.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new fg(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Gy(t,r.document),s=r.readTime?Eo(r.readTime):_t.min(),o=qr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fg([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Gy(t,r.document),s=r.removedTargetIds||[];n=new fg([],s,i,null)}else{if(!("filter"in e))return gt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new d$(i,s),a=r.targetId;n=new $P(a,o)}}return n}function S$(t,e){let n;if(e instanceof Lp)n={update:YE(t,e.key,e.value)};else if(e instanceof Ix)n={delete:Q2(t,e.key)};else if(e instanceof iu)n={update:YE(t,e.key,e.data),updateMask:L$(e.fieldMask)};else{if(!(e instanceof u$))return gt(16599,{ft:e.type});n={verify:Q2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof m0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ap)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw gt(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:x$(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:gt(27497)}(t,e.precondition)),n}function E$(t,e){return t&&t.length>0?(Yt(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Eo(i.updateTime):Eo(s);return o.isEqual(_t.min())&&(o=Eo(s)),new o$(o,i.transformResults||[])}(n,e))):[]}function A$(t,e){return{documents:[KP(t,e.path)]}}function T$(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KP(t,i);const s=function(u){if(u.length!==0)return XP(qs.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(m){return{field:Hc(m.field),direction:k$(m.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=K2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:n,parent:i}}function N$(t){let e=b$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yt(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(h){const m=QP(h);return m instanceof qs&&AP(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(m=>function(_){return new op(Wc(_.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,o1(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(h){const m=!!h.before,p=h.values||[];return new f0(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,p=h.values||[];return new f0(p,m)}(n.endAt)),Kq(e,i,o,s,a,"F",l,u)}function I$(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Wc(n.unaryFilter.field);return er.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Wc(n.unaryFilter.field);return er.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Wc(n.unaryFilter.field);return er.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wc(n.unaryFilter.field);return er.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return gt(61313);default:return gt(60726)}}(t):t.fieldFilter!==void 0?function(n){return er.create(Wc(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return gt(58110);default:return gt(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qs.create(n.compositeFilter.filters.map(r=>QP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return gt(1026)}}(n.compositeFilter.op))}(t):gt(30097,{filter:t})}function k$(t){return g$[t]}function C$(t){return y$[t]}function P$(t){return v$[t]}function Hc(t){return{fieldPath:t.canonicalString()}}function Wc(t){return Ar.fromServerFormat(t.fieldPath)}function XP(t){return t instanceof er?function(n){if(n.op==="=="){if(OE(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NAN"}};if(jE(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OE(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NAN"}};if(jE(n.value))return{unaryFilter:{field:Hc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hc(n.field),op:C$(n.op),value:n.value}}}(t):t instanceof qs?function(n){const r=n.getFilters().map(i=>XP(i));return r.length===1?r[0]:{compositeFilter:{op:P$(n.op),filters:r}}}(t):gt(54877,{filter:t})}function L$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r,i,s=_t.min(),o=_t.min(),a=Ir.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e){this.wt=e}}function D$(t){const e=N$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?p0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${constructor(){this.Cn=new O$}addToCollectionParentIndex(e,n){return this.Cn.add(n),Pe.resolve()}getCollectionParents(e,n){return Pe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Pe.resolve()}deleteFieldIndex(e,n){return Pe.resolve()}deleteAllFieldIndexes(e){return Pe.resolve()}createTargetIndexes(e,n){return Pe.resolve()}getDocumentsMatchingTarget(e,n){return Pe.resolve(null)}getIndexType(e,n){return Pe.resolve(0)}getFieldIndexes(e,n){return Pe.resolve([])}getNextCollectionGroupToUpdate(e){return Pe.resolve(null)}getMinOffset(e,n){return Pe.resolve(Bl.min())}getMinOffsetFromCollectionGroup(e,n){return Pe.resolve(Bl.min())}updateCollectionGroup(e,n,r){return Pe.resolve()}updateIndexEntries(e,n){return Pe.resolve()}}class O${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ur(wn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ur(wn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZP=41943040;class vi{static withCacheSize(e){return new vi(e,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi.DEFAULT_COLLECTION_PERCENTILE=10,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vi.DEFAULT=new vi(ZP,vi.DEFAULT_COLLECTION_PERCENTILE,vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vi.DISABLED=new vi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Kh(0)}static lr(){return new Kh(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="LruGarbageCollector",M$=1048576;function JE([t,e],[n,r]){const i=Lt(t,n);return i===0?Lt(e,r):i}class F${constructor(e){this.Er=e,this.buffer=new ur(JE),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();JE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Ze(XE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ld(n)?Ze(XE,"Ignoring IndexedDB error during garbage collection: ",n):await ad(n)}await this.mr(3e5)})}}class B${constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Pe.resolve(s1.le);const r=new F$(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),Pe.resolve(QE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QE):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),qc()<=Ft.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),Pe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function U$(t,e){return new B$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.changes=new lc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ef(r.mutation,i,zi.empty(),lr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Vt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Vt()){const i=Uu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=rf();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Uu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Vt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=va();const o=Sf(),a=function(){return Sf()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof iu)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ef(c.mutation,u,c.mutation.getFieldMask(),lr.now())):o.set(u.key,zi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new q$(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Sf();let i=new Nn((o,a)=>o-a),s=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||zi.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(i.get(a.batchId)||Vt()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=DP();c.forEach(m=>{if(!s.has(m)){const p=UP(n.get(m),r.get(m));p!==null&&h.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Pe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return lt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Pe.resolve(Uu());let a=np,l=s;return o.next(u=>Pe.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(c)?Pe.resolve():this.remoteDocumentCache.getEntry(e,c).next(m=>{l=l.insert(c,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Vt())).next(c=>({batchId:a,changes:RP(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(r=>{let i=rf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=rf();return this.indexManager.getCollectionParents(e,s).next(a=>Pe.forEach(a,l=>{const u=function(h,m){return new ud(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,qr.newInvalidDocument(c)))});let a=rf();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Ef(c.mutation,u,zi.empty(),lr.now()),c1(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Pe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Eo(i.createTime)}}(n)),Pe.resolve()}getNamedQuery(e,n){return Pe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:D$(i.bundledQuery),readTime:Eo(i.readTime)}}(n)),Pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this.overlays=new Nn(lt.comparator),this.Qr=new Map}getOverlay(e,n){return Pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Uu();return Pe.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),Pe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Qr.delete(r)),Pe.resolve()}getOverlaysForCollection(e,n,r){const i=Uu(),s=n.length+1,o=new lt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Pe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Nn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Uu(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Uu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return Pe.resolve(a)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new h$(n,r));let s=this.Qr.get(n);s===void 0&&(s=Vt(),this.Qr.set(n,s)),this.Qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(){this.sessionToken=Ir.EMPTY_BYTE_STRING}getSessionToken(e){return Pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.$r=new ur(dr.Ur),this.Kr=new ur(dr.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new dr(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new dr(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new lt(new wn([])),r=new dr(n,e),i=new dr(n,e+1),s=[];return this.Kr.forEachInRange([r,i],o=>{this.zr(o),s.push(o.key)}),s}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new lt(new wn([])),r=new dr(n,e),i=new dr(n,e+1);let s=Vt();return this.Kr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new dr(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dr{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return lt.comparator(e.key,n.key)||Lt(e.Zr,n.Zr)}static Wr(e,n){return Lt(e.Zr,n.Zr)||lt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new ur(dr.Ur)}checkEmpty(e){return Pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new c$(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Xr=this.Xr.add(new dr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Pe.resolve(o)}lookupMutationBatch(e,n){return Pe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ti(r),s=i<0?0:i;return Pe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Pe.resolve(this.mutationQueue.length===0?bx:this.nr-1)}getAllMutationBatches(e){return Pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dr(n,0),i=new dr(n,Number.POSITIVE_INFINITY),s=[];return this.Xr.forEachInRange([r,i],o=>{const a=this.ei(o.Zr);s.push(a)}),Pe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ur(Lt);return n.forEach(i=>{const s=new dr(i,0),o=new dr(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([s,o],a=>{r=r.add(a.Zr)})}),Pe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const o=new dr(new lt(s),0);let a=new ur(Lt);return this.Xr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Zr)),!0)},o),Pe.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Yt(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return Pe.forEach(n.mutations,i=>{const s=new dr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new dr(n,0),i=this.Xr.firstAfterOrEqual(r);return Pe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Pe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(e){this.ii=e,this.docs=function(){return new Nn(lt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Pe.resolve(r?r.document.mutableCopy():qr.newInvalidDocument(n))}getEntries(e,n){let r=va();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qr.newInvalidDocument(i))}),Pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=va();const o=n.path,a=new lt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Nq(Tq(c),r)<=0||(i.has(c.key)||c1(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Pe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){gt(9500)}si(e,n){return Pe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Q$(this)}getSize(e){return Pe.resolve(this.size)}}class Q$ extends z${constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),Pe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e){this.persistence=e,this.oi=new lc(n=>Ex(n),Ax),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this._i=0,this.ai=new Lx,this.targetCount=0,this.ui=Kh.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),Pe.resolve()}getLastRemoteSnapshotVersion(e){return Pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Pe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),Pe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Kh(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Pe.resolve()}updateTargetData(e,n){return this.Tr(n),Pe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Pe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Pe.waitFor(s).next(()=>i)}getTargetCount(e){return Pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return Pe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),Pe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Pe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return Pe.resolve(r)}containsKey(e,n){return Pe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,n){this.ci={},this.overlays={},this.li=new s1(0),this.hi=!1,this.hi=!0,this.Pi=new G$,this.referenceDelegate=e(this),this.Ti=new X$(this),this.indexManager=new j$,this.remoteDocumentCache=function(i){return new Y$(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new R$(n),this.Ei=new H$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new K$(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Ze("MemoryPersistence","Starting transaction:",e);const i=new J$(this.li.next());return this.referenceDelegate.di(),r(i).next(s=>this.referenceDelegate.Ai(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ri(e,n){return Pe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class J$ extends kq{constructor(e){super(),this.currentSequenceNumber=e}}class Rx{constructor(e){this.persistence=e,this.Vi=new Lx,this.mi=null}static fi(e){return new Rx(e)}get gi(){if(this.mi)return this.mi;throw gt(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),Pe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),Pe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Pe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.gi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Pe.forEach(this.gi,r=>{const i=lt.fromPath(r);return this.pi(e,i).next(s=>{s||n.removeEntry(i,_t.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Pe.or([()=>Pe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class y0{constructor(e,n){this.persistence=e,this.yi=new lc(r=>Lq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=U$(this,n)}static fi(e,n){return new y0(e,n)}di(){}Ai(e){return Pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return Pe.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(s=>s?Pe.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.si(e,o=>this.Dr(e,o,n).next(a=>{a||(r++,s.removeEntry(o,_t.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Pe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),Pe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Pe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=cg(e.data.value)),n}Dr(e,n,r){return Pe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.yi.get(n);return Pe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=Vt(),i=Vt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Dx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return jV()?8:Cq(Qr())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ws(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Ss(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Z$;return this.bs(e,n,o).next(a=>{if(s.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>s.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(qc()<=Ft.DEBUG&&Ze("QueryEngine","SDK will not create cache indexes for query:",$c(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Pe.resolve()):(qc()<=Ft.DEBUG&&Ze("QueryEngine","Query:",$c(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(qc()<=Ft.DEBUG&&Ze("QueryEngine","The SDK decides to create cache indexes for query:",$c(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,So(n))):Pe.resolve())}ws(e,n){if(BE(n))return Pe.resolve(null);let r=So(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=p0(n,null,"F"),r=So(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Vt(...s);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.vs(n,a);return this.Cs(n,u,o,l.readTime)?this.ws(e,p0(n,null,"F")):this.Fs(e,u,n,l)}))})))}Ss(e,n,r,i){return BE(n)||i.isEqual(_t.min())?Pe.resolve(null):this.ys.getDocuments(e,r).next(s=>{const o=this.vs(n,s);return this.Cs(n,o,r,i)?Pe.resolve(null):(qc()<=Ft.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$c(n)),this.Fs(e,o,n,Aq(i,np)).next(a=>a))})}vs(e,n){let r=new ur(PP(e));return n.forEach((i,s)=>{c1(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}bs(e,n,r){return qc()<=Ft.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",$c(n)),this.ys.getDocumentsMatchingQuery(e,n,Bl.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="LocalStore",tH=3e8;class nH{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Nn(Lt),this.Os=new lc(s=>Ex(s),Ax),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $$(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function rH(t,e,n,r){return new nH(t,e,n,r)}async function t6(t,e){const n=It(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Vt();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:a}))})})}function iH(t,e){const n=It(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const h=u.batch,m=h.keys();let p=Pe.resolve();return m.forEach(_=>{p=p.next(()=>c.getEntry(l,_)).next(b=>{const N=u.docVersions.get(_);Yt(N!==null,48541),b.version.compareTo(N)<0&&(h.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),c.addEntry(b)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Vt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function n6(t){const e=It(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function sH(t,e){const n=It(t),r=e.snapshotVersion;let i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;const a=[];e.targetChanges.forEach((c,h)=>{const m=i.get(h);if(!m)return;a.push(n.Ti.removeMatchingKeys(s,c.removedDocuments,h).next(()=>n.Ti.addMatchingKeys(s,c.addedDocuments,h)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(Ir.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(h,p),function(b,N,w){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=tH?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,p,c)&&a.push(n.Ti.updateTargetData(s,p))});let l=va(),u=Vt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(oH(s,o,e.documentUpdates).next(c=>{l=c.qs,u=c.Qs})),!r.isEqual(_t.min())){const c=n.Ti.getLastRemoteSnapshotVersion(s).next(h=>n.Ti.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Pe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.xs=i,s))}function oH(t,e,n){let r=Vt(),i=Vt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=va();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(_t.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ze(jx,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{qs:o,Qs:i}})}function aH(t,e){const n=It(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lH(t,e){const n=It(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(s=>s?(i=s,Pe.resolve(i)):n.Ti.allocateTargetId(r).next(o=>(i=new vl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function J2(t,e,n){const r=It(t),i=r.xs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ld(o))throw o;Ze(jx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)}function ZE(t,e,n){const r=It(t);let i=_t.min(),s=Vt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const h=It(l),m=h.Os.get(c);return m!==void 0?Pe.resolve(h.xs.get(m)):h.Ti.getTargetData(u,c)}(r,o,So(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,n?i:_t.min(),n?s:Vt())).next(a=>(uH(r,Qq(e),a),{documents:a,$s:s})))}function uH(t,e,n){let r=t.Ns.get(e)||_t.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ns.set(e,r)}class eA{constructor(){this.activeTargetIds=n$()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cH{constructor(){this.xo=new eA,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new eA,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="ConnectivityMonitor";class nA{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Ze(tA,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Ze(tA,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jm=null;function Z2(){return jm===null?jm=function(){return 268435456+Math.round(2147483648*Math.random())}():jm++,"0x"+jm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="RestConnection",dH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fH{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===h0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,s){const o=Z2(),a=this.jo(e,n.toUriEncodedString());Ze(Ky,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,i,s);const{host:u}=new URL(a),c=Ap(u);return this.Jo(e,a,l,r,c).then(h=>(Ze(Ky,`Received RPC '${e}' ${o}: `,h),h),h=>{throw zh(Ky,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Yo(e,n,r,i,s,o){return this.zo(e,n,r,i,s)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+od}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}jo(e,n){const r=dH[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="WebChannelConnection";class mH extends fH{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Z2();return new Promise((a,l)=>{const u=new rP;u.setWithCredentials(!0),u.listenOnce(iP.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ug.NO_ERROR:const h=u.getResponseJson();Ze(jr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case ug.TIMEOUT:Ze(jr,`RPC '${e}' ${o} timed out`),l(new et(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case ug.HTTP_ERROR:const m=u.getStatus();if(Ze(jr,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const _=p==null?void 0:p.error;if(_&&_.status&&_.message){const b=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(S)>=0?S:Ce.UNKNOWN}(_.status);l(new et(b,_.message))}else l(new et(Ce.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new et(Ce.UNAVAILABLE,"Connection failed."));break;default:gt(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ze(jr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Ze(jr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=Z2(),s=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aP(),a=oP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ze(jr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const h=o.createWebChannel(c,l);let m=!1,p=!1;const _=new pH({Zo:N=>{p?Ze(jr,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(Ze(jr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Ze(jr,`RPC '${e}' stream ${i} sending:`,N),h.send(N))},Xo:()=>h.close()}),b=(N,w,S)=>{N.listen(w,A=>{try{S(A)}catch(O){setTimeout(()=>{throw O},0)}})};return b(h,nf.EventType.OPEN,()=>{p||(Ze(jr,`RPC '${e}' stream ${i} transport opened.`),_.__())}),b(h,nf.EventType.CLOSE,()=>{p||(p=!0,Ze(jr,`RPC '${e}' stream ${i} transport closed`),_.u_())}),b(h,nf.EventType.ERROR,N=>{p||(p=!0,zh(jr,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),_.u_(new et(Ce.UNAVAILABLE,"The operation could not be completed")))}),b(h,nf.EventType.MESSAGE,N=>{var w;if(!p){const S=N.data[0];Yt(!!S,16349);const A=S,O=(A==null?void 0:A.error)||((w=A[0])===null||w===void 0?void 0:w.error);if(O){Ze(jr,`RPC '${e}' stream ${i} received error:`,O);const K=O.status;let q=function(L){const F=Xn[L];if(F!==void 0)return qP(F)}(K),D=O.message;q===void 0&&(q=Ce.INTERNAL,D="Unknown error status: "+K+" with message "+O.message),p=!0,_.u_(new et(q,D)),h.close()}else Ze(jr,`RPC '${e}' stream ${i} received:`,S),_.c_(S)}}),b(a,sP.STAT_EVENT,N=>{N.stat===U2.PROXY?Ze(jr,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===U2.NOPROXY&&Ze(jr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.a_()},0),_}}function Yy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){return new w$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(e,n,r=1e3,i=1.5,s=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=i,this.d_=s,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="PersistentStream";class i6{constructor(e,n,r,i,s,o,a,l){this.xi=e,this.y_=r,this.w_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new r6(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(ya(n.toString()),ya("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{e(()=>{const i=new et(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return Ze(rA,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(Ze(rA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gH extends i6{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=_$(this.serializer,e),r=function(s){if(!("targetChange"in s))return _t.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?_t.min():o.readTime?Eo(o.readTime):_t.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=X2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=W2(l)?{documents:A$(s,l)}:{query:T$(s,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WP(s,o.resumeToken);const u=K2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(_t.min())>0){a.readTime=g0(s,o.snapshotVersion.toTimestamp());const u=K2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=I$(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=X2(this.serializer),n.removeTarget=e,this.L_(n)}}class yH extends i6{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return Yt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Yt(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Yt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=E$(e.writeResults,e.commitTime),r=Eo(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=X2(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>S$(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{}class wH extends vH{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new et(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.zo(e,Y2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new et(Ce.UNKNOWN,s.toString())})}Yo(e,n,r,i,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Y2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new et(Ce.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class xH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(ya(n),this.oa=!1):Ze("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="RemoteStore";class bH{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=s,this.Ea.No(o=>{r.enqueueAndForget(async()=>{uc(this)&&(Ze(tc,"Restarting streams for network reachability change."),await async function(l){const u=It(l);u.Ta.add(4),await Dp(u),u.da.set("Unknown"),u.Ta.delete(4),await m1(u)}(this))})}),this.da=new xH(r,i)}}async function m1(t){if(uc(t))for(const e of t.Ia)await e(!0)}async function Dp(t){for(const e of t.Ia)await e(!1)}function s6(t,e){const n=It(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Vx(n)?Fx(n):cd(n).M_()&&Mx(n,e))}function Ox(t,e){const n=It(t),r=cd(n);n.Pa.delete(e),r.M_()&&o6(n,e),n.Pa.size===0&&(r.M_()?r.N_():uc(n)&&n.da.set("Unknown"))}function Mx(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_t.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}cd(t).H_(e)}function o6(t,e){t.Aa.Ke(e),cd(t).J_(e)}function Fx(t){t.Aa=new m$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),cd(t).start(),t.da._a()}function Vx(t){return uc(t)&&!cd(t).F_()&&t.Pa.size>0}function uc(t){return It(t).Ta.size===0}function a6(t){t.Aa=void 0}async function _H(t){t.da.set("Online")}async function SH(t){t.Pa.forEach((e,n)=>{Mx(t,e)})}async function EH(t,e){a6(t),Vx(t)?(t.da.ca(e),Fx(t)):t.da.set("Unknown")}async function AH(t,e,n){if(t.da.set("Online"),e instanceof HP&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Pa.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Pa.delete(a),i.Aa.removeTarget(a))}(t,e)}catch(r){Ze(tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await v0(t,r)}else if(e instanceof fg?t.Aa.Xe(e):e instanceof $P?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(_t.min()))try{const r=await n6(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Aa.It(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Pa.get(u);c&&s.Pa.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.Pa.get(l);if(!c)return;s.Pa.set(l,c.withResumeToken(Ir.EMPTY_BYTE_STRING,c.snapshotVersion)),o6(s,l);const h=new vl(c.target,l,u,c.sequenceNumber);Mx(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ze(tc,"Failed to raise snapshot:",r),await v0(t,r)}}async function v0(t,e,n){if(!ld(e))throw e;t.Ta.add(1),await Dp(t),t.da.set("Offline"),n||(n=()=>n6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ze(tc,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await m1(t)})}function l6(t,e){return e().catch(n=>v0(t,n,e))}async function g1(t){const e=It(t),n=$l(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:bx;for(;TH(e);)try{const i=await aH(e.localStore,r);if(i===null){e.ha.length===0&&n.N_();break}r=i.batchId,NH(e,i)}catch(i){await v0(e,i)}u6(e)&&c6(e)}function TH(t){return uc(t)&&t.ha.length<10}function NH(t,e){t.ha.push(e);const n=$l(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function u6(t){return uc(t)&&!$l(t).F_()&&t.ha.length>0}function c6(t){$l(t).start()}async function IH(t){$l(t).ta()}async function kH(t){const e=$l(t);for(const n of t.ha)e.Z_(n.mutations)}async function CH(t,e,n){const r=t.ha.shift(),i=kx.from(r,e,n);await l6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await g1(t)}async function PH(t,e){e&&$l(t).Y_&&await async function(r,i){if(function(o){return f$(o)&&o!==Ce.ABORTED}(i.code)){const s=r.ha.shift();$l(r).O_(),await l6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await g1(r)}}(t,e),u6(t)&&c6(t)}async function iA(t,e){const n=It(t);n.asyncQueue.verifyOperationInProgress(),Ze(tc,"RemoteStore received new credentials");const r=uc(n);n.Ta.add(3),await Dp(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await m1(n)}async function LH(t,e){const n=It(t);e?(n.Ta.delete(2),await m1(n)):e||(n.Ta.add(2),await Dp(n),n.da.set("Unknown"))}function cd(t){return t.Ra||(t.Ra=function(n,r,i){const s=It(n);return s.ra(),new gH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:_H.bind(null,t),n_:SH.bind(null,t),i_:EH.bind(null,t),j_:AH.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),Vx(t)?Fx(t):t.da.set("Unknown")):(await t.Ra.stop(),a6(t))})),t.Ra}function $l(t){return t.Va||(t.Va=function(n,r,i){const s=It(n);return s.ra(),new yH(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:IH.bind(null,t),i_:PH.bind(null,t),X_:kH.bind(null,t),ea:CH.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await g1(t)):(await t.Va.stop(),t.ha.length>0&&(Ze(tc,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new aa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Bx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new et(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ux(t,e){if(ya("AsyncQueue",`${e}: ${t}`),ld(t))return new et(Ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{static emptySet(e){return new Sh(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||lt.comparator(n.key,r.key):(n,r)=>lt.comparator(n.key,r.key),this.keyedMap=rf(),this.sortedSet=new Nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sh)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Sh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.ma=new Nn(lt.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):gt(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class Yh{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yh(e,n,Sh.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&u1(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class DH{constructor(){this.queries=oA(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const i=It(n),s=i.queries;i.queries=oA(),s.forEach((o,a)=>{for(const l of a.ya)l.onError(r)})})(this,new et(Ce.ABORTED,"Firestore shutting down"))}}function oA(){return new lc(t=>CP(t),u1)}async function zx(t,e){const n=It(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.wa()&&e.Sa()&&(r=2):(s=new RH,r=e.Sa()?0:1);try{switch(r){case 0:s.pa=await n.onListen(i,!0);break;case 1:s.pa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ux(o,`Initialization of query '${$c(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.ya.push(e),e.Da(n.onlineState),s.pa&&e.va(s.pa)&&$x(n)}async function qx(t,e){const n=It(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ya.indexOf(e);o>=0&&(s.ya.splice(o,1),s.ya.length===0?i=e.Sa()?0:1:!s.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jH(t,e){const n=It(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.ya)a.va(i)&&(r=!0);o.pa=i}}r&&$x(n)}function OH(t,e,n){const r=It(t),i=r.queries.get(e);if(i)for(const s of i.ya)s.onError(n);r.queries.delete(e)}function $x(t){t.ba.forEach(e=>{e.next()})}var e5,aA;(aA=e5||(e5={})).Ca="default",aA.Cache="cache";class Hx{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Yh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=Yh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==e5.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.key=e}}class d6{constructor(e){this.key=e}}class MH{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Vt(),this.mutatedKeys=Vt(),this.Ha=PP(e),this.Ja=new Sh(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new sA,i=n?n.Ja:this.Ja;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,h)=>{const m=i.get(c),p=c1(this.query,h)?h:null,_=!!m&&this.mutatedKeys.has(m.key),b=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let N=!1;m&&p?m.data.isEqual(p.data)?_!==b&&(r.track({type:3,doc:p}),N=!0):this.eu(m,p)||(r.track({type:2,doc:p}),N=!0,(l&&this.Ha(p,l)>0||u&&this.Ha(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),N=!0):m&&!p&&(r.track({type:1,doc:m}),N=!0,(l||u)&&(a=!0)),N&&(p?(o=o.add(p),s=b?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ja:o,Xa:r,Cs:a,mutatedKeys:s}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((c,h)=>function(p,_){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt(20277,{Vt:N})}};return b(p)-b(_)}(c.type,h.type)||this.Ha(c.doc,h.doc)),this.tu(r),i=i!=null&&i;const a=n&&!i?this.nu():[],l=this.ja.size===0&&this.current&&!i?1:0,u=l!==this.za;return this.za=l,o.length!==0||u?{snapshot:new Yh(this.query,e.Ja,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new sA,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Vt(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new d6(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new h6(r))}),n}su(e){this.Ga=e.$s,this.ja=Vt();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return Yh.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Wx="SyncEngine";class FH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VH{constructor(e){this.key=e,this._u=!1}}class BH{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new lc(a=>CP(a),u1),this.cu=new Map,this.lu=new Set,this.hu=new Nn(lt.comparator),this.Pu=new Map,this.Tu=new Lx,this.Iu={},this.Eu=new Map,this.du=Kh.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function UH(t,e,n=!0){const r=v6(t);let i;const s=r.uu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ou()):i=await f6(r,e,n,!0),i}async function zH(t,e){const n=v6(t);await f6(n,e,!0,!1)}async function f6(t,e,n,r){const i=await lH(t.localStore,So(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await qH(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&s6(t.remoteStore,i),a}async function qH(t,e,n,r,i){t.Ru=(h,m,p)=>async function(b,N,w,S){let A=N.view.Za(w);A.Cs&&(A=await ZE(b.localStore,N.query,!1).then(({documents:D})=>N.view.Za(D,A)));const O=S&&S.targetChanges.get(N.targetId),K=S&&S.targetMismatches.get(N.targetId)!=null,q=N.view.applyChanges(A,b.isPrimaryClient,O,K);return uA(b,N.targetId,q.ru),q.snapshot}(t,h,m,p);const s=await ZE(t.localStore,e,!0),o=new MH(e,s.$s),a=o.Za(s.documents),l=Rp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);uA(t,n,u.ru);const c=new FH(e,n,o);return t.uu.set(e,c),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),u.snapshot}async function $H(t,e,n){const r=It(t),i=r.uu.get(e),s=r.cu.get(i.targetId);if(s.length>1)return r.cu.set(i.targetId,s.filter(o=>!u1(o,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await J2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ox(r.remoteStore,i.targetId),t5(r,i.targetId)}).catch(ad)):(t5(r,i.targetId),await J2(r.localStore,i.targetId,!0))}async function HH(t,e){const n=It(t),r=n.uu.get(e),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ox(n.remoteStore,r.targetId))}async function WH(t,e,n){const r=ZH(t);try{const i=await function(o,a){const l=It(o),u=lr.now(),c=a.reduce((p,_)=>p.add(_.key),Vt());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let _=va(),b=Vt();return l.Bs.getEntries(p,c).next(N=>{_=N,_.forEach((w,S)=>{S.isValidDocument()||(b=b.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,_)).next(N=>{h=N;const w=[];for(const S of a){const A=l$(S,h.get(S.key).overlayedDocument);A!=null&&w.push(new iu(S.key,A,_P(A.value.mapValue),ps.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,w,a)}).next(N=>{m=N;const w=N.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(p,N.batchId,w)})}).then(()=>({batchId:m.batchId,changes:RP(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Iu[o.currentUser.toKey()];u||(u=new Nn(Lt)),u=u.insert(a,l),o.Iu[o.currentUser.toKey()]=u}(r,i.batchId,n),await jp(r,i.changes),await g1(r.remoteStore)}catch(i){const s=Ux(i,"Failed to persist write");n.reject(s)}}async function p6(t,e){const n=It(t);try{const r=await sH(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Pu.get(s);o&&(Yt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o._u=!0:i.modifiedDocuments.size>0?Yt(o._u,14607):i.removedDocuments.size>0&&(Yt(o._u,42227),o._u=!1))}),await jp(n,r,e)}catch(r){await ad(r)}}function lA(t,e,n){const r=It(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.uu.forEach((s,o)=>{const a=o.view.Da(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=It(o);l.onlineState=a;let u=!1;l.queries.forEach((c,h)=>{for(const m of h.ya)m.Da(a)&&(u=!0)}),u&&$x(l)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function GH(t,e,n){const r=It(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Pu.get(e),s=i&&i.key;if(s){let o=new Nn(lt.comparator);o=o.insert(s,qr.newNoDocument(s,_t.min()));const a=Vt().add(s),l=new f1(_t.min(),new Map,new Nn(Lt),o,a);await p6(r,l),r.hu=r.hu.remove(s),r.Pu.delete(e),Gx(r)}else await J2(r.localStore,e,!1).then(()=>t5(r,e,n)).catch(ad)}async function KH(t,e){const n=It(t),r=e.batch.batchId;try{const i=await iH(n.localStore,e);g6(n,r,null),m6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await jp(n,i)}catch(i){await ad(i)}}async function YH(t,e,n){const r=It(t);try{const i=await function(o,a){const l=It(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(Yt(h!==null,37113),c=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);g6(r,e,n),m6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await jp(r,i)}catch(i){await ad(i)}}function m6(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function g6(t,e,n){const r=It(t);let i=r.Iu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function t5(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||y6(t,r)})}function y6(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(Ox(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Gx(t))}function uA(t,e,n){for(const r of n)r instanceof h6?(t.Tu.addReference(r.key,e),QH(t,r)):r instanceof d6?(Ze(Wx,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||y6(t,r.key)):gt(19791,{mu:r})}function QH(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(Ze(Wx,"New document in limbo: "+n),t.lu.add(r),Gx(t))}function Gx(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new lt(wn.fromString(e)),r=t.du.next();t.Pu.set(r,new VH(n)),t.hu=t.hu.insert(n,r),s6(t.remoteStore,new vl(So(l1(n.path)),r,"TargetPurposeLimboResolution",s1.le))}}async function jp(t,e,n){const r=It(t),i=[],s=[],o=[];r.uu.isEmpty()||(r.uu.forEach((a,l)=>{o.push(r.Ru(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Dx.Rs(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.au.j_(i),await async function(l,u){const c=It(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Pe.forEach(u,m=>Pe.forEach(m.ds,p=>c.persistence.referenceDelegate.addReference(h,m.targetId,p)).next(()=>Pe.forEach(m.As,p=>c.persistence.referenceDelegate.removeReference(h,m.targetId,p)))))}catch(h){if(!ld(h))throw h;Ze(jx,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const p=c.xs.get(m),_=p.snapshotVersion,b=p.withLastLimboFreeSnapshotVersion(_);c.xs=c.xs.insert(m,b)}}}(r.localStore,s))}async function XH(t,e){const n=It(t);if(!n.currentUser.isEqual(e)){Ze(Wx,"User change. New user:",e.toKey());const r=await t6(n.localStore,e);n.currentUser=e,function(s,o){s.Eu.forEach(a=>{a.forEach(l=>{l.reject(new et(Ce.CANCELLED,o))})}),s.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jp(n,r.ks)}}function JH(t,e){const n=It(t),r=n.Pu.get(e);if(r&&r._u)return Vt().add(r.key);{let i=Vt();const s=n.cu.get(e);if(!s)return i;for(const o of s){const a=n.uu.get(o);i=i.unionWith(a.view.Ya)}return i}}function v6(t){const e=It(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=p6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GH.bind(null,e),e.au.j_=jH.bind(null,e.eventManager),e.au.Vu=OH.bind(null,e.eventManager),e}function ZH(t){const e=It(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YH.bind(null,e),e}class w0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=p1(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return rH(this.persistence,new eH,e.initialUser,this.serializer)}yu(e){return new e6(Rx.fi,this.serializer)}pu(e){return new cH}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}w0.provider={build:()=>new w0};class eW extends w0{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Yt(this.persistence.referenceDelegate instanceof y0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new V$(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?vi.withCacheSize(this.cacheSizeBytes):vi.DEFAULT;return new e6(r=>y0.fi(r,n),this.serializer)}}class n5{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lA(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XH.bind(null,this.syncEngine),await LH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DH}()}createDatastore(e){const n=p1(e.databaseInfo.databaseId),r=function(s){return new mH(s)}(e.databaseInfo);return function(s,o,a,l){return new wH(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new bH(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>lA(this.syncEngine,n,0),function(){return nA.C()?new nA:new hH}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const h=new BH(i,s,o,a,l,u);return c&&(h.Au=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=It(i);Ze(tc,"RemoteStore shutting down."),s.Ta.add(5),await Dp(s),s.Ea.shutdown(),s.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}n5.provider={build:()=>new n5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):ya("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="FirestoreClient";class tW{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ur.UNAUTHENTICATED,this.clientId=hP.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ze(Hl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ze(Hl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new aa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ux(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qy(t,e){t.asyncQueue.verifyOperationInProgress(),Ze(Hl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await t6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nW(t);Ze(Hl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iA(e.remoteStore,i)),t._onlineComponents=e}async function nW(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ze(Hl,"Using user provided OfflineComponentProvider");try{await Qy(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zh("Error using user provided cache. Falling back to memory cache: "+n),await Qy(t,new w0)}}else Ze(Hl,"Using default OfflineComponentProvider"),await Qy(t,new eW(void 0));return t._offlineComponents}async function w6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ze(Hl,"Using user provided OnlineComponentProvider"),await cA(t,t._uninitializedComponentsProvider._online)):(Ze(Hl,"Using default OnlineComponentProvider"),await cA(t,new n5))),t._onlineComponents}function rW(t){return w6(t).then(e=>e.syncEngine)}async function x0(t){const e=await w6(t),n=e.eventManager;return n.onListen=UH.bind(null,e.syncEngine),n.onUnlisten=$H.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HH.bind(null,e.syncEngine),n}function iW(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Kx({next:m=>{c.Cu(),o.enqueueAndForget(()=>qx(s,h));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new et(Ce.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new et(Ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new Hx(l1(a.path),c,{includeMetadataChanges:!0,La:!0});return zx(s,h)}(await x0(t),t.asyncQueue,e,n,r)),r.promise}function sW(t,e,n={}){const r=new aa;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Kx({next:m=>{c.Cu(),o.enqueueAndForget(()=>qx(s,h)),m.fromCache&&l.source==="server"?u.reject(new et(Ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new Hx(a,c,{includeMetadataChanges:!0,La:!0});return zx(s,h)}(await x0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e,n){if(!n)throw new et(Ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oW(t,e,n,r){if(e===!0&&r===!0)throw new et(Ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dA(t){if(!lt.isDocumentKey(t))throw new et(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fA(t){if(lt.isDocumentKey(t))throw new et(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function y1(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":gt(12329,{type:typeof t})}function Ai(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new et(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y1(t);throw new et(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _6="firestore.googleapis.com",pA=!0;class mA{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new et(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_6,this.ssl=pA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:pA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M$)throw new et(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new et(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new et(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new et(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class v1{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new et(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new et(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gq;switch(r.type){case"firstParty":return new xq(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new et(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hA.get(n);r&&(Ze("ComponentProvider","Removing Datastore"),hA.delete(n),r.terminate())}(this),Promise.resolve()}}function aW(t,e,n,r={}){var i;t=Ai(t,v1);const s=Ap(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s&&(pC(`https://${l}`),mC("Firestore",!0)),o.host!==_6&&o.host!==l&&zh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:l,ssl:s,emulatorOptions:r});if(!pa(u,a)&&(t._setSettings(u),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=Ur.MOCK_USER;else{c=TV(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new et(Ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ur(m)}t._authCredentials=new yq(new uP(c,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ea(this.firestore,e,this._query)}}class Kr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kr(this.firestore,e,this._key)}}class Rl extends Ea{constructor(e,n,r){super(e,n,l1(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kr(this.firestore,null,new lt(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function ln(t,e,...n){if(t=tr(t),b6("collection","path",e),t instanceof v1){const r=wn.fromString(e,...n);return fA(r),new Rl(t,null,r)}{if(!(t instanceof Kr||t instanceof Rl))throw new et(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wn.fromString(e,...n));return fA(r),new Rl(t.firestore,null,r)}}function qn(t,e,...n){if(t=tr(t),arguments.length===1&&(e=hP.newId()),b6("doc","path",e),t instanceof v1){const r=wn.fromString(e,...n);return dA(r),new Kr(t,null,new lt(r))}{if(!(t instanceof Kr||t instanceof Rl))throw new et(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wn.fromString(e,...n));return dA(r),new Kr(t.firestore,t instanceof Rl?t.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="AsyncQueue";class yA{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new r6(this,"async_queue_retry"),this.ec=()=>{const r=Yy();r&&Ze(gA,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=Yy();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Yy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new aa;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!ld(e))throw e;Ze(gA,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,ya("INTERNAL UNHANDLED ERROR: ",vA(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const i=Bx.createAndSchedule(this,e,n,r,s=>this.oc(s));return this.Hu.push(i),i}nc(){this.Ju&&gt(47125,{_c:vA(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function vA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class wa extends v1{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yA(e),this._firestoreClient=void 0,await e}}}function lW(t,e){const n=typeof t=="object"?t:wC(),r=typeof t=="string"?t:h0,i=lx(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=EV("firestore");s&&aW(i,...s)}return i}function w1(t){if(t._terminated)throw new et(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uW(t),t._firestoreClient}function uW(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new jq(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,x6(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new tW(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qh(Ir.fromBase64String(e))}catch(n){throw new et(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qh(Ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new et(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ar(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new et(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new et(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=/^__.*__$/;class hW{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new iu(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lp(e,this.data,n,this.fieldTransforms)}}class S6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new iu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function E6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt(40011,{hc:t})}}class b1{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new b1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return b0(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(E6(this.hc)&&cW.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class dW{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||p1(e)}gc(e,n,r,i=!1){return new b1({hc:e,methodName:n,fc:r,path:Ar.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _1(t){const e=t._freezeSettings(),n=p1(t._databaseId);return new dW(t._databaseId,!!e.ignoreUndefinedProperties,n)}function A6(t,e,n,r,i,s={}){const o=t.gc(s.merge||s.mergeFields?2:0,e,n,i);eb("Data must be an object, but it was:",o,r);const a=N6(r,o);let l,u;if(s.merge)l=new zi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const h of s.mergeFields){const m=r5(e,h,n);if(!o.contains(m))throw new et(Ce.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);k6(c,m)||c.push(m)}l=new zi(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new hW(new xi(a),l,u)}class S1 extends hd{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof S1}}function T6(t,e,n){return new b1({hc:3,fc:e.settings.fc,methodName:t._methodName,Ec:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xx extends hd{constructor(e,n){super(e),this.yc=n}_toFieldTransform(e){const n=T6(this,e,!0),r=this.yc.map(s=>cc(s,n)),i=new Wh(r);return new Nx(e.path,i)}isEqual(e){return e instanceof Xx&&pa(this.yc,e.yc)}}class Jx extends hd{constructor(e,n){super(e),this.yc=n}_toFieldTransform(e){const n=T6(this,e,!0),r=this.yc.map(s=>cc(s,n)),i=new Gh(r);return new Nx(e.path,i)}isEqual(e){return e instanceof Jx&&pa(this.yc,e.yc)}}class Zx extends hd{constructor(e,n){super(e),this.wc=n}_toFieldTransform(e){const n=new ap(e.serializer,OP(e.serializer,this.wc));return new Nx(e.path,n)}isEqual(e){return e instanceof Zx&&this.wc===e.wc}}function fW(t,e,n,r){const i=t.gc(1,e,n);eb("Data must be an object, but it was:",i,r);const s=[],o=xi.empty();ru(r,(l,u)=>{const c=tb(e,l,n);u=tr(u);const h=i.Ac(c);if(u instanceof S1)s.push(c);else{const m=cc(u,h);m!=null&&(s.push(c),o.set(c,m))}});const a=new zi(s);return new S6(o,a,i.fieldTransforms)}function pW(t,e,n,r,i,s){const o=t.gc(1,e,n),a=[r5(e,r,n)],l=[i];if(s.length%2!=0)throw new et(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(r5(e,s[m])),l.push(s[m+1]);const u=[],c=xi.empty();for(let m=a.length-1;m>=0;--m)if(!k6(u,a[m])){const p=a[m];let _=l[m];_=tr(_);const b=o.Ac(p);if(_ instanceof S1)u.push(p);else{const N=cc(_,b);N!=null&&(u.push(p),c.set(p,N))}}const h=new zi(u);return new S6(c,h,o.fieldTransforms)}function mW(t,e,n,r=!1){return cc(n,t.gc(r?4:3,e))}function cc(t,e){if(I6(t=tr(t)))return eb("Unsupported field value:",e,t),N6(t,e);if(t instanceof hd)return function(r,i){if(!E6(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=cc(a,i.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=tr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lr.fromDate(r);return{timestampValue:g0(i.serializer,s)}}if(r instanceof lr){const s=new lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:g0(i.serializer,s)}}if(r instanceof Yx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qh)return{bytesValue:WP(i.serializer,r._byteString)};if(r instanceof Kr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Px(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Qx)return function(o,a){return{mapValue:{fields:{[wP]:{stringValue:bP},[d0]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Vc("VectorValues must only contain numeric values.");return Tx(a.serializer,u)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${y1(r)}`)}(t,e)}function N6(t,e){const n={};return fP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(t,(r,i)=>{const s=cc(i,e.Ic(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function I6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lr||t instanceof Yx||t instanceof Qh||t instanceof Kr||t instanceof hd||t instanceof Qx)}function eb(t,e,n){if(!I6(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=y1(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function r5(t,e,n){if((e=tr(e))instanceof x1)return e._internalPath;if(typeof e=="string")return tb(t,e);throw b0("Field path arguments must be of type string or ",t,!1,void 0,n)}const gW=new RegExp("[~\\*/\\[\\]]");function tb(t,e,n){if(e.search(gW)>=0)throw b0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new x1(...e.split("."))._internalPath}catch{throw b0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function b0(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new et(Ce.INVALID_ARGUMENT,a+t+l)}function k6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(E1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yW extends C6{data(){return super.data()}}function E1(t,e){return typeof e=="string"?tb(t,e):e instanceof x1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new et(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nb{}class rb extends nb{}function si(t,e,...n){let r=[];e instanceof nb&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof ib).length,a=s.filter(l=>l instanceof A1).length;if(o>1||o>0&&a>0)throw new et(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class A1 extends rb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new A1(e,n,r)}_apply(e){const n=this._parse(e);return L6(e._query,n),new Ea(e.firestore,e.converter,G2(e._query,n))}_parse(e){const n=_1(e.firestore);return function(s,o,a,l,u,c,h){let m;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new et(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){bA(h,c);const _=[];for(const b of h)_.push(xA(l,s,b));m={arrayValue:{values:_}}}else m=xA(l,s,h)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||bA(h,c),m=mW(a,o,h,c==="in"||c==="not-in");return er.create(u,c,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function or(t,e,n){const r=e,i=E1("where",t);return A1._create(i,r,n)}class ib extends nb{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ib(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)L6(o,l),o=G2(o,l)}(e._query,n),new Ea(e.firestore,e.converter,G2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sb extends rb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sb(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new et(Ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new et(Ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new op(s,o)}(e._query,this._field,this._direction);return new Ea(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ud(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function lp(t,e="asc"){const n=e,r=E1("orderBy",t);return sb._create(r,n)}class ob extends rb{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new ob(e,n,r)}_apply(e){return new Ea(e.firestore,e.converter,p0(e._query,this._limit,this._limitType))}}function vW(t){return ob._create("limit",t,"F")}function xA(t,e,n){if(typeof(n=tr(n))=="string"){if(n==="")throw new et(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kP(e)&&n.indexOf("/")!==-1)throw new et(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(wn.fromString(n));if(!lt.isDocumentKey(r))throw new et(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DE(t,new lt(r))}if(n instanceof Kr)return DE(t,n._key);throw new et(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${y1(n)}.`)}function bA(t,e){if(!Array.isArray(t)||t.length===0)throw new et(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function L6(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new et(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new et(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wW{convertValue(e,n="none"){switch(ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw gt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ru(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[d0].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fn(o.doubleValue));return new Qx(s)}convertGeoPoint(e){return new Yx(Fn(e.latitude),Fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=a1(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rp(e));default:return null}}convertTimestamp(e){const n=Ul(e);return new lr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wn.fromString(e);Yt(JP(r),9688,{name:e});const i=new ip(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(n)||ya(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D6 extends C6{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(E1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pg extends D6{data(e={}){return super.data(e)}}class j6{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new of(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pg(this._firestore,this._userDataWriter,r.key,r,new of(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new et(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new of(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new pg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new of(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:xW(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xW(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(t){t=Ai(t,Kr);const e=Ai(t.firestore,wa);return iW(w1(e),t._key).then(n=>O6(e,t,n))}class ab extends wW{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qh(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kr(this.firestore,null,n)}}function ds(t){t=Ai(t,Ea);const e=Ai(t.firestore,wa),n=w1(e),r=new ab(e);return P6(t._query),sW(n,t._query).then(i=>new j6(e,r,t,i))}function la(t,e,n){t=Ai(t,Kr);const r=Ai(t.firestore,wa),i=R6(t.converter,e,n);return T1(r,[A6(_1(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ps.none())])}function Fs(t,e,n,...r){t=Ai(t,Kr);const i=Ai(t.firestore,wa),s=_1(i);let o;return o=typeof(e=tr(e))=="string"||e instanceof x1?pW(s,"updateDoc",t._key,e,n,r):fW(s,"updateDoc",t._key,e),T1(i,[o.toMutation(t._key,ps.exists(!0))])}function bW(t){return T1(Ai(t.firestore,wa),[new Ix(t._key,ps.none())])}function Wl(t,e){const n=Ai(t.firestore,wa),r=qn(t),i=R6(t.converter,e);return T1(n,[A6(_1(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ps.exists(!1))]).then(()=>r)}function up(t,...e){var n,r,i;t=tr(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wA(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wA(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,u,c;if(t instanceof Kr)u=Ai(t.firestore,wa),c=l1(t._key.path),l={next:h=>{e[o]&&e[o](O6(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Ai(t,Ea);u=Ai(h.firestore,wa),c=h._query;const m=new ab(u);l={next:p=>{e[o]&&e[o](new j6(u,m,h,p))},error:e[o+1],complete:e[o+2]},P6(t._query)}return function(m,p,_,b){const N=new Kx(b),w=new Hx(p,N,_);return m.asyncQueue.enqueueAndForget(async()=>zx(await x0(m),w)),()=>{N.Cu(),m.asyncQueue.enqueueAndForget(async()=>qx(await x0(m),w))}}(w1(u),c,a,l)}function T1(t,e){return function(r,i){const s=new aa;return r.asyncQueue.enqueueAndForget(async()=>WH(await rW(r),i,s)),s.promise}(w1(t),e)}function O6(t,e,n){const r=n.docs.get(e._key),i=new ab(t);return new D6(t,i,e._key,r,new of(n.hasPendingWrites,n.fromCache),e.converter)}function lb(...t){return new Xx("arrayUnion",t)}function M6(...t){return new Jx("arrayRemove",t)}function _0(t){return new Zx("increment",t)}(function(e,n=!0){(function(i){od=i})(id),Uh(new Xu("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new wa(new vq(r.getProvider("auth-internal")),new bq(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new et(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ip(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pl(_E,SE,e),Pl(_E,SE,"esm2017")})();const _W={apiKey:"AIzaSyCwvgerlNUuOIDK2TGhRN9j2aygG6CdpAM",authDomain:"medilink-6e93a.firebaseapp.com",projectId:"medilink-6e93a",storageBucket:"medilink-6e93a.firebasestorage.app",messagingSenderId:"273101035846",appId:"1:273101035846:web:8129e41bda810823b7ad47"},F6=vC(_W),ua=pq(F6),St=lW(F6);$C(ua,n1).catch(t=>{console.error("Error setting Firebase persistence:",t)});const ui=aC(t=>({user:null,isLoading:!0,setUser:e=>t({user:e,isLoading:!1}),initializeAuth:()=>{t({isLoading:!0});const e=rz(ua,async n=>{if(n)try{const r=await Xh(qn(St,"users",n.uid));if(r.exists()){const i=r.data();t({user:{id:n.uid,name:i.name||n.displayName||"Unknown",email:i.email||n.email||void 0,role:i.role||"patient"},isLoading:!1})}else t({user:{id:n.uid,name:n.displayName||"Unknown",email:n.email||void 0,role:"patient"},isLoading:!1})}catch(r){console.error("Error fetching user data:",r),t({user:null,isLoading:!1})}else t({user:null,isLoading:!1})},n=>{console.error("Auth state change error:",n),t({user:null,isLoading:!1})});return()=>e()}}));/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rt=(t,e)=>{const n=ee.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>ee.createElement("svg",{ref:c,...SW,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${EW(t)}`,a].join(" "),...u},[...e.map(([h,m])=>ee.createElement(h,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Rt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AW=Rt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=Rt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=Rt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=Rt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=Rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=Rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=Rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=Rt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=Rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=Rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=Rt("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=Rt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=Rt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PW=Rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=Rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=Rt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=Rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=Rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=Rt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=Rt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RW=Rt("MonitorCheck",[["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=Rt("MonitorDot",[["circle",{cx:"19",cy:"6",r:"3",key:"108a5v"}],["path",{d:"M22 12v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h9",key:"1fet9y"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=Rt("MonitorX",[["path",{d:"m14.5 12.5-5-5",key:"1jahn5"}],["path",{d:"m9.5 12.5 5-5",key:"1k2t7b"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=Rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OW=Rt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Rt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=Rt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MW=Rt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=Rt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=Rt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=Rt("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BW=Rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=Rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=Rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=Rt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=Rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zW=()=>{const t=oc(),n=ig(p=>p.notifications).filter(p=>!p.read).length,[r,i]=ee.useState(!1),[s,o]=ee.useState(!1),{user:a,setUser:l}=ui(),u=_a(),c=async()=>{try{await iz(ua),l(null),i(!1),o(!1),u("/login")}catch(p){console.error("Logout Error:",p)}},h=()=>{o(!s)},m=[{to:"/",icon:PW,label:"Home"},{to:"/doctors",icon:dh,label:"Doctors"},{to:"/community",icon:H6,label:"Community"},{to:"/chat-history",icon:ub,label:"AI Chat"},...a&&a.role==="admin-1"?[{to:"/admin",icon:MW,label:"Admin Dashboard"}]:[]];return y.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-gray-900/90 border-b border-cyan-500/30 z-50 backdrop-blur-md shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:[y.jsx("div",{className:"container mx-auto px-4",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs(ho,{to:"/",className:"flex items-center space-x-2",children:[y.jsx(fb,{className:"w-8 h-8 text-cyan-400"}),y.jsx("span",{className:"text-xl font-bold neon-text",children:"MediLink"})]}),y.jsxs("div",{className:"hidden lg:flex items-center space-x-8",children:[m.map(({to:p,icon:_,label:b})=>y.jsxs(ho,{to:p,className:"relative group",children:[y.jsxs("div",{className:`flex items-center ${t.pathname===p?"text-cyan-400 neon-text":"text-gray-300"} space-x-2 hover:text-cyan-400 transition-colors`,children:[y.jsx(_,{className:"w-5 h-5"}),y.jsx("span",{children:b})]}),t.pathname===p&&y.jsx(at.div,{layoutId:"navbar-indicator",className:"absolute bottom-[-2px] left-0 right-0 h-0.5 bg-cyan-400 shadow-[0_0_5px_rgba(34,211,238,0.5)]",initial:!1,transition:{type:"spring",stiffness:300,damping:20}})]},p)),y.jsx(ho,{to:"/notifications",className:"relative",children:y.jsxs("div",{className:"relative group",children:[y.jsx(_A,{className:`w-6 h-6 hover:text-cyan-400 transition-colors ${t.pathname==="/notifications"?"text-cyan-400 neon-text":"text-gray-300"}`}),n>0&&y.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500/50 animate-pulse group-hover:animate-none backdrop-blur-sm text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:n})]})}),a?y.jsxs("div",{className:"relative flex items-center space-x-4",children:[y.jsx("button",{onClick:h,className:"text-cyan-400 hover:text-cyan-200 transition-colors","aria-label":"User profile",children:y.jsx(hp,{className:"w-6 h-6"})}),s&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-12 right-0 bg-gray-800/90 border border-cyan-500/50 rounded-lg p-4 w-64 backdrop-blur-md shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:[y.jsx("p",{className:"text-cyan-400 neon-text font-bold",children:a.name}),y.jsx("p",{className:"text-gray-400 text-sm",children:a.email||"No email available"}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Role: ",a.role]}),y.jsxs("div",{className:"mt-4 flex space-x-2",children:[y.jsxs("button",{onClick:c,className:"cyber-button flex-1 flex items-center justify-center space-x-2 text-gray-900",children:[y.jsx(Xy,{className:"w-4 h-4"}),y.jsx("span",{children:"Logout"})]}),y.jsx("button",{onClick:h,className:"flex-1 text-gray-400 hover:text-cyan-400 text-sm underline",children:"Close"})]})]})]}):y.jsxs(ho,{to:"/login",className:"cyber-button py-2 px-4 text-gray-900 hover:bg-cyan-400 transition-colors",children:[y.jsx(i5,{className:"w-5 h-5 inline-block mr-2"}),"Login"]})]}),y.jsx("button",{onClick:()=>i(!r),className:"lg:hidden text-gray-300 z-50 hover:text-cyan-400 transition-colors",children:r?y.jsx(W6,{className:"w-6 h-6 z-50"}):y.jsx(LW,{className:"w-6 h-6"})})]})}),y.jsx(at.div,{initial:{x:"100%"},animate:{x:r?0:"100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 right-0 bottom-0 w-3/4 bg-gray-900/95 p-6 lg:hidden border-l border-cyan-500/30",children:y.jsxs("div",{className:"flex flex-col space-y-6",children:[m.map(({to:p,icon:_,label:b})=>y.jsxs(ho,{to:p,onClick:()=>i(!1),className:`flex ${t.pathname===p?"text-cyan-400 neon-text":"text-gray-300"} items-center space-x-2 hover:text-cyan-400 transition-colors`,children:[y.jsx(_,{className:"w-6 h-6"}),y.jsx("span",{children:b})]},p)),y.jsxs(ho,{to:"/notifications",onClick:()=>i(!1),className:`relative flex items-center space-x-2 ${t.pathname==="/notifications"?"text-cyan-400 neon-text":"text-gray-300"} hover:text-cyan-400 transition-colors`,children:[y.jsx(_A,{className:"w-6 h-6"}),y.jsx("span",{children:"Notifications"}),n>0&&y.jsx("span",{className:"absolute top-1 left-24 text-gray-300 bg-red-500/50 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:n})]}),a?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"relative flex items-center space-x-2",children:[y.jsxs("button",{onClick:h,className:"text-cyan-400 hover:text-cyan-200 transition-colors","aria-label":"User profile",children:[y.jsx(hp,{className:"w-6 h-6"}),y.jsx("span",{className:"text-gray-300 hover:text-cyan-400",children:"Profile"})]}),s&&y.jsxs(at.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-10 left-0 bg-gray-800/90 border border-cyan-500/50 rounded-lg p-4 w-64 backdrop-blur-md shadow-[0_0_10px_rgba(34,211,238,0.3)]",children:[y.jsx("p",{className:"text-cyan-400 neon-text font-bold",children:a.name}),y.jsx("p",{className:"text-gray-400 text-sm",children:a.email||"No email available"}),y.jsxs("p",{className:"text-gray-400 text-sm",children:["Role: ",a.role]}),y.jsxs("div",{className:"mt-4 flex space-x-2",children:[y.jsxs("button",{onClick:c,className:"cyber-button flex-1 flex items-center justify-center space-x-2 text-gray-900",children:[y.jsx(Xy,{className:"w-4 h-4"}),y.jsx("span",{children:"Logout"})]}),y.jsx("button",{onClick:h,className:"flex-1 text-gray-400 hover:text-cyan-400 text-sm underline",children:"Close"})]})]})]}),y.jsxs("button",{onClick:c,className:"flex items-center space-x-2 text-gray-300 hover:text-cyan-400 transition-colors",children:[y.jsx(Xy,{className:"w-6 h-6"}),y.jsx("span",{children:"Logout"})]})]}):y.jsxs(ho,{to:"/login",onClick:()=>i(!1),className:"flex items-center space-x-2 cyber-button py-2 px-4 text-gray-900 hover:bg-cyan-400 transition-colors",children:[y.jsx(i5,{className:"w-6 h-6 inline-block mr-2"}),y.jsx("span",{children:"Login"})]})]})})]})},qW=({message:t,type:e,onClose:n})=>{const[r,i]=ee.useState(!1),[s,o]=ee.useState(!1),a={success:"from-green-500/20 to-green-700/20 text-green-300 border border-green-500",error:"from-red-500/20 to-red-700/20 text-red-300 border border-red-500",info:"from-cyan-500/20 to-cyan-700/20 text-cyan-300 border border-cyan-500"},l={success:"bg-gradient-to-r from-transparent via-green-500/30 to-transparent ",error:"bg-gradient-to-r from-transparent via-red-500/30 to-transparent ",info:"bg-gradient-to-r from-transparent via-cyan-500/30 to-transparent "},u={success:"text-green-300 hover:text-green-100",error:"text-red-300 hover:text-red-100",info:"text-cyan-300 hover:text-cyan-100"},c={success:"bg-gradient-to-r from-green-400 to-transparent ",error:"bg-gradient-to-r from-red-400 to-transparent ",info:"bg-gradient-to-r from-cyan-400 to-transparent "};ee.useEffect(()=>{if(!s){const p=setInterval(()=>{m(_=>_<=0?(clearInterval(p),n(),0):_-2)},100);return()=>clearInterval(p)}},[s,n]);const[h,m]=ee.useState(100);return y.jsxs(at.div,{initial:{opacity:0,x:50,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.8},transition:{type:"spring",stiffness:200,damping:20},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:`absolute top-20 w-96 right-8 z-50 px-6 py-4 overflow-hidden rounded-lg bg-gradient-to-br ${a[e]} backdrop-blur-lg shadow-lg`,children:[y.jsxs("div",{className:"flex items-center",children:[y.jsxs(at.div,{className:"mr-4",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},children:[e==="success"&&y.jsx(RW,{className:"w-6 h-6 text-green-300"}),e==="error"&&y.jsx(jW,{className:"w-6 h-6 text-red-300"}),e==="info"&&y.jsx(DW,{className:"w-6 h-6 text-cyan-300"})]}),y.jsxs("div",{className:"text-lg font-semibold overflow-hidden",children:[r?t:t.substring(0,50)+"..."," "]}),y.jsx("button",{onClick:()=>i(p=>!p),className:`ml-5 transition-transform transform hover:scale-110 ${u[e]}`,children:r?y.jsx(db,{className:"w-6 h-6"}):y.jsx(hb,{className:"w-6 h-6"})}),y.jsx("button",{onClick:n,className:`ml-5 transition-transform transform hover:scale-110 ${u[e]}`,children:y.jsx(W6,{className:"w-6 h-6"})})]}),y.jsx("div",{className:`absolute bottom-0  h-[5px] left-0 w-full bg-transparent ${c[e]}`,style:{width:`${h}%`,transition:"width 0.1s ease"}}),y.jsx("div",{className:`absolute inset-0 ${l[e]} `,style:{transform:"translateX(-100%)",animation:"slide-highlight 2s linear infinite"}})]})},$W=()=>{const[t,e]=ee.useState(null),n=(i,s)=>{e({message:i,type:s})},r=()=>{e(null)};return y.jsxs("div",{children:[y.jsx("button",{onClick:()=>n("Everything is running smoothly!","success"),children:"Show Success Alert"}),y.jsx("button",{onClick:()=>n("Something went wrong!","error"),children:"Show Error Alert"}),y.jsx("button",{onClick:()=>n("Check out the new updates.","info"),children:"Show Info Alert"}),y.jsx(nC,{children:t&&y.jsx(qW,{message:t.message,type:t.type,onClose:r})})]})},HW=[{icon:dh,title:"Doctor Rankings",description:"Rate and review healthcare professionals based on your experience.",link:"/doctors"},{icon:H6,title:"Community",description:"Join discussions and share your healthcare journey with others.",link:"/community"},{icon:ub,title:"AI Assistant",description:"Get instant help with finding the right healthcare provider.",link:"/chat-history"},{icon:cb,title:"Request Medical Center Admin",description:"Apply to manage a medical center and add doctors to MediLink.",link:"/reg"}],WW=()=>y.jsxs("div",{className:"space-y-12",children:[y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center space-y-4",children:[y.jsx($W,{}),y.jsx("h1",{className:"text-5xl font-bold neon-text",children:"Welcome to MediLink"}),y.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"The future of healthcare ratings is here. Connect with top medical professionals and make informed decisions about your health."})]}),y.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-8 mt-12",children:HW.map((t,e)=>y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.2},children:y.jsx(ho,{to:t.link,children:y.jsxs("div",{className:"cyber-card p-6 h-full hover:scale-105 transition-transform duration-300",children:[y.jsx(t.icon,{className:"w-12 h-12 text-cyan-400 mb-4"}),y.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),y.jsx("p",{className:"text-gray-400",children:t.description})]})})},t.title))}),y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"cyber-card p-8 mt-12",children:[y.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Why Choose MediLink?"}),y.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"Transparent Ratings"}),y.jsx("p",{className:"text-gray-400",children:"Our platform ensures authentic reviews from verified patients."})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-semibold mb-2 text-cyan-400",children:"AI-Powered Matching"}),y.jsx("p",{className:"text-gray-400",children:"Let our AI help you find the perfect healthcare provider."})]})]})]})]}),GW=({doctor:t})=>{const{user:e}=ui(),[n,r]=ee.useState(!1),[i,s]=ee.useState(!1),o=async()=>{if(!(!e||e.role!=="admin-1")){s(!0);try{const a=qn(St,"doctors",t.id),l=t.availability.status==="Available"?"Unavailable":"Available";await Fs(a,{"availability.status":l,isAvailable:l==="Available",updatedAt:new Date().toISOString(),updatedBy:e.id}),r(!1)}catch(a){console.error("Error updating availability:",a)}finally{s(!1)}}};return y.jsxs("div",{className:"relative mt-2",children:[y.jsx("button",{onClick:()=>r(!0),className:`px-2 py-1 rounded text-sm font-medium text-white transition-all duration-200 ${t.availability.status==="Available"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-600"}`,children:t.availability.status}),y.jsx(nC,{children:n&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:y.jsxs(at.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-900 p-5 rounded-md shadow-lg border border-cyan-500/30",children:[y.jsx("h3",{className:"text-md font-bold text-cyan-50 mb-3",children:"Confirm Availability"}),y.jsxs("p",{className:"text-gray-400 mb-4",children:["Set ",t.name," to ",t.availability.status==="Available"?"Unavailable":"Available","?"]}),y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{onClick:()=>r(!1),className:"px-3 py-1 bg-gray-800 text-cyan-50 rounded hover:bg-gray-700 transition",children:"Cancel"}),y.jsx("button",{onClick:o,disabled:i,className:`px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition ${i?"opacity-60 cursor-not-allowed":""}`,children:i?"Updating...":"Confirm"})]})]})})})]})},G6=({doctor:t,userId:e,onClose:n})=>{const{user:r}=ui(),[i,s]=ee.useState(""),[o,a]=ee.useState(!1),[l,u]=ee.useState(null),c=async h=>{if(h.preventDefault(),!e||!r){u("User not authenticated. Please log in.");return}if(!i){u("Please select a date and time.");return}a(!0);try{const m=qn(St,"users",e),p=await Xh(m),_=p.exists()&&(p.data().name||r.displayName)||"Anonymous",b=p.exists()&&(p.data().email||r.email)||"Unknown",N=qn(St,"counters","bookingCounter"),w=await Xh(N);let S=1;w.exists()&&(S=w.data().lastNumber+1),await la(N,{lastNumber:S},{merge:!0});const A=qn(ln(St,"bookings"));await la(A,{userId:e,userName:_,userEmail:b,doctorId:t.id,doctorName:t.name,medicalCenterId:t.medicalCenterId,dateTime:i,createdAt:new Date().toISOString(),status:"booked",bookingNumber:S}),n()}catch(m){u(m.message||"Failed to create booking."),console.error(m)}finally{a(!1)}};return y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:y.jsxs(at.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-900 p-6 rounded-md shadow-lg border border-cyan-500/30 max-w-md w-full",children:[y.jsxs("h3",{className:"text-xl font-bold neon-text mb-4",children:["Book Appointment with ",t.name]}),l&&y.jsx("p",{className:"text-red-400 bg-red-900/20 border border-red-500/30 p-2 rounded-lg mb-4",children:l}),y.jsxs("form",{onSubmit:c,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"text-gray-400 block mb-2",children:"Select Date & Time"}),y.jsx("input",{type:"datetime-local",value:i,onChange:h=>s(h.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500",required:!0})]}),y.jsxs("div",{className:"flex justify-end space-x-3",children:[y.jsx("button",{type:"button",onClick:n,className:"px-3 py-1 bg-gray-800 text-cyan-50 rounded hover:bg-gray-700 transition",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:o,className:`px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition ${o?"opacity-60 cursor-not-allowed":""}`,children:o?"Booking...":"Confirm Booking"})]})]})]})})},KW=()=>{const{user:t}=ui(),[e,n]=ee.useState([]),[r,i]=ee.useState([]),[s,o]=ee.useState(!0),[a,l]=ee.useState(null),[u,c]=ee.useState(""),[h,m]=ee.useState(""),[p,_]=ee.useState(""),[b,N]=ee.useState(""),[w,S]=ee.useState(""),[A,O]=ee.useState(null);ee.useEffect(()=>{(async()=>{try{const F=si(ln(St,"doctors"),or("availability.status","==","Available")),C=(await ds(F)).docs.map(j=>{var Y;return{id:j.id,...j.data(),conditions:Array.isArray(j.data().conditions)?j.data().conditions:[],specialty:j.data().specialty||"Unknown",location:j.data().location||"Unknown",medicalCenterName:j.data().medicalCenterName||"Unknown",isAvailable:((Y=j.data().availability)==null?void 0:Y.status)==="Available"}});console.log("Fetched doctors:",C),n(C),i(C)}catch(F){console.error("Error fetching doctors:",F),l(F.message||"Failed to fetch doctors.")}finally{o(!1)}})()},[]),ee.useEffect(()=>{(()=>{let F=[...e];u&&(F=F.filter(I=>I.name.toLowerCase().includes(u.toLowerCase()))),h&&(F=F.filter(I=>I.specialty.toLowerCase()===h.toLowerCase())),p&&(F=F.filter(I=>I.location.toLowerCase()===p.toLowerCase())),b&&(F=F.filter(I=>I.conditions.some(C=>C.toLowerCase().includes(b.toLowerCase())))),w&&(F=F.filter(I=>I.medicalCenterId===w)),F.sort((I,C)=>C.rating-I.rating),i(F)})()},[u,h,p,b,w,e]);const K=e.length?Array.from(new Set(e.filter(L=>typeof L.specialty=="string").map(L=>L.specialty))).sort():[],q=e.length?Array.from(new Set(e.filter(L=>typeof L.location=="string").map(L=>L.location))).sort():[],D=e.length?Array.from(new Set(e.filter(L=>Array.isArray(L.conditions)).flatMap(L=>L.conditions))).sort():[],T=e.length?Array.from(new Set(e.map(L=>({id:L.medicalCenterId,name:L.medicalCenterName||"Unknown"})))).sort((L,F)=>(L.name||"Unknown").localeCompare(F.name||"Unknown")):[];return s?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:"Loading..."}):y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-900 text-cyan-50 p-8",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsx("h1",{className:"text-4xl font-bold neon-text mb-8 text-center",children:"Find a Doctor"}),y.jsxs("div",{className:"mb-8 flex space-y-4 md:space-y-0 md:space-x-4 flex-col md:flex-row",children:[y.jsx("input",{type:"text",placeholder:"Search by doctor name...",value:u,onChange:L=>c(L.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500"}),y.jsxs("select",{value:h,onChange:L=>m(L.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:K.length===0,children:[y.jsx("option",{value:"",children:"All Specialties"}),K.map((L,F)=>y.jsx("option",{value:L,children:L},`specialty-${F}`))]}),y.jsxs("select",{value:p,onChange:L=>_(L.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:q.length===0,children:[y.jsx("option",{value:"",children:"All Locations"}),q.map((L,F)=>y.jsx("option",{value:L,children:L},`location-${F}`))]}),y.jsxs("select",{value:b,onChange:L=>N(L.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:D.length===0,children:[y.jsx("option",{value:"",children:"All Conditions"}),D.map((L,F)=>y.jsx("option",{value:L,children:L},`condition-${F}`))]}),y.jsxs("select",{value:w,onChange:L=>S(L.target.value),className:"w-full p-3 rounded-lg bg-gray-800 text-cyan-50 border border-cyan-500/30 focus:outline-none focus:ring-2 focus:ring-cyan-500",disabled:T.length===0,children:[y.jsx("option",{value:"",children:"All Hospitals"}),T.map((L,F)=>y.jsx("option",{value:L.id,children:L.name},`hospital-${F}`))]})]}),a&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg text-center mb-4",children:a}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(L=>y.jsxs("div",{children:[y.jsx(ho,{to:`/doctors/details/${L.id}`,children:y.jsxs(at.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"cyber-card p-6 hover:scale-105 transition-transform",children:[y.jsx("img",{src:L.image,alt:L.name,className:"w-full h-48 object-cover rounded-lg mb-4"}),y.jsx("h3",{className:"text-xl font-bold neon-text",children:L.name}),y.jsx("p",{className:"text-gray-400",children:L.specialty}),y.jsxs("p",{className:"text-gray-400",children:["Medical Center: ",L.medicalCenterName]}),y.jsxs("p",{className:"text-gray-400",children:["Rating: ",L.rating," (",L.reviews," reviews)"]}),y.jsxs("p",{className:"text-gray-400",children:["Location: ",L.location]}),y.jsxs("div",{className:"mt-2",children:[y.jsx("p",{className:"text-gray-400 font-bold",children:"Procedures:"}),y.jsx("ul",{className:"list-disc list-inside text-gray-400",children:L.procedures.map((F,I)=>y.jsx("li",{children:F},`procedure-${I}`))})]}),y.jsxs("div",{className:"mt-2",children:[y.jsx("p",{className:"text-gray-400 font-bold",children:"Conditions:"}),y.jsx("ul",{className:"list-disc list-inside text-gray-400",children:L.conditions.map((F,I)=>y.jsx("li",{children:F},`condition-${I}`))})]}),y.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[y.jsx(VW,{className:"w-5 h-5 text-cyan-400"}),y.jsx("p",{className:"text-gray-400",children:"View Details"})]})]})}),(t==null?void 0:t.role)==="admin-1"?y.jsx(GW,{doctor:L}):y.jsx("button",{onClick:()=>O(L),className:"mt-2 w-full bg-cyan-600 text-white py-2 rounded hover:bg-cyan-700 transition",children:"Book Appointment"})]},L.id))}),r.length===0&&y.jsx("div",{className:"text-center text-gray-400 mt-8",children:"No doctors found matching your criteria. Try adjusting your search filters."}),A&&t&&y.jsx(G6,{doctor:A,userId:t.id,onClose:()=>O(null)})]})})};function $s(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function nc(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const K6=6048e5,YW=864e5;let QW={};function N1(){return QW}function dp(t,e){var a,l,u,c;const n=N1(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,i=$s(t),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function S0(t){return dp(t,{weekStartsOn:1})}function Y6(t){const e=$s(t),n=e.getFullYear(),r=nc(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=S0(r),s=nc(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const o=S0(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function SA(t){const e=$s(t);return e.setHours(0,0,0,0),e}function EA(t){const e=$s(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function XW(t,e){const n=SA(t),r=SA(e),i=+n-EA(n),s=+r-EA(r);return Math.round((i-s)/YW)}function JW(t){const e=Y6(t),n=nc(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),S0(n)}function ZW(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eG(t){if(!ZW(t)&&typeof t!="number")return!1;const e=$s(t);return!isNaN(Number(e))}function tG(t){const e=$s(t),n=nc(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const nG={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rG=(t,e,n)=>{let r;const i=nG[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Jy(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const iG={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sG={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oG={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aG={date:Jy({formats:iG,defaultWidth:"full"}),time:Jy({formats:sG,defaultWidth:"full"}),dateTime:Jy({formats:oG,defaultWidth:"full"})},lG={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uG=(t,e,n,r)=>lG[t];function Ud(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const cG={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hG={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dG={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fG={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mG={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gG=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},yG={ordinalNumber:gG,era:Ud({values:cG,defaultWidth:"wide"}),quarter:Ud({values:hG,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ud({values:dG,defaultWidth:"wide"}),day:Ud({values:fG,defaultWidth:"wide"}),dayPeriod:Ud({values:pG,defaultWidth:"wide",formattingValues:mG,defaultFormattingWidth:"wide"})};function zd(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?wG(a,h=>h.test(o)):vG(a,h=>h.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=e.slice(o.length);return{value:u,rest:c}}}function vG(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function wG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function xG(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const bG=/^(\d+)(th|st|nd|rd)?/i,_G=/\d+/i,SG={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},EG={any:[/^b/i,/^(a|c)/i]},AG={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},TG={any:[/1/i,/2/i,/3/i,/4/i]},NG={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IG={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kG={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},CG={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PG={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},LG={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},RG={ordinalNumber:xG({matchPattern:bG,parsePattern:_G,valueCallback:t=>parseInt(t,10)}),era:zd({matchPatterns:SG,defaultMatchWidth:"wide",parsePatterns:EG,defaultParseWidth:"any"}),quarter:zd({matchPatterns:AG,defaultMatchWidth:"wide",parsePatterns:TG,defaultParseWidth:"any",valueCallback:t=>t+1}),month:zd({matchPatterns:NG,defaultMatchWidth:"wide",parsePatterns:IG,defaultParseWidth:"any"}),day:zd({matchPatterns:kG,defaultMatchWidth:"wide",parsePatterns:CG,defaultParseWidth:"any"}),dayPeriod:zd({matchPatterns:PG,defaultMatchWidth:"any",parsePatterns:LG,defaultParseWidth:"any"})},DG={code:"en-US",formatDistance:rG,formatLong:aG,formatRelative:uG,localize:yG,match:RG,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jG(t){const e=$s(t);return XW(e,tG(e))+1}function OG(t){const e=$s(t),n=+S0(e)-+JW(e);return Math.round(n/K6)+1}function Q6(t,e){var c,h,m,p;const n=$s(t),r=n.getFullYear(),i=N1(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(m=i.locale)==null?void 0:m.options)==null?void 0:p.firstWeekContainsDate)??1,o=nc(t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=dp(o,e),l=nc(t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const u=dp(l,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function MG(t,e){var a,l,u,c;const n=N1(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,i=Q6(t,e),s=nc(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),dp(s,e)}function FG(t,e){const n=$s(t),r=+dp(n,e)-+MG(n,e);return Math.round(r/K6)+1}function Zt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const nl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Zt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Zt(n+1,2)},d(t,e){return Zt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Zt(t.getHours()%12||12,e.length)},H(t,e){return Zt(t.getHours(),e.length)},m(t,e){return Zt(t.getMinutes(),e.length)},s(t,e){return Zt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Zt(i,e.length)}},Fc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},AA={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return nl.y(t,e)},Y:function(t,e,n,r){const i=Q6(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Zt(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Zt(s,e.length)},R:function(t,e){const n=Y6(t);return Zt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Zt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Zt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Zt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return nl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Zt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=FG(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Zt(i,e.length)},I:function(t,e,n){const r=OG(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Zt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):nl.d(t,e)},D:function(t,e,n){const r=jG(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Zt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Zt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Zt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Zt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Fc.noon:r===0?i=Fc.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Fc.evening:r>=12?i=Fc.afternoon:r>=4?i=Fc.morning:i=Fc.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return nl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):nl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Zt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):nl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):nl.s(t,e)},S:function(t,e){return nl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return NA(r);case"XXXX":case"XX":return Lu(r);case"XXXXX":case"XXX":default:return Lu(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return NA(r);case"xxxx":case"xx":return Lu(r);case"xxxxx":case"xxx":default:return Lu(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+TA(r,":");case"OOOO":default:return"GMT"+Lu(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+TA(r,":");case"zzzz":default:return"GMT"+Lu(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Zt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Zt(r,e.length)}};function TA(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Zt(s,2)}function NA(t,e){return t%60===0?(t>0?"-":"+")+Zt(Math.abs(t)/60,2):Lu(t,e)}function Lu(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Zt(Math.trunc(r/60),2),s=Zt(r%60,2);return n+i+e+s}const IA=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},X6=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},VG=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return IA(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",IA(r,e)).replace("{{time}}",X6(i,e))},BG={p:X6,P:VG},UG=/^D+$/,zG=/^Y+$/,qG=["D","DD","YY","YYYY"];function $G(t){return UG.test(t)}function HG(t){return zG.test(t)}function WG(t,e,n){const r=GG(t,e,n);if(console.warn(r),qG.includes(t))throw new RangeError(r)}function GG(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const KG=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YG=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,QG=/^'([^]*?)'?$/,XG=/''/g,JG=/[a-zA-Z]/;function Os(t,e,n){var c,h,m,p;const r=N1(),i=r.locale??DG,s=r.firstWeekContainsDate??((h=(c=r.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((p=(m=r.locale)==null?void 0:m.options)==null?void 0:p.weekStartsOn)??0,a=$s(t);if(!eG(a))throw new RangeError("Invalid time value");let l=e.match(YG).map(_=>{const b=_[0];if(b==="p"||b==="P"){const N=BG[b];return N(_,i.formatLong)}return _}).join("").match(KG).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const b=_[0];if(b==="'")return{isToken:!1,value:ZG(_)};if(AA[b])return{isToken:!0,value:_};if(b.match(JG))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const b=_.value;(HG(b)||$G(b))&&WG(b,e,String(t));const N=AA[b[0]];return N(a,b,i.localize,u)}).join("")}function ZG(t){const e=t.match(QG);return e?e[1].replace(XG,"'"):t}const eK=()=>{const{id:t}=TI(),[e,n]=ee.useState(null),[r,i]=ee.useState([]),[s,o]=ee.useState(!1),[a,l]=ee.useState(!0),[u,c]=ee.useState(null),[h,m]=ee.useState(!1),[p,_]=ee.useState(!1),[b,N]=ee.useState(0),[w,S]=ee.useState(""),A=_a(),{user:O}=ui();ee.useEffect(()=>{(async()=>{var D,T,L,F,I,C,j;if(!t){c("No doctor ID provided."),l(!1);return}try{const Y=qn(St,"doctors",t),le=await Xh(Y);if(le.exists()){const M=le.data();n({id:le.id,name:M.name||"Dr. Unknown",specialty:M.specialty||"Unknown Specialty",rating:M.rating||0,reviews:M.reviews||0,ratings:M.ratings||[],location:M.location||"Unknown Location",image:M.image||"https://via.placeholder.com/300",bio:M.bio||"No bio available.",education:M.education||"No education details available.",experience:M.experience||"No experience details available.",procedures:M.procedures||[],availability:{status:((D=M.availability)==null?void 0:D.status)||"Unknown",nextSlot:((T=M.availability)==null?void 0:T.nextSlot)||"Not available",schedule:((L=M.availability)==null?void 0:L.schedule)||[]},pharmacies:M.pharmacies||[],privateClinic:{name:((F=M.privateClinic)==null?void 0:F.name)||"No clinic name",address:((I=M.privateClinic)==null?void 0:I.address)||"No address",facilities:((C=M.privateClinic)==null?void 0:C.facilities)||[],appointments:((j=M.privateClinic)==null?void 0:j.appointments)||"Not available"},medicalCenterId:M.medicalCenterId||"",medicalCenterName:M.medicalCenterName||"Unknown"})}else c("Doctor not found.");if(O){const M=si(ln(St,"bookings"),or("userId","==",O.id),or("doctorId","==",t),or("status","==","booked")),R=await ds(M);o(!R.empty)}const he=si(ln(St,"bookings"),or("doctorId","==",t),or("status","==","booked")),X=(await ds(he)).docs.map(M=>M.data().userId),re=si(ln(St,"reviews"),or("doctorId","==",t),or("userId","in",X.length>0?X:["none"])),Ae=(await ds(re)).docs.map(M=>({id:M.id,userId:M.data().userId,doctorId:M.data().doctorId,rating:M.data().rating,reviewText:M.data().reviewText,createdAt:M.data().createdAt,userName:M.data().userName||"Anonymous"}));i(Ae)}catch(Y){c(Y.message||"Failed to fetch doctor details or reviews.")}finally{l(!1)}})()},[t,O]);const K=async()=>{if(!e||!O||!b||!w){c("Please provide both a rating and a review.");return}if(!s){c("You must book an appointment with this doctor to submit a review.");return}try{const q={userId:O.id,doctorId:e.id,rating:b,reviewText:w,createdAt:new Date().toISOString(),userName:O.displayName||"Anonymous"},D=await Wl(ln(St,"reviews"),q),T=qn(St,"doctors",e.id),L=[...e.ratings||[],b],F=L.reduce((I,C)=>I+C,0)/L.length;await Fs(T,{ratings:lb(b),rating:F,reviews:(e.reviews||0)+1}),n({...e,ratings:L,rating:F,reviews:e.reviews+1}),i([...r,{id:D.id,...q}]),N(0),S(""),_(!1),alert("Review submitted successfully!")}catch(q){c("Failed to submit review. Please try again."),console.error(q)}};return a?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsx(at.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full"})}):u||!e?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsx("div",{className:"text-red-400 bg-red-900/20 border border-red-500/30 p-4 rounded-lg text-center",children:u||"Doctor not found."})}):y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-gray-900 text-cyan-50 p-4 md:p-8",children:y.jsxs("div",{className:"container mx-auto max-w-5xl",children:[y.jsx("div",{className:"cyber-card bg-gray-800/80 backdrop-blur-sm p-8 rounded-xl border border-cyan-500/30 shadow-lg",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs(at.div,{initial:{scale:.8},animate:{scale:1},className:"relative",children:[y.jsx("img",{src:e.image,alt:e.name,className:"w-full h-80 object-cover rounded-xl border border-cyan-400/50"}),y.jsx("div",{className:"absolute top-4 left-4 bg-cyan-500/80 text-white px-3 py-1 rounded-full text-sm",children:e.specialty})]}),y.jsxs("div",{className:"md:col-span-2 space-y-4",children:[y.jsx("h1",{className:"text-4xl font-bold neon-text text-cyan-400",children:e.name}),y.jsxs("div",{className:"flex items-center space-x-2 text-gray-300",children:[y.jsx(s5,{className:"w-5 h-5"}),y.jsxs("span",{children:[e.location," | ",e.medicalCenterName]})]}),y.jsxs("div",{className:"flex items-center space-x-2 text-yellow-400",children:[y.jsx(dh,{className:"w-5 h-5"}),y.jsxs("span",{children:[e.rating.toFixed(1)," (",e.reviews," reviews)"]})]}),y.jsx("p",{className:"text-gray-300 leading-relaxed",children:e.bio}),y.jsxs("div",{className:"flex space-x-4",children:[y.jsxs("button",{onClick:()=>{if(!O){A("/login");return}m(!0)},className:"cyber-button flex items-center space-x-2 px-6 py-3",children:[y.jsx(V6,{className:"w-5 h-5"}),y.jsx("span",{children:"Book Appointment"})]}),s&&y.jsxs("button",{onClick:()=>{if(!O){A("/login");return}_(!0)},className:"cyber-button flex items-center space-x-2 px-6 py-3",children:[y.jsx(dh,{className:"w-5 h-5"}),y.jsx("span",{children:"Add Review"})]})]})]})]})}),y.jsxs("div",{className:"mt-8 cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Reviews"}),r.length>0?y.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:r.map(q=>y.jsxs("div",{className:"border-b border-cyan-500/20 pb-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(dh,{className:"w-5 h-5 text-yellow-400"}),y.jsxs("span",{className:"text-yellow-400",children:[q.rating,"/5"]}),y.jsxs("span",{className:"text-gray-400",children:["by ",q.userName]})]}),y.jsx("p",{className:"text-gray-300 mt-2",children:q.reviewText}),y.jsx("p",{className:"text-gray-500 text-sm",children:Os(new Date(q.createdAt),"MMM dd, yyyy")})]},q.id))}):y.jsx("p",{className:"text-gray-300",children:"No reviews yet from booked users."})]}),y.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Education & Experience"}),y.jsxs("div",{className:"space-y-4 text-gray-300",children:[y.jsxs("div",{className:"flex items-start space-x-2",children:[y.jsx(AW,{className:"w-5 h-5 mt-1"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Education"}),y.jsx("p",{children:e.education})]})]}),y.jsxs("div",{className:"flex items-start space-x-2",children:[y.jsx(TW,{className:"w-5 h-5 mt-1"}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Experience"}),y.jsx("p",{children:e.experience})]})]})]})]}),y.jsxs("div",{className:"cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Procedures"}),y.jsx("ul",{className:"list-disc list-inside text-gray-300 space-y-2",children:e.procedures.map((q,D)=>y.jsx("li",{children:q},D))})]})]}),y.jsxs("div",{className:"mt-8 cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Availability"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-gray-300",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Status"}),y.jsx("p",{children:e.availability.status})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Next Slot"}),y.jsx("p",{children:e.availability.nextSlot})]}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:"Schedule"}),y.jsx("p",{children:e.availability.schedule.join(", ")})]})]})]}),y.jsxs("div",{className:"mt-8 cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Pharmacies"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-300",children:e.pharmacies.map((q,D)=>y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold",children:q.name}),y.jsx("p",{children:q.address}),y.jsxs("p",{children:["Hours: ",q.hours]}),y.jsxs("p",{children:["Specialties: ",q.specialties.join(", ")]})]},D))})]}),y.jsxs("div",{className:"mt-8 cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Private Clinic"}),y.jsxs("div",{className:"text-gray-300 space-y-2",children:[y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Name:"})," ",e.privateClinic.name]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Address:"})," ",e.privateClinic.address]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Facilities:"})," ",e.privateClinic.facilities.join(", ")]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Appointments:"})," ",e.privateClinic.appointments]})]})]}),h&&O&&y.jsx(G6,{doctor:e,userId:O.id,onClose:()=>m(!1)}),p&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"cyber-card bg-gray-800 p-6 rounded-xl max-w-md w-full",children:[y.jsxs("h2",{className:"text-2xl font-bold text-cyan-400 mb-4",children:["Add Review for ",e.name]}),y.jsx("p",{className:"text-gray-300 mb-4",children:"Rate and write your review:"}),u&&y.jsx("p",{className:"text-red-400 bg-red-900/20 border border-red-500/30 p-2 rounded-lg mb-4",children:u}),y.jsx("div",{className:"flex items-center space-x-2 mb-4",children:[1,2,3,4,5].map(q=>y.jsx(dh,{className:`w-6 h-6 cursor-pointer ${q<=b?"text-yellow-400":"text-gray-500"}`,onClick:()=>N(q)},q))}),y.jsx("textarea",{className:"w-full bg-gray-700 text-gray-100 p-2 rounded-lg border border-cyan-500/30 focus:outline-none focus:border-cyan-400",rows:4,placeholder:"Write your review...",value:w,onChange:q=>S(q.target.value)}),y.jsxs("div",{className:"flex space-x-4 mt-4",children:[y.jsx("button",{className:"cyber-button flex-1",onClick:K,disabled:!b||!w,children:"Submit Review"}),y.jsx("button",{className:"cyber-button bg-gray-600 flex-1",onClick:()=>{N(0),S(""),_(!1),c(null)},children:"Cancel"})]})]})})]})})},tK=()=>{const{user:t,isLoading:e}=ui(),[n,r]=ee.useState([]),[i,s]=ee.useState(""),[o,a]=ee.useState({}),[l,u]=ee.useState({}),[c,h]=ee.useState(null),[m,p]=ee.useState(null),[_,b]=ee.useState(!0);ee.useEffect(()=>{if(e){b(!0);return}const O=si(ln(St,"posts"),or("type","==","doctor"),lp("createdAt","desc")),K=up(O,q=>{const D=q.docs.map(T=>({id:T.id,...T.data()}));r(D),h(null),b(!1)},q=>{if(console.error("Firestore error:",q),b(!1),q.code==="failed-precondition"&&q.message.includes("index")){const D=q.message.match(/https:\/\/console\.firebase\.google\.com\/[^\s]+/);h(D?y.jsxs(y.Fragment,{children:["This query requires a Firestore index."," ",y.jsx("a",{href:D[0],target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 underline",children:"Click here to create it."})]}):"This query requires a Firestore index. Please create it in the Firebase Console.")}else h("Failed to fetch posts: "+q.message)});return()=>K()},[e]),ee.useEffect(()=>{if(n.length===0)return;const O=[];return n.forEach(K=>{const q=si(ln(St,"posts",K.id,"comments"),lp("createdAt","asc")),D=up(q,T=>{const L=T.docs.map(F=>({id:F.id,...F.data()}));a(F=>({...F,[K.id]:L}))},T=>{console.error("Firestore comments error:",T),h("Failed to fetch comments for post "+K.id+": "+T.message)});O.push(D)}),()=>O.forEach(K=>K())},[n]);const N=async()=>{if(!t){h("You must be logged in to post.");return}if(t.role!=="admin-1"){h("Only admin-1 doctors can post.");return}if(!i.trim()){h("Post content cannot be empty.");return}try{await Wl(ln(St,"posts"),{userId:t.id,userName:t.name||t.displayName||"Anonymous",content:i,createdAt:new Date().toISOString(),type:"doctor",likes:[],likeCount:0}),s(""),h(null)}catch(O){h("Failed to create post: "+O.message),console.error(O)}},w=async O=>{var q;if(!t){h("You must be logged in to comment.");return}const K=(q=l[O])==null?void 0:q.trim();if(!K){h("Comment cannot be empty.");return}try{await Wl(ln(St,"posts",O,"comments"),{userId:t.id,userName:t.name||t.displayName||"Anonymous",content:K,createdAt:new Date().toISOString()}),u(D=>({...D,[O]:""})),h(null)}catch(D){h("Failed to add comment: "+D.message),console.error(D)}},S=async(O,K)=>{if(!t){h("You must be logged in to like a post.");return}try{const q=qn(St,"posts",O);K?await Fs(q,{likes:M6(t.id),likeCount:_0(-1)}):await Fs(q,{likes:lb(t.id),likeCount:_0(1)}),h(null)}catch(q){h("Failed to toggle like: "+q.message),console.error(q)}},A=O=>{p(m===O?null:O)};return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-900 text-cyan-50 p-4 md:p-8",children:y.jsxs("div",{className:"container mx-auto max-w-5xl",children:[y.jsx("h2",{className:"text-3xl font-bold neon-text text-cyan-400 mb-6",children:"Doctors' Community"}),c&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg mb-4",children:c}),e&&y.jsx("p",{className:"text-gray-400 text-center",children:"Loading..."}),!e&&(t==null?void 0:t.role)==="admin-1"&&y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6 mb-6",children:y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("img",{src:(t==null?void 0:t.avatar)||"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&q=80&w=100&h=100",alt:"Your avatar",className:"w-10 h-10 rounded-full"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("textarea",{className:"w-full px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400 resize-none",rows:3,placeholder:"Share your medical insights...",value:i,onChange:O=>s(O.target.value)}),y.jsx("div",{className:"flex justify-end mt-2",children:y.jsxs("button",{className:"cyber-button flex items-center space-x-2",onClick:N,disabled:!i.trim(),children:[y.jsx(cp,{className:"w-4 h-4"}),y.jsx("span",{children:"Post"})]})})]})]})}),!e&&_&&y.jsx("p",{className:"text-gray-400 text-center",children:"Loading posts..."}),!e&&!_&&y.jsx("div",{className:"space-y-6",children:n.length>0?n.map((O,K)=>{var q,D,T;return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:K*.1},className:"cyber-card p-6",children:y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&q=80&w=100&h=100",alt:O.userName,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h3",{className:"font-bold text-cyan-400",children:O.userName}),y.jsx("span",{className:"text-sm text-gray-400",children:Os(new Date(O.createdAt),"MMM dd, yyyy HH:mm")})]}),y.jsx("p",{className:"text-gray-300 mb-4",children:m===O.id?O.content:`${O.content.slice(0,100)}${O.content.length>100?"...":""}`}),O.content.length>100&&y.jsx("button",{className:"text-cyan-400 flex items-center",onClick:()=>A(O.id),children:m===O.id?y.jsxs(y.Fragment,{children:[y.jsx(db,{className:"w-4 h-4"})," Collapse"]}):y.jsxs(y.Fragment,{children:[y.jsx(hb,{className:"w-4 h-4"})," Read More"]})}),y.jsxs("div",{className:"flex items-center space-x-6 mt-4",children:[y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",onClick:()=>S(O.id,O.likes.includes((t==null?void 0:t.id)||"")),children:[y.jsx(U6,{className:`w-4 h-4 ${O.likes.includes((t==null?void 0:t.id)||"")?"text-red-500":""}`,fill:O.likes.includes((t==null?void 0:t.id)||"")?"currentColor":"none"}),y.jsx("span",{children:O.likeCount})]}),y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",children:[y.jsx(fb,{className:"w-4 h-4"}),y.jsx("span",{children:((q=o[O.id])==null?void 0:q.length)||0})]}),y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",children:[y.jsx($6,{className:"w-4 h-4"}),y.jsx("span",{children:"Share"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("h3",{className:"text-lg font-bold text-cyan-400",children:"Comments"}),((D=o[O.id])==null?void 0:D.length)>0?y.jsx("div",{className:"space-y-2 mt-2",children:o[O.id].map(L=>y.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[y.jsx("p",{className:"text-gray-300",children:L.content}),y.jsxs("p",{className:"text-gray-500 text-sm",children:[L.userName," -"," ",Os(new Date(L.createdAt),"MMM dd, yyyy HH:mm")]})]},L.id))}):y.jsx("p",{className:"text-gray-400 text-sm",children:"No comments yet."}),t&&y.jsxs("div",{className:"mt-4",children:[y.jsx("textarea",{className:"w-full px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400 resize-none",rows:2,placeholder:"Add a comment...",value:l[O.id]||"",onChange:L=>u({...l,[O.id]:L.target.value})}),y.jsx("div",{className:"flex justify-end mt-2",children:y.jsxs("button",{className:"cyber-button flex items-center space-x-2",onClick:()=>w(O.id),disabled:!((T=l[O.id])!=null&&T.trim()),children:[y.jsx(cp,{className:"w-4 h-4"}),y.jsx("span",{children:"Comment"})]})})]})]})]})]})},O.id)}):y.jsx("p",{className:"text-gray-400 text-center",children:"No posts yet in the Doctors' Community."})})]})})},nK=()=>{const{user:t}=ui(),[e,n]=ee.useState([]),[r,i]=ee.useState(""),[s,o]=ee.useState({}),[a,l]=ee.useState({}),[u,c]=ee.useState(null),[h,m]=ee.useState(null),[p,_]=ee.useState(!0);ee.useEffect(()=>{if(!t){c("Please log in to view the Patients' Problems section."),_(!1);return}const A=si(ln(St,"posts"),or("type","==","patient"),lp("createdAt","desc")),O=up(A,K=>{const q=K.docs.map(D=>({id:D.id,...D.data()}));n(q),c(null),_(!1)},K=>{console.error("Firestore error:",K),_(!1),K.code==="failed-precondition"&&K.message.includes("index")?c("The query requires an index. Please create it in the Firebase Console or contact the administrator."):c(K.message||"Failed to fetch posts.")});return()=>O()},[t]),ee.useEffect(()=>{if(!t)return;const A=[];return e.forEach(O=>{const K=si(ln(St,"posts",O.id,"comments"),lp("createdAt","asc")),q=up(K,D=>{const T=D.docs.map(L=>({id:L.id,...L.data()}));o(L=>({...L,[O.id]:T}))},D=>{console.error("Firestore comments error:",D),c(D.message||"Failed to fetch comments.")});A.push(q)}),()=>A.forEach(O=>O())},[e,t]);const b=async()=>{if(!t){c("You must be logged in to post.");return}if(t.role==="admin-1"){c("Admins cannot post in the Patients' Problems section.");return}if(!r.trim()){c("Post content cannot be empty.");return}try{await Wl(ln(St,"posts"),{userId:t.id,userName:t.name||t.displayName||"Anonymous",content:r,createdAt:new Date().toISOString(),type:"patient",likes:[],likeCount:0}),i(""),c(null)}catch(A){c(A.message||"Failed to create post."),console.error(A)}},N=async A=>{var K;if(!t){c("You must be logged in to comment.");return}const O=(K=a[A])==null?void 0:K.trim();if(!O){c("Comment cannot be empty.");return}try{await Wl(ln(St,"posts",A,"comments"),{userId:t.id,userName:t.name||t.displayName||"Anonymous",content:O,createdAt:new Date().toISOString()}),l(q=>({...q,[A]:""})),c(null)}catch(q){c(q.message||"Failed to add comment."),console.error(q)}},w=async(A,O)=>{if(!t){c("You must be logged in to like a post.");return}try{const K=qn(St,"posts",A);O?await Fs(K,{likes:M6(t.id),likeCount:_0(-1)}):await Fs(K,{likes:lb(t.id),likeCount:_0(1)}),c(null)}catch(K){c(K.message||"Failed to toggle like."),console.error(K)}},S=A=>{m(h===A?null:A)};return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen bg-gray-900 text-cyan-50 p-4 md:p-8",children:y.jsxs("div",{className:"container mx-auto max-w-5xl",children:[y.jsx("h2",{className:"text-3xl font-bold neon-text text-cyan-400 mb-6",children:"Patients' Problems"}),u&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg mb-4",children:u}),p&&y.jsx("p",{className:"text-gray-400 text-center",children:"Loading posts..."}),!p&&(t==null?void 0:t.role)!=="admin-1"&&y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6 mb-6",children:y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("img",{src:(t==null?void 0:t.avatar)||"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=100&h=100",alt:"Your avatar",className:"w-10 h-10 rounded-full"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("textarea",{className:"w-full px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400 resize-none",rows:3,placeholder:"Share your health concerns...",value:r,onChange:A=>i(A.target.value)}),y.jsx("div",{className:"flex justify-end mt-2",children:y.jsxs("button",{className:"cyber-button flex items-center space-x-2",onClick:b,disabled:!r.trim(),children:[y.jsx(cp,{className:"w-4 h-4"}),y.jsx("span",{children:"Post"})]})})]})]})}),!p&&y.jsx("div",{className:"space-y-6",children:e.map((A,O)=>{var K,q,D;return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:O*.1},className:"cyber-card p-6",children:y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("img",{src:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80&w=100&h=100",alt:A.userName,className:"w-10 h-10 rounded-full"}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("h3",{className:"font-bold text-cyan-400",children:A.userName}),y.jsx("span",{className:"text-sm text-gray-400",children:Os(new Date(A.createdAt),"MMM dd, yyyy HH:mm")})]}),y.jsx("p",{className:"text-gray-300 mb-4",children:h===A.id?A.content:`${A.content.slice(0,100)}${A.content.length>100?"...":""}`}),A.content.length>100&&y.jsx("button",{className:"text-cyan-400 flex items-center",onClick:()=>S(A.id),children:h===A.id?y.jsxs(y.Fragment,{children:[y.jsx(db,{className:"w-4 h-4"})," Collapse"]}):y.jsxs(y.Fragment,{children:[y.jsx(hb,{className:"w-4 h-4"})," Read More"]})}),y.jsxs("div",{className:"flex items-center space-x-6 mt-4",children:[y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",onClick:()=>w(A.id,A.likes.includes((t==null?void 0:t.id)||"")),children:[y.jsx(U6,{className:`w-4 h-4 ${A.likes.includes((t==null?void 0:t.id)||"")?"text-red-500":""}`,fill:A.likes.includes((t==null?void 0:t.id)||"")?"currentColor":"none"}),y.jsx("span",{children:A.likeCount})]}),y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",children:[y.jsx(fb,{className:"w-4 h-4"}),y.jsx("span",{children:((K=s[A.id])==null?void 0:K.length)||0})]}),y.jsxs("button",{className:"flex items-center space-x-2 text-gray-400 hover:text-cyan-400 transition-colors",children:[y.jsx($6,{className:"w-4 h-4"}),y.jsx("span",{children:"Share"})]})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx("h3",{className:"text-lg font-bold text-cyan-400",children:"Comments"}),((q=s[A.id])==null?void 0:q.length)>0?y.jsx("div",{className:"space-y-2 mt-2",children:s[A.id].map(T=>y.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[y.jsx("p",{className:"text-gray-300",children:T.content}),y.jsxs("p",{className:"text-gray-500 text-sm",children:[T.userName," - ",Os(new Date(T.createdAt),"MMM dd, yyyy HH:mm")]})]},T.id))}):y.jsx("p",{className:"text-gray-400 text-sm",children:"No comments yet."}),t&&y.jsxs("div",{className:"mt-4",children:[y.jsx("textarea",{className:"w-full px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400 resize-none",rows:2,placeholder:"Add a comment...",value:a[A.id]||"",onChange:T=>l({...a,[A.id]:T.target.value})}),y.jsx("div",{className:"flex justify-end mt-2",children:y.jsxs("button",{className:"cyber-button flex items-center space-x-2",onClick:()=>N(A.id),disabled:!((D=a[A.id])!=null&&D.trim()),children:[y.jsx(cp,{className:"w-4 h-4"}),y.jsx("span",{children:"Comment"})]})})]})]})]})]})},A.id)})}),!p&&e.length===0&&y.jsx("p",{className:"text-gray-400 text-center",children:"No posts yet in the Patients' Problems section."})]})})},rK=()=>{const[t,e]=ee.useState("Doctors"),n=[{id:"Doctors",label:"Doctors' Community"},{id:"Patients",label:"Patients' Problems"}];return y.jsxs("div",{className:"space-y-8 min-h-screen bg-gray-900 p-4 md:p-8",children:[y.jsxs("div",{className:"relative",children:[y.jsx("nav",{className:"flex justify-center space-x-8 bg-gray-900/90 py-4 border-b border-cyan-500/30",children:n.map(r=>y.jsx("div",{onClick:()=>e(r.id),className:`cursor-pointer relative text-gray-400 text-lg font-bold transition-all duration-300 hover:text-cyan-400 ${t===r.id?"text-cyan-400 neon-text":""}`,children:r.label},r.id))}),y.jsx(at.div,{layoutId:"active-tab-indicator",className:"absolute bottom-0 h-1 neon-glow bg-cyan-400 rounded-md",initial:!1,animate:{left:`${n.findIndex(r=>r.id===t)*50}%`,width:"50%"},transition:{type:"spring",stiffness:200,damping:20}})]}),y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.5},children:t==="Doctors"?y.jsx(tK,{}):y.jsx(nK,{})},t)]})};var kA;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(kA||(kA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CA;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(CA||(CA={}));var PA;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(PA||(PA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=["user","model","function","system"];var RA;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(RA||(RA={}));var DA;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(DA||(DA={}));var jA;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(jA||(jA={}));var OA;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(OA||(OA={}));var Af;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Af||(Af={}));var MA;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(MA||(MA={}));var FA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(FA||(FA={}));var VA;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(VA||(VA={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Vc extends $r{constructor(e,n){super(e),this.response=n}}class J6 extends $r{constructor(e,n,r,i){super(e),this.status=n,this.statusText=r,this.errorDetails=i}}class Dl extends $r{}class Z6 extends $r{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iK="https://generativelanguage.googleapis.com",sK="v1beta",oK="0.24.0",aK="genai-js";var rc;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(rc||(rc={}));class lK{constructor(e,n,r,i,s){this.model=e,this.task=n,this.apiKey=r,this.stream=i,this.requestOptions=s}toString(){var e,n;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||sK;let s=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||iK}/${r}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function uK(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${aK}/${oK}`),e.join(" ")}async function cK(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",uK(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let r=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(i){throw new Dl(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${i.message}`)}for(const[i,s]of r.entries()){if(i==="x-goog-api-key")throw new Dl(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Dl(`Header name ${i} can only be set using the apiClient field`);n.append(i,s)}}return n}async function hK(t,e,n,r,i,s){const o=new lK(t,e,n,r,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},mK(s)),{method:"POST",headers:await cK(o),body:i})}}async function Op(t,e,n,r,i,s={},o=fetch){const{url:a,fetchOptions:l}=await hK(t,e,n,r,i,s);return dK(a,l,o)}async function dK(t,e,n=fetch){let r;try{r=await n(t,e)}catch(i){fK(i,t)}return r.ok||await pK(r,t),r}function fK(t,e){let n=t;throw n.name==="AbortError"?(n=new Z6(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof J6||t instanceof Dl||(n=new $r(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function pK(t,e){let n="",r;try{const i=await t.json();n=i.error.message,i.error.details&&(n+=` ${JSON.stringify(i.error.details)}`,r=i.error.details)}catch{}throw new J6(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,r)}function mK(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const n=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),mg(t.candidates[0]))throw new Vc(`${ul(t)}`,t);return gK(t)}else if(t.promptFeedback)throw new Vc(`Text not available. ${ul(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),mg(t.candidates[0]))throw new Vc(`${ul(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),BA(t)[0]}else if(t.promptFeedback)throw new Vc(`Function call not available. ${ul(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),mg(t.candidates[0]))throw new Vc(`${ul(t)}`,t);return BA(t)}else if(t.promptFeedback)throw new Vc(`Function call not available. ${ul(t)}`,t)},t}function gK(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function BA(t){var e,n,r,i;const s=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const o of(i=(r=t.candidates)===null||r===void 0?void 0:r[0].content)===null||i===void 0?void 0:i.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const yK=[Af.RECITATION,Af.SAFETY,Af.LANGUAGE];function mg(t){return!!t.finishReason&&yK.includes(t.finishReason)}function ul(t){var e,n,r;let i="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)i+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(i+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((r=t.candidates)===null||r===void 0)&&r[0]){const s=t.candidates[0];mg(s)&&(i+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(i+=`: ${s.finishMessage}`))}return i}function fp(t){return this instanceof fp?(this.v=t,this):new fp(t)}function vK(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(p){return new Promise(function(_,b){s.push([m,p,_,b])>1||a(m,p)})})}function a(m,p){try{l(r[m](p))}catch(_){h(s[0][3],_)}}function l(m){m.value instanceof fp?Promise.resolve(m.value.v).then(u,c):h(s[0][2],m)}function u(m){a("next",m)}function c(m){a("throw",m)}function h(m,p){m(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function wK(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=_K(e),[r,i]=n.tee();return{stream:bK(r),response:xK(i)}}async function xK(t){const e=[],n=t.getReader();for(;;){const{done:r,value:i}=await n.read();if(r)return mb(SK(e));e.push(i)}}function bK(t){return vK(this,arguments,function*(){const n=t.getReader();for(;;){const{value:r,done:i}=yield fp(n.read());if(i)break;yield yield fp(mb(r))}})}function _K(t){const e=t.getReader();return new ReadableStream({start(r){let i="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(i.trim()){r.error(new $r("Failed to parse stream"));return}r.close();return}i+=o;let l=i.match(UA),u;for(;l;){try{u=JSON.parse(l[1])}catch{r.error(new $r(`Error parsing JSON response: "${l[1]}"`));return}r.enqueue(u),i=i.substring(l[0].length),l=i.match(UA)}return s()}).catch(o=>{let a=o;throw a.stack=o.stack,a.name==="AbortError"?a=new Z6("Request aborted when reading from the stream"):a=new $r("Error reading from the stream"),a})}}})}function SK(t){const e=t[t.length-1],n={promptFeedback:e==null?void 0:e.promptFeedback};for(const r of t){if(r.candidates){let i=0;for(const s of r.candidates)if(n.candidates||(n.candidates=[]),n.candidates[i]||(n.candidates[i]={index:i}),n.candidates[i].citationMetadata=s.citationMetadata,n.candidates[i].groundingMetadata=s.groundingMetadata,n.candidates[i].finishReason=s.finishReason,n.candidates[i].finishMessage=s.finishMessage,n.candidates[i].safetyRatings=s.safetyRatings,s.content&&s.content.parts){n.candidates[i].content||(n.candidates[i].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),n.candidates[i].content.parts.push(o)}i++}r.usageMetadata&&(n.usageMetadata=r.usageMetadata)}return n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e,n,r){const i=await Op(e,rc.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),r);return wK(i)}async function tL(t,e,n,r){const s=await(await Op(e,rc.GENERATE_CONTENT,t,!1,JSON.stringify(n),r)).json();return{response:mb(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function pp(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return EK(e)}function EK(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let r=!1,i=!1;for(const s of t)"functionResponse"in s?(n.parts.push(s),i=!0):(e.parts.push(s),r=!0);if(r&&i)throw new $r("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!i)throw new $r("No content is provided for sending chat message.");return r?e:n}function AK(t,e){var n;let r={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(n=e==null?void 0:e.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const i=t.generateContentRequest!=null;if(t.contents){if(i)throw new Dl("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=t.contents}else if(i)r=Object.assign(Object.assign({},r),t.generateContentRequest);else{const s=pp(t);r.contents=[s]}return{generateContentRequest:r}}function zA(t){let e;return t.contents?e=t:e={contents:[pp(t)]},t.systemInstruction&&(e.systemInstruction=nL(t.systemInstruction)),e}function TK(t){return typeof t=="string"||Array.isArray(t)?{content:pp(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],NK={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function IK(t){let e=!1;for(const n of t){const{role:r,parts:i}=n;if(!e&&r!=="user")throw new $r(`First content should be with role 'user', got ${r}`);if(!LA.includes(r))throw new $r(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(LA)}`);if(!Array.isArray(i))throw new $r("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new $r("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of i)for(const l of qA)l in a&&(s[l]+=1);const o=NK[r];for(const a of qA)if(!o.includes(a)&&s[a]>0)throw new $r(`Content with role '${r}' can't contain '${a}' part`);e=!0}}function $A(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const r of n.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="SILENT_ERROR";class kK{constructor(e,n,r,i={}){this.model=n,this.params=r,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r!=null&&r.history&&(IK(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var r,i,s,o,a,l;await this._sendPromise;const u=pp(e),c={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n);let m;return this._sendPromise=this._sendPromise.then(()=>tL(this._apiKey,this.model,c,h)).then(p=>{var _;if($A(p.response)){this._history.push(u);const b=Object.assign({parts:[],role:"model"},(_=p.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(b)}else{const b=ul(p.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}m=p}),await this._sendPromise,m}async sendMessageStream(e,n={}){var r,i,s,o,a,l;await this._sendPromise;const u=pp(e),c={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),n),m=eL(this._apiKey,this.model,c,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(p=>{throw new Error(HA)}).then(p=>p.response).then(p=>{if($A(p)){this._history.push(u);const _=Object.assign({},p.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=ul(p);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(p=>{p.message!==HA&&console.error(p)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CK(t,e,n,r){return(await Op(e,rc.COUNT_TOKENS,t,!1,JSON.stringify(n),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PK(t,e,n,r){return(await Op(e,rc.EMBED_CONTENT,t,!1,JSON.stringify(n),r)).json()}async function LK(t,e,n,r){const i=n.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await Op(e,rc.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:i}),r)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n,r={}){this.apiKey=e,this._requestOptions=r,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=nL(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var r;const i=zA(e),s=Object.assign(Object.assign({},this._requestOptions),n);return tL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}async generateContentStream(e,n={}){var r;const i=zA(e),s=Object.assign(Object.assign({},this._requestOptions),n);return eL(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},i),s)}startChat(e){var n;return new kK(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const r=AK(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),n);return CK(this.apiKey,this.model,r,i)}async embedContent(e,n={}){const r=TK(e),i=Object.assign(Object.assign({},this._requestOptions),n);return PK(this.apiKey,this.model,r,i)}async batchEmbedContents(e,n={}){const r=Object.assign(Object.assign({},this._requestOptions),n);return LK(this.apiKey,this.model,e,r)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new $r("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new WA(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,r){if(!e.name)throw new Dl("Cached content must contain a `name` field.");if(!e.model)throw new Dl("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const o of i)if(n!=null&&n[o]&&e[o]&&(n==null?void 0:n[o])!==e[o]){if(o==="model"){const a=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new Dl(`Different value for "${o}" specified in modelParams (${n[o]}) and cachedContent (${e[o]})`)}const s=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new WA(this.apiKey,s,r)}}const DK=({sessions:t,activeSession:e,isSidebarOpen:n,setActiveSession:r,toggleSidebar:i,startNewChat:s})=>y.jsxs(at.div,{initial:{x:n?0:-300},animate:{x:n?0:-260},transition:{duration:.3},className:`fixed lg:relative z-40 top-0 left-0 h-full w-64 cyber-card p-4 flex flex-col lg:block ${n?"z-50":"lg:flex"}`,children:[y.jsxs("button",{onClick:s,className:"cyber-button w-full mb-4 flex items-center justify-center space-x-2",children:[y.jsx(pb,{className:"w-4 h-4"}),y.jsx("span",{children:"New Chat"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto space-y-2",children:t.map(o=>y.jsxs("div",{onClick:()=>r(o.id),className:`p-3 rounded-lg cursor-pointer transition-colors ${e===o.id?"bg-cyan-900/30 border border-cyan-500/30":"hover:bg-gray-800"}`,children:[y.jsx("div",{className:"text-sm font-semibold mb-1",children:Os(new Date(o.date),"MMM d, yyyy")}),y.jsx("p",{className:"text-xs text-gray-400 truncate",children:o.preview})]},o.id))}),y.jsx("button",{onClick:i,className:"absolute h-20 lg:hidden top-1/2 bottom-1/2 -right-9 z-50 p-2 rounded-full bg-gray-800 border border-cyan-500 text-cyan-400 shadow-lg",children:n?y.jsx(IW,{size:20}):y.jsx(kW,{size:20})})]}),GA=["Ampara","Anuradhapura","Badulla","Batticaloa","Colombo","Galle","Gampaha","Hambantota","Jaffna","Kalutara","Kandy","Kegalle","Kilinochchi","Kurunegala","Mannar","Matale","Matara","Monaragala","Mullaitivu","Nuwara Eliya","Polonnaruwa","Puttalam","Ratnapura","Trincomalee","Vavuniya"],jK=({location:t,setLocation:e})=>{const[n,r]=ee.useState(null),[i,s]=ee.useState(!1),o=async(l,u)=>{try{const m=await(await fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${l},${u}&key=AIzaSyBD_aOnEig3WlB-d6vahalfQPkWEDq0Wgk`)).json();if(m.status==="OK"&&m.results.length>0){const p=m.results.find(_=>_.types.includes("administrative_area_level_2"));if(p){const _=p.address_components[0].long_name;GA.includes(_)?e(_):(e(""),r("හඳුනාගත් දිස්ත්‍රික්කය අපගේ ලැයිස්තුවේ නැත. කරුණාකර තෝරන්න.")),r(null)}else r("ඔබේ දිස්ත්‍රික්කය හඳුනාගත නොහැකි වුණා. කරුණාකර තෝරන්න.")}else r("ස්ථානය හඳුනාගැනීමට අපහසු වුණා. කරුණාකර තෝරන්න.")}catch(c){console.error("Error during reverse geocoding:",c),r("ස්ථානය හඳුනාගැනීමට අපහසු වුණා. කරුණාකර තෝරන්න.")}finally{s(!1)}},a=()=>{navigator.geolocation?(s(!0),navigator.geolocation.getCurrentPosition(l=>{const{latitude:u,longitude:c}=l.coords;o(u,c)},l=>{console.error("Geolocation error:",l),r(l.code===l.PERMISSION_DENIED?"ස්ථාන බලපත්‍රය ලබාදීම ප්‍රතික්ෂේප කර ඇත. කරුණාකර ඔබේ දිස්ත්‍රික්කය තෝරන්න.":"ස්ථානය හඳුනාගැනීමට අපහසු වුණා. කරුණාකර ඔබේ දිස්ත්‍රික්කය තෝරන්න."),s(!1)},{timeout:1e4})):(r("ඔබේ බ්‍රවුසරය ස්ථාන හඳුනාගැනීමට සහය නොදක්වයි."),s(!1))};return ee.useEffect(()=>{},[]),y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-4",children:[y.jsxs("div",{className:"flex items-center overflow-x-auto space-x-4",children:[y.jsxs("div",{className:"location flex items-center space-x-4",children:[y.jsx(s5,{className:"w-5 h-5 text-cyan-400"}),y.jsxs("select",{className:"flex-1 max-sm:flex max-sm:w-28 px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400",value:t,onChange:l=>e(l.target.value),children:[y.jsx("option",{value:"",children:"Select your district..."}),GA.map(l=>y.jsx("option",{value:l,children:l},l))]}),y.jsxs("button",{className:"cyber-button flex items-center justify-center space-x-2",onClick:a,disabled:i,children:[y.jsx(s5,{className:"w-4 h-4"}),y.jsx("span",{children:i?"Detecting...":"Detect Location"})]})]}),y.jsx(ho,{to:"/report",children:y.jsxs("div",{className:"export-pdf flex items-center space-x-4 cyber-button",children:[y.jsx(B6,{className:"w-5 h-5 text-cyan-400"}),y.jsx("span",{children:"Export PDF"})]})})]}),n&&y.jsx("p",{className:"text-red-400 text-sm mt-2",children:n})]})};function OK(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const MK=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,FK=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,VK={};function KA(t,e){return(VK.jsx?FK:MK).test(t)}const BK=/[ \t\n\f\r]/g;function UK(t){return typeof t=="object"?t.type==="text"?YA(t.value):!1:YA(t)}function YA(t){return t.replace(BK,"")===""}class Mp{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Mp.prototype.normal={};Mp.prototype.property={};Mp.prototype.space=void 0;function rL(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Mp(n,r,e)}function o5(t){return t.toLowerCase()}class Ni{constructor(e,n){this.attribute=n,this.property=e}}Ni.prototype.attribute="";Ni.prototype.booleanish=!1;Ni.prototype.boolean=!1;Ni.prototype.commaOrSpaceSeparated=!1;Ni.prototype.commaSeparated=!1;Ni.prototype.defined=!1;Ni.prototype.mustUseProperty=!1;Ni.prototype.number=!1;Ni.prototype.overloadedBoolean=!1;Ni.prototype.property="";Ni.prototype.spaceSeparated=!1;Ni.prototype.space=void 0;let zK=0;const Ct=hc(),Jn=hc(),iL=hc(),Ve=hc(),dn=hc(),Eh=hc(),Fi=hc();function hc(){return 2**++zK}const a5=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ct,booleanish:Jn,commaOrSpaceSeparated:Fi,commaSeparated:Eh,number:Ve,overloadedBoolean:iL,spaceSeparated:dn},Symbol.toStringTag,{value:"Module"})),Zy=Object.keys(a5);class gb extends Ni{constructor(e,n,r,i){let s=-1;if(super(e,n),QA(this,"space",i),typeof r=="number")for(;++s<Zy.length;){const o=Zy[s];QA(this,Zy[s],(r&a5[o])===a5[o])}}}gb.prototype.defined=!0;function QA(t,e,n){n&&(t[e]=n)}function dd(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new gb(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[o5(r)]=r,n[o5(s.attribute)]=r}return new Mp(e,n,t.space)}const sL=dd({properties:{ariaActiveDescendant:null,ariaAtomic:Jn,ariaAutoComplete:null,ariaBusy:Jn,ariaChecked:Jn,ariaColCount:Ve,ariaColIndex:Ve,ariaColSpan:Ve,ariaControls:dn,ariaCurrent:null,ariaDescribedBy:dn,ariaDetails:null,ariaDisabled:Jn,ariaDropEffect:dn,ariaErrorMessage:null,ariaExpanded:Jn,ariaFlowTo:dn,ariaGrabbed:Jn,ariaHasPopup:null,ariaHidden:Jn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:dn,ariaLevel:Ve,ariaLive:null,ariaModal:Jn,ariaMultiLine:Jn,ariaMultiSelectable:Jn,ariaOrientation:null,ariaOwns:dn,ariaPlaceholder:null,ariaPosInSet:Ve,ariaPressed:Jn,ariaReadOnly:Jn,ariaRelevant:null,ariaRequired:Jn,ariaRoleDescription:dn,ariaRowCount:Ve,ariaRowIndex:Ve,ariaRowSpan:Ve,ariaSelected:Jn,ariaSetSize:Ve,ariaSort:null,ariaValueMax:Ve,ariaValueMin:Ve,ariaValueNow:Ve,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function oL(t,e){return e in t?t[e]:e}function aL(t,e){return oL(t,e.toLowerCase())}const qK=dd({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Eh,acceptCharset:dn,accessKey:dn,action:null,allow:null,allowFullScreen:Ct,allowPaymentRequest:Ct,allowUserMedia:Ct,alt:null,as:null,async:Ct,autoCapitalize:null,autoComplete:dn,autoFocus:Ct,autoPlay:Ct,blocking:dn,capture:null,charSet:null,checked:Ct,cite:null,className:dn,cols:Ve,colSpan:null,content:null,contentEditable:Jn,controls:Ct,controlsList:dn,coords:Ve|Eh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ct,defer:Ct,dir:null,dirName:null,disabled:Ct,download:iL,draggable:Jn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ct,formTarget:null,headers:dn,height:Ve,hidden:Ct,high:Ve,href:null,hrefLang:null,htmlFor:dn,httpEquiv:dn,id:null,imageSizes:null,imageSrcSet:null,inert:Ct,inputMode:null,integrity:null,is:null,isMap:Ct,itemId:null,itemProp:dn,itemRef:dn,itemScope:Ct,itemType:dn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ct,low:Ve,manifest:null,max:null,maxLength:Ve,media:null,method:null,min:null,minLength:Ve,multiple:Ct,muted:Ct,name:null,nonce:null,noModule:Ct,noValidate:Ct,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ct,optimum:Ve,pattern:null,ping:dn,placeholder:null,playsInline:Ct,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ct,referrerPolicy:null,rel:dn,required:Ct,reversed:Ct,rows:Ve,rowSpan:Ve,sandbox:dn,scope:null,scoped:Ct,seamless:Ct,selected:Ct,shadowRootClonable:Ct,shadowRootDelegatesFocus:Ct,shadowRootMode:null,shape:null,size:Ve,sizes:null,slot:null,span:Ve,spellCheck:Jn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ve,step:null,style:null,tabIndex:Ve,target:null,title:null,translate:null,type:null,typeMustMatch:Ct,useMap:null,value:Jn,width:Ve,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:dn,axis:null,background:null,bgColor:null,border:Ve,borderColor:null,bottomMargin:Ve,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ct,declare:Ct,event:null,face:null,frame:null,frameBorder:null,hSpace:Ve,leftMargin:Ve,link:null,longDesc:null,lowSrc:null,marginHeight:Ve,marginWidth:Ve,noResize:Ct,noHref:Ct,noShade:Ct,noWrap:Ct,object:null,profile:null,prompt:null,rev:null,rightMargin:Ve,rules:null,scheme:null,scrolling:Jn,standby:null,summary:null,text:null,topMargin:Ve,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ve,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ct,disableRemotePlayback:Ct,prefix:null,property:null,results:Ve,security:null,unselectable:null},space:"html",transform:aL}),$K=dd({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Fi,accentHeight:Ve,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ve,amplitude:Ve,arabicForm:null,ascent:Ve,attributeName:null,attributeType:null,azimuth:Ve,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ve,by:null,calcMode:null,capHeight:Ve,className:dn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ve,diffuseConstant:Ve,direction:null,display:null,dur:null,divisor:Ve,dominantBaseline:null,download:Ct,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ve,enableBackground:null,end:null,event:null,exponent:Ve,externalResourcesRequired:null,fill:null,fillOpacity:Ve,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Eh,g2:Eh,glyphName:Eh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ve,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ve,horizOriginX:Ve,horizOriginY:Ve,id:null,ideographic:Ve,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ve,k:Ve,k1:Ve,k2:Ve,k3:Ve,k4:Ve,kernelMatrix:Fi,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ve,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ve,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ve,overlineThickness:Ve,paintOrder:null,panose1:null,path:null,pathLength:Ve,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:dn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ve,pointsAtY:Ve,pointsAtZ:Ve,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Fi,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Fi,rev:Fi,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Fi,requiredFeatures:Fi,requiredFonts:Fi,requiredFormats:Fi,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ve,specularExponent:Ve,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ve,strikethroughThickness:Ve,string:null,stroke:null,strokeDashArray:Fi,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ve,strokeOpacity:Ve,strokeWidth:null,style:null,surfaceScale:Ve,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Fi,tabIndex:Ve,tableValues:null,target:null,targetX:Ve,targetY:Ve,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Fi,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ve,underlineThickness:Ve,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ve,values:null,vAlphabetic:Ve,vMathematical:Ve,vectorEffect:null,vHanging:Ve,vIdeographic:Ve,version:null,vertAdvY:Ve,vertOriginX:Ve,vertOriginY:Ve,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ve,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:oL}),lL=dd({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),uL=dd({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:aL}),cL=dd({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),HK={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},WK=/[A-Z]/g,XA=/-[a-z]/g,GK=/^data[-\w.:]+$/i;function KK(t,e){const n=o5(e);let r=e,i=Ni;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&GK.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(XA,QK);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!XA.test(s)){let o=s.replace(WK,YK);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=gb}return new i(r,e)}function YK(t){return"-"+t.toLowerCase()}function QK(t){return t.charAt(1).toUpperCase()}const XK=rL([sL,qK,lL,uL,cL],"html"),yb=rL([sL,$K,lL,uL,cL],"svg");function JK(t){return t.join(" ").trim()}var vb={},JA=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ZK=/\n/g,eY=/^\s*/,tY=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,nY=/^:\s*/,rY=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,iY=/^[;\s]*/,sY=/^\s+|\s+$/g,oY=`
`,ZA="/",e3="*",Du="",aY="comment",lY="declaration",uY=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(_){var b=_.match(ZK);b&&(n+=b.length);var N=_.lastIndexOf(oY);r=~N?_.length-N:r+_.length}function s(){var _={line:n,column:r};return function(b){return b.position=new o(_),u(),b}}function o(_){this.start=_,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(_){var b=new Error(e.source+":"+n+":"+r+": "+_);if(b.reason=_,b.filename=e.source,b.line=n,b.column=r,b.source=t,!e.silent)throw b}function l(_){var b=_.exec(t);if(b){var N=b[0];return i(N),t=t.slice(N.length),b}}function u(){l(eY)}function c(_){var b;for(_=_||[];b=h();)b!==!1&&_.push(b);return _}function h(){var _=s();if(!(ZA!=t.charAt(0)||e3!=t.charAt(1))){for(var b=2;Du!=t.charAt(b)&&(e3!=t.charAt(b)||ZA!=t.charAt(b+1));)++b;if(b+=2,Du===t.charAt(b-1))return a("End of comment missing");var N=t.slice(2,b-2);return r+=2,i(N),t=t.slice(b),r+=2,_({type:aY,comment:N})}}function m(){var _=s(),b=l(tY);if(b){if(h(),!l(nY))return a("property missing ':'");var N=l(rY),w=_({type:lY,property:t3(b[0].replace(JA,Du)),value:N?t3(N[0].replace(JA,Du)):Du});return l(iY),w}}function p(){var _=[];c(_);for(var b;b=m();)b!==!1&&(_.push(b),c(_));return _}return u(),p()};function t3(t){return t?t.replace(sY,Du):Du}var cY=_g&&_g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vb,"__esModule",{value:!0});vb.default=dY;var hY=cY(uY);function dY(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,hY.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.camelCase=void 0;var fY=/^--[a-zA-Z0-9_-]+$/,pY=/-([a-z])/g,mY=/^[^-]+$/,gY=/^-(webkit|moz|ms|o|khtml)-/,yY=/^-(ms)-/,vY=function(t){return!t||mY.test(t)||fY.test(t)},wY=function(t,e){return e.toUpperCase()},n3=function(t,e){return"".concat(e,"-")},xY=function(t,e){return e===void 0&&(e={}),vY(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(yY,n3):t=t.replace(gY,n3),t.replace(pY,wY))};I1.camelCase=xY;var bY=_g&&_g.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_Y=bY(vb),SY=I1;function l5(t,e){var n={};return!t||typeof t!="string"||(0,_Y.default)(t,function(r,i){r&&i&&(n[(0,SY.camelCase)(r,e)]=i)}),n}l5.default=l5;var EY=l5;const AY=I0(EY),hL=dL("end"),wb=dL("start");function dL(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function TY(t){const e=wb(t),n=hL(t);if(e&&n)return{start:e,end:n}}function Tf(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?r3(t.position):"start"in t||"end"in t?r3(t):"line"in t||"column"in t?u5(t):""}function u5(t){return i3(t&&t.line)+":"+i3(t&&t.column)}function r3(t){return u5(t&&t.start)+"-"+u5(t&&t.end)}function i3(t){return t&&typeof t=="number"?t:1}class Xr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=Tf(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Xr.prototype.file="";Xr.prototype.name="";Xr.prototype.reason="";Xr.prototype.message="";Xr.prototype.stack="";Xr.prototype.column=void 0;Xr.prototype.line=void 0;Xr.prototype.ancestors=void 0;Xr.prototype.cause=void 0;Xr.prototype.fatal=void 0;Xr.prototype.place=void 0;Xr.prototype.ruleId=void 0;Xr.prototype.source=void 0;const xb={}.hasOwnProperty,NY=new Map,IY=/[A-Z]/g,kY=new Set(["table","tbody","thead","tfoot","tr"]),CY=new Set(["td","th"]),fL="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function PY(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=VY(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=FY(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?yb:XK,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=pL(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function pL(t,e,n){if(e.type==="element")return LY(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return RY(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return jY(t,e,n);if(e.type==="mdxjsEsm")return DY(t,e);if(e.type==="root")return OY(t,e,n);if(e.type==="text")return MY(t,e)}function LY(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=yb,t.schema=i),t.ancestors.push(e);const s=gL(t,e.tagName,!1),o=BY(t,e);let a=_b(t,e);return kY.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!UK(l):!0})),mL(t,o,s,e),bb(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function RY(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}mp(t,e.position)}function DY(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);mp(t,e.position)}function jY(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=yb,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:gL(t,e.name,!0),o=UY(t,e),a=_b(t,e);return mL(t,o,s,e),bb(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function OY(t,e,n){const r={};return bb(r,_b(t,e)),t.create(e,t.Fragment,r,n)}function MY(t,e){return e.value}function mL(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function bb(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function FY(t,e,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:e;return a?u(s,o,a):u(s,o)}}function VY(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=wb(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function BY(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&xb.call(e.properties,i)){const s=zY(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&CY.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function UY(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else mp(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else mp(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function _b(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:NY;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=pL(t,s,o);a!==void 0&&n.push(a)}return n}function zY(t,e,n){const r=KK(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?OK(n):JK(n)),r.property==="style"){let i=typeof n=="object"?n:qY(t,String(n));return t.stylePropertyNameCase==="css"&&(i=$Y(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?HK[r.property]||r.property:r.attribute,n]}}function qY(t,e){try{return AY(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new Xr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=fL+"#cannot-parse-style-attribute",i}}function gL(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=KA(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=KA(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return xb.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);mp(t)}function mp(t,e){const n=new Xr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=fL+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $Y(t){const e={};let n;for(n in t)xb.call(t,n)&&(e[HY(n)]=t[n]);return e}function HY(t){let e=t.replace(IY,WY);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function WY(t){return"-"+t.toLowerCase()}const ev={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},GY={};function KY(t,e){const n=GY,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return yL(t,r,i)}function yL(t,e,n){if(YY(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return s3(t.children,e,n)}return Array.isArray(t)?s3(t,e,n):""}function s3(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=yL(t[i],e,n);return r.join("")}function YY(t){return!!(t&&typeof t=="object")}const o3=document.createElement("i");function Sb(t){const e="&"+t+";";o3.innerHTML=e;const n=o3.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function No(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function cs(t,e){return t.length>0?(No(t,t.length,0,e),t):e}const a3={}.hasOwnProperty;function QY(t){const e={};let n=-1;for(;++n<t.length;)XY(e,t[n]);return e}function XY(t,e){let n;for(n in e){const i=(a3.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){a3.call(i,o)||(i[o]=[]);const a=s[o];JY(i[o],Array.isArray(a)?a:a?[a]:[])}}}function JY(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);No(t,0,0,r)}function vL(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Ah(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const go=su(/[A-Za-z]/),qi=su(/[\dA-Za-z]/),ZY=su(/[#-'*+\--9=?A-Z^-~]/);function c5(t){return t!==null&&(t<32||t===127)}const h5=su(/\d/),eQ=su(/[\dA-Fa-f]/),tQ=su(/[!-/:-@[-`{-~]/);function wt(t){return t!==null&&t<-2}function Ti(t){return t!==null&&(t<0||t===32)}function Ht(t){return t===-2||t===-1||t===32}const nQ=su(new RegExp("\\p{P}|\\p{S}","u")),rQ=su(/\s/);function su(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function fd(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&qi(t.charCodeAt(n+1))&&qi(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function pn(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Ht(l)?(t.enter(n),a(l)):e(l)}function a(l){return Ht(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const iQ={tokenize:sQ};function sQ(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),pn(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return wt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const oQ={tokenize:aQ},l3={tokenize:lQ};function aQ(t){const e=this,n=[];let r=0,i,s,o;return a;function a(A){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,l,u)(A)}return u(A)}function l(A){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const O=e.events.length;let K=O,q;for(;K--;)if(e.events[K][0]==="exit"&&e.events[K][1].type==="chunkFlow"){q=e.events[K][1].end;break}w(r);let D=O;for(;D<e.events.length;)e.events[D][1].end={...q},D++;return No(e.events,K+1,0,e.events.slice(O)),e.events.length=D,u(A)}return a(A)}function u(A){if(r===n.length){if(!i)return m(A);if(i.currentConstruct&&i.currentConstruct.concrete)return _(A);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(l3,c,h)(A)}function c(A){return i&&S(),w(r),m(A)}function h(A){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,_(A)}function m(A){return e.containerState={},t.attempt(l3,p,_)(A)}function p(A){return r++,n.push([e.currentConstruct,e.containerState]),m(A)}function _(A){if(A===null){i&&S(),w(0),t.consume(A);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(A)}function b(A){if(A===null){N(t.exit("chunkFlow"),!0),w(0),t.consume(A);return}return wt(A)?(t.consume(A),N(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(A),b)}function N(A,O){const K=e.sliceStream(A);if(O&&K.push(null),A.previous=s,s&&(s.next=A),s=A,i.defineSkip(A.start),i.write(K),e.parser.lazy[A.start.line]){let q=i.events.length;for(;q--;)if(i.events[q][1].start.offset<o&&(!i.events[q][1].end||i.events[q][1].end.offset>o))return;const D=e.events.length;let T=D,L,F;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){if(L){F=e.events[T][1].end;break}L=!0}for(w(r),q=D;q<e.events.length;)e.events[q][1].end={...F},q++;No(e.events,T+1,0,e.events.slice(D)),e.events.length=q}}function w(A){let O=n.length;for(;O-- >A;){const K=n[O];e.containerState=K[1],K[0].exit.call(e,t)}n.length=A}function S(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function lQ(t,e,n){return pn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function u3(t){if(t===null||Ti(t)||rQ(t))return 1;if(nQ(t))return 2}function Eb(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const d5={name:"attention",resolveAll:uQ,tokenize:cQ};function uQ(t,e){let n=-1,r,i,s,o,a,l,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},m={...t[n][1].start};c3(h,-l),c3(m,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},u=[],t[r][1].end.offset-t[r][1].start.offset&&(u=cs(u,[["enter",t[r][1],e],["exit",t[r][1],e]])),u=cs(u,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=cs(u,Eb(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),u=cs(u,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=cs(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,No(t,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function cQ(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=u3(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const u=t.exit("attentionSequence"),c=u3(l),h=!c||c===2&&i||n.includes(l),m=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?h:h&&(i||!m)),u._close=!!(s===42?m:m&&(c||!h)),e(l)}}function c3(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const hQ={name:"autolink",tokenize:dQ};function dQ(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return go(p)?(t.consume(p),o):p===64?n(p):u(p)}function o(p){return p===43||p===45||p===46||qi(p)?(r=1,a(p)):u(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||qi(p))&&r++<32?(t.consume(p),a):(r=0,u(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||c5(p)?n(p):(t.consume(p),l)}function u(p){return p===64?(t.consume(p),c):ZY(p)?(t.consume(p),u):n(p)}function c(p){return qi(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,c):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):m(p)}function m(p){if((p===45||qi(p))&&r++<63){const _=p===45?m:h;return t.consume(p),_}return n(p)}}const k1={partial:!0,tokenize:fQ};function fQ(t,e,n){return r;function r(s){return Ht(s)?pn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||wt(s)?e(s):n(s)}}const wL={continuation:{tokenize:mQ},exit:gQ,name:"blockQuote",tokenize:pQ};function pQ(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ht(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function mQ(t,e,n){const r=this;return i;function i(o){return Ht(o)?pn(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(wL,e,n)(o)}}function gQ(t){t.exit("blockQuote")}const xL={name:"characterEscape",tokenize:yQ};function yQ(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return tQ(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const bL={name:"characterReference",tokenize:vQ};function vQ(t,e,n){const r=this;let i=0,s,o;return a;function a(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),l}function l(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=qi,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=eQ,c):(t.enter("characterReferenceValue"),s=7,o=h5,c(h))}function c(h){if(h===59&&i){const m=t.exit("characterReferenceValue");return o===qi&&!Sb(r.sliceSerialize(m))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),c):n(h)}}const h3={partial:!0,tokenize:xQ},d3={concrete:!0,name:"codeFenced",tokenize:wQ};function wQ(t,e,n){const r=this,i={partial:!0,tokenize:K};let s=0,o=0,a;return l;function l(q){return u(q)}function u(q){const D=r.events[r.events.length-1];return s=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,a=q,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(q)}function c(q){return q===a?(o++,t.consume(q),c):o<3?n(q):(t.exit("codeFencedFenceSequence"),Ht(q)?pn(t,h,"whitespace")(q):h(q))}function h(q){return q===null||wt(q)?(t.exit("codeFencedFence"),r.interrupt?e(q):t.check(h3,b,O)(q)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(q))}function m(q){return q===null||wt(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(q)):Ht(q)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),pn(t,p,"whitespace")(q)):q===96&&q===a?n(q):(t.consume(q),m)}function p(q){return q===null||wt(q)?h(q):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(q))}function _(q){return q===null||wt(q)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(q)):q===96&&q===a?n(q):(t.consume(q),_)}function b(q){return t.attempt(i,O,N)(q)}function N(q){return t.enter("lineEnding"),t.consume(q),t.exit("lineEnding"),w}function w(q){return s>0&&Ht(q)?pn(t,S,"linePrefix",s+1)(q):S(q)}function S(q){return q===null||wt(q)?t.check(h3,b,O)(q):(t.enter("codeFlowValue"),A(q))}function A(q){return q===null||wt(q)?(t.exit("codeFlowValue"),S(q)):(t.consume(q),A)}function O(q){return t.exit("codeFenced"),e(q)}function K(q,D,T){let L=0;return F;function F(le){return q.enter("lineEnding"),q.consume(le),q.exit("lineEnding"),I}function I(le){return q.enter("codeFencedFence"),Ht(le)?pn(q,C,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(le):C(le)}function C(le){return le===a?(q.enter("codeFencedFenceSequence"),j(le)):T(le)}function j(le){return le===a?(L++,q.consume(le),j):L>=o?(q.exit("codeFencedFenceSequence"),Ht(le)?pn(q,Y,"whitespace")(le):Y(le)):T(le)}function Y(le){return le===null||wt(le)?(q.exit("codeFencedFence"),D(le)):T(le)}}}function xQ(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const tv={name:"codeIndented",tokenize:_Q},bQ={partial:!0,tokenize:SQ};function _Q(t,e,n){const r=this;return i;function i(u){return t.enter("codeIndented"),pn(t,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):wt(u)?t.attempt(bQ,o,l)(u):(t.enter("codeFlowValue"),a(u))}function a(u){return u===null||wt(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),a)}function l(u){return t.exit("codeIndented"),e(u)}}function SQ(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):pn(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):wt(o)?i(o):n(o)}}const EQ={name:"codeText",previous:TQ,resolve:AQ,tokenize:NQ};function AQ(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function TQ(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function NQ(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),a(h)}function a(h){return h===96?(t.consume(h),r++,a):(t.exit("codeTextSequence"),l(h))}function l(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),l):h===96?(s=t.enter("codeTextSequence"),i=0,c(h)):wt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),l):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||wt(h)?(t.exit("codeTextData"),l(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class IQ{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&qd(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),qd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),qd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);qd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);qd(this.left,n.reverse())}}}function qd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function _L(t){const e={};let n=-1,r,i,s,o,a,l,u;const c=new IQ(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,kQ(c,n)),n=e[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return No(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function kQ(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,h,m=-1,p=n,_=0,b=0;const N=[b];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(b=m+1,N.push(b),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):N.pop(),m=N.length;m--;){const w=a.slice(N[m],N[m+1]),S=s.pop();l.push([S,S+w.length-1]),t.splice(S,2,w)}for(l.reverse(),m=-1;++m<l.length;)u[_+l[m][0]]=_+l[m][1],_+=l[m][1]-l[m][0]-1;return u}const CQ={resolve:LQ,tokenize:RQ},PQ={partial:!0,tokenize:DQ};function LQ(t){return _L(t),t}function RQ(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):wt(a)?t.check(PQ,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function DQ(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),pn(t,s,"linePrefix")}function s(o){if(o===null||wt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function SL(t,e,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return h;function h(w){return w===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(w),t.exit(s),m):w===null||w===32||w===41||c5(w)?n(w):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),b(w))}function m(w){return w===62?(t.enter(s),t.consume(w),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(w))}function p(w){return w===62?(t.exit("chunkString"),t.exit(a),m(w)):w===null||w===60||wt(w)?n(w):(t.consume(w),w===92?_:p)}function _(w){return w===60||w===62||w===92?(t.consume(w),p):p(w)}function b(w){return!c&&(w===null||w===41||Ti(w))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(w)):c<u&&w===40?(t.consume(w),c++,b):w===41?(t.consume(w),c--,b):w===null||w===32||w===40||c5(w)?n(w):(t.consume(w),w===92?N:b)}function N(w){return w===40||w===41||w===92?(t.consume(w),b):b(w)}}function EL(t,e,n,r,i,s){const o=this;let a=0,l;return u;function u(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),c}function c(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):wt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||wt(p)||a++>999?(t.exit("chunkString"),c(p)):(t.consume(p),l||(l=!Ht(p)),p===92?m:h)}function m(p){return p===91||p===92||p===93?(t.consume(p),a++,h):h(p)}}function AL(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,l):n(m)}function l(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),u(m))}function u(m){return m===o?(t.exit(s),l(o)):m===null?n(m):wt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),pn(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(m))}function c(m){return m===o||m===null||wt(m)?(t.exit("chunkString"),u(m)):(t.consume(m),m===92?h:c)}function h(m){return m===o||m===92?(t.consume(m),c):c(m)}}function Nf(t,e){let n;return r;function r(i){return wt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ht(i)?pn(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const jQ={name:"definition",tokenize:MQ},OQ={partial:!0,tokenize:FQ};function MQ(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return EL.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=Ah(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return Ti(p)?Nf(t,u)(p):u(p)}function u(p){return SL(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function c(p){return t.attempt(OQ,h,h)(p)}function h(p){return Ht(p)?pn(t,m,"whitespace")(p):m(p)}function m(p){return p===null||wt(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function FQ(t,e,n){return r;function r(a){return Ti(a)?Nf(t,i)(a):n(a)}function i(a){return AL(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ht(a)?pn(t,o,"whitespace")(a):o(a)}function o(a){return a===null||wt(a)?e(a):n(a)}}const VQ={name:"hardBreakEscape",tokenize:BQ};function BQ(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return wt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const UQ={name:"headingAtx",resolve:zQ,tokenize:qQ};function zQ(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},No(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function qQ(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(t.consume(c),o):c===null||Ti(c)?(t.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(t.enter("atxHeadingSequence"),l(c)):c===null||wt(c)?(t.exit("atxHeading"),e(c)):Ht(c)?pn(t,a,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function l(c){return c===35?(t.consume(c),l):(t.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Ti(c)?(t.exit("atxHeadingText"),a(c)):(t.consume(c),u)}}const $Q=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],f3=["pre","script","style","textarea"],HQ={concrete:!0,name:"htmlFlow",resolveTo:KQ,tokenize:YQ},WQ={partial:!0,tokenize:XQ},GQ={partial:!0,tokenize:QQ};function KQ(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function YQ(t,e,n){const r=this;let i,s,o,a,l;return u;function u(R){return c(R)}function c(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),h}function h(R){return R===33?(t.consume(R),m):R===47?(t.consume(R),s=!0,b):R===63?(t.consume(R),i=3,r.interrupt?e:z):go(R)?(t.consume(R),o=String.fromCharCode(R),N):n(R)}function m(R){return R===45?(t.consume(R),i=2,p):R===91?(t.consume(R),i=5,a=0,_):go(R)?(t.consume(R),i=4,r.interrupt?e:z):n(R)}function p(R){return R===45?(t.consume(R),r.interrupt?e:z):n(R)}function _(R){const Z="CDATA[";return R===Z.charCodeAt(a++)?(t.consume(R),a===Z.length?r.interrupt?e:C:_):n(R)}function b(R){return go(R)?(t.consume(R),o=String.fromCharCode(R),N):n(R)}function N(R){if(R===null||R===47||R===62||Ti(R)){const Z=R===47,ne=o.toLowerCase();return!Z&&!s&&f3.includes(ne)?(i=1,r.interrupt?e(R):C(R)):$Q.includes(o.toLowerCase())?(i=6,Z?(t.consume(R),w):r.interrupt?e(R):C(R)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):s?S(R):A(R))}return R===45||qi(R)?(t.consume(R),o+=String.fromCharCode(R),N):n(R)}function w(R){return R===62?(t.consume(R),r.interrupt?e:C):n(R)}function S(R){return Ht(R)?(t.consume(R),S):F(R)}function A(R){return R===47?(t.consume(R),F):R===58||R===95||go(R)?(t.consume(R),O):Ht(R)?(t.consume(R),A):F(R)}function O(R){return R===45||R===46||R===58||R===95||qi(R)?(t.consume(R),O):K(R)}function K(R){return R===61?(t.consume(R),q):Ht(R)?(t.consume(R),K):A(R)}function q(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),l=R,D):Ht(R)?(t.consume(R),q):T(R)}function D(R){return R===l?(t.consume(R),l=null,L):R===null||wt(R)?n(R):(t.consume(R),D)}function T(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||Ti(R)?K(R):(t.consume(R),T)}function L(R){return R===47||R===62||Ht(R)?A(R):n(R)}function F(R){return R===62?(t.consume(R),I):n(R)}function I(R){return R===null||wt(R)?C(R):Ht(R)?(t.consume(R),I):n(R)}function C(R){return R===45&&i===2?(t.consume(R),he):R===60&&i===1?(t.consume(R),ue):R===62&&i===4?(t.consume(R),Ae):R===63&&i===3?(t.consume(R),z):R===93&&i===5?(t.consume(R),re):wt(R)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(WQ,M,j)(R)):R===null||wt(R)?(t.exit("htmlFlowData"),j(R)):(t.consume(R),C)}function j(R){return t.check(GQ,Y,M)(R)}function Y(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),le}function le(R){return R===null||wt(R)?j(R):(t.enter("htmlFlowData"),C(R))}function he(R){return R===45?(t.consume(R),z):C(R)}function ue(R){return R===47?(t.consume(R),o="",X):C(R)}function X(R){if(R===62){const Z=o.toLowerCase();return f3.includes(Z)?(t.consume(R),Ae):C(R)}return go(R)&&o.length<8?(t.consume(R),o+=String.fromCharCode(R),X):C(R)}function re(R){return R===93?(t.consume(R),z):C(R)}function z(R){return R===62?(t.consume(R),Ae):R===45&&i===2?(t.consume(R),z):C(R)}function Ae(R){return R===null||wt(R)?(t.exit("htmlFlowData"),M(R)):(t.consume(R),Ae)}function M(R){return t.exit("htmlFlow"),e(R)}}function QQ(t,e,n){const r=this;return i;function i(o){return wt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function XQ(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(k1,e,n)}}const JQ={name:"htmlText",tokenize:ZQ};function ZQ(t,e,n){const r=this;let i,s,o;return a;function a(z){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(z),l}function l(z){return z===33?(t.consume(z),u):z===47?(t.consume(z),K):z===63?(t.consume(z),A):go(z)?(t.consume(z),T):n(z)}function u(z){return z===45?(t.consume(z),c):z===91?(t.consume(z),s=0,_):go(z)?(t.consume(z),S):n(z)}function c(z){return z===45?(t.consume(z),p):n(z)}function h(z){return z===null?n(z):z===45?(t.consume(z),m):wt(z)?(o=h,ue(z)):(t.consume(z),h)}function m(z){return z===45?(t.consume(z),p):h(z)}function p(z){return z===62?he(z):z===45?m(z):h(z)}function _(z){const Ae="CDATA[";return z===Ae.charCodeAt(s++)?(t.consume(z),s===Ae.length?b:_):n(z)}function b(z){return z===null?n(z):z===93?(t.consume(z),N):wt(z)?(o=b,ue(z)):(t.consume(z),b)}function N(z){return z===93?(t.consume(z),w):b(z)}function w(z){return z===62?he(z):z===93?(t.consume(z),w):b(z)}function S(z){return z===null||z===62?he(z):wt(z)?(o=S,ue(z)):(t.consume(z),S)}function A(z){return z===null?n(z):z===63?(t.consume(z),O):wt(z)?(o=A,ue(z)):(t.consume(z),A)}function O(z){return z===62?he(z):A(z)}function K(z){return go(z)?(t.consume(z),q):n(z)}function q(z){return z===45||qi(z)?(t.consume(z),q):D(z)}function D(z){return wt(z)?(o=D,ue(z)):Ht(z)?(t.consume(z),D):he(z)}function T(z){return z===45||qi(z)?(t.consume(z),T):z===47||z===62||Ti(z)?L(z):n(z)}function L(z){return z===47?(t.consume(z),he):z===58||z===95||go(z)?(t.consume(z),F):wt(z)?(o=L,ue(z)):Ht(z)?(t.consume(z),L):he(z)}function F(z){return z===45||z===46||z===58||z===95||qi(z)?(t.consume(z),F):I(z)}function I(z){return z===61?(t.consume(z),C):wt(z)?(o=I,ue(z)):Ht(z)?(t.consume(z),I):L(z)}function C(z){return z===null||z===60||z===61||z===62||z===96?n(z):z===34||z===39?(t.consume(z),i=z,j):wt(z)?(o=C,ue(z)):Ht(z)?(t.consume(z),C):(t.consume(z),Y)}function j(z){return z===i?(t.consume(z),i=void 0,le):z===null?n(z):wt(z)?(o=j,ue(z)):(t.consume(z),j)}function Y(z){return z===null||z===34||z===39||z===60||z===61||z===96?n(z):z===47||z===62||Ti(z)?L(z):(t.consume(z),Y)}function le(z){return z===47||z===62||Ti(z)?L(z):n(z)}function he(z){return z===62?(t.consume(z),t.exit("htmlTextData"),t.exit("htmlText"),e):n(z)}function ue(z){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),X}function X(z){return Ht(z)?pn(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(z):re(z)}function re(z){return t.enter("htmlTextData"),o(z)}}const Ab={name:"labelEnd",resolveAll:rX,resolveTo:iX,tokenize:sX},eX={tokenize:oX},tX={tokenize:aX},nX={tokenize:lX};function rX(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&No(t,0,t.length,n),t}function iX(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",u,e]],a=cs(a,t.slice(s+1,s+r+3)),a=cs(a,[["enter",c,e]]),a=cs(a,Eb(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=cs(a,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),a=cs(a,t.slice(o+1)),a=cs(a,[["exit",l,e]]),No(t,s,t.length,a),t}function sX(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?h(m):(o=r.parser.defined.includes(Ah(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),l):n(m)}function l(m){return m===40?t.attempt(eX,c,o?c:h)(m):m===91?t.attempt(tX,c,o?u:h)(m):o?c(m):h(m)}function u(m){return t.attempt(nX,c,h)(m)}function c(m){return e(m)}function h(m){return s._balanced=!0,n(m)}}function oX(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Ti(h)?Nf(t,s)(h):s(h)}function s(h){return h===41?c(h):SL(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Ti(h)?Nf(t,l)(h):c(h)}function a(h){return n(h)}function l(h){return h===34||h===39||h===40?AL(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return Ti(h)?Nf(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function aX(t,e,n){const r=this;return i;function i(a){return EL.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Ah(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function lX(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const uX={name:"labelStartImage",resolveAll:Ab.resolveAll,tokenize:cX};function cX(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const hX={name:"labelStartLink",resolveAll:Ab.resolveAll,tokenize:dX};function dX(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const nv={name:"lineEnding",tokenize:fX};function fX(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),pn(t,e,"linePrefix")}}const gg={name:"thematicBreak",tokenize:pX};function pX(t,e,n){let r=0,i;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(t.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||wt(u))?(t.exit("thematicBreak"),e(u)):n(u)}function l(u){return u===i?(t.consume(u),r++,l):(t.exit("thematicBreakSequence"),Ht(u)?pn(t,a,"whitespace")(u):a(u))}}const yi={continuation:{tokenize:vX},exit:xX,name:"list",tokenize:yX},mX={partial:!0,tokenize:bX},gX={partial:!0,tokenize:wX};function yX(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const _=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:h5(p)){if(r.containerState.type||(r.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(gg,n,u)(p):u(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return h5(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),u(p)):n(p)}function u(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(k1,r.interrupt?n:c,t.attempt(mX,m,h))}function c(p){return r.containerState.initialBlankLine=!0,s++,m(p)}function h(p){return Ht(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),m):n(p)}function m(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function vX(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(k1,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,pn(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ht(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(gX,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,pn(t,t.attempt(yi,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function wX(t,e,n){const r=this;return pn(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function xX(t){t.exit(this.containerState.type)}function bX(t,e,n){const r=this;return pn(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ht(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const p3={name:"setextUnderline",resolveTo:_X,tokenize:SX};function _X(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function SX(t,e,n){const r=this;let i;return s;function s(u){let c=r.events.length,h;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){h=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(t.consume(u),a):(t.exit("setextHeadingLineSequence"),Ht(u)?pn(t,l,"lineSuffix")(u):l(u))}function l(u){return u===null||wt(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const EX={tokenize:AX};function AX(t){const e=this,n=t.attempt(k1,r,t.attempt(this.parser.constructs.flowInitial,i,pn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(CQ,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const TX={resolveAll:NL()},NX=TL("string"),IX=TL("text");function TL(t){return{resolveAll:NL(t==="text"?kX:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const h=i[c];let m=-1;if(h)for(;++m<h.length;){const p=h[m];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function NL(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function kX(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const u={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const CX={42:yi,43:yi,45:yi,48:yi,49:yi,50:yi,51:yi,52:yi,53:yi,54:yi,55:yi,56:yi,57:yi,62:wL},PX={91:jQ},LX={[-2]:tv,[-1]:tv,32:tv},RX={35:UQ,42:gg,45:[p3,gg],60:HQ,61:p3,95:gg,96:d3,126:d3},DX={38:bL,92:xL},jX={[-5]:nv,[-4]:nv,[-3]:nv,33:uX,38:bL,42:d5,60:[hQ,JQ],91:hX,92:[VQ,xL],93:Ab,95:d5,96:EQ},OX={null:[d5,TX]},MX={null:[42,95]},FX={null:[]},VX=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:MX,contentInitial:PX,disable:FX,document:CX,flow:RX,flowInitial:LX,insideSpan:OX,string:DX,text:jX},Symbol.toStringTag,{value:"Module"}));function BX(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:D(K),check:D(q),consume:S,enter:A,exit:O,interrupt:D(q,{interrupt:!0})},u={code:null,containerState:{},defineSkip:b,events:[],now:_,parser:t,previous:null,sliceSerialize:m,sliceStream:p,write:h};let c=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(I){return o=cs(o,I),N(),o[o.length-1]!==null?[]:(T(e,0),u.events=Eb(s,u.events,u),u.events)}function m(I,C){return zX(p(I),C)}function p(I){return UX(o,I)}function _(){const{_bufferIndex:I,_index:C,line:j,column:Y,offset:le}=r;return{_bufferIndex:I,_index:C,line:j,column:Y,offset:le}}function b(I){i[I.line]=I.column,F()}function N(){let I;for(;r._index<o.length;){const C=o[r._index];if(typeof C=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<C.length;)w(C.charCodeAt(r._bufferIndex));else w(C)}}function w(I){c=c(I)}function S(I){wt(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,F()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=I}function A(I,C){const j=C||{};return j.type=I,j.start=_(),u.events.push(["enter",j,u]),a.push(j),j}function O(I){const C=a.pop();return C.end=_(),u.events.push(["exit",C,u]),C}function K(I,C){T(I,C.from)}function q(I,C){C.restore()}function D(I,C){return j;function j(Y,le,he){let ue,X,re,z;return Array.isArray(Y)?M(Y):"tokenize"in Y?M([Y]):Ae(Y);function Ae(se){return ge;function ge(xe){const be=xe!==null&&se[xe],Oe=xe!==null&&se.null,De=[...Array.isArray(be)?be:be?[be]:[],...Array.isArray(Oe)?Oe:Oe?[Oe]:[]];return M(De)(xe)}}function M(se){return ue=se,X=0,se.length===0?he:R(se[X])}function R(se){return ge;function ge(xe){return z=L(),re=se,se.partial||(u.currentConstruct=se),se.name&&u.parser.constructs.disable.null.includes(se.name)?ne():se.tokenize.call(C?Object.assign(Object.create(u),C):u,l,Z,ne)(xe)}}function Z(se){return I(re,z),le}function ne(se){return z.restore(),++X<ue.length?R(ue[X]):he}}}function T(I,C){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&No(u.events,C,u.events.length-C,I.resolve(u.events.slice(C),u)),I.resolveTo&&(u.events=I.resolveTo(u.events,u))}function L(){const I=_(),C=u.previous,j=u.currentConstruct,Y=u.events.length,le=Array.from(a);return{from:Y,restore:he};function he(){r=I,u.previous=C,u.currentConstruct=j,u.events.length=Y,a=le,F()}}function F(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function UX(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function zX(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function qX(t){const r={constructs:QY([VX,...(t||{}).extensions||[]]),content:i(iQ),defined:[],document:i(oQ),flow:i(EX),lazy:{},string:i(NX),text:i(IX)};return r;function i(s){return o;function o(a){return BX(r,s,a)}}}function $X(t){for(;!_L(t););return t}const m3=/[\0\t\n\r]/g;function HX(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,h,m,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(m3.lastIndex=h,u=m3.exec(s),m=u&&u.index!==void 0?u.index:s.length,p=s.charCodeAt(m),!u){e=s.slice(h);break}if(p===10&&h===m&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<m&&(l.push(s.slice(h,m)),t+=m-h),p){case 0:{l.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,l.push(-2);t++<c;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}h=m+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const WX=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function GX(t){return t.replace(WX,KX)}function KX(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return vL(n.slice(s?2:1),s?16:10)}return Sb(n)||t}const IL={}.hasOwnProperty;function YX(t,e,n){return typeof e!="string"&&(n=e,e=void 0),QX(n)($X(qX(n).document().write(HX()(t,e,!0))))}function QX(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Me),autolinkProtocol:L,autolinkEmail:L,atxHeading:s(Se),blockQuote:s(Oe),characterEscape:L,characterReference:L,codeFenced:s(De),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(De,o),codeText:s($e,o),codeTextData:L,data:L,codeFlowValue:L,definition:s(qe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ot),hardBreakEscape:s(te),hardBreakTrailing:s(te),htmlFlow:s(yt,o),htmlFlowData:L,htmlText:s(yt,o),htmlTextData:L,image:s(rt),label:o,link:s(Me),listItem:s(Ke),listItemValue:m,listOrdered:s(Be,h),listUnordered:s(Be),paragraph:s(He),reference:R,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Se),strong:s(st),thematicBreak:s(xt)},exit:{atxHeading:l(),atxHeadingSequence:K,autolink:l(),autolinkEmail:be,autolinkProtocol:xe,blockQuote:l(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:ne,characterReferenceMarkerNumeric:ne,characterReferenceValue:se,characterReference:ge,codeFenced:l(N),codeFencedFence:b,codeFencedFenceInfo:p,codeFencedFenceMeta:_,codeFlowValue:F,codeIndented:l(w),codeText:l(le),codeTextData:F,data:F,definition:l(),definitionDestinationString:O,definitionLabelString:S,definitionTitleString:A,emphasis:l(),hardBreakEscape:l(C),hardBreakTrailing:l(C),htmlFlow:l(j),htmlFlowData:F,htmlText:l(Y),htmlTextData:F,image:l(ue),label:re,labelText:X,lineEnding:I,link:l(he),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Z,resourceDestinationString:z,resourceTitleString:Ae,resource:M,setextHeading:l(T),setextHeadingLineSequence:D,setextHeadingText:q,strong:l(),thematicBreak:l()}};kL(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(me){let Te={type:"root",children:[]};const Ye={stack:[Te],tokenStack:[],config:e,enter:a,exit:u,buffer:o,resume:c,data:n},Ue=[];let Je=-1;for(;++Je<me.length;)if(me[Je][1].type==="listOrdered"||me[Je][1].type==="listUnordered")if(me[Je][0]==="enter")Ue.push(Je);else{const ze=Ue.pop();Je=i(me,ze,Je)}for(Je=-1;++Je<me.length;){const ze=e[me[Je][0]];IL.call(ze,me[Je][1].type)&&ze[me[Je][1].type].call(Object.assign({sliceSerialize:me[Je][2].sliceSerialize},Ye),me[Je][1])}if(Ye.tokenStack.length>0){const ze=Ye.tokenStack[Ye.tokenStack.length-1];(ze[1]||g3).call(Ye,void 0,ze[0])}for(Te.position={start:rl(me.length>0?me[0][1].start:{line:1,column:1,offset:0}),end:rl(me.length>0?me[me.length-2][1].end:{line:1,column:1,offset:0})},Je=-1;++Je<e.transforms.length;)Te=e.transforms[Je](Te)||Te;return Te}function i(me,Te,Ye){let Ue=Te-1,Je=-1,ze=!1,Wt,bt,Hn,Dt;for(;++Ue<=Ye;){const Pt=me[Ue];switch(Pt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pt[0]==="enter"?Je++:Je--,Dt=void 0;break}case"lineEndingBlank":{Pt[0]==="enter"&&(Wt&&!Dt&&!Je&&!Hn&&(Hn=Ue),Dt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Dt=void 0}if(!Je&&Pt[0]==="enter"&&Pt[1].type==="listItemPrefix"||Je===-1&&Pt[0]==="exit"&&(Pt[1].type==="listUnordered"||Pt[1].type==="listOrdered")){if(Wt){let nr=Ue;for(bt=void 0;nr--;){const Et=me[nr];if(Et[1].type==="lineEnding"||Et[1].type==="lineEndingBlank"){if(Et[0]==="exit")continue;bt&&(me[bt][1].type="lineEndingBlank",ze=!0),Et[1].type="lineEnding",bt=nr}else if(!(Et[1].type==="linePrefix"||Et[1].type==="blockQuotePrefix"||Et[1].type==="blockQuotePrefixWhitespace"||Et[1].type==="blockQuoteMarker"||Et[1].type==="listItemIndent"))break}Hn&&(!bt||Hn<bt)&&(Wt._spread=!0),Wt.end=Object.assign({},bt?me[bt][1].start:Pt[1].end),me.splice(bt||Ue,0,["exit",Wt,Pt[2]]),Ue++,Ye++}if(Pt[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},Pt[1].start),end:void 0};Wt=nr,me.splice(Ue,0,["enter",nr,Pt[2]]),Ue++,Ye++,Hn=void 0,Dt=!0}}}return me[Te][1]._spread=ze,Ye}function s(me,Te){return Ye;function Ye(Ue){a.call(this,me(Ue),Ue),Te&&Te.call(this,Ue)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(me,Te,Ye){this.stack[this.stack.length-1].children.push(me),this.stack.push(me),this.tokenStack.push([Te,Ye||void 0]),me.position={start:rl(Te.start),end:void 0}}function l(me){return Te;function Te(Ye){me&&me.call(this,Ye),u.call(this,Ye)}}function u(me,Te){const Ye=this.stack.pop(),Ue=this.tokenStack.pop();if(Ue)Ue[0].type!==me.type&&(Te?Te.call(this,me,Ue[0]):(Ue[1]||g3).call(this,me,Ue[0]));else throw new Error("Cannot close `"+me.type+"` ("+Tf({start:me.start,end:me.end})+"): it’s not open");Ye.position.end=rl(me.end)}function c(){return KY(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function m(me){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(me),10),this.data.expectingFirstListItemValue=void 0}}function p(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=me}function _(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=me}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function N(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me.replace(/(\r?\n|\r)$/g,"")}function S(me){const Te=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=Te,Ye.identifier=Ah(this.sliceSerialize(me)).toLowerCase()}function A(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.title=me}function O(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.url=me}function K(me){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Ye=this.sliceSerialize(me).length;Te.depth=Ye}}function q(){this.data.setextHeadingSlurpLineEnding=!0}function D(me){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(me).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function L(me){const Ye=this.stack[this.stack.length-1].children;let Ue=Ye[Ye.length-1];(!Ue||Ue.type!=="text")&&(Ue=ht(),Ue.position={start:rl(me.start),end:void 0},Ye.push(Ue)),this.stack.push(Ue)}function F(me){const Te=this.stack.pop();Te.value+=this.sliceSerialize(me),Te.position.end=rl(me.end)}function I(me){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ye=Te.children[Te.children.length-1];Ye.position.end=rl(me.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(L.call(this,me),F.call(this,me))}function C(){this.data.atHardBreak=!0}function j(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function Y(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function le(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.value=me}function he(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Te,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function ue(){const me=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";me.type+="Reference",me.referenceType=Te,delete me.url,delete me.title}else delete me.identifier,delete me.label;this.data.referenceType=void 0}function X(me){const Te=this.sliceSerialize(me),Ye=this.stack[this.stack.length-2];Ye.label=GX(Te),Ye.identifier=Ah(Te).toLowerCase()}function re(){const me=this.stack[this.stack.length-1],Te=this.resume(),Ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ye.type==="link"){const Ue=me.children;Ye.children=Ue}else Ye.alt=Te}function z(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.url=me}function Ae(){const me=this.resume(),Te=this.stack[this.stack.length-1];Te.title=me}function M(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function Z(me){const Te=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=Te,Ye.identifier=Ah(this.sliceSerialize(me)).toLowerCase(),this.data.referenceType="full"}function ne(me){this.data.characterReferenceType=me.type}function se(me){const Te=this.sliceSerialize(me),Ye=this.data.characterReferenceType;let Ue;Ye?(Ue=vL(Te,Ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ue=Sb(Te);const Je=this.stack[this.stack.length-1];Je.value+=Ue}function ge(me){const Te=this.stack.pop();Te.position.end=rl(me.end)}function xe(me){F.call(this,me);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(me)}function be(me){F.call(this,me);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(me)}function Oe(){return{type:"blockquote",children:[]}}function De(){return{type:"code",lang:null,meta:null,value:""}}function $e(){return{type:"inlineCode",value:""}}function qe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ot(){return{type:"emphasis",children:[]}}function Se(){return{type:"heading",depth:0,children:[]}}function te(){return{type:"break"}}function yt(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function Me(){return{type:"link",title:null,url:"",children:[]}}function Be(me){return{type:"list",ordered:me.type==="listOrdered",start:null,spread:me._spread,children:[]}}function Ke(me){return{type:"listItem",spread:me._spread,checked:null,children:[]}}function He(){return{type:"paragraph",children:[]}}function st(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function xt(){return{type:"thematicBreak"}}}function rl(t){return{line:t.line,column:t.column,offset:t.offset}}function kL(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?kL(t,r):XX(t,r)}}function XX(t,e){let n;for(n in e)if(IL.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function g3(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Tf({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Tf({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Tf({start:e.start,end:e.end})+") is still open")}function JX(t){const e=this;e.parser=n;function n(r){return YX(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function ZX(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function eJ(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function tJ(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function nJ(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function rJ(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function iJ(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=fd(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,u),t.applyData(e,u)}function sJ(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oJ(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function CL(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function aJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return CL(t,e);const i={src:fd(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function lJ(t,e){const n={src:fd(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function uJ(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function cJ(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return CL(t,e);const i={href:fd(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function hJ(t,e){const n={href:fd(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function dJ(t,e,n){const r=t.all(e),i=n?fJ(n):PL(e),s={},o=[];if(typeof e.checked=="boolean"){const c=r[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function fJ(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=PL(n[r])}return e}function PL(t){const e=t.spread;return e??t.children.length>1}function pJ(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function mJ(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function gJ(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function yJ(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vJ(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=wb(e.children[1]),l=hL(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function wJ(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const u=[];for(;++l<a;){const h=e.children[l],m={},p=o?o[l]:void 0;p&&(m.align=p);let _={type:"element",tagName:s,properties:m,children:[]};h&&(_.children=t.all(h),t.patch(h,_),_=t.applyData(h,_)),u.push(_)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function xJ(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const y3=9,v3=32;function bJ(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(w3(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(w3(e.slice(i),i>0,!1)),s.join("")}function w3(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===y3||s===v3;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===y3||s===v3;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function _J(t,e){const n={type:"text",value:bJ(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function SJ(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const EJ={blockquote:ZX,break:eJ,code:tJ,delete:nJ,emphasis:rJ,footnoteReference:iJ,heading:sJ,html:oJ,imageReference:aJ,image:lJ,inlineCode:uJ,linkReference:cJ,link:hJ,listItem:dJ,list:pJ,paragraph:mJ,root:gJ,strong:yJ,table:vJ,tableCell:xJ,tableRow:wJ,text:_J,thematicBreak:SJ,toml:Om,yaml:Om,definition:Om,footnoteDefinition:Om};function Om(){}const LL=-1,C1=0,If=1,E0=2,Tb=3,Nb=4,Ib=5,kb=6,RL=7,DL=8,x3=typeof self=="object"?self:globalThis,AJ=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case C1:case LL:return n(o,i);case If:{const a=n([],i);for(const l of o)a.push(r(l));return a}case E0:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case Tb:return n(new Date(o),i);case Nb:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case Ib:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case kb:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case RL:{const{name:a,message:l}=o;return n(new x3[a](l),i)}case DL:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new x3[s](o),i)};return r},b3=t=>AJ(new Map,t)(0),Bc="",{toString:TJ}={},{keys:NJ}=Object,$d=t=>{const e=typeof t;if(e!=="object"||!t)return[C1,e];const n=TJ.call(t).slice(8,-1);switch(n){case"Array":return[If,Bc];case"Object":return[E0,Bc];case"Date":return[Tb,Bc];case"RegExp":return[Nb,Bc];case"Map":return[Ib,Bc];case"Set":return[kb,Bc];case"DataView":return[If,n]}return n.includes("Array")?[If,n]:n.includes("Error")?[RL,n]:[E0,n]},Mm=([t,e])=>t===C1&&(e==="function"||e==="symbol"),IJ=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=$d(o);switch(a){case C1:{let c=o;switch(l){case"bigint":a=DL,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([LL],o)}return i([a,c],o)}case If:{if(l){let m=o;return l==="DataView"?m=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(m=new Uint8Array(o)),i([l,[...m]],o)}const c=[],h=i([a,c],o);for(const m of o)c.push(s(m));return h}case E0:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],h=i([a,c],o);for(const m of NJ(o))(t||!Mm($d(o[m])))&&c.push([s(m),s(o[m])]);return h}case Tb:return i([a,o.toISOString()],o);case Nb:{const{source:c,flags:h}=o;return i([a,{source:c,flags:h}],o)}case Ib:{const c=[],h=i([a,c],o);for(const[m,p]of o)(t||!(Mm($d(m))||Mm($d(p))))&&c.push([s(m),s(p)]);return h}case kb:{const c=[],h=i([a,c],o);for(const m of o)(t||!Mm($d(m)))&&c.push(s(m));return h}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},_3=(t,{json:e,lossy:n}={})=>{const r=[];return IJ(!(e||n),!!e,new Map,r)(t),r},A0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?b3(_3(t,e)):structuredClone(t):(t,e)=>b3(_3(t,e));function kJ(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function CJ(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function PJ(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||kJ,r=t.options.footnoteBackLabel||CJ,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[l]);if(!u)continue;const c=t.all(u),h=String(u.identifier).toUpperCase(),m=fd(h.toLowerCase());let p=0;const _=[],b=t.footnoteCounts.get(h);for(;b!==void 0&&++p<=b;){_.length>0&&_.push({type:"text",value:" "});let S=typeof n=="string"?n:n(l,p);typeof S=="string"&&(S={type:"text",value:S}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const N=c[c.length-1];if(N&&N.type==="element"&&N.tagName==="p"){const S=N.children[N.children.length-1];S&&S.type==="text"?S.value+=" ":N.children.push({type:"text",value:" "}),N.children.push(..._)}else c.push(..._);const w={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(c,!0)};t.patch(u,w),a.push(w)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...A0(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const jL=function(t){if(t==null)return jJ;if(typeof t=="function")return P1(t);if(typeof t=="object")return Array.isArray(t)?LJ(t):RJ(t);if(typeof t=="string")return DJ(t);throw new Error("Expected function, string, or object as test")};function LJ(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=jL(t[n]);return P1(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function RJ(t){const e=t;return P1(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function DJ(t){return P1(e);function e(n){return n&&n.type===t}}function P1(t){return e;function e(n,r,i){return!!(OJ(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function jJ(){return!0}function OJ(t){return t!==null&&typeof t=="object"&&"type"in t}const OL=[],MJ=!0,S3=!1,FJ="skip";function VJ(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=jL(i),o=r?-1:1;a(t,void 0,[])();function a(l,u,c){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return m;function m(){let p=OL,_,b,N;if((!e||s(l,u,c[c.length-1]||void 0))&&(p=BJ(n(l,c)),p[0]===S3))return p;if("children"in l&&l.children){const w=l;if(w.children&&p[0]!==FJ)for(b=(r?w.children.length:-1)+o,N=c.concat(w);b>-1&&b<w.children.length;){const S=w.children[b];if(_=a(S,b,N)(),_[0]===S3)return _;b=typeof _[1]=="number"?_[1]:b+o}}return p}}}function BJ(t){return Array.isArray(t)?t:typeof t=="number"?[MJ,t]:t==null?OL:[t]}function ML(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),VJ(t,s,a,i);function a(l,u){const c=u[u.length-1],h=c?c.children.indexOf(l):void 0;return o(l,h,c)}}const f5={}.hasOwnProperty,UJ={};function zJ(t,e){const n=e||UJ,r=new Map,i=new Map,s=new Map,o={...EJ,...n.handlers},a={all:u,applyData:$J,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:qJ,wrap:WJ};return ML(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?r:i,m=String(c.identifier).toUpperCase();h.has(m)||h.set(m,c)}}),a;function l(c,h){const m=c.type,p=a.handlers[m];if(f5.call(a.handlers,m)&&p)return p(a,c,h);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in c){const{children:b,...N}=c,w=A0(N);return w.children=a.all(c),w}return A0(c)}return(a.options.unknownHandler||HJ)(a,c,h)}function u(c){const h=[];if("children"in c){const m=c.children;let p=-1;for(;++p<m.length;){const _=a.one(m[p],c);if(_){if(p&&m[p-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=E3(_.value)),!Array.isArray(_)&&_.type==="element")){const b=_.children[0];b&&b.type==="text"&&(b.value=E3(b.value))}Array.isArray(_)?h.push(..._):h.push(_)}}}return h}}function qJ(t,e){t.position&&(e.position=TY(t))}function $J(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,A0(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function HJ(t,e){const n=e.data||{},r="value"in e&&!(f5.call(n,"hProperties")||f5.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function WJ(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function E3(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function A3(t,e){const n=zJ(t,e),r=n.one(t,void 0),i=PJ(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function GJ(t,e){return t&&"run"in t?async function(n,r){const i=A3(n,{file:r,...e});await t.run(i,r)}:function(n,r){return A3(n,{file:r,...t||e})}}function T3(t){if(t)throw t}var yg=Object.prototype.hasOwnProperty,FL=Object.prototype.toString,N3=Object.defineProperty,I3=Object.getOwnPropertyDescriptor,k3=function(e){return typeof Array.isArray=="function"?Array.isArray(e):FL.call(e)==="[object Array]"},C3=function(e){if(!e||FL.call(e)!=="[object Object]")return!1;var n=yg.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&yg.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||yg.call(e,i)},P3=function(e,n){N3&&n.name==="__proto__"?N3(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},L3=function(e,n){if(n==="__proto__")if(yg.call(e,n)){if(I3)return I3(e,n).value}else return;return e[n]},KJ=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(e=arguments[l],e!=null)for(n in e)r=L3(a,n),i=L3(e,n),a!==i&&(c&&i&&(C3(i)||(s=k3(i)))?(s?(s=!1,o=r&&k3(r)?r:[]):o=r&&C3(r)?r:{},P3(a,{name:n,newValue:t(c,o,i)})):typeof i<"u"&&P3(a,{name:n,newValue:i}));return a};const rv=I0(KJ);function p5(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function YJ(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=t[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(u[h]===null||u[h]===void 0)&&(u[h]=i[h]);i=u,c?QJ(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function QJ(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const co={basename:XJ,dirname:JJ,extname:ZJ,join:eZ,sep:"/"};function XJ(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Fp(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function JJ(t){if(Fp(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function ZJ(t){Fp(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function eZ(...t){let e=-1,n;for(;++e<t.length;)Fp(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":tZ(n)}function tZ(t){Fp(t);const e=t.codePointAt(0)===47;let n=nZ(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function nZ(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Fp(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const rZ={cwd:iZ};function iZ(){return"/"}function m5(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function sZ(t){if(typeof t=="string")t=new URL(t);else if(!m5(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return oZ(t)}function oZ(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const iv=["history","path","basename","stem","extname","dirname"];class VL{constructor(e){let n;e?m5(e)?n={path:e}:typeof e=="string"||aZ(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":rZ.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<iv.length;){const s=iv[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)iv.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?co.basename(this.path):void 0}set basename(e){ov(e,"basename"),sv(e,"basename"),this.path=co.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?co.dirname(this.path):void 0}set dirname(e){R3(this.basename,"dirname"),this.path=co.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?co.extname(this.path):void 0}set extname(e){if(sv(e,"extname"),R3(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=co.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){m5(e)&&(e=sZ(e)),ov(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?co.basename(this.path,this.extname):void 0}set stem(e){ov(e,"stem"),sv(e,"stem"),this.path=co.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Xr(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function sv(t,e){if(t&&t.includes(co.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+co.sep+"`")}function ov(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function R3(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function aZ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const lZ=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},uZ={}.hasOwnProperty;class Cb extends lZ{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=YJ()}copy(){const e=new Cb;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(rv(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(uv("data",this.frozen),this.namespace[e]=n,this):uZ.call(this.namespace,e)&&this.namespace[e]||void 0:e?(uv("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Fm(e),r=this.parser||this.Parser;return av("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),av("process",this.parser||this.Parser),lv("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Fm(e),l=r.parse(a);r.run(l,a,function(c,h,m){if(c||!h||!m)return u(c);const p=h,_=r.stringify(p,m);dZ(_)?m.value=_:m.result=_,u(c,m)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),av("processSync",this.parser||this.Parser),lv("processSync",this.compiler||this.Compiler),this.process(e,i),j3("processSync","process",n),r;function i(s,o){n=!0,T3(s),r=o}}run(e,n,r){D3(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Fm(n);i.run(e,l,u);function u(c,h,m){const p=h||e;c?a(c):o?o(p):r(void 0,p,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),j3("runSync","run",r),i;function s(o,a){T3(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Fm(n),i=this.compiler||this.Compiler;return lv("stringify",i),D3(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(uv("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;l(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=rv(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let h=-1,m=-1;for(;++h<r.length;)if(r[h][0]===u){m=h;break}if(m===-1)r.push([u,...c]);else if(c.length>0){let[p,..._]=c;const b=r[m][1];p5(b)&&p5(p)&&(p=rv(!0,b,p)),r[m]=[u,p,..._]}}}}const cZ=new Cb().freeze();function av(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function lv(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function uv(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function D3(t){if(!p5(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function j3(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Fm(t){return hZ(t)?t:new VL(t)}function hZ(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function dZ(t){return typeof t=="string"||fZ(t)}function fZ(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const pZ="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",O3=[],M3={allowDangerousHtml:!0},mZ=/^(https?|ircs?|mailto|xmpp)$/i,gZ=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yZ(t){const e=vZ(t),n=wZ(t);return xZ(e.runSync(e.parse(n),n),t)}function vZ(t){const e=t.rehypePlugins||O3,n=t.remarkPlugins||O3,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...M3}:M3;return cZ().use(JX).use(n).use(GJ,r).use(e)}function wZ(t){const e=t.children||"",n=new VL;return typeof e=="string"&&(n.value=e),n}function xZ(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||bZ;for(const c of gZ)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+pZ+c.id,void 0);return ML(t,u),PY(t,{Fragment:y.Fragment,components:i,ignoreInvalidStyle:!0,jsx:y.jsx,jsxs:y.jsxs,passKeys:!0,passNode:!0});function u(c,h,m){if(c.type==="raw"&&m&&typeof h=="number")return o?m.children.splice(h,1):m.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let p;for(p in ev)if(Object.hasOwn(ev,p)&&Object.hasOwn(c.properties,p)){const _=c.properties[p],b=ev[p];(b===null||b.includes(c.tagName))&&(c.properties[p]=l(String(_||""),p,c))}}if(c.type==="element"){let p=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(c,h,m)),p&&m&&typeof h=="number")return a&&c.children?m.children.splice(h,1,...c.children):m.children.splice(h,1),h}}}function bZ(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||mZ.test(t.slice(0,e))?t:""}const _Z=({chat:t,index:e,navigate:n})=>{const r=i=>{if(i){if(i.startsWith("#")){const s=i.substring(1);n(`/doctors/details/${s}`)}if(i.startsWith("#doctor:")){const s=i.replace("#doctor:","");n(`/doctors/details/${s}`)}}};return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:e*.1},className:`flex ${t.type==="user"?"justify-end":"justify-start"}`,children:y.jsxs("div",{className:`flex items-start space-x-2 max-w-[80%] ${t.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 border border-cyan-500/30 flex items-center justify-center",children:t.type==="bot"?y.jsx(ub,{className:"w-4 h-4 text-cyan-400"}):y.jsx(hp,{className:"w-4 h-4 text-cyan-400"})}),y.jsxs("div",{className:`rounded-lg p-3 ${t.type==="user"?"bg-cyan-900/30 border border-cyan-500/30":"bg-gray-800 border border-gray-700"}`,children:[y.jsx(yZ,{components:{a:({href:i,children:s})=>y.jsx("a",{href:i||"#",onClick:o=>{o.preventDefault(),r(i)},className:"text-cyan-400 hover:underline cursor-pointer",children:s}),strong:({children:i})=>y.jsx("strong",{className:"font-bold",children:i})},children:t.content}),y.jsx("span",{className:"text-xs text-gray-400 mt-1 block",children:t.timestamp})]})]})},t.id)},SZ=({message:t,setMessage:e,handleSendMessage:n})=>y.jsxs("div",{className:"mt-4 flex space-x-4",children:[y.jsx("input",{type:"text",placeholder:"Tell me about your symptoms...",className:"flex-1 px-4 py-2 bg-gray-800 border border-cyan-500/30 rounded-lg focus:outline-none focus:border-cyan-400",value:t,onChange:r=>e(r.target.value),onKeyPress:r=>r.key==="Enter"&&n()}),y.jsx("button",{className:"cyber-button",onClick:n,children:y.jsx(cp,{className:"w-5 h-5"})})]}),br=[];for(let t=0;t<256;++t)br.push((t+256).toString(16).slice(1));function EZ(t,e=0){return(br[t[e+0]]+br[t[e+1]]+br[t[e+2]]+br[t[e+3]]+"-"+br[t[e+4]]+br[t[e+5]]+"-"+br[t[e+6]]+br[t[e+7]]+"-"+br[t[e+8]]+br[t[e+9]]+"-"+br[t[e+10]]+br[t[e+11]]+br[t[e+12]]+br[t[e+13]]+br[t[e+14]]+br[t[e+15]]).toLowerCase()}let cv;const AZ=new Uint8Array(16);function TZ(){if(!cv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");cv=crypto.getRandomValues.bind(crypto)}return cv(AZ)}const NZ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F3={randomUUID:NZ};function Hd(t,e,n){var i;if(F3.randomUUID&&!e&&!t)return F3.randomUUID();t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??TZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,EZ(r)}const IZ=()=>{const{user:t}=ui(),e=_a(),[n,r]=ee.useState(""),[i,s]=ee.useState(""),[o,a]=ee.useState(null),[l,u]=ee.useState(null),[c,h]=ee.useState(!0),[m,p]=ee.useState([]),[_,b]=ee.useState([]),[N,w]=ee.useState([]),[S,A]=ee.useState(!0),[O,K]=ee.useState(!0),[q,D]=ee.useState(null),[T,L]=ee.useState(null);ee.useEffect(()=>{t||e("/login")},[t,e]),ee.useEffect(()=>{if(!t)return;const Y=qn(St,"users",t.id);(async()=>{try{const ue=await Xh(Y);if(ue.exists()){const X=ue.data();X!=null&&X.location&&s(X.location),X!=null&&X.name&&a(X.name)}else await la(Y,{createdAt:new Date().toISOString()})}catch(ue){console.error("Error fetching user details:",ue),D("පරිශීලක තොරතුරු ලබා ගැනීමට අපහසු වුණා.")}})(),(async()=>{if(i.trim()||o)try{await la(Y,{location:i,name:o||""},{merge:!0})}catch(ue){console.error("Error saving user details:",ue),D("පරිශීලක තොරතුරු සුරැකීමට අපහසු වුණා.")}})()},[t,i,o]),ee.useEffect(()=>{(async()=>{try{const le=ln(St,"doctors"),ue=(await ds(le)).docs.map(X=>{const re=X.data();return{id:X.id,name:re.name||"Unknown",specialty:re.specialty||"Unknown",rating:re.rating||0,reviews:re.reviews||0,location:re.location||"Unknown",image:re.image||"",bio:re.bio||"",education:re.education||"",experience:re.experience||"",procedures:Array.isArray(re.procedures)?re.procedures:[],conditions:Array.isArray(re.conditions)?re.conditions:[],availability:re.availability||{status:"",nextSlot:"",schedule:[]},pharmacies:Array.isArray(re.pharmacies)?re.pharmacies:[],privateClinic:re.privateClinic||{name:"",address:"",facilities:[],appointments:""},medicalCenterId:re.medicalCenterId||"",medicalCenterName:re.medicalCenterName||""}});w(ue)}catch(le){console.error("Error fetching doctors:",le),D("වෛද්‍යවරුන්ගේ තොරතුරු ලබා ගැනීමට අපහසු වුණා. කරුණාකර පසුව උත්සාහ කරන්න.")}finally{A(!1)}})()},[]),ee.useEffect(()=>{if(!t)return;const Y=ln(St,`users/${t.id}/chatSessions`),le=up(Y,he=>{const ue=he.docs.map(X=>({id:X.id,date:X.data().date||new Date().toISOString(),preview:X.data().preview||"New Chat",messages:Array.isArray(X.data().messages)?X.data().messages:[]}));p(ue),ue.length>0&&!l?u(ue[0].id):ue.length===0&&!l&&F(),K(!1)},he=>{console.error("Error fetching chat sessions:",he),D("චැට් සැසි ලබා ගැනීමට අපහසු වුණා."),K(!1)});return()=>le()},[t,l]),ee.useEffect(()=>{if(!l||S||!N.length)return;const Y=m.find(le=>le.id===l);if(Y){b(Y.messages);const le=N.map(Ae=>({id:Ae.id,name:Ae.name,specialty:Ae.specialty,location:Ae.location,education:Ae.education,experience:Ae.experience,bio:Ae.bio,nextSlot:Ae.availability.nextSlot,procedures:Ae.procedures.join(", "),conditions:Ae.conditions.join(", "),privateClinic:`${Ae.privateClinic.name} (${Ae.privateClinic.address})`,medicalCenterName:Ae.medicalCenterName})),he=Y.messages.filter((Ae,M)=>!(M===0&&Ae.type==="bot")).map(Ae=>({role:Ae.type==="bot"?"model":"user",parts:[{text:Ae.content}]})),ue=`
        ඔබ MediLink, මිත්‍රශීලී සෞඛ්‍ය මිතුරෙකි. සෑම විටම සිංහලෙන් පිළිතුරු දෙන්න. වෛද්‍යවරයෙකු මෙන් රෝග ලක්ෂණ විශ්ලේෂණය කරන්න, පියවරෙන් පියවරට.
        ඔබේ පිළිතුරු මිනිසෙකු සමඟ කතාබහ කරනවා වගේ ස්වභාවික, සංවාදාත්මක සහ මිත්‍රශීලී විය යුතුයි. පෙර පණිවිඩයන් යොමු කරමින් පිළිතුරු දෙන්න.
        පරිශීලකයාගේ නම දන්නේ නම් එයින් ආමන්ත්‍රණය කරන්න (නම: ${o||"අදුනා නොගත්"}). නම නොදන්නේ නම්, මුලදී ආචාර කර නම ඉල්ලන්න.
        රෝග ලක්ෂණ එකින් එක එකතු කරන්න, අනුප්‍රශ්න අසමින් වැඩි විස්තර ලබාගන්න (උදා: වේදනාවේ තීව්‍රතාව, කාලය, ස්ථානය).
        ප්‍රමාණවත් ලක්ෂණ (අවම 2-3) ලැබුණු පසු, සම්භාව්‍ය රෝග තත්ත්වය විශ්ලේෂණය කරන්න, කෙටි උපදෙස් දෙන්න. බරපතල නම්, වහාම වෛද්‍ය උපදෙස් ලබාගන්න කියන්න.
        පරිශීලකයා වෛද්‍යවරුන් ඉල්ලුවොත්, රෝගයට ගැලපෙන, ස්ථානයට ආසන්න (පරිශීලක ස්ථානය: ${i||"අදුනා නොගත්"}) 1-2 වෛද්‍යවරුන් යෝජනා කරන්න.
        වෛද්‍ය ආකෘතිය: **[වෛද්‍ය නම](#doctor:ID)** (විශේෂත්වය: Specialty, ස්ථානය: Location, අධ්‍යාපනය: Education, පළපුරුද්ද: Experience, ජීව දත්ත: Bio, ඊළඟ වේලාව: NextSlot, ක්‍රියා පටිපාටි: Procedures, රෝග: Conditions, පුද්ගලික සායනය: PrivateClinic, වෛද්‍ය මධ්‍යස්ථානය: MedicalCenterName).
        පරිශීලකයා විසින් වෛද්‍යවරයෙකු තෝරා ගත් විට, එම වෛද්‍යවරයාගේ සම්පූර්ණ තොරතුරු (ID, නම, විශේෂත්වය, ස්ථානය, අධ්‍යාපනය, පළපුරුද්ද, ජීව දත්ත, ඊළඟ වේලාව, ක්‍රියා පටිපාටි, රෝග, පුද්ගලික සායනය, වෛද්‍ය මධ්‍යස්ථානය) structured format එකකින් ලබා දෙන්න.
        විස්තර ඉල්ලුවොත්, සම්පූර්ණ තොරතුරු දෙන්න. තවත් වෛද්‍යවරු ඉල්ලුවොත්, තවත් යෝජනා කරන්න.
        වෛද්‍ය ලැයිස්තුව: ${JSON.stringify(le)}
      `,z=new RK("AIzaSyBD_aOnEig3WlB-d6vahalfQPkWEDq0Wgk").getGenerativeModel({model:"gemini-1.5-flash",systemInstruction:ue}).startChat({history:he,generationConfig:{maxOutputTokens:1e3}});L(z)}},[l,m,N,S,o,i]);const F=async()=>{if(t)try{const Y=ln(St,`users/${t.id}/chatSessions`),le={id:Hd(),type:"bot",content:o?`ආයුබෝවන් ${o}! මම MediLink AI, ඔබේ හිතවත් සෞඛ්‍ය උපදේශකයා. අද ඔබට තියෙන රෝග ලක්ෂණ මොනවාද?`:"ආයුබෝවන්! මම MediLink AI, ඔබේ හිතවත් සෞඛ්‍ය උපදේශකයා. ඔබේ නම මට කියන්න පුළුවන්ද? එහෙම නැත්නම්, අද ඔබට තියෙන රෝග ලක්ෂණ මොනවාද?",timestamp:Os(new Date,"hh:mm a")},he={date:new Date().toISOString(),preview:"New Chat",messages:[le]},ue=await Wl(Y,he);u(ue.id),b([])}catch(Y){console.error("Error creating new chat session:",Y),D("නව චැට් සැසියක් ආරම්භ කිරීමට අපහසු වුණා.")}},I=async Y=>{if(!t||!l||!T)return;const le=qn(St,`users/${t.id}/chatSessions/${l}`),he={id:Hd(),type:"bot",content:`ඔබ තෝරාගත් වෛද්‍යවරයා: **${Y.name}** (විශේෂත්වය: ${Y.specialty}, ස්ථානය: ${Y.location}, අධ්‍යාපනය: ${Y.education}, පළපුරුද්ද: ${Y.experience}, ජීව දත්ත: ${Y.bio}, ඊළඟ වේලාව: ${Y.availability.nextSlot}, ක්‍රියා පටිපාටි: ${Y.procedures.join(", ")}, රෝග: ${Y.conditions.join(", ")}, පුද්ගලික සායනය: ${Y.privateClinic.name} (${Y.privateClinic.address}), වෛද්‍ය මධ්‍යස්ථානය: ${Y.medicalCenterName})`,timestamp:Os(new Date,"hh:mm a")},ue=[..._,he];b(ue);try{await Fs(le,{messages:ue,preview:`Doctor: ${Y.name}`,date:new Date().toISOString()}),e(`/doctors/details/${Y.id}`)}catch(X){console.error("Error saving doctor message:",X),D("වෛද්‍ය තොරතුරු සුරැකීමට අපහසු වුණා.")}};ee.useEffect(()=>{const Y=()=>{window.innerWidth>=1024?h(!0):h(!1)};return window.addEventListener("resize",Y),Y(),()=>window.removeEventListener("resize",Y)},[]);const C=()=>h(!c),j=async()=>{if(!n.trim()||!t||!l||!T)return;const Y=qn(St,`users/${t.id}/chatSessions/${l}`),le={id:Hd(),type:"user",content:n,timestamp:Os(new Date,"hh:mm a")};let he=[..._,le];b(he);try{await Fs(Y,{messages:he,preview:n.slice(0,50)+(n.length>50?"...":""),date:new Date().toISOString()})}catch(X){console.error("Error saving user message:",X),D("පණිවිඩය සුරැකීමට අපහසු වුණා.");return}r("");const ue=n.trim().toLowerCase();if((ue.includes("මගේ නම")||ue.includes("my name is"))&&!o){const X=n.match(/(?:මගේ නම|my name is)\s*([\w\s]+)/i);if(X&&X[1]){const re=X[1].trim();a(re);const z=qn(St,"users",t.id);await la(z,{name:re},{merge:!0})}}try{const re=await(await T.sendMessage(n)).response.text(),z={id:Hd(),type:"bot",content:re,timestamp:Os(new Date,"hh:mm a")};he=[...he,z],b(he),await Fs(Y,{messages:he,preview:n.slice(0,50)+(n.length>50?"...":""),date:new Date().toISOString()})}catch(X){console.error("Error with Gemini AI or Firestore:",X);const re={id:Hd(),type:"bot",content:`${o||"ඔබ"}ට, අප්ස! යමක් වැරදුණා. කරුණාකර ආයෙත් උත්සාහ කරන්න.`,timestamp:Os(new Date,"hh:mm a")};he=[...he,re],b(he);try{await Fs(Y,{messages:he,preview:n.slice(0,50)+(n.length>50?"...":""),date:new Date().toISOString()})}catch(z){console.error("Error saving error message:",z),D("පණිවිඩය සුරැකීමට අපහසු වුණා.")}}};return S||O?y.jsx("div",{className:"h-[calc(100vh-6rem)] flex items-center justify-center bg-gray-900 text-cyan-50",children:"තොරතුරු ලබා ගනිමින්..."}):q?y.jsx("div",{className:"h-[calc(100vh-6rem)] flex items-center justify-center bg-gray-900 text-red-400",children:q}):y.jsxs("div",{className:"h-[calc(100vh-6rem)] flex flex-col lg:flex-row lg:space-x-4",children:[y.jsx(DK,{sessions:m,activeSession:l||"",isSidebarOpen:c,setActiveSession:u,toggleSidebar:C,startNewChat:F}),y.jsxs("div",{className:"flex-1 flex flex-col space-y-4 px-4 lg:px-0",children:[y.jsx(jK,{location:i,setLocation:s,onDoctorSelect:I}),y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"flex-1 cyber-card p-4 overflow-hidden",children:y.jsxs("div",{className:"h-full flex flex-col",children:[y.jsx("div",{className:"為flex-1 overflow-y-auto space-y-4 pb-4",children:_.map((Y,le)=>y.jsx(_Z,{chat:Y,index:le,navigate:e},Y.id))}),y.jsx("div",{className:"absolute bottom-3 w-[98%]",children:y.jsx(SZ,{message:n,setMessage:r,handleSendMessage:j})})]})})]})]})},kZ=()=>{const t=ig(r=>r.notifications),e=ig(r=>r.markAsRead),n=ig(r=>r.markAllAsRead);return y.jsxs("div",{className:"container mx-auto p-6",children:[y.jsx("h1",{className:"text-3xl font-semibold mb-4 text-white",children:"Notifications"}),y.jsx("button",{onClick:n,className:"mb-6 px-6 py-3 bg-cyan-600 text-white rounded-lg hover:bg-cyan-700 transition-colors",children:"Mark All as Read"}),y.jsx("div",{className:"space-y-6",children:t.length===0?y.jsx("p",{className:"text-gray-400",children:"No notifications to show."}):t.map((r,i)=>y.jsxs(at.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{delay:i*.2},className:`p-6 border rounded-lg shadow-lg ${r.read?"bg-gray-800":"bg-gray-900"} ${r.read?"":"border-l-4 border-cyan-400"}`,children:[y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-sm text-gray-400",children:r.timestamp}),y.jsx("p",{className:"text-lg font-medium text-white",children:r.message})]}),r.read?y.jsx(NW,{className:"w-5 h-5 text-green-400"}):y.jsx(UW,{className:"w-5 h-5 text-red-500"})]}),!r.read&&y.jsx("div",{className:"mt-4",children:y.jsx("button",{onClick:()=>e(r.id),className:"px-6 py-2 text-sm bg-cyan-500 text-white rounded-full hover:bg-cyan-600 transition-colors",children:"Mark as Read"})})]},r.id))})]})},CZ=()=>{const[t,e]=ee.useState(""),[n,r]=ee.useState(""),[i,s]=ee.useState(null),[o,a]=ee.useState(!1),l=_a(),{user:u,setUser:c,isLoading:h}=ui();ee.useEffect(()=>{$C(ua,n1).catch(b=>{console.error("Error setting persistence:",b)}),!h&&u&&l(u.role==="admin-1"?"/admin":"/")},[u,h,l]);const m=async(b,N,w)=>{try{const S=await Xh(qn(St,"users",b));if(S.exists()){const A=S.data();return{id:b,name:N||A.name||w,email:A.email||w,role:A.role||"patient"}}else{const A={id:b,name:N||w,email:w,role:"patient"};return await la(qn(St,"users",b),A),A}}catch(S){return console.error("Error fetching/creating user role:",S),{id:b,name:N||w,email:w,role:"patient"}}},p=async()=>{a(!0),s(null);const b=new mo;try{const N=await eP(ua,b),w=await m(N.user.uid,N.user.displayName,N.user.email||"");c(w),l(w.role==="admin-1"?"/admin":"/")}catch(N){console.error("Google Sign-In Error:",{code:N.code,message:N.message,details:N}),s(N.message||"Failed to sign in with Google.")}finally{a(!1)}},_=async b=>{b.preventDefault(),a(!0),s(null);try{const N=await ez(ua,t,n),w=await m(N.user.uid,N.user.displayName,t);c(w),l(w.role==="admin-1"?"/admin":"/")}catch(N){console.error("Email/Password Sign-In Error:",{code:N.code,message:N.message,details:N}),s(N.message||"Failed to sign in with email/password.")}finally{a(!1)}};return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsxs("div",{className:"cyber-card p-8 max-w-md w-full",children:[y.jsx("h2",{className:"text-3xl font-bold neon-text mb-6 text-center",children:"MediLink Login"}),i&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg text-center mb-4",children:i}),y.jsxs("form",{onSubmit:_,className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(q6,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"email",placeholder:"Email",value:t,onChange:b=>e(b.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(z6,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:b=>r(b.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("button",{type:"submit",disabled:o||h,className:"cyber-button w-full flex items-center justify-center space-x-2",children:[y.jsx(i5,{className:"w-5 h-5"}),y.jsx("span",{children:o||h?"Logging in...":"Sign In"})]})]}),y.jsxs("div",{className:"my-6 flex items-center",children:[y.jsx("div",{className:"flex-1 h-px bg-cyan-500/30"}),y.jsx("span",{className:"mx-4 text-gray-400",children:"or"}),y.jsx("div",{className:"flex-1 h-px bg-cyan-500/30"})]}),y.jsxs("button",{onClick:p,disabled:o||h,className:"cyber-button w-full flex items-center justify-center space-x-2",children:[y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:y.jsx("path",{fill:"currentColor",d:"M12.24 10.493v2.808h4.633c-.186 1.24-.76 2.28-1.704 2.976l2.784 2.136c1.704-1.584 2.688-3.84 2.688-6.312 0-.672-.072-1.32-.192-1.944h-8.209zm-1.128-2.808v2.808h-4.632c.192 1.248.768 2.28 1.704 2.976l-2.784 2.136c-1.704-1.584-2.688-3.84-2.688-6.312 0-.672.072-1.32.192-1.944h8.208zm1.128-2.808c-3.84 0-7.104 2.496-8.304 6h16.608c-1.2-3.504-4.464-6-8.304-6zm0-2.4c5.328 0 9.672 4.344 9.672 9.672s-4.344 9.672-9.672 9.672-9.672-4.344-9.672-9.672 4.344-9.672 9.672-9.672z"})}),y.jsx("span",{children:o||h?"Processing...":"Sign in with Google"})]}),y.jsxs("p",{className:"mt-4 text-center text-gray-400",children:["Don't have an account?"," ",y.jsx("a",{href:"/reg",className:"text-cyan-400 hover:underline",children:"Register"})]})]})})},PZ="modulepreload",LZ=function(t){return"/"+t},V3={},g5=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=LZ(l),l in V3)return;V3[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":PZ,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((m,p)=>{h.addEventListener("load",m),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function en(t){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(t)}var Hr=Uint8Array,$i=Uint16Array,Pb=Int32Array,L1=new Hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),R1=new Hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),y5=new Hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BL=function(t,e){for(var n=new $i(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Pb(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},UL=BL(L1,2),zL=UL.b,v5=UL.r;zL[28]=258,v5[258]=28;var qL=BL(R1,0),RZ=qL.b,B3=qL.r,w5=new $i(32768);for(var xn=0;xn<32768;++xn){var il=(xn&43690)>>1|(xn&21845)<<1;il=(il&52428)>>2|(il&13107)<<2,il=(il&61680)>>4|(il&3855)<<4,w5[xn]=((il&65280)>>8|(il&255)<<8)>>1}var Ao=function(t,e,n){for(var r=t.length,i=0,s=new $i(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new $i(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new $i(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=o[t[i]-1]++<<c,m=h|(1<<c)-1;h<=m;++h)a[w5[h]>>l]=u}else for(a=new $i(r),i=0;i<r;++i)t[i]&&(a[i]=w5[o[t[i]-1]++]>>15-t[i]);return a},Gl=new Hr(288);for(var xn=0;xn<144;++xn)Gl[xn]=8;for(var xn=144;xn<256;++xn)Gl[xn]=9;for(var xn=256;xn<280;++xn)Gl[xn]=7;for(var xn=280;xn<288;++xn)Gl[xn]=8;var gp=new Hr(32);for(var xn=0;xn<32;++xn)gp[xn]=5;var DZ=Ao(Gl,9,0),jZ=Ao(Gl,9,1),OZ=Ao(gp,5,0),MZ=Ao(gp,5,1),hv=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Cs=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},dv=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Lb=function(t){return(t+7)/8|0},$L=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Hr(t.subarray(e,n))},FZ=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Rs=function(t,e,n){var r=new Error(e||FZ[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Rs),!n)throw r;return r},VZ=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Hr(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Hr(i*3));var u=function(De){var $e=n.length;if(De>$e){var qe=new Hr(Math.max($e*2,De));qe.set(n),n=qe}},c=e.f||0,h=e.p||0,m=e.b||0,p=e.l,_=e.d,b=e.m,N=e.n,w=i*8;do{if(!p){c=Cs(t,h,1);var S=Cs(t,h+1,3);if(h+=3,S)if(S==1)p=jZ,_=MZ,b=9,N=5;else if(S==2){var q=Cs(t,h,31)+257,D=Cs(t,h+10,15)+4,T=q+Cs(t,h+5,31)+1;h+=14;for(var L=new Hr(T),F=new Hr(19),I=0;I<D;++I)F[y5[I]]=Cs(t,h+I*3,7);h+=D*3;for(var C=hv(F),j=(1<<C)-1,Y=Ao(F,C,1),I=0;I<T;){var le=Y[Cs(t,h,j)];h+=le&15;var A=le>>4;if(A<16)L[I++]=A;else{var he=0,ue=0;for(A==16?(ue=3+Cs(t,h,3),h+=2,he=L[I-1]):A==17?(ue=3+Cs(t,h,7),h+=3):A==18&&(ue=11+Cs(t,h,127),h+=7);ue--;)L[I++]=he}}var X=L.subarray(0,q),re=L.subarray(q);b=hv(X),N=hv(re),p=Ao(X,b,1),_=Ao(re,N,1)}else Rs(1);else{var A=Lb(h)+4,O=t[A-4]|t[A-3]<<8,K=A+O;if(K>i){l&&Rs(0);break}a&&u(m+O),n.set(t.subarray(A,K),m),e.b=m+=O,e.p=h=K*8,e.f=c;continue}if(h>w){l&&Rs(0);break}}a&&u(m+131072);for(var z=(1<<b)-1,Ae=(1<<N)-1,M=h;;M=h){var he=p[dv(t,h)&z],R=he>>4;if(h+=he&15,h>w){l&&Rs(0);break}if(he||Rs(2),R<256)n[m++]=R;else if(R==256){M=h,p=null;break}else{var Z=R-254;if(R>264){var I=R-257,ne=L1[I];Z=Cs(t,h,(1<<ne)-1)+zL[I],h+=ne}var se=_[dv(t,h)&Ae],ge=se>>4;se||Rs(3),h+=se&15;var re=RZ[ge];if(ge>3){var ne=R1[ge];re+=dv(t,h)&(1<<ne)-1,h+=ne}if(h>w){l&&Rs(0);break}a&&u(m+131072);var xe=m+Z;if(m<re){var be=s-re,Oe=Math.min(re,xe);for(be+m<0&&Rs(3);m<Oe;++m)n[m]=r[be+m]}for(;m<xe;++m)n[m]=n[m-re]}}e.l=p,e.p=M,e.b=m,e.f=c,p&&(c=1,e.m=b,e.d=_,e.n=N)}while(!c);return m!=n.length&&o?$L(n,0,m):n.subarray(0,m)},Go=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Wd=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},fv=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:WL,l:0};if(i==1){var o=new Hr(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(K,q){return K.f-q.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var p=new $i(m+1),_=x5(n[c-1],p,0);if(_>e){var r=0,b=0,N=_-e,w=1<<N;for(s.sort(function(q,D){return p[D.s]-p[q.s]||q.f-D.f});r<i;++r){var S=s[r].s;if(p[S]>e)b+=w-(1<<_-p[S]),p[S]=e;else break}for(b>>=N;b>0;){var A=s[r].s;p[A]<e?b-=1<<e-p[A]++-1:++r}for(;r>=0&&b;--r){var O=s[r].s;p[O]==e&&(--p[O],++b)}_=e}return{t:new Hr(p),l:_}},x5=function(t,e,n){return t.s==-1?Math.max(x5(t.l,e,n+1),x5(t.r,e,n+1)):e[t.s]=n},U3=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new $i(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Gd=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},HL=function(t,e,n){var r=n.length,i=Lb(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},z3=function(t,e,n,r,i,s,o,a,l,u,c){Go(e,c++,n),++i[256];for(var h=fv(i,15),m=h.t,p=h.l,_=fv(s,15),b=_.t,N=_.l,w=U3(m),S=w.c,A=w.n,O=U3(b),K=O.c,q=O.n,D=new $i(19),T=0;T<S.length;++T)++D[S[T]&31];for(var T=0;T<K.length;++T)++D[K[T]&31];for(var L=fv(D,7),F=L.t,I=L.l,C=19;C>4&&!F[y5[C-1]];--C);var j=u+5<<3,Y=Gd(i,Gl)+Gd(s,gp)+o,le=Gd(i,m)+Gd(s,b)+o+14+3*C+Gd(D,F)+2*D[16]+3*D[17]+7*D[18];if(l>=0&&j<=Y&&j<=le)return HL(e,c,t.subarray(l,l+u));var he,ue,X,re;if(Go(e,c,1+(le<Y)),c+=2,le<Y){he=Ao(m,p,0),ue=m,X=Ao(b,N,0),re=b;var z=Ao(F,I,0);Go(e,c,A-257),Go(e,c+5,q-1),Go(e,c+10,C-4),c+=14;for(var T=0;T<C;++T)Go(e,c+3*T,F[y5[T]]);c+=3*C;for(var Ae=[S,K],M=0;M<2;++M)for(var R=Ae[M],T=0;T<R.length;++T){var Z=R[T]&31;Go(e,c,z[Z]),c+=F[Z],Z>15&&(Go(e,c,R[T]>>5&127),c+=R[T]>>12)}}else he=DZ,ue=Gl,X=OZ,re=gp;for(var T=0;T<a;++T){var ne=r[T];if(ne>255){var Z=ne>>18&31;Wd(e,c,he[Z+257]),c+=ue[Z+257],Z>7&&(Go(e,c,ne>>23&31),c+=L1[Z]);var se=ne&31;Wd(e,c,X[se]),c+=re[se],se>3&&(Wd(e,c,ne>>5&8191),c+=R1[se])}else Wd(e,c,he[ne]),c+=ue[ne]}return Wd(e,c,he[256]),c+ue[256]},BZ=new Pb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WL=new Hr(0),UZ=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Hr(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var h=BZ[e-1],m=h>>13,p=h&8191,_=(1<<n)-1,b=s.p||new $i(32768),N=s.h||new $i(_+1),w=Math.ceil(n/3),S=2*w,A=function(ot){return(t[ot]^t[ot+1]<<w^t[ot+2]<<S)&_},O=new Pb(25e3),K=new $i(288),q=new $i(32),D=0,T=0,L=s.i||0,F=0,I=s.w||0,C=0;L+2<o;++L){var j=A(L),Y=L&32767,le=N[j];if(b[Y]=le,N[j]=Y,I<=L){var he=o-L;if((D>7e3||F>24576)&&(he>423||!u)){c=z3(t,l,0,O,K,q,T,F,C,L-C,c),F=D=T=0,C=L;for(var ue=0;ue<286;++ue)K[ue]=0;for(var ue=0;ue<30;++ue)q[ue]=0}var X=2,re=0,z=p,Ae=Y-le&32767;if(he>2&&j==A(L-Ae))for(var M=Math.min(m,he)-1,R=Math.min(32767,L),Z=Math.min(258,he);Ae<=R&&--z&&Y!=le;){if(t[L+X]==t[L+X-Ae]){for(var ne=0;ne<Z&&t[L+ne]==t[L+ne-Ae];++ne);if(ne>X){if(X=ne,re=Ae,ne>M)break;for(var se=Math.min(Ae,ne-2),ge=0,ue=0;ue<se;++ue){var xe=L-Ae+ue&32767,be=b[xe],Oe=xe-be&32767;Oe>ge&&(ge=Oe,le=xe)}}}Y=le,le=b[Y],Ae+=Y-le&32767}if(re){O[F++]=268435456|v5[X]<<18|B3[re];var De=v5[X]&31,$e=B3[re]&31;T+=L1[De]+R1[$e],++K[257+De],++q[$e],I=L+X,++D}else O[F++]=t[L],++K[t[L]]}}for(L=Math.max(L,I);L<o;++L)O[F++]=t[L],++K[t[L]];c=z3(t,l,u,O,K,q,T,F,C,L-C,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=N,s.p=b,s.i=L,s.w=I)}else{for(var L=s.w||0;L<o+u;L+=65535){var qe=L+65535;qe>=o&&(l[c/8|0]=u,qe=o),c=HL(l,c+1,t.subarray(L,qe))}s.i=o}return $L(a,0,r+Lb(c)+i)},GL=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},zZ=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Hr(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return UZ(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},KL=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},qZ=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GL();i.p(e.dictionary),KL(t,2,i.d())}},$Z=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Rs(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&Rs(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function b5(t,e){e||(e={});var n=GL();n.p(t);var r=zZ(t,e,e.dictionary?6:2,4);return qZ(r,e),KL(r,r.length-4,n.d()),r}function HZ(t,e){return VZ(t.subarray($Z(t,e),-4),{i:2},e,e)}var WZ=typeof TextDecoder<"u"&&new TextDecoder,GZ=0;try{WZ.decode(WL,{stream:!0}),GZ=1}catch{}var pt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function pv(){pt.console&&typeof pt.console.log=="function"&&pt.console.log.apply(pt.console,arguments)}var an={log:pv,warn:function(t){pt.console&&(typeof pt.console.warn=="function"?pt.console.warn.apply(pt.console,arguments):pv.call(null,arguments))},error:function(t){pt.console&&(typeof pt.console.error=="function"?pt.console.error.apply(pt.console,arguments):pv(t))}};function mv(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Ru(r.response,e,n)},r.onerror=function(){an.error("could not download file")},r.send()}function q3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Vm(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var kf,_5,Ru=pt.saveAs||((typeof window>"u"?"undefined":en(window))!=="object"||window!==pt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=pt.URL||pt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?q3(i.href)?mv(t,e,n):Vm(i,i.target="_blank"):Vm(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Vm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(q3(t))mv(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Vm(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:en(s)!=="object"&&(an.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return mv(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(pt.HTMLElement)||pt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":en(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(t)}else{var l=pt.URL||pt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function YL(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function gv(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Or(n,r,i,s,e[0],7,-680876936),s=Or(s,n,r,i,e[1],12,-389564586),i=Or(i,s,n,r,e[2],17,606105819),r=Or(r,i,s,n,e[3],22,-1044525330),n=Or(n,r,i,s,e[4],7,-176418897),s=Or(s,n,r,i,e[5],12,1200080426),i=Or(i,s,n,r,e[6],17,-1473231341),r=Or(r,i,s,n,e[7],22,-45705983),n=Or(n,r,i,s,e[8],7,1770035416),s=Or(s,n,r,i,e[9],12,-1958414417),i=Or(i,s,n,r,e[10],17,-42063),r=Or(r,i,s,n,e[11],22,-1990404162),n=Or(n,r,i,s,e[12],7,1804603682),s=Or(s,n,r,i,e[13],12,-40341101),i=Or(i,s,n,r,e[14],17,-1502002290),n=Mr(n,r=Or(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Mr(s,n,r,i,e[6],9,-1069501632),i=Mr(i,s,n,r,e[11],14,643717713),r=Mr(r,i,s,n,e[0],20,-373897302),n=Mr(n,r,i,s,e[5],5,-701558691),s=Mr(s,n,r,i,e[10],9,38016083),i=Mr(i,s,n,r,e[15],14,-660478335),r=Mr(r,i,s,n,e[4],20,-405537848),n=Mr(n,r,i,s,e[9],5,568446438),s=Mr(s,n,r,i,e[14],9,-1019803690),i=Mr(i,s,n,r,e[3],14,-187363961),r=Mr(r,i,s,n,e[8],20,1163531501),n=Mr(n,r,i,s,e[13],5,-1444681467),s=Mr(s,n,r,i,e[2],9,-51403784),i=Mr(i,s,n,r,e[7],14,1735328473),n=Fr(n,r=Mr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Fr(s,n,r,i,e[8],11,-2022574463),i=Fr(i,s,n,r,e[11],16,1839030562),r=Fr(r,i,s,n,e[14],23,-35309556),n=Fr(n,r,i,s,e[1],4,-1530992060),s=Fr(s,n,r,i,e[4],11,1272893353),i=Fr(i,s,n,r,e[7],16,-155497632),r=Fr(r,i,s,n,e[10],23,-1094730640),n=Fr(n,r,i,s,e[13],4,681279174),s=Fr(s,n,r,i,e[0],11,-358537222),i=Fr(i,s,n,r,e[3],16,-722521979),r=Fr(r,i,s,n,e[6],23,76029189),n=Fr(n,r,i,s,e[9],4,-640364487),s=Fr(s,n,r,i,e[12],11,-421815835),i=Fr(i,s,n,r,e[15],16,530742520),n=Vr(n,r=Fr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Vr(s,n,r,i,e[7],10,1126891415),i=Vr(i,s,n,r,e[14],15,-1416354905),r=Vr(r,i,s,n,e[5],21,-57434055),n=Vr(n,r,i,s,e[12],6,1700485571),s=Vr(s,n,r,i,e[3],10,-1894986606),i=Vr(i,s,n,r,e[10],15,-1051523),r=Vr(r,i,s,n,e[1],21,-2054922799),n=Vr(n,r,i,s,e[8],6,1873313359),s=Vr(s,n,r,i,e[15],10,-30611744),i=Vr(i,s,n,r,e[6],15,-1560198380),r=Vr(r,i,s,n,e[13],21,1309151649),n=Vr(n,r,i,s,e[4],6,-145523070),s=Vr(s,n,r,i,e[11],10,-1120210379),i=Vr(i,s,n,r,e[2],15,718787259),r=Vr(r,i,s,n,e[9],21,-343485551),t[0]=wl(n,t[0]),t[1]=wl(r,t[1]),t[2]=wl(i,t[2]),t[3]=wl(s,t[3])}function D1(t,e,n,r,i,s){return e=wl(wl(e,t),wl(r,s)),wl(e<<i|e>>>32-i,n)}function Or(t,e,n,r,i,s,o){return D1(e&n|~e&r,t,e,i,s,o)}function Mr(t,e,n,r,i,s,o){return D1(e&r|n&~r,t,e,i,s,o)}function Fr(t,e,n,r,i,s,o){return D1(e^n^r,t,e,i,s,o)}function Vr(t,e,n,r,i,s,o){return D1(n^(e|~r),t,e,i,s,o)}function QL(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)gv(r,KZ(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(gv(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,gv(r,i),r}function KZ(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}kf=pt.atob.bind(pt),_5=pt.btoa.bind(pt);var $3="0123456789abcdef".split("");function YZ(t){for(var e="",n=0;n<4;n++)e+=$3[t>>8*n+4&15]+$3[t>>8*n&15];return e}function QZ(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function S5(t){return QL(t).map(QZ).join("")}var XZ=function(t){for(var e=0;e<t.length;e++)t[e]=YZ(t[e]);return t.join("")}(QL("hello"))!="5d41402abc4b2a76b9719d911017c592";function wl(t,e){if(XZ){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function E5(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var h=e.length,m=0,p=0,_="";for(l=0;l<h;l++)p=(p+(c=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=c,o=a[(a[m]+a[p])%256],_+=String.fromCharCode(e.charCodeAt(l)^o);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var H3={print:4,modify:8,copy:16,"annot-forms":32};function Gc(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(H3.perm!==void 0)throw new Error("Invalid permission: "+a);i+=H3[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=S5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=E5(this.encryptionKey,this.padding)}function Kc(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function W3(t){if(en(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){pt.console&&an.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function T0(t){if(!(this instanceof T0))return new T0(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function XL(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ju(t,e,n,r,i){if(!(this instanceof ju))return new ju(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,XL.call(this,r,i)}function fh(t,e,n,r,i){if(!(this instanceof fh))return new fh(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,XL.call(this,r,i)}function ft(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;en(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=W3;var _="1.3",b=p.__private__.getPdfVersion=function(){return _};p.__private__.setPdfVersion=function(v){_=v};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return N};var w=p.__private__.getPageFormat=function(v){return N[v]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},A=S.COMPAT;function O(){this.saveGraphicsState(),te(new tt(ze,0,0,-ze,0,Lr()*ze).toString()+" cm"),this.setFontSize(this.getFontSize()/ze),u="n",A=S.ADVANCED}function K(){this.restoreGraphicsState(),u="S",A=S.COMPAT}var q=p.__private__.combineFontStyleAndFontWeight=function(v,V){if(v=="bold"&&V=="normal"||v=="bold"&&V==400||v=="normal"&&V=="italic"||v=="bold"&&V=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return V&&(v=V==400||V==="normal"?v==="italic"?"italic":"normal":V!=700&&V!=="bold"||v!=="normal"?(V==700?"bold":V)+""+v:"bold"),v};p.advancedAPI=function(v){var V=A===S.COMPAT;return V&&O.call(this),typeof v!="function"||(v(this),V&&K.call(this)),this},p.compatAPI=function(v){var V=A===S.ADVANCED;return V&&K.call(this),typeof v!="function"||(v(this),V&&O.call(this)),this},p.isAdvancedAPI=function(){return A===S.ADVANCED};var D,T=function(v){if(A!==S.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=p.roundToPrecision=p.__private__.roundToPrecision=function(v,V){var J=e||V;if(isNaN(v)||isNaN(J))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(J).replace(/0+$/,"")};D=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return L(v,16)};var F=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return L(v,2)},I=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return L(v,3)},C=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return A===S.COMPAT?v*ze:A===S.ADVANCED?v:void 0},j=function(v){return A===S.COMPAT?Lr()-v:A===S.ADVANCED?v:void 0},Y=function(v){return C(j(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var le,he="00000000000000000000000000000000",ue=p.__private__.getFileId=function(){return he},X=p.__private__.setFileId=function(v){return he=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():he.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(yn=new Gc(c.userPermissions,c.userPassword,c.ownerPassword,he)),he};p.setFileId=function(v){return X(v),this},p.getFileId=function(){return ue()};var re=p.__private__.convertDateToPDFDate=function(v){var V=v.getTimezoneOffset(),J=V<0?"+":"-",ie=Math.floor(Math.abs(V/60)),fe=Math.abs(V%60),Ee=[J,Z(ie),"'",Z(fe),"'"].join("");return["D:",v.getFullYear(),Z(v.getMonth()+1),Z(v.getDate()),Z(v.getHours()),Z(v.getMinutes()),Z(v.getSeconds()),Ee].join("")},z=p.__private__.convertPDFDateToDate=function(v){var V=parseInt(v.substr(2,4),10),J=parseInt(v.substr(6,2),10)-1,ie=parseInt(v.substr(8,2),10),fe=parseInt(v.substr(10,2),10),Ee=parseInt(v.substr(12,2),10),Re=parseInt(v.substr(14,2),10);return new Date(V,J,ie,fe,Ee,Re,0)},Ae=p.__private__.setCreationDate=function(v){var V;if(v===void 0&&(v=new Date),v instanceof Date)V=re(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");V=v}return le=V},M=p.__private__.getCreationDate=function(v){var V=le;return v==="jsDate"&&(V=z(le)),V};p.setCreationDate=function(v){return Ae(v),this},p.getCreationDate=function(v){return M(v)};var R,Z=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ne=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},se=0,ge=[],xe=[],be=0,Oe=[],De=[],$e=!1,qe=xe,ot=function(){se=0,be=0,xe=[],ge=[],Oe=[],vs=In(),Pr=In()};p.__private__.setCustomOutputDestination=function(v){$e=!0,qe=v};var Se=function(v){$e||(qe=v)};p.__private__.resetCustomOutputDestination=function(){$e=!1,qe=xe};var te=p.__private__.out=function(v){return v=v.toString(),be+=v.length+1,qe.push(v),qe},yt=p.__private__.write=function(v){return te(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},rt=p.__private__.getArrayBuffer=function(v){for(var V=v.length,J=new ArrayBuffer(V),ie=new Uint8Array(J);V--;)ie[V]=v.charCodeAt(V);return J},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Me};var Be=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Be=A===S.ADVANCED?v/ze:v,this};var Ke,He=p.__private__.getFontSize=p.getFontSize=function(){return A===S.COMPAT?Be:Be*ze},st=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return st=v,this},p.__private__.getR2L=p.getR2L=function(){return st};var ht,xt=p.__private__.setZoomMode=function(v){var V=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))Ke=v;else if(isNaN(v)){if(V.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');Ke=v}else Ke=parseInt(v,10)};p.__private__.getZoomMode=function(){return Ke};var me,Te=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');ht=v};p.__private__.getPageMode=function(){return ht};var Ye=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');me=v};p.__private__.getLayoutMode=function(){return me},p.__private__.setDisplayMode=p.setDisplayMode=function(v,V,J){return xt(v),Ye(V),Te(J),this};var Ue={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Ue).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ue[v]},p.__private__.getDocumentProperties=function(){return Ue},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var V in Ue)Ue.hasOwnProperty(V)&&v[V]&&(Ue[V]=v[V]);return this},p.__private__.setDocumentProperty=function(v,V){if(Object.keys(Ue).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ue[v]=V};var Je,ze,Wt,bt,Hn,Dt={},Pt={},nr=[],Et={},Gs={},mn={},gr={},ki=null,un=0,ut=[],Ut=new W3(p),Qi=t.hotfixes||[],Wn={},kr={},Ci=[],tt=function v(V,J,ie,fe,Ee,Re){if(!(this instanceof v))return new v(V,J,ie,fe,Ee,Re);isNaN(V)&&(V=1),isNaN(J)&&(J=0),isNaN(ie)&&(ie=0),isNaN(fe)&&(fe=1),isNaN(Ee)&&(Ee=0),isNaN(Re)&&(Re=0),this._matrix=[V,J,ie,fe,Ee,Re]};Object.defineProperty(tt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(tt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(tt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(tt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(tt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(tt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(tt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(tt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(tt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(tt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(tt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(tt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(tt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(v)},tt.prototype.multiply=function(v){var V=v.sx*this.sx+v.shy*this.shx,J=v.sx*this.shy+v.shy*this.sy,ie=v.shx*this.sx+v.sy*this.shx,fe=v.shx*this.shy+v.sy*this.sy,Ee=v.tx*this.sx+v.ty*this.shx+this.tx,Re=v.tx*this.shy+v.ty*this.sy+this.ty;return new tt(V,J,ie,fe,Ee,Re)},tt.prototype.decompose=function(){var v=this.sx,V=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ee=this.ty,Re=Math.sqrt(v*v+V*V),Ge=(v/=Re)*J+(V/=Re)*ie;J-=v*Ge,ie-=V*Ge;var f=Math.sqrt(J*J+ie*ie);return Ge/=f,v*(ie/=f)<V*(J/=f)&&(v=-v,V=-V,Ge=-Ge,Re=-Re),{scale:new tt(Re,0,0,f,0,0),translate:new tt(1,0,0,1,fe,Ee),rotate:new tt(v,V,-V,v,0,0),skew:new tt(1,0,Ge,1,0,0)}},tt.prototype.toString=function(v){return this.join(" ")},tt.prototype.inversed=function(){var v=this.sx,V=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ee=this.ty,Re=1/(v*ie-V*J),Ge=ie*Re,f=-V*Re,E=-J*Re,P=v*Re;return new tt(Ge,f,E,P,-Ge*fe-E*Ee,-f*fe-P*Ee)},tt.prototype.applyToPoint=function(v){var V=v.x*this.sx+v.y*this.shx+this.tx,J=v.x*this.shy+v.y*this.sy+this.ty;return new Fo(V,J)},tt.prototype.applyToRectangle=function(v){var V=this.applyToPoint(v),J=this.applyToPoint(new Fo(v.x+v.w,v.y+v.h));return new Va(V.x,V.y,J.x-V.x,J.y-V.y)},tt.prototype.clone=function(){var v=this.sx,V=this.shy,J=this.shx,ie=this.sy,fe=this.tx,Ee=this.ty;return new tt(v,V,J,ie,fe,Ee)},p.Matrix=tt;var ci=p.matrixMult=function(v,V){return V.multiply(v)},Cr=new tt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Cr;var Gn=function(v,V){if(!Gs[v]){var J=(V instanceof ju?"Sh":"P")+(Object.keys(Et).length+1).toString(10);V.id=J,Gs[v]=J,Et[J]=V,Ut.publish("addPattern",V)}};p.ShadingPattern=ju,p.TilingPattern=fh,p.addShadingPattern=function(v,V){return T("addShadingPattern()"),Gn(v,V),this},p.beginTilingPattern=function(v){T("beginTilingPattern()"),Ba(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,V){T("endTilingPattern()"),V.stream=De[R].join(`
`),Gn(v,V),Ut.publish("endTilingPattern",V),Ci.pop().restore()};var Rn=p.__private__.newObject=function(){var v=In();return Kn(v,!0),v},In=p.__private__.newObjectDeferred=function(){return se++,ge[se]=function(){return be},se},Kn=function(v,V){return V=typeof V=="boolean"&&V,ge[v]=be,V&&te(v+" 0 obj"),v},Aa=p.__private__.newAdditionalObject=function(){var v={objId:In(),content:""};return Oe.push(v),v},vs=In(),Pr=In(),hi=p.__private__.decodeColorString=function(v){var V=v.split(" ");if(V.length!==2||V[1]!=="g"&&V[1]!=="G")V.length===5&&(V[4]==="k"||V[4]==="K")&&(V=[(1-V[0])*(1-V[3]),(1-V[1])*(1-V[3]),(1-V[2])*(1-V[3]),"r"]);else{var J=parseFloat(V[0]);V=[J,J,J,"r"]}for(var ie="#",fe=0;fe<3;fe++)ie+=("0"+Math.floor(255*parseFloat(V[fe])).toString(16)).slice(-2);return ie},Jr=p.__private__.encodeColorString=function(v){var V;typeof v=="string"&&(v={ch1:v});var J=v.ch1,ie=v.ch2,fe=v.ch3,Ee=v.ch4,Re=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof J=="string"&&J.charAt(0)!=="#"){var Ge=new YL(J);if(Ge.ok)J=Ge.toHex();else if(!/^\d*\.?\d*$/.test(J))throw new Error('Invalid color "'+J+'" passed to jsPDF.encodeColorString.')}if(typeof J=="string"&&/^#[0-9A-Fa-f]{3}$/.test(J)&&(J="#"+J[1]+J[1]+J[2]+J[2]+J[3]+J[3]),typeof J=="string"&&/^#[0-9A-Fa-f]{6}$/.test(J)){var f=parseInt(J.substr(1),16);J=f>>16&255,ie=f>>8&255,fe=255&f}if(ie===void 0||Ee===void 0&&J===ie&&ie===fe)if(typeof J=="string")V=J+" "+Re[0];else switch(v.precision){case 2:V=F(J/255)+" "+Re[0];break;case 3:default:V=I(J/255)+" "+Re[0]}else if(Ee===void 0||en(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return V=["1.","1.","1.",Re[1]].join(" ");if(typeof J=="string")V=[J,ie,fe,Re[1]].join(" ");else switch(v.precision){case 2:V=[F(J/255),F(ie/255),F(fe/255),Re[1]].join(" ");break;default:case 3:V=[I(J/255),I(ie/255),I(fe/255),Re[1]].join(" ")}}else if(typeof J=="string")V=[J,ie,fe,Ee,Re[2]].join(" ");else switch(v.precision){case 2:V=[F(J),F(ie),F(fe),F(Ee),Re[2]].join(" ");break;case 3:default:V=[I(J),I(ie),I(fe),I(Ee),Re[2]].join(" ")}return V},Zr=p.__private__.getFilters=function(){return o},Dn=p.__private__.putStream=function(v){var V=(v=v||{}).data||"",J=v.filters||Zr(),ie=v.alreadyAppliedFilters||[],fe=v.addLength1||!1,Ee=V.length,Re=v.objectId,Ge=function(At){return At};if(c!==null&&Re===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ge=yn.encryptor(Re,0));var f={};J===!0&&(J=["FlateEncode"]);var E=v.additionalKeyValues||[],P=(f=ft.API.processDataByFilters!==void 0?ft.API.processDataByFilters(V,J):{data:V,reverseChain:[]}).reverseChain+(Array.isArray(ie)?ie.join(" "):ie.toString());if(f.data.length!==0&&(E.push({key:"Length",value:f.data.length}),fe===!0&&E.push({key:"Length1",value:Ee})),P.length!=0)if(P.split("/").length-1==1)E.push({key:"Filter",value:P});else{E.push({key:"Filter",value:"["+P+"]"});for(var H=0;H<E.length;H+=1)if(E[H].key==="DecodeParms"){for(var de=[],we=0;we<f.reverseChain.split("/").length-1;we+=1)de.push("null");de.push(E[H].value),E[H].value="["+de.join(" ")+"]"}}te("<<");for(var je=0;je<E.length;je++)te("/"+E[je].key+" "+E[je].value);te(">>"),f.data.length!==0&&(te("stream"),te(Ge(f.data)),te("endstream"))},Pi=p.__private__.putPage=function(v){var V=v.number,J=v.data,ie=v.objId,fe=v.contentsObjId;Kn(ie,!0),te("<</Type /Page"),te("/Parent "+v.rootDictionaryObjId+" 0 R"),te("/Resources "+v.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(D(v.mediaBox.bottomLeftX))+" "+parseFloat(D(v.mediaBox.bottomLeftY))+" "+D(v.mediaBox.topRightX)+" "+D(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&te("/CropBox ["+D(v.cropBox.bottomLeftX)+" "+D(v.cropBox.bottomLeftY)+" "+D(v.cropBox.topRightX)+" "+D(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&te("/BleedBox ["+D(v.bleedBox.bottomLeftX)+" "+D(v.bleedBox.bottomLeftY)+" "+D(v.bleedBox.topRightX)+" "+D(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&te("/TrimBox ["+D(v.trimBox.bottomLeftX)+" "+D(v.trimBox.bottomLeftY)+" "+D(v.trimBox.topRightX)+" "+D(v.trimBox.topRightY)+"]"),v.artBox!==null&&te("/ArtBox ["+D(v.artBox.bottomLeftX)+" "+D(v.artBox.bottomLeftY)+" "+D(v.artBox.topRightX)+" "+D(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&te("/UserUnit "+v.userUnit),Ut.publish("putPage",{objId:ie,pageContext:ut[V],pageNumber:V,page:J}),te("/Contents "+fe+" 0 R"),te(">>"),te("endobj");var Ee=J.join(`
`);return A===S.ADVANCED&&(Ee+=`
Q`),Kn(fe,!0),Dn({data:Ee,filters:Zr(),objectId:fe}),te("endobj"),ie},Ks=p.__private__.putPages=function(){var v,V,J=[];for(v=1;v<=un;v++)ut[v].objId=In(),ut[v].contentsObjId=In();for(v=1;v<=un;v++)J.push(Pi({number:v,data:De[v],objId:ut[v].objId,contentsObjId:ut[v].contentsObjId,mediaBox:ut[v].mediaBox,cropBox:ut[v].cropBox,bleedBox:ut[v].bleedBox,trimBox:ut[v].trimBox,artBox:ut[v].artBox,userUnit:ut[v].userUnit,rootDictionaryObjId:vs,resourceDictionaryObjId:Pr}));Kn(vs,!0),te("<</Type /Pages");var ie="/Kids [";for(V=0;V<un;V++)ie+=J[V]+" 0 R ";te(ie+"]"),te("/Count "+un),te(">>"),te("endobj"),Ut.publish("postPutPages")},Ys=function(v){Ut.publish("putFont",{font:v,out:te,newObject:Rn,putStream:Dn}),v.isAlreadyPutted!==!0&&(v.objectNumber=Rn(),te("<<"),te("/Type /Font"),te("/BaseFont /"+Kc(v.postScriptName)),te("/Subtype /Type1"),typeof v.encoding=="string"&&te("/Encoding /"+v.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},Qs=function(){for(var v in Dt)Dt.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&Ys(Dt[v])},ko=function(v){v.objectNumber=Rn();var V=[];V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Form"}),V.push({key:"BBox",value:"["+[D(v.x),D(v.y),D(v.x+v.width),D(v.y+v.height)].join(" ")+"]"}),V.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var J=v.pages[1].join(`
`);Dn({data:J,additionalKeyValues:V,objectId:v.objectNumber}),te("endobj")},Co=function(){for(var v in Wn)Wn.hasOwnProperty(v)&&ko(Wn[v])},fc=function(v,V){var J,ie=[],fe=1/(V-1);for(J=0;J<1;J+=fe)ie.push(J);if(ie.push(1),v[0].offset!=0){var Ee={offset:0,color:v[0].color};v.unshift(Ee)}if(v[v.length-1].offset!=1){var Re={offset:1,color:v[v.length-1].color};v.push(Re)}for(var Ge="",f=0,E=0;E<ie.length;E++){for(J=ie[E];J>v[f+1].offset;)f++;var P=v[f].offset,H=(J-P)/(v[f+1].offset-P),de=v[f].color,we=v[f+1].color;Ge+=ne(Math.round((1-H)*de[0]+H*we[0]).toString(16))+ne(Math.round((1-H)*de[1]+H*we[1]).toString(16))+ne(Math.round((1-H)*de[2]+H*we[2]).toString(16))}return Ge.trim()},Ta=function(v,V){V||(V=21);var J=Rn(),ie=fc(v.colors,V),fe=[];fe.push({key:"FunctionType",value:"0"}),fe.push({key:"Domain",value:"[0.0 1.0]"}),fe.push({key:"Size",value:"["+V+"]"}),fe.push({key:"BitsPerSample",value:"8"}),fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Dn({data:ie,additionalKeyValues:fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:J}),te("endobj"),v.objectNumber=Rn(),te("<< /ShadingType "+v.type),te("/ColorSpace /DeviceRGB");var Ee="/Coords ["+D(parseFloat(v.coords[0]))+" "+D(parseFloat(v.coords[1]))+" ";v.type===2?Ee+=D(parseFloat(v.coords[2]))+" "+D(parseFloat(v.coords[3])):Ee+=D(parseFloat(v.coords[2]))+" "+D(parseFloat(v.coords[3]))+" "+D(parseFloat(v.coords[4]))+" "+D(parseFloat(v.coords[5])),te(Ee+="]"),v.matrix&&te("/Matrix ["+v.matrix.toString()+"]"),te("/Function "+J+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},pc=function(v,V){var J=In(),ie=Rn();V.push({resourcesOid:J,objectOid:ie}),v.objectNumber=ie;var fe=[];fe.push({key:"Type",value:"/Pattern"}),fe.push({key:"PatternType",value:"1"}),fe.push({key:"PaintType",value:"1"}),fe.push({key:"TilingType",value:"1"}),fe.push({key:"BBox",value:"["+v.boundingBox.map(D).join(" ")+"]"}),fe.push({key:"XStep",value:D(v.xStep)}),fe.push({key:"YStep",value:D(v.yStep)}),fe.push({key:"Resources",value:J+" 0 R"}),v.matrix&&fe.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Dn({data:v.stream,additionalKeyValues:fe,objectId:v.objectNumber}),te("endobj")},Xs=function(v){var V;for(V in Et)Et.hasOwnProperty(V)&&(Et[V]instanceof ju?Ta(Et[V]):Et[V]instanceof fh&&pc(Et[V],v))},Js=function(v){for(var V in v.objectNumber=Rn(),te("<<"),v)switch(V){case"opacity":te("/ca "+F(v[V]));break;case"stroke-opacity":te("/CA "+F(v[V]))}te(">>"),te("endobj")},ws=function(){var v;for(v in mn)mn.hasOwnProperty(v)&&Js(mn[v])},Po=function(){for(var v in te("/XObject <<"),Wn)Wn.hasOwnProperty(v)&&Wn[v].objectNumber>=0&&te("/"+v+" "+Wn[v].objectNumber+" 0 R");Ut.publish("putXobjectDict"),te(">>")},pd=function(){yn.oid=Rn(),te("<<"),te("/Filter /Standard"),te("/V "+yn.v),te("/R "+yn.r),te("/U <"+yn.toHexString(yn.U)+">"),te("/O <"+yn.toHexString(yn.O)+">"),te("/P "+yn.P),te(">>"),te("endobj")},ou=function(){for(var v in te("/Font <<"),Dt)Dt.hasOwnProperty(v)&&(h===!1||h===!0&&m.hasOwnProperty(v))&&te("/"+v+" "+Dt[v].objectNumber+" 0 R");te(">>")},mc=function(){if(Object.keys(Et).length>0){for(var v in te("/Shading <<"),Et)Et.hasOwnProperty(v)&&Et[v]instanceof ju&&Et[v].objectNumber>=0&&te("/"+v+" "+Et[v].objectNumber+" 0 R");Ut.publish("putShadingPatternDict"),te(">>")}},Lo=function(v){if(Object.keys(Et).length>0){for(var V in te("/Pattern <<"),Et)Et.hasOwnProperty(V)&&Et[V]instanceof p.TilingPattern&&Et[V].objectNumber>=0&&Et[V].objectNumber<v&&te("/"+V+" "+Et[V].objectNumber+" 0 R");Ut.publish("putTilingPatternDict"),te(">>")}},au=function(){if(Object.keys(mn).length>0){var v;for(v in te("/ExtGState <<"),mn)mn.hasOwnProperty(v)&&mn[v].objectNumber>=0&&te("/"+v+" "+mn[v].objectNumber+" 0 R");Ut.publish("putGStateDict"),te(">>")}},gn=function(v){Kn(v.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ou(),mc(),Lo(v.objectOid),au(),Po(),te(">>"),te("endobj")},lu=function(){var v=[];Qs(),ws(),Co(),Xs(v),Ut.publish("putResources"),v.forEach(gn),gn({resourcesOid:Pr,objectOid:Number.MAX_SAFE_INTEGER}),Ut.publish("postPutResources")},uu=function(){Ut.publish("putAdditionalObjects");for(var v=0;v<Oe.length;v++){var V=Oe[v];Kn(V.objId,!0),te(V.content),te("endobj")}Ut.publish("postPutAdditionalObjects")},gc=function(v){Pt[v.fontName]=Pt[v.fontName]||{},Pt[v.fontName][v.fontStyle]=v.id},cu=function(v,V,J,ie,fe){var Ee={id:"F"+(Object.keys(Dt).length+1).toString(10),postScriptName:v,fontName:V,fontStyle:J,encoding:ie,isStandardFont:fe||!1,metadata:{}};return Ut.publish("addFont",{font:Ee,instance:this}),Dt[Ee.id]=Ee,gc(Ee),Ee.id},yc=function(v){for(var V=0,J=Me.length;V<J;V++){var ie=cu.call(this,v[V][0],v[V][1],v[V][2],Me[V][3],!0);h===!1&&(m[ie]=!0);var fe=v[V][0].split("-");gc({id:ie,fontName:fe[0],fontStyle:fe[1]||""})}Ut.publish("addFonts",{fonts:Dt,dictionary:Pt})},di=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ie){var V=ie.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var J="Error in function "+V.split(`
`)[0].split("<")[0]+": "+ie.message;if(!pt.console)throw new Error(J);pt.console.error(J,ie),pt.alert&&alert(J)}},v.foo.bar=v,v.foo},Na=function(v,V){var J,ie,fe,Ee,Re,Ge,f,E,P;if(fe=(V=V||{}).sourceEncoding||"Unicode",Re=V.outputEncoding,(V.autoencode||Re)&&Dt[Je].metadata&&Dt[Je].metadata[fe]&&Dt[Je].metadata[fe].encoding&&(Ee=Dt[Je].metadata[fe].encoding,!Re&&Dt[Je].encoding&&(Re=Dt[Je].encoding),!Re&&Ee.codePages&&(Re=Ee.codePages[0]),typeof Re=="string"&&(Re=Ee[Re]),Re)){for(f=!1,Ge=[],J=0,ie=v.length;J<ie;J++)(E=Re[v.charCodeAt(J)])?Ge.push(String.fromCharCode(E)):Ge.push(v[J]),Ge[J].charCodeAt(0)>>8&&(f=!0);v=Ge.join("")}for(J=v.length;f===void 0&&J!==0;)v.charCodeAt(J-1)>>8&&(f=!0),J--;if(!f)return v;for(Ge=V.noBOM?[]:[254,255],J=0,ie=v.length;J<ie;J++){if((P=(E=v.charCodeAt(J))>>8)>>8)throw new Error("Character at position "+J+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ge.push(P),Ge.push(E-(P<<8))}return String.fromCharCode.apply(void 0,Ge)},kn=p.__private__.pdfEscape=p.pdfEscape=function(v,V){return Na(v,V).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ei=p.__private__.beginPage=function(v){De[++un]=[],ut[un]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},hu(un),Se(De[R])},Ro=function(v,V){var J,ie,fe;switch(n=V||n,typeof v=="string"&&(J=w(v.toLowerCase()),Array.isArray(J)&&(ie=J[0],fe=J[1])),Array.isArray(v)&&(ie=v[0]*ze,fe=v[1]*ze),isNaN(ie)&&(ie=i[0],fe=i[1]),(ie>14400||fe>14400)&&(an.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ie=Math.min(14400,ie),fe=Math.min(14400,fe)),i=[ie,fe],n.substr(0,1)){case"l":fe>ie&&(i=[fe,ie]);break;case"p":ie>fe&&(i=[fe,ie])}ei(i),gu(mu),te(yr),wu!==0&&te(wu+" J"),Fa!==0&&te(Fa+" j"),Ut.publish("addPage",{pageNumber:un})},Ia=function(v){v>0&&v<=un&&(De.splice(v,1),ut.splice(v,1),un--,R>un&&(R=un),this.setPage(R))},hu=function(v){v>0&&v<=un&&(R=v)},Qt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return De.length-1},Do=function(v,V,J){var ie,fe=void 0;return J=J||{},v=v!==void 0?v:Dt[Je].fontName,V=V!==void 0?V:Dt[Je].fontStyle,ie=v.toLowerCase(),Pt[ie]!==void 0&&Pt[ie][V]!==void 0?fe=Pt[ie][V]:Pt[v]!==void 0&&Pt[v][V]!==void 0?fe=Pt[v][V]:J.disableWarning===!1&&an.warn("Unable to look up font label for font '"+v+"', '"+V+"'. Refer to getFontList() for available fonts."),fe||J.noFallback||(fe=Pt.times[V])==null&&(fe=Pt.times.normal),fe},jo=p.__private__.putInfo=function(){var v=Rn(),V=function(ie){return ie};for(var J in c!==null&&(V=yn.encryptor(v,0)),te("<<"),te("/Producer ("+kn(V("jsPDF "+ft.version))+")"),Ue)Ue.hasOwnProperty(J)&&Ue[J]&&te("/"+J.substr(0,1).toUpperCase()+J.substr(1)+" ("+kn(V(Ue[J]))+")");te("/CreationDate ("+kn(V(le))+")"),te(">>"),te("endobj")},xs=p.__private__.putCatalog=function(v){var V=(v=v||{}).rootDictionaryObjId||vs;switch(Rn(),te("<<"),te("/Type /Catalog"),te("/Pages "+V+" 0 R"),Ke||(Ke="fullwidth"),Ke){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var J=""+Ke;J.substr(J.length-1)==="%"&&(Ke=parseInt(Ke)/100),typeof Ke=="number"&&te("/OpenAction [3 0 R /XYZ null null "+F(Ke)+"]")}switch(me||(me="continuous"),me){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}ht&&te("/PageMode /"+ht),Ut.publish("putCatalog"),te(">>"),te("endobj")},md=p.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(se+1)),te("/Root "+se+" 0 R"),te("/Info "+(se-1)+" 0 R"),c!==null&&te("/Encrypt "+yn.oid+" 0 R"),te("/ID [ <"+he+"> <"+he+"> ]"),te(">>")},vc=p.__private__.putHeader=function(){te("%PDF-"+_),te("%ºß¬à")},gd=p.__private__.putXRef=function(){var v="0000000000";te("xref"),te("0 "+(se+1)),te("0000000000 65535 f ");for(var V=1;V<=se;V++)typeof ge[V]=="function"?te((v+ge[V]()).slice(-10)+" 00000 n "):ge[V]!==void 0?te((v+ge[V]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},bs=p.__private__.buildDocument=function(){ot(),Se(xe),Ut.publish("buildDocument"),vc(),Ks(),uu(),lu(),c!==null&&pd(),jo(),xs();var v=be;return gd(),md(),te("startxref"),te(""+v),te("%%EOF"),Se(De[R]),xe.join(`
`)},ka=p.__private__.getBlob=function(v){return new Blob([rt(v)],{type:"application/pdf"})},Ca=p.output=p.__private__.output=di(function(v,V){switch(typeof(V=V||{})=="string"?V={filename:V}:V.filename=V.filename||"generated.pdf",v){case void 0:return bs();case"save":p.save(V.filename);break;case"arraybuffer":return rt(bs());case"blob":return ka(bs());case"bloburi":case"bloburl":if(pt.URL!==void 0&&typeof pt.URL.createObjectURL=="function")return pt.URL&&pt.URL.createObjectURL(ka(bs()))||void 0;an.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var J="",ie=bs();try{J=_5(ie)}catch{J=_5(unescape(encodeURIComponent(ie)))}return"data:application/pdf;filename="+V.filename+";base64,"+J;case"pdfobjectnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';V.pdfObjectUrl&&(fe=V.pdfObjectUrl,Ee="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+fe+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(V)+");<\/script></body></html>",Ge=pt.open();return Ge!==null&&Ge.document.write(Re),Ge}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(pt)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(V.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+V.filename+'" width="500px" height="400px" /></body></html>',E=pt.open();if(E!==null){E.document.write(f);var P=this;E.document.documentElement.querySelector("#pdfViewer").onload=function(){E.document.title=V.filename,E.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(P.output("bloburl"))}}return E}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(pt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var H='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",V)+'"></iframe></body></html>',de=pt.open();if(de!==null&&(de.document.write(H),de.document.title=V.filename),de||typeof safari>"u")return de;break;case"datauri":case"dataurl":return pt.document.location.href=this.output("datauristring",V);default:return null}}),Zs=function(v){return Array.isArray(Qi)===!0&&Qi.indexOf(v)>-1};switch(r){case"pt":ze=1;break;case"mm":ze=72/25.4;break;case"cm":ze=72/2.54;break;case"in":ze=72;break;case"px":ze=Zs("px_scaling")==1?.75:96/72;break;case"pc":case"em":ze=12;break;case"ex":ze=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ze=r}var yn=null;Ae(),X();var wc=function(v){return c!==null?yn.encryptor(v,0):function(V){return V}},du=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ut[v].objId,pageNumber:v,pageContext:ut[v]}},vt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var V in ut)if(ut[V].objId===v)break;return du(V)},eo=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ut[R].objId,pageNumber:R,pageContext:ut[R]}};p.addPage=function(){return Ro.apply(this,arguments),this},p.setPage=function(){return hu.apply(this,arguments),Se.call(this,De[R]),this},p.insertPage=function(v){return this.addPage(),this.movePage(R,v),this},p.movePage=function(v,V){var J,ie;if(v>V){J=De[v],ie=ut[v];for(var fe=v;fe>V;fe--)De[fe]=De[fe-1],ut[fe]=ut[fe-1];De[V]=J,ut[V]=ie,this.setPage(V)}else if(v<V){J=De[v],ie=ut[v];for(var Ee=v;Ee<V;Ee++)De[Ee]=De[Ee+1],ut[Ee]=ut[Ee+1];De[V]=J,ut[V]=ie,this.setPage(V)}return this},p.deletePage=function(){return Ia.apply(this,arguments),this},p.__private__.text=p.text=function(v,V,J,ie,fe){var Ee,Re,Ge,f,E,P,H,de,we,je=(ie=ie||{}).scope||this;if(typeof v=="number"&&typeof V=="number"&&(typeof J=="string"||Array.isArray(J))){var At=J;J=V,V=v,v=At}if(arguments[3]instanceof tt?(T("The transform parameter of text() with a Matrix value"),we=fe):(Ge=arguments[4],f=arguments[5],en(H=arguments[3])==="object"&&H!==null||(typeof Ge=="string"&&(f=Ge,Ge=null),typeof H=="string"&&(f=H,H=null),typeof H=="number"&&(Ge=H,H=null),ie={flags:H,angle:Ge,align:f})),isNaN(V)||isNaN(J)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return je;var Ot="",Tt=!1,Kt=typeof ie.lineHeightFactor=="number"?ie.lineHeightFactor:Gt,sn=je.internal.scaleFactor;function Ts(cn){return cn=cn.split("	").join(Array(ie.TabLen||9).join(" ")),kn(cn,H)}function vr(cn){for(var hn,On=cn.concat(),ir=[],qo=On.length;qo--;)typeof(hn=On.shift())=="string"?ir.push(hn):Array.isArray(cn)&&(hn.length===1||hn[1]===void 0&&hn[2]===void 0)?ir.push(hn[0]):ir.push([hn[0],hn[1],hn[2]]);return ir}function io(cn,hn){var On;if(typeof cn=="string")On=hn(cn)[0];else if(Array.isArray(cn)){for(var ir,qo,Ad=cn.concat(),Lc=[],qp=Ad.length;qp--;)typeof(ir=Ad.shift())=="string"?Lc.push(hn(ir)[0]):Array.isArray(ir)&&typeof ir[0]=="string"&&(qo=hn(ir[0],ir[1],ir[2]),Lc.push([qo[0],qo[1],qo[2]]));On=Lc}return On}var so=!1,vd=!0;if(typeof v=="string")so=!0;else if(Array.isArray(v)){var wd=v.concat();Re=[];for(var Ec,wr=wd.length;wr--;)(typeof(Ec=wd.shift())!="string"||Array.isArray(Ec)&&typeof Ec[0]!="string")&&(vd=!1);so=vd}if(so===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ac=Be/je.internal.scaleFactor,Tc=Ac*(Kt-1);switch(ie.baseline){case"bottom":J-=Tc;break;case"top":J+=Ac-Tc;break;case"hanging":J+=Ac-2*Tc;break;case"middle":J+=Ac/2-Tc}if((P=ie.maxWidth||0)>0&&(typeof v=="string"?v=je.splitTextToSize(v,P):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(cn,hn){return cn.concat(je.splitTextToSize(hn,P))},[]))),Ee={text:v,x:V,y:J,options:ie,mutex:{pdfEscape:kn,activeFontKey:Je,fonts:Dt,activeFontSize:Be}},Ut.publish("preProcessText",Ee),v=Ee.text,Ge=(ie=Ee.options).angle,!(we instanceof tt)&&Ge&&typeof Ge=="number"){Ge*=Math.PI/180,ie.rotationDirection===0&&(Ge=-Ge),A===S.ADVANCED&&(Ge=-Ge);var Nc=Math.cos(Ge),xd=Math.sin(Ge);we=new tt(Nc,xd,-xd,Nc,0,0)}else Ge&&Ge instanceof tt&&(we=Ge);A!==S.ADVANCED||we||(we=Cr),(E=ie.charSpace||Mo)!==void 0&&(Ot+=D(C(E))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(de=ie.horizontalScale)!==void 0&&(Ot+=D(100*de)+` Tz
`),ie.lang;var fi=-1,j1=ie.renderingMode!==void 0?ie.renderingMode:ie.stroke,bd=je.internal.getCurrentPageInfo().pageContext;switch(j1){case 0:case!1:case"fill":fi=0;break;case 1:case!0:case"stroke":fi=1;break;case 2:case"fillThenStroke":fi=2;break;case 3:case"invisible":fi=3;break;case 4:case"fillAndAddForClipping":fi=4;break;case 5:case"strokeAndAddPathForClipping":fi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":fi=6;break;case 7:case"addToPathForClipping":fi=7}var Vp=bd.usedRenderingMode!==void 0?bd.usedRenderingMode:-1;fi!==-1?Ot+=fi+` Tr
`:Vp!==-1&&(Ot+=`0 Tr
`),fi!==-1&&(bd.usedRenderingMode=fi),f=ie.align||"left";var Ji,Ic=Be*Kt,Bp=je.internal.pageSize.getWidth(),Up=Dt[Je];E=ie.charSpace||Mo,P=ie.maxWidth||0,H=Object.assign({autoencode:!0,noBOM:!0},ie.flags);var qa=[],xu=function(cn){return je.getStringUnitWidth(cn,{font:Up,charSpace:E,fontSize:Be,doKerning:!1})*Be/sn};if(Object.prototype.toString.call(v)==="[object Array]"){var pi;Re=vr(v),f!=="left"&&(Ji=Re.map(xu));var ti,$a=0;if(f==="right"){V-=Ji[0],v=[],wr=Re.length;for(var Bo=0;Bo<wr;Bo++)Bo===0?(ti=Di(V),pi=rr(J)):(ti=C($a-Ji[Bo]),pi=-Ic),v.push([Re[Bo],ti,pi]),$a=Ji[Bo]}else if(f==="center"){V-=Ji[0]/2,v=[],wr=Re.length;for(var Uo=0;Uo<wr;Uo++)Uo===0?(ti=Di(V),pi=rr(J)):(ti=C(($a-Ji[Uo])/2),pi=-Ic),v.push([Re[Uo],ti,pi]),$a=Ji[Uo]}else if(f==="left"){v=[],wr=Re.length;for(var kc=0;kc<wr;kc++)v.push(Re[kc])}else if(f==="justify"&&Up.encoding==="Identity-H"){v=[],wr=Re.length,P=P!==0?P:Bp;for(var zo=0,jn=0;jn<wr;jn++)if(pi=jn===0?rr(J):-Ic,ti=jn===0?Di(V):zo,jn<wr-1){var _d=C((P-Ji[jn])/(Re[jn].split(" ").length-1)),ni=Re[jn].split(" ");v.push([ni[0]+" ",ti,pi]),zo=0;for(var Zi=1;Zi<ni.length;Zi++){var Cc=(xu(ni[Zi-1]+" "+ni[Zi])-xu(ni[Zi]))*sn+_d;Zi==ni.length-1?v.push([ni[Zi],Cc,0]):v.push([ni[Zi]+" ",Cc,0]),zo-=Cc}}else v.push([Re[jn],ti,pi]);v.push(["",zo,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],wr=Re.length,P=P!==0?P:Bp,jn=0;jn<wr;jn++)pi=jn===0?rr(J):-Ic,ti=jn===0?Di(V):0,jn<wr-1?qa.push(D(C((P-Ji[jn])/(Re[jn].split(" ").length-1)))):qa.push(0),v.push([Re[jn],ti,pi])}}var zp=typeof ie.R2L=="boolean"?ie.R2L:st;zp===!0&&(v=io(v,function(cn,hn,On){return[cn.split("").reverse().join(""),hn,On]})),Ee={text:v,x:V,y:J,options:ie,mutex:{pdfEscape:kn,activeFontKey:Je,fonts:Dt,activeFontSize:Be}},Ut.publish("postProcessText",Ee),v=Ee.text,Tt=Ee.mutex.isHex||!1;var Sd=Dt[Je].encoding;Sd!=="WinAnsiEncoding"&&Sd!=="StandardEncoding"||(v=io(v,function(cn,hn,On){return[Ts(cn),hn,On]})),Re=vr(v),v=[];for(var bu,_u,Ha,Su=0,Pc=1,Eu=Array.isArray(Re[0])?Pc:Su,Wa="",Ed=function(cn,hn,On){var ir="";return On instanceof tt?(On=typeof ie.angle=="number"?ci(On,new tt(1,0,0,1,cn,hn)):ci(new tt(1,0,0,1,cn,hn),On),A===S.ADVANCED&&(On=ci(new tt(1,0,0,-1,0,0),On)),ir=On.join(" ")+` Tm
`):ir=D(cn)+" "+D(hn)+` Td
`,ir},es=0;es<Re.length;es++){switch(Wa="",Eu){case Pc:Ha=(Tt?"<":"(")+Re[es][0]+(Tt?">":")"),bu=parseFloat(Re[es][1]),_u=parseFloat(Re[es][2]);break;case Su:Ha=(Tt?"<":"(")+Re[es]+(Tt?">":")"),bu=Di(V),_u=rr(J)}qa!==void 0&&qa[es]!==void 0&&(Wa=qa[es]+` Tw
`),es===0?v.push(Wa+Ed(bu,_u,we)+Ha):Eu===Su?v.push(Wa+Ha):Eu===Pc&&v.push(Wa+Ed(bu,_u,we)+Ha)}v=Eu===Su?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ts=`BT
/`;return ts+=Je+" "+Be+` Tf
`,ts+=D(Be*Kt)+` TL
`,ts+=Es+`
`,ts+=Ot,ts+=v,te(ts+="ET"),m[Je]=!0,je};var yd=p.__private__.clip=p.clip=function(v){return te(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return yd("evenodd")},p.__private__.discardPath=p.discardPath=function(){return te("n"),this};var Xi=p.__private__.isValidStyle=function(v){var V=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(V=!0),V};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Xi(v)&&(u=v),this};var xc=p.__private__.getStyle=p.getStyle=function(v){var V=u;switch(v){case"D":case"S":V="S";break;case"F":V="f";break;case"FD":case"DF":V="B";break;case"f":case"f*":case"B":case"B*":V=v}return V},Li=p.close=function(){return te("h"),this};p.stroke=function(){return te("S"),this},p.fill=function(v){return Pa("f",v),this},p.fillEvenOdd=function(v){return Pa("f*",v),this},p.fillStroke=function(v){return Pa("B",v),this},p.fillStrokeEvenOdd=function(v){return Pa("B*",v),this};var Pa=function(v,V){en(V)==="object"?Ra(V,v):te(v)},fu=function(v){v===null||A===S.ADVANCED&&v===void 0||(v=xc(v),te(v))};function La(v,V,J,ie,fe){var Ee=new fh(V||this.boundingBox,J||this.xStep,ie||this.yStep,this.gState,fe||this.matrix);Ee.stream=this.stream;var Re=v+"$$"+this.cloneIndex+++"$$";return Gn(Re,Ee),Ee}var Ra=function(v,V){var J=Gs[v.key],ie=Et[J];if(ie instanceof ju)te("q"),te(bc(V)),ie.gState&&p.setGState(ie.gState),te(v.matrix.toString()+" cm"),te("/"+J+" sh"),te("Q");else if(ie instanceof fh){var fe=new tt(1,0,0,-1,0,Lr());v.matrix&&(fe=fe.multiply(v.matrix||Cr),J=La.call(ie,v.key,v.boundingBox,v.xStep,v.yStep,fe).id),te("q"),te("/Pattern cs"),te("/"+J+" scn"),ie.gState&&p.setGState(ie.gState),te(V),te("Q")}},bc=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},_s=p.moveTo=function(v,V){return te(D(C(v))+" "+D(Y(V))+" m"),this},Ri=p.lineTo=function(v,V){return te(D(C(v))+" "+D(Y(V))+" l"),this},Ss=p.curveTo=function(v,V,J,ie,fe,Ee){return te([D(C(v)),D(Y(V)),D(C(J)),D(Y(ie)),D(C(fe)),D(Y(Ee)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,V,J,ie,fe){if(isNaN(v)||isNaN(V)||isNaN(J)||isNaN(ie)||!Xi(fe))throw new Error("Invalid arguments passed to jsPDF.line");return A===S.COMPAT?this.lines([[J-v,ie-V]],v,V,[1,1],fe||"S"):this.lines([[J-v,ie-V]],v,V,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,V,J,ie,fe,Ee){var Re,Ge,f,E,P,H,de,we,je,At,Ot,Tt;if(typeof v=="number"&&(Tt=J,J=V,V=v,v=Tt),ie=ie||[1,1],Ee=Ee||!1,isNaN(V)||isNaN(J)||!Array.isArray(v)||!Array.isArray(ie)||!Xi(fe)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_s(V,J),Re=ie[0],Ge=ie[1],E=v.length,At=V,Ot=J,f=0;f<E;f++)(P=v[f]).length===2?(At=P[0]*Re+At,Ot=P[1]*Ge+Ot,Ri(At,Ot)):(H=P[0]*Re+At,de=P[1]*Ge+Ot,we=P[2]*Re+At,je=P[3]*Ge+Ot,At=P[4]*Re+At,Ot=P[5]*Ge+Ot,Ss(H,de,we,je,At,Ot));return Ee&&Li(),fu(fe),this},p.path=function(v){for(var V=0;V<v.length;V++){var J=v[V],ie=J.c;switch(J.op){case"m":_s(ie[0],ie[1]);break;case"l":Ri(ie[0],ie[1]);break;case"c":Ss.apply(this,ie);break;case"h":Li()}}return this},p.__private__.rect=p.rect=function(v,V,J,ie,fe){if(isNaN(v)||isNaN(V)||isNaN(J)||isNaN(ie)||!Xi(fe))throw new Error("Invalid arguments passed to jsPDF.rect");return A===S.COMPAT&&(ie=-ie),te([D(C(v)),D(Y(V)),D(C(J)),D(C(ie)),"re"].join(" ")),fu(fe),this},p.__private__.triangle=p.triangle=function(v,V,J,ie,fe,Ee,Re){if(isNaN(v)||isNaN(V)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(Ee)||!Xi(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[J-v,ie-V],[fe-J,Ee-ie],[v-fe,V-Ee]],v,V,[1,1],Re,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,V,J,ie,fe,Ee,Re){if(isNaN(v)||isNaN(V)||isNaN(J)||isNaN(ie)||isNaN(fe)||isNaN(Ee)||!Xi(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ge=4/3*(Math.SQRT2-1);return fe=Math.min(fe,.5*J),Ee=Math.min(Ee,.5*ie),this.lines([[J-2*fe,0],[fe*Ge,0,fe,Ee-Ee*Ge,fe,Ee],[0,ie-2*Ee],[0,Ee*Ge,-fe*Ge,Ee,-fe,Ee],[2*fe-J,0],[-fe*Ge,0,-fe,-Ee*Ge,-fe,-Ee],[0,2*Ee-ie],[0,-Ee*Ge,fe*Ge,-Ee,fe,-Ee]],v+fe,V,[1,1],Re,!0),this},p.__private__.ellipse=p.ellipse=function(v,V,J,ie,fe){if(isNaN(v)||isNaN(V)||isNaN(J)||isNaN(ie)||!Xi(fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*J,Re=4/3*(Math.SQRT2-1)*ie;return _s(v+J,V),Ss(v+J,V-Re,v+Ee,V-ie,v,V-ie),Ss(v-Ee,V-ie,v-J,V-Re,v-J,V),Ss(v-J,V+Re,v-Ee,V+ie,v,V+ie),Ss(v+Ee,V+ie,v+J,V+Re,v+J,V),fu(fe),this},p.__private__.circle=p.circle=function(v,V,J,ie){if(isNaN(v)||isNaN(V)||isNaN(J)||!Xi(ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,V,J,J,ie)},p.setFont=function(v,V,J){return J&&(V=q(V,J)),Je=Do(v,V,{disableWarning:!1}),this};var pu=p.__private__.getFont=p.getFont=function(){return Dt[Do.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,V,J={};for(v in Pt)if(Pt.hasOwnProperty(v))for(V in J[v]=[],Pt[v])Pt[v].hasOwnProperty(V)&&J[v].push(V);return J},p.addFont=function(v,V,J,ie,fe){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?fe=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(J=q(J,ie)),fe=fe||"Identity-H",cu.call(this,v,V,J,fe)};var Gt,mu=t.lineWidth||.200025,Da=p.__private__.getLineWidth=p.getLineWidth=function(){return mu},gu=p.__private__.setLineWidth=p.setLineWidth=function(v){return mu=v,te(D(C(v))+" w"),this};p.__private__.setLineDash=ft.API.setLineDash=ft.API.setLineDashPattern=function(v,V){if(v=v||[],V=V||0,isNaN(V)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(J){return D(C(J))}).join(" "),V=D(C(V)),te("["+v+"] "+V+" d"),this};var yu=p.__private__.getLineHeight=p.getLineHeight=function(){return Be*Gt};p.__private__.getLineHeight=p.getLineHeight=function(){return Be*Gt};var vu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Gt=v),this},Oo=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Gt};vu(t.lineHeight);var Di=p.__private__.getHorizontalCoordinate=function(v){return C(v)},rr=p.__private__.getVerticalCoordinate=function(v){return A===S.ADVANCED?v:ut[R].mediaBox.topRightY-ut[R].mediaBox.bottomLeftY-C(v)},_c=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return D(Di(v))},to=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return D(rr(v))},yr=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return hi(yr)},p.__private__.setStrokeColor=p.setDrawColor=function(v,V,J,ie){return yr=Jr({ch1:v,ch2:V,ch3:J,ch4:ie,pdfColorType:"draw",precision:2}),te(yr),this};var ja=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return hi(ja)},p.__private__.setFillColor=p.setFillColor=function(v,V,J,ie){return ja=Jr({ch1:v,ch2:V,ch3:J,ch4:ie,pdfColorType:"fill",precision:2}),te(ja),this};var Es=t.textColor||"0 g",Oa=p.__private__.getTextColor=p.getTextColor=function(){return hi(Es)};p.__private__.setTextColor=p.setTextColor=function(v,V,J,ie){return Es=Jr({ch1:v,ch2:V,ch3:J,ch4:ie,pdfColorType:"text",precision:3}),this};var Mo=t.charSpace,Ma=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Mo||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Mo=v,this};var wu=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var V=p.CapJoinStyles[v];if(V===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wu=V,te(V+" J"),this};var Fa=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var V=p.CapJoinStyles[v];if(V===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fa=V,te(V+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(D(C(v))+" M"),this},p.GState=T0,p.setGState=function(v){(v=typeof v=="string"?mn[gr[v]]:no(null,v)).equals(ki)||(te("/"+v.id+" gs"),ki=v)};var no=function(v,V){if(!v||!gr[v]){var J=!1;for(var ie in mn)if(mn.hasOwnProperty(ie)&&mn[ie].equals(V)){J=!0;break}if(J)V=mn[ie];else{var fe="GS"+(Object.keys(mn).length+1).toString(10);mn[fe]=V,V.id=fe}return v&&(gr[v]=V.id),Ut.publish("addGState",V),V}};p.addGState=function(v,V){return no(v,V),this},p.saveGraphicsState=function(){return te("q"),nr.push({key:Je,size:Be,color:Es}),this},p.restoreGraphicsState=function(){te("Q");var v=nr.pop();return Je=v.key,Be=v.size,Es=v.color,ki=null,this},p.setCurrentTransformationMatrix=function(v){return te(v.toString()+" cm"),this},p.comment=function(v){return te("#"+v),this};var Fo=function(v,V){var J=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return J},set:function(Ee){isNaN(Ee)||(J=parseFloat(Ee))}});var ie=V||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ie},set:function(Ee){isNaN(Ee)||(ie=parseFloat(Ee))}});var fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return fe},set:function(Ee){fe=Ee.toString()}}),this},Va=function(v,V,J,ie){Fo.call(this,v,V),this.type="rect";var fe=J||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return fe},set:function(Re){isNaN(Re)||(fe=parseFloat(Re))}});var Ee=ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function(Re){isNaN(Re)||(Ee=parseFloat(Re))}}),this},Vo=function(){this.page=un,this.currentPage=R,this.pages=De.slice(0),this.pagesContext=ut.slice(0),this.x=Wt,this.y=bt,this.matrix=Hn,this.width=ro(R),this.height=Lr(R),this.outputDestination=qe,this.id="",this.objectNumber=-1};Vo.prototype.restore=function(){un=this.page,R=this.currentPage,ut=this.pagesContext,De=this.pages,Wt=this.x,bt=this.y,Hn=this.matrix,Ua(R,this.width),za(R,this.height),qe=this.outputDestination};var Ba=function(v,V,J,ie,fe){Ci.push(new Vo),un=R=0,De=[],Wt=v,bt=V,Hn=fe,ei([J,ie])},Sc=function(v){if(kr[v])Ci.pop().restore();else{var V=new Vo,J="Xo"+(Object.keys(Wn).length+1).toString(10);V.id=J,kr[v]=J,Wn[J]=V,Ut.publish("addFormObject",V),Ci.pop().restore()}};for(var As in p.beginFormObject=function(v,V,J,ie,fe){return Ba(v,V,J,ie,fe),this},p.endFormObject=function(v){return Sc(v),this},p.doFormObject=function(v,V){var J=Wn[kr[v]];return te("q"),te(V.toString()+" cm"),te("/"+J.id+" Do"),te("Q"),this},p.getFormObject=function(v){var V=Wn[kr[v]];return{x:V.x,y:V.y,width:V.width,height:V.height,matrix:V.matrix}},p.save=function(v,V){return v=v||"generated.pdf",(V=V||{}).returnPromise=V.returnPromise||!1,V.returnPromise===!1?(Ru(ka(bs()),v),typeof Ru.unload=="function"&&pt.setTimeout&&setTimeout(Ru.unload,911),this):new Promise(function(J,ie){try{var fe=Ru(ka(bs()),v);typeof Ru.unload=="function"&&pt.setTimeout&&setTimeout(Ru.unload,911),J(fe)}catch(Ee){ie(Ee.message)}})},ft.API)ft.API.hasOwnProperty(As)&&(As==="events"&&ft.API.events.length?function(v,V){var J,ie,fe;for(fe=V.length-1;fe!==-1;fe--)J=V[fe][0],ie=V[fe][1],v.subscribe.apply(v,[J].concat(typeof ie=="function"?[ie]:ie))}(Ut,ft.API.events):p[As]=ft.API[As]);var ro=p.getPageWidth=function(v){return(ut[v=v||R].mediaBox.topRightX-ut[v].mediaBox.bottomLeftX)/ze},Ua=p.setPageWidth=function(v,V){ut[v].mediaBox.topRightX=V*ze+ut[v].mediaBox.bottomLeftX},Lr=p.getPageHeight=function(v){return(ut[v=v||R].mediaBox.topRightY-ut[v].mediaBox.bottomLeftY)/ze},za=p.setPageHeight=function(v,V){ut[v].mediaBox.topRightY=V*ze+ut[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:kn,getStyle:xc,getFont:pu,getFontSize:He,getCharSpace:Ma,getTextColor:Oa,getLineHeight:yu,getLineHeightFactor:Oo,getLineWidth:Da,write:yt,getHorizontalCoordinate:Di,getVerticalCoordinate:rr,getCoordinateString:_c,getVerticalCoordinateString:to,collections:{},newObject:Rn,newAdditionalObject:Aa,newObjectDeferred:In,newObjectDeferredBegin:Kn,getFilters:Zr,putStream:Dn,events:Ut,scaleFactor:ze,pageSize:{getWidth:function(){return ro(R)},setWidth:function(v){Ua(R,v)},getHeight:function(){return Lr(R)},setHeight:function(v){za(R,v)}},encryptionOptions:c,encryption:yn,getEncryptor:wc,output:Ca,getNumberOfPages:Qt,pages:De,out:te,f2:F,f3:I,getPageInfo:du,getPageInfoByObjId:vt,getCurrentPageInfo:eo,getPDFVersion:b,Point:Fo,Rectangle:Va,Matrix:tt,hasHotfix:Zs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ro(R)},set:function(v){Ua(R,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Lr(R)},set:function(v){za(R,v)},enumerable:!0,configurable:!0}),yc.call(p,Me),Je="F1",Ro(i,n),Ut.publish("initialized"),p}Gc.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Gc.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Gc.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Gc.prototype.processOwnerPassword=function(t,e){return E5(S5(e).substr(0,5),t)},Gc.prototype.encryptor=function(t,e){var n=S5(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return E5(n,r)}},T0.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||en(t)!==en(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},ft.API={events:[]},ft.version="2.5.2";var Pn=ft.API,Rb=1,dc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uc=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nt=function(t){return t.toFixed(2)},sl=function(t){return t.toFixed(5)};Pn.__acroform__={};var Ii=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},G3=function(t){return t*Rb},lo=function(t){var e=new ZL,n=it.internal.getHeight(t)||0,r=it.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Nt(r)),Number(Nt(n))],e},JZ=Pn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},ZZ=Pn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},eee=Pn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Bn=Pn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return eee(t,e-1)},Un=Pn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return JZ(t,e-1)},zn=Pn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ZZ(t,e-1)},tee=Pn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Nt(l.lowerLeft_X)),Number(Nt(l.lowerLeft_Y)),Number(Nt(l.upperRight_X)),Number(Nt(l.upperRight_Y))]},nee=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=A5(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Nt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=lo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},A5=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=n,o=it.internal.getHeight(t)||0;o=o<0?-o:o;var a=it.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(I,C,j){if(I+1<i.length){var Y=C+" "+i[I+1][0];return Bm(Y,t,j).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,h=Bm("3",t,s).height,m=t.multiline?o-s:(o-h)/2,p=m+=2,_=0,b=0,N=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Bm(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",S=0,A=0;A<i.length;A++)if(i.hasOwnProperty(A)){var O=!1;if(i[A].length!==1&&N!==i[A].length-1){if((h+2)*(S+2)+2>o)continue e;w+=i[A][N],O=!0,b=A,A--}else{w=(w+=i[A][N]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var K=parseInt(A),q=l(K,w,s),D=A>=i.length-1;if(q&&!D){w+=" ",N=0;continue}if(q||D){if(D)b=K;else if(t.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(S+2)+2>o)continue e;b=K}}for(var T="",L=_;L<=b;L++){var F=i[L];if(t.multiline){if(L===b){T+=F[N]+" ",N=(N+1)%F.length;continue}if(L===_){T+=F[F.length-1]+" ";continue}}T+=F[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,c=Bm(T,t,s).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;case"left":default:u=2}e+=Nt(u)+" "+Nt(p)+` Td
`,e+="("+dc(T)+`) Tj
`,e+=-Nt(u)+` 0 Td
`,p=-(s+2),c=0,_=O?b:b+1,S++,w=""}break}return r.text=e,r.fontSize=s,r},Bm=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},ree={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},iee=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},see=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),en(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},oee=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Hs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(ree)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Rb=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new eR,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&iee(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=tee(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=it.createDefaultAppearanceStream(a),en(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=nee(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var h="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var _=p[o];typeof _=="function"&&(_=_.call(i,a)),h+="/"+o+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=p)=="function"&&(_=_.call(i,a)),h+="/"+o+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&see(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},JL=Pn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),en(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+dc(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},yv=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+dc(r(t))+")"},yo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};yo.prototype.toString=function(){return this.objId+" 0 R"},yo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},yo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:JL(i,this.objId,this.scope)}):i instanceof yo?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var ZL=function(){yo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ii(ZL,yo);var eR=function(){yo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+dc(n(t))+")"}},set:function(n){t=n}})};Ii(eR,yo);var Hs=function t(){yo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Bn(e,3)},set:function(w){w?this.F=Un(e,3):this.F=zn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof N0)return;s="FieldObject"+t.FieldNum++}var w=function(S){return S};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+dc(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Rb:u},set:function(w){u=w}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof N0||this instanceof Hu))return yv(h,this.objId,this.scope)},set:function(w){w=w.toString(),h=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof pr?m:yv(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof pr?w:w.substr(0,1)==="("?Uc(w.substr(1,w.length-2)):Uc(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?Uc(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof pr?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof pr?p:yv(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof pr?w:w.substr(0,1)==="("?Uc(w.substr(1,w.length-2)):Uc(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pr?Uc(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof pr?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(w){w=!!w,b=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(w){_=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,1)},set:function(w){w?this.Ff=Un(this.Ff,1):this.Ff=zn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,2)},set:function(w){w?this.Ff=Un(this.Ff,2):this.Ff=zn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,3)},set:function(w){w?this.Ff=Un(this.Ff,3):this.Ff=zn(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');N=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(N){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:N=2;break;case"center":case 1:N=1;break;case"left":case 0:default:N=0}}})};Ii(Hs,yo);var Th=function(){Hs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JL(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,18)},set:function(n){n?this.Ff=Un(this.Ff,18):this.Ff=zn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Un(this.Ff,19):this.Ff=zn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,20)},set:function(n){n?(this.Ff=Un(this.Ff,20),e.sort()):this.Ff=zn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,22)},set:function(n){n?this.Ff=Un(this.Ff,22):this.Ff=zn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,23)},set:function(n){n?this.Ff=Un(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,27)},set:function(n){n?this.Ff=Un(this.Ff,27):this.Ff=zn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ii(Th,Hs);var Nh=function(){Th.call(this),this.fontName="helvetica",this.combo=!1};Ii(Nh,Th);var Ih=function(){Nh.call(this),this.combo=!0};Ii(Ih,Nh);var vg=function(){Ih.call(this),this.edit=!0};Ii(vg,Ih);var pr=function(){Hs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,15)},set:function(n){n?this.Ff=Un(this.Ff,15):this.Ff=zn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,16)},set:function(n){n?this.Ff=Un(this.Ff,16):this.Ff=zn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,17)},set:function(n){n?this.Ff=Un(this.Ff,17):this.Ff=zn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,26)},set:function(n){n?this.Ff=Un(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+dc(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){en(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ii(pr,Hs);var wg=function(){pr.call(this),this.pushButton=!0};Ii(wg,pr);var kh=function(){pr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ii(kh,pr);var N0=function(){var t,e;Hs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+dc(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){en(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=it.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ii(N0,Hs),kh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},kh.prototype.createOption=function(t){var e=new N0;return e.Parent=this,e.optionName=t,this.Kids.push(e),aee.call(this.scope,e),e};var xg=function(){pr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=it.CheckBox.createAppearanceStream()};Ii(xg,pr);var Hu=function(){Hs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,13)},set:function(e){e?this.Ff=Un(this.Ff,13):this.Ff=zn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,21)},set:function(e){e?this.Ff=Un(this.Ff,21):this.Ff=zn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,23)},set:function(e){e?this.Ff=Un(this.Ff,23):this.Ff=zn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,24)},set:function(e){e?this.Ff=Un(this.Ff,24):this.Ff=zn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,25)},set:function(e){e?this.Ff=Un(this.Ff,25):this.Ff=zn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,26)},set:function(e){e?this.Ff=Un(this.Ff,26):this.Ff=zn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ii(Hu,Hs);var bg=function(){Hu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Bn(this.Ff,14)},set:function(t){t?this.Ff=Un(this.Ff,14):this.Ff=zn(this.Ff,14)}}),this.password=!0};Ii(bg,Hu);var it={CheckBox:{createAppearanceStream:function(){return{N:{On:it.CheckBox.YesNormal},D:{On:it.CheckBox.YesPushDown,Off:it.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=A5(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Nt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=it.internal.getHeight(t),o=it.internal.getWidth(t),a=A5(t,t.caption);return i.push("1 g"),i.push("0 0 "+Nt(o)+" "+Nt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Nt(o-1)+" "+Nt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Nt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Circle.YesNormal,e.D[t]=it.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=it.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sl(it.internal.getWidth(t)/2)+" "+sl(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5)),o=Number((r*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(it.internal.getWidth(t)/2)+" "+sl(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sl(it.internal.getWidth(t)/2)+" "+sl(it.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=it.internal.getWidth(t)<=it.internal.getHeight(t)?it.internal.getWidth(t)/4:it.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*it.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sl(it.internal.getWidth(t)/2)+" "+sl(it.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:it.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=it.RadioButton.Cross.YesNormal,e.D[t]=it.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=lo(t);e.scope=t.scope;var n=[],r=it.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Nt(it.internal.getWidth(t)-2)+" "+Nt(it.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Nt(r.x1.x)+" "+Nt(r.x1.y)+" m"),n.push(Nt(r.x2.x)+" "+Nt(r.x2.y)+" l"),n.push(Nt(r.x4.x)+" "+Nt(r.x4.y)+" m"),n.push(Nt(r.x3.x)+" "+Nt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=it.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Nt(it.internal.getWidth(t)-2)+" "+Nt(it.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Nt(n.x1.x)+" "+Nt(n.x1.y)+" m"),r.push(Nt(n.x2.x)+" "+Nt(n.x2.y)+" l"),r.push(Nt(n.x4.x)+" "+Nt(n.x4.y)+" m"),r.push(Nt(n.x3.x)+" "+Nt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=lo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nt(it.internal.getWidth(t))+" "+Nt(it.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};it.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=it.internal.getWidth(t),n=it.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},it.internal.getWidth=function(t){var e=0;return en(t)==="object"&&(e=G3(t.Rect[2])),e},it.internal.getHeight=function(t){var e=0;return en(t)==="object"&&(e=G3(t.Rect[3])),e};var aee=Pn.addField=function(t){if(oee(this,t),!(t instanceof Hs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Pn.AcroFormChoiceField=Th,Pn.AcroFormListBox=Nh,Pn.AcroFormComboBox=Ih,Pn.AcroFormEditBox=vg,Pn.AcroFormButton=pr,Pn.AcroFormPushButton=wg,Pn.AcroFormRadioButton=kh,Pn.AcroFormCheckBox=xg,Pn.AcroFormTextField=Hu,Pn.AcroFormPasswordField=bg,Pn.AcroFormAppearance=it,Pn.AcroForm={ChoiceField:Th,ListBox:Nh,ComboBox:Ih,EditBox:vg,Button:pr,PushButton:wg,RadioButton:kh,CheckBox:xg,TextField:Hu,PasswordField:bg,Appearance:it},ft.AcroForm={ChoiceField:Th,ListBox:Nh,ComboBox:Ih,EditBox:vg,Button:pr,PushButton:wg,RadioButton:kh,CheckBox:xg,TextField:Hu,PasswordField:bg,Appearance:it};function tR(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(I,C){var j,Y,le,he,ue,X=e;if((C=C||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(q(I))for(ue in n)for(le=n[ue],j=0;j<le.length;j+=1){for(he=!0,Y=0;Y<le[j].length;Y+=1)if(le[j][Y]!==void 0&&le[j][Y]!==I[Y]){he=!1;break}if(he===!0){X=ue;break}}else for(ue in n)for(le=n[ue],j=0;j<le.length;j+=1){for(he=!0,Y=0;Y<le[j].length;Y+=1)if(le[j][Y]!==void 0&&le[j][Y]!==I.charCodeAt(Y)){he=!1;break}if(he===!0){X=ue;break}}return X===e&&C!==e&&(X=C),X},i=function I(C){for(var j=this.internal.write,Y=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var he=[];if(he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Image"}),he.push({key:"Width",value:C.width}),he.push({key:"Height",value:C.height}),C.colorSpace===N.INDEXED?he.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(he.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===N.DEVICE_CMYK&&he.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),he.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&he.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var ue="",X=0,re=C.transparency.length;X<re;X++)ue+=C.transparency[X]+" "+C.transparency[X]+" ";he.push({key:"Mask",value:"["+ue+"]"})}C.sMask!==void 0&&he.push({key:"SMask",value:C.objectId+1+" 0 R"});var z=C.filter!==void 0?["/"+C.filter]:void 0;if(Y({data:C.data,additionalKeyValues:he,alreadyAppliedFilters:z,objectId:C.objectId}),j("endobj"),"sMask"in C&&C.sMask!==void 0){var Ae="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,M={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:Ae,data:C.sMask};"filter"in C&&(M.filter=C.filter),I.call(this,M)}if(C.colorSpace===N.INDEXED){var R=this.internal.newObject();Y({data:T(new Uint8Array(C.palette)),objectId:R}),j("endobj")}},s=function(){var I=this.internal.collections.addImage_images;for(var C in I)i.call(this,I[C])},o=function(){var I,C=this.internal.collections.addImage_images,j=this.internal.write;for(var Y in C)j("/I"+(I=C[Y]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(I){return typeof t["process"+I.toUpperCase()]=="function"},h=function(I){return en(I)==="object"&&I.nodeType===1},m=function(I,C){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var j=""+I.getAttribute("src");if(j.indexOf("data:image/")===0)return kf(unescape(j).split("base64,").pop());var Y=t.loadFile(j,!0);if(Y!==void 0)return Y}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var le;switch(C){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;case"JPEG":case"JPG":default:le="image/jpeg"}return kf(I.toDataURL(le,1).split("base64,").pop())}},p=function(I){var C=this.internal.collections.addImage_images;if(C){for(var j in C)if(I===C[j].alias)return C[j]}},_=function(I,C,j){return I||C||(I=-96,C=-96),I<0&&(I=-1*j.width*72/I/this.internal.scaleFactor),C<0&&(C=-1*j.height*72/C/this.internal.scaleFactor),I===0&&(I=C*j.width/j.height),C===0&&(C=I*j.height/j.width),[I,C]},b=function(I,C,j,Y,le,he){var ue=_.call(this,j,Y,le),X=this.internal.getCoordinateString,re=this.internal.getVerticalCoordinateString,z=l.call(this);if(j=ue[0],Y=ue[1],z[le.index]=le,he){he*=Math.PI/180;var Ae=Math.cos(he),M=Math.sin(he),R=function(ne){return ne.toFixed(4)},Z=[R(Ae),R(M),R(-1*M),R(Ae),0,0,"cm"]}this.internal.write("q"),he?(this.internal.write([1,"0","0",1,X(I),re(C+Y),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([X(j),"0","0",X(Y),"0","0","cm"].join(" "))):this.internal.write([X(j),"0","0",X(Y),X(I),re(C+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},N=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(I){var C,j,Y=0;if(typeof I=="string")for(j=I.length,C=0;C<j;C++)Y=(Y<<5)-Y+I.charCodeAt(C),Y|=0;else if(q(I))for(j=I.byteLength/2,C=0;C<j;C++)Y=(Y<<5)-Y+I[C],Y|=0;return Y},A=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var C=!0;return I.length===0&&(C=!1),I.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(C=!1),C},O=t.__addimage__.extractImageFromDataUrl=function(I){var C=(I=I||"").split("base64,"),j=null;if(C.length===2){var Y=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(Y)&&(j={mimeType:Y[1],charset:Y[2],data:C[1]})}return j},K=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return K()&&I instanceof ArrayBuffer};var q=t.__addimage__.isArrayBufferView=function(I){return K()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},D=t.__addimage__.binaryStringToUint8Array=function(I){for(var C=I.length,j=new Uint8Array(C),Y=0;Y<C;Y++)j[Y]=I.charCodeAt(Y);return j},T=t.__addimage__.arrayBufferToBinaryString=function(I){for(var C="",j=q(I)?I:new Uint8Array(I),Y=0;Y<j.length;Y+=8192)C+=String.fromCharCode.apply(null,j.subarray(Y,Y+8192));return C};t.addImage=function(){var I,C,j,Y,le,he,ue,X,re;if(typeof arguments[1]=="number"?(C=e,j=arguments[1],Y=arguments[2],le=arguments[3],he=arguments[4],ue=arguments[5],X=arguments[6],re=arguments[7]):(C=arguments[1],j=arguments[2],Y=arguments[3],le=arguments[4],he=arguments[5],ue=arguments[6],X=arguments[7],re=arguments[8]),en(I=arguments[0])==="object"&&!h(I)&&"imageData"in I){var z=I;I=z.imageData,C=z.format||C||e,j=z.x||j||0,Y=z.y||Y||0,le=z.w||z.width||le,he=z.h||z.height||he,ue=z.alias||ue,X=z.compression||X,re=z.rotation||z.angle||re}var Ae=this.internal.getFilters();if(X===void 0&&Ae.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(j)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var M=L.call(this,I,C,ue,X);return b.call(this,j,Y,le,he,M,re),this};var L=function(I,C,j,Y){var le,he,ue;if(typeof I=="string"&&r(I)===e){I=unescape(I);var X=F(I,!1);(X!==""||(X=t.loadFile(I,!0))!==void 0)&&(I=X)}if(h(I)&&(I=m(I,C)),C=r(I,C),!c(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((ue=j)==null||ue.length===0)&&(j=function(re){return typeof re=="string"||q(re)?S(re):q(re.data)?S(re.data):null}(I)),(le=p.call(this,j))||(K()&&(I instanceof Uint8Array||C==="RGBA"||(he=I,I=D(I))),le=this["process"+C.toUpperCase()](I,u.call(this),j,function(re){return re&&typeof re=="string"&&(re=re.toUpperCase()),re in t.image_compression?re:w.NONE}(Y),he)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},F=t.__addimage__.convertBase64ToBinaryString=function(I,C){var j;C=typeof C!="boolean"||C;var Y,le="";if(typeof I=="string"){Y=(j=O(I))!==null?j.data:I;try{le=kf(Y)}catch(he){if(C)throw A(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+he.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return le};t.getImageProperties=function(I){var C,j,Y="";if(h(I)&&(I=m(I)),typeof I=="string"&&r(I)===e&&((Y=F(I,!1))===""&&(Y=t.loadFile(I)||""),I=Y),j=r(I),!c(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!K()||I instanceof Uint8Array||(I=D(I)),!(C=this["process"+j.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=j,C}})(ft.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};ft.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var p=this.internal.pdfEscape,_=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(b.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(w(r.contents))+")",s+=" /Popup "+N.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(w(S))+") >>",b.content=s;var A=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+A,r.open&&(s+=" /Open true"),s+=" >>",N.content=s,this.internal.write(b.objId,"0 R",N.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var O=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+O+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var K=this.annotations._nameMap[r.options.name];r.options.pageNumber=K.page,r.options.top=K.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var q=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(n,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(ft.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=t.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&i.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&s(b)&&e[b.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(b){var N=0,w=n,S="",A=0;for(N=0;N<b.length;N+=1)w[b.charCodeAt(N)]!==void 0?(A++,typeof(w=w[b.charCodeAt(N)])=="number"&&(S+=String.fromCharCode(w),w=n,A=0),N===b.length-1&&(w=n,S+=b.charAt(N-(A-1)),N-=A-1,A=0)):(w=n,S+=b.charAt(N-A),N-=A,A=0);return S};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(b,N,w){return o(b)?s(b)===!1?-1:!u(b)||!o(N)&&!o(w)||!o(w)&&a(N)||a(b)&&!o(N)||a(b)&&l(N)||a(b)&&a(N)?0:c(b)&&o(N)&&!a(N)&&o(w)&&u(w)?3:a(b)||!o(w)?1:2:-1},p=function(b){var N=0,w=0,S=0,A="",O="",K="",q=(b=b||"").split("\\s+"),D=[];for(N=0;N<q.length;N+=1){for(D.push(""),w=0;w<q[N].length;w+=1)A=q[N][w],O=q[N][w-1],K=q[N][w+1],o(A)?(S=m(A,O,K),D[N]+=S!==-1?String.fromCharCode(e[A.charCodeAt(0)][S]):A):D[N]+=A;D[N]=h(D[N])}return D.join(" ")},_=t.__arabicParser__.processArabic=t.processArabic=function(){var b,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(N)){var S=0;for(w=[],S=0;S<N.length;S+=1)Array.isArray(N[S])?w.push([p(N[S][0]),N[S][1],N[S][2]]):w.push([p(N[S])]);b=w}else b=p(N);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",_])}(ft.API),ft.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(ft.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(b){h=b}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(b){_=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,_=0,b=0,N=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(A,O){return A.concat(N.splitTextToSize(O,w))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)p<(b=this.getStringUnitWidth(l[S],{font:h})*c)&&(p=b);return p!==0&&(_=l.length),{w:p/=m,h:Math.max((_*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,h,m){if(r.call(this),!c)throw new Error("No data for PDF table.");var p,_,b,N,w=[],S=[],A=[],O={},K={},q=[],D=[],T=(m=m||{}).autoSize||!1,L=m.printHeaders!==!1,F=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,I=m.margins||Object.assign({width:this.getPageWidth()},e),C=typeof m.padding=="number"?m.padding:3,j=m.headerBackgroundColor||"#c8c8c8",Y=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=Y,this.setFontSize(F),h==null)S=w=Object.keys(c[0]),A=w.map(function(){return"left"});else if(Array.isArray(h)&&en(h[0])==="object")for(w=h.map(function(z){return z.name}),S=h.map(function(z){return z.prompt||z.name||""}),A=h.map(function(z){return z.align||"left"}),p=0;p<h.length;p+=1)K[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=w=h,A=w.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<w.length;p+=1){for(O[N=w[p]]=c.map(function(z){return z[N]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=O[N],this.setFont(void 0,"normal"),b=0;b<_.length;b+=1)q.push(this.getTextDimensions(_[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);K[N]=Math.max.apply(null,q)+C+C,q=[]}if(L){var le={};for(p=0;p<w.length;p+=1)le[w[p]]={},le[w[p]].text=S[p],le[w[p]].align=A[p];var he=a.call(this,le,K);D=w.map(function(z){return new s(l,u,K[z],he,le[z].text,void 0,le[z].align)}),this.setTableHeaderRow(D),this.printHeaderRow(1,!1)}var ue=h.reduce(function(z,Ae){return z[Ae.name]=Ae.align,z},{});for(p=0;p<c.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:c[p]},this);var X=a.call(this,c[p],K);for(b=0;b<w.length;b+=1){var re=c[p][w[b]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:b,data:re},this),o.call(this,new s(l,u,K[w[b]],X,re,p+2,ue[w[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var _=l[p];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,u[p]-c-c)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+c+c},this).reduce(function(p,_){return Math.max(p,_)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,m.push(c)),c.lineNumber=l;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(_)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(ft.API);var nR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],T5=tR(rR),iR=[100,200,300,400,500,600,700,800,900],lee=tR(iR);function N5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return nR[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof T5[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function K3(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var uee={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Y3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q3(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function cee(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},uee,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=N5(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+Q3(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var c=T5[l],h=c<=T5.normal?-1:1,m=K3(u,rR,c,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var c=nR[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=lee[l],h=K3(u,iR,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+Q3(s)+"'.");return o}function X3(t){return t.trimLeft()}function hee(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function dee(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Um,J3,Z3,vv=["times"];(function(t){var e,n,r,i,s,o,a,l,u,c=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new l,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=M;Object.defineProperty(this,"pdf",{get:function(){return R}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Se){Z=!!Se}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(Se){ne=!!Se}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Se){isNaN(Se)||(se=Se)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(Se){isNaN(Se)||(ge=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var te;typeof Se=="number"?te=[Se,Se,Se,Se]:((te=new Array(4))[0]=Se[0],te[1]=Se.length>=2?Se[1]:te[0],te[2]=Se.length>=3?Se[2]:te[0],te[3]=Se.length>=4?Se[3]:te[1]),u.margin=te}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Se){xe=Se}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Se){be=Se}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(Se){Oe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof c&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(Se){De=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var te;te=m(Se),this.ctx.fillStyle=te.style,this.ctx.isFillTransparent=te.a===0,this.ctx.fillOpacity=te.a,this.pdf.setFillColor(te.r,te.g,te.b,{a:te.a}),this.pdf.setTextColor(te.r,te.g,te.b,{a:te.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var te=m(Se);this.ctx.strokeStyle=te.style,this.ctx.isStrokeTransparent=te.a===0,this.ctx.strokeOpacity=te.a,te.a===0?this.pdf.setDrawColor(255,255,255):(te.a,this.pdf.setDrawColor(te.r,te.g,te.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var $e=null;function qe(Se,te){if($e===null){var yt=function(rt){var Me=[];return Object.keys(rt).forEach(function(Be){rt[Be].forEach(function(Ke){var He=null;switch(Ke){case"bold":He={family:Be,weight:"bold"};break;case"italic":He={family:Be,style:"italic"};break;case"bolditalic":He={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":He={family:Be}}He!==null&&(He.ref={name:Be,style:Ke},Me.push(He))})}),Me}(Se.getFontList());$e=function(rt){for(var Me={},Be=0;Be<rt.length;++Be){var Ke=N5(rt[Be]),He=Ke.family,st=Ke.stretch,ht=Ke.style,xt=Ke.weight;Me[He]=Me[He]||{},Me[He][st]=Me[He][st]||{},Me[He][st][ht]=Me[He][st][ht]||{},Me[He][st][ht][xt]=Ke}return Me}(yt.concat(te))}return $e}var ot=null;Object.defineProperty(this,"fontFaces",{get:function(){return ot},set:function(Se){$e=null,ot=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var te;if(this.ctx.font=Se,(te=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var yt=te[1],rt=(te[2],te[3]),Me=te[4],Be=(te[5],te[6]),Ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(Ke==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:Ke==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var He=function(Ue){var Je,ze,Wt=[],bt=Ue.trim();if(bt==="")return vv;if(bt in Y3)return[Y3[bt]];for(;bt!=="";){switch(ze=null,Je=(bt=X3(bt)).charAt(0)){case'"':case"'":ze=hee(bt.substring(1),Je);break;default:ze=dee(bt)}if(ze===null||(Wt.push(ze[0]),(bt=X3(ze[1]))!==""&&bt.charAt(0)!==","))return vv;bt=bt.replace(/^,/,"")}return Wt}(Be);if(this.fontFaces){var st=cee(qe(this.pdf,this.fontFaces),He.map(function(Ue){return{family:Ue,stretch:"normal",weight:rt,style:yt}}));this.pdf.setFont(st.ref.name,st.ref.style)}else{var ht="";(rt==="bold"||parseInt(rt,10)>=700||yt==="bold")&&(ht="bold"),yt==="italic"&&(ht+="italic"),ht.length===0&&(ht="normal");for(var xt="",me={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Te=0;Te<He.length;Te++){if(this.pdf.internal.getFont(He[Te],ht,{noFallback:!0,disableWarning:!0})!==void 0){xt=He[Te];break}if(ht==="bolditalic"&&this.pdf.internal.getFont(He[Te],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xt=He[Te],ht="bold";else if(this.pdf.internal.getFont(He[Te],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xt=He[Te],ht="normal";break}}if(xt===""){for(var Ye=0;Ye<He.length;Ye++)if(me[He[Ye]]){xt=me[He[Ye]];break}}xt=xt===""?"Times":xt,this.pdf.setFont(xt,ht)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,Ae.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,Ae.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){O.call(this,"fill",!1)},h.prototype.stroke=function(){O.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,R){if(isNaN(M)||isNaN(R))throw an.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(M,R));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(M,R)},h.prototype.closePath=function(){var M=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&en(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){M=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,R){if(isNaN(M)||isNaN(R))throw an.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(M,R));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),O.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,R,Z,ne){if(isNaN(Z)||isNaN(ne)||isNaN(M)||isNaN(R))throw an.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(Z,ne)),ge=this.ctx.transform.applyToPoint(new o(M,R));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(M,R,Z,ne,se,ge){if(isNaN(se)||isNaN(ge)||isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne))throw an.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new o(se,ge)),be=this.ctx.transform.applyToPoint(new o(M,R)),Oe=this.ctx.transform.applyToPoint(new o(Z,ne));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Oe.x,y2:Oe.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new o(xe.x,xe.y)},h.prototype.arc=function(M,R,Z,ne,se,ge){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne)||isNaN(se))throw an.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new o(M,R));M=xe.x,R=xe.y;var be=this.ctx.transform.applyToPoint(new o(0,Z)),Oe=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(be.x-Oe.x,2)+Math.pow(be.y-Oe.y,2))}Math.abs(se-ne)>=2*Math.PI&&(ne=0,se=2*Math.PI),this.path.push({type:"arc",x:M,y:R,radius:Z,startAngle:ne,endAngle:se,counterclockwise:ge})},h.prototype.arcTo=function(M,R,Z,ne,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,R,Z,ne){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne))throw an.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,R),this.lineTo(M+Z,R),this.lineTo(M+Z,R+ne),this.lineTo(M,R+ne),this.lineTo(M,R),this.lineTo(M+Z,R),this.lineTo(M,R)},h.prototype.fillRect=function(M,R,Z,ne){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne))throw an.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,R,Z,ne),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(M,R,Z,ne){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne))throw an.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(M,R,Z,ne),this.stroke())},h.prototype.clearRect=function(M,R,Z,ne){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne))throw an.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,R,Z,ne))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(R),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var R,Z,ne,se;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))R=0,Z=0,ne=0,se=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ge!==null)R=parseInt(ge[1]),Z=parseInt(ge[2]),ne=parseInt(ge[3]),se=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)R=parseInt(ge[1]),Z=parseInt(ge[2]),ne=parseInt(ge[3]),se=parseFloat(ge[4]);else{if(se=1,typeof M=="string"&&M.charAt(0)!=="#"){var xe=new YL(M);M=xe.ok?xe.toHex():"#000000"}M.length===4?(R=M.substring(1,2),R+=R,Z=M.substring(2,3),Z+=Z,ne=M.substring(3,4),ne+=ne):(R=M.substring(1,3),Z=M.substring(3,5),ne=M.substring(5,7)),R=parseInt(R,16),Z=parseInt(Z,16),ne=parseInt(ne,16)}}return{r:R,g:Z,b:ne,a:se,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,R,Z,ne){if(isNaN(R)||isNaN(Z)||typeof M!="string")throw an.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!p.call(this)){var se=X(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;C.call(this,{text:M,x:R,y:Z,scale:ge,angle:se,align:this.textAlign,maxWidth:ne})}},h.prototype.strokeText=function(M,R,Z,ne){if(isNaN(R)||isNaN(Z)||typeof M!="string")throw an.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){ne=isNaN(ne)?void 0:ne;var se=X(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;C.call(this,{text:M,x:R,y:Z,scale:ge,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:ne})}},h.prototype.measureText=function(M){if(typeof M!="string")throw an.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,Z=this.pdf.internal.scaleFactor,ne=R.internal.getFontSize(),se=R.getStringUnitWidth(M)*ne/R.internal.scaleFactor,ge=function(xe){var be=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this};return new ge({width:se*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(M,R){if(isNaN(M)||isNaN(R))throw an.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(M,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(M){if(isNaN(M))throw an.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new l(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},h.prototype.translate=function(M,R){if(isNaN(M)||isNaN(R))throw an.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,M,R);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(M,R,Z,ne,se,ge){if(isNaN(M)||isNaN(R)||isNaN(Z)||isNaN(ne)||isNaN(se)||isNaN(ge))throw an.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new l(M,R,Z,ne,se,ge);this.ctx.transform=this.ctx.transform.multiply(xe)},h.prototype.setTransform=function(M,R,Z,ne,se,ge){M=isNaN(M)?1:M,R=isNaN(R)?0:R,Z=isNaN(Z)?0:Z,ne=isNaN(ne)?1:ne,se=isNaN(se)?0:se,ge=isNaN(ge)?0:ge,this.ctx.transform=new l(M,R,Z,ne,se,ge)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,R,Z,ne,se,ge,xe,be,Oe){var De=this.pdf.getImageProperties(M),$e=1,qe=1,ot=1,Se=1;ne!==void 0&&be!==void 0&&(ot=be/ne,Se=Oe/se,$e=De.width/ne*be/ne,qe=De.height/se*Oe/se),ge===void 0&&(ge=R,xe=Z,R=0,Z=0),ne!==void 0&&be===void 0&&(be=ne,Oe=se),ne===void 0&&be===void 0&&(be=De.width,Oe=De.height);for(var te,yt=this.ctx.transform.decompose(),rt=X(yt.rotate.shx),Me=new l,Be=(Me=(Me=(Me=Me.multiply(yt.translate)).multiply(yt.skew)).multiply(yt.scale)).applyToRectangle(new a(ge-R*ot,xe-Z*Se,ne*$e,se*qe)),Ke=N.call(this,Be),He=[],st=0;st<Ke.length;st+=1)He.indexOf(Ke[st])===-1&&He.push(Ke[st]);if(A(He),this.autoPaging)for(var ht=He[0],xt=He[He.length-1],me=ht;me<xt+1;me++){this.pdf.setPage(me);var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=me===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ze=me===1?0:Ue+(me-2)*Je;if(this.ctx.clip_path.length!==0){var Wt=this.path;te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(te,this.posX+this.margin[3],-ze+Ye+this.ctx.prevPageLastElemOffset),K.call(this,"fill",!0),this.path=Wt}var bt=JSON.parse(JSON.stringify(Be));bt=S([bt],this.posX+this.margin[3],-ze+Ye+this.ctx.prevPageLastElemOffset)[0];var Hn=(me>ht||me<xt)&&b.call(this);Hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,Je,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",bt.x,bt.y,bt.w,bt.h,null,null,rt),Hn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,rt)};var N=function(M,R,Z){var ne=[];R=R||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ne.push(Math.floor((M.y+se)/Z)+1);break;case"arc":ne.push(Math.floor((M.y+se-M.radius)/Z)+1),ne.push(Math.floor((M.y+se+M.radius)/Z)+1);break;case"qct":var ge=re(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ne.push(Math.floor((ge.y+se)/Z)+1),ne.push(Math.floor((ge.y+ge.h+se)/Z)+1);break;case"bct":var xe=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ne.push(Math.floor((xe.y+se)/Z)+1),ne.push(Math.floor((xe.y+xe.h+se)/Z)+1);break;case"rect":ne.push(Math.floor((M.y+se)/Z)+1),ne.push(Math.floor((M.y+M.h+se)/Z)+1)}for(var be=0;be<ne.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<ne[be];)w.call(this);return ne},w=function(){var M=this.fillStyle,R=this.strokeStyle,Z=this.font,ne=this.lineCap,se=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=R,this.font=Z,this.lineCap=ne,this.lineWidth=se,this.lineJoin=ge},S=function(M,R,Z){for(var ne=0;ne<M.length;ne++)switch(M[ne].type){case"bct":M[ne].x2+=R,M[ne].y2+=Z;case"qct":M[ne].x1+=R,M[ne].y1+=Z;case"mt":case"lt":case"arc":default:M[ne].x+=R,M[ne].y+=Z}return M},A=function(M){return M.sort(function(R,Z){return R-Z})},O=function(M,R){for(var Z,ne,se=this.fillStyle,ge=this.strokeStyle,xe=this.lineCap,be=this.lineWidth,Oe=Math.abs(be*this.ctx.transform.scaleX),De=this.lineJoin,$e=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),ot=[],Se=0;Se<qe.length;Se++)if(qe[Se].x!==void 0)for(var te=N.call(this,qe[Se]),yt=0;yt<te.length;yt+=1)ot.indexOf(te[yt])===-1&&ot.push(te[yt]);for(var rt=0;rt<ot.length;rt++)for(;this.pdf.internal.getNumberOfPages()<ot[rt];)w.call(this);if(A(ot),this.autoPaging)for(var Me=ot[0],Be=ot[ot.length-1],Ke=Me;Ke<Be+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=se,this.strokeStyle=ge,this.lineCap=xe,this.lineWidth=Oe,this.lineJoin=De;var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],st=Ke===1?this.posY+this.margin[0]:this.margin[0],ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],me=Ke===1?0:ht+(Ke-2)*xt;if(this.ctx.clip_path.length!==0){var Te=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-me+st+this.ctx.prevPageLastElemOffset),K.call(this,M,!0),this.path=Te}if(ne=JSON.parse(JSON.stringify($e)),this.path=S(ne,this.posX+this.margin[3],-me+st+this.ctx.prevPageLastElemOffset),R===!1||Ke===0){var Ye=(Ke>Me||Ke<Be)&&b.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,xt,null).clip().discardPath()),K.call(this,M,R),Ye&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Oe,K.call(this,M,R),this.lineWidth=be;this.path=$e},K=function(M,R){if((M!=="stroke"||R||!_.call(this))&&(M==="stroke"||R||!p.call(this))){for(var Z,ne,se=[],ge=this.path,xe=0;xe<ge.length;xe++){var be=ge[xe];switch(be.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:be,deltas:[],abs:[]});break;case"lt":var Oe=se.length;if(ge[xe-1]&&!isNaN(ge[xe-1].x)&&(Z=[be.x-ge[xe-1].x,be.y-ge[xe-1].y],Oe>0)){for(;Oe>=0;Oe--)if(se[Oe-1].close!==!0&&se[Oe-1].begin!==!0){se[Oe-1].deltas.push(Z),se[Oe-1].abs.push(be);break}}break;case"bct":Z=[be.x1-ge[xe-1].x,be.y1-ge[xe-1].y,be.x2-ge[xe-1].x,be.y2-ge[xe-1].y,be.x-ge[xe-1].x,be.y-ge[xe-1].y],se[se.length-1].deltas.push(Z);break;case"qct":var De=ge[xe-1].x+2/3*(be.x1-ge[xe-1].x),$e=ge[xe-1].y+2/3*(be.y1-ge[xe-1].y),qe=be.x+2/3*(be.x1-be.x),ot=be.y+2/3*(be.y1-be.y),Se=be.x,te=be.y;Z=[De-ge[xe-1].x,$e-ge[xe-1].y,qe-ge[xe-1].x,ot-ge[xe-1].y,Se-ge[xe-1].x,te-ge[xe-1].y],se[se.length-1].deltas.push(Z);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(be)}}ne=R?null:M==="stroke"?"stroke":"fill";for(var yt=!1,rt=0;rt<se.length;rt++)if(se[rt].arc)for(var Me=se[rt].abs,Be=0;Be<Me.length;Be++){var Ke=Me[Be];Ke.type==="arc"?T.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,R,!yt):j.call(this,Ke.x,Ke.y),yt=!0}else if(se[rt].close===!0)this.pdf.internal.out("h"),yt=!1;else if(se[rt].begin!==!0){var He=se[rt].start.x,st=se[rt].start.y;Y.call(this,se[rt].deltas,He,st),yt=!0}ne&&L.call(this,ne),R&&F.call(this)}},q=function(M){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-Z;case"top":return M+R-Z;case"hanging":return M+R-2*Z;case"middle":return M+R/2-Z;case"ideographic":return M;case"alphabetic":default:return M}},D=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(R,Z){this.colorStops.push([R,Z])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(M,R,Z,ne,se,ge,xe,be,Oe){for(var De=he.call(this,Z,ne,se,ge),$e=0;$e<De.length;$e++){var qe=De[$e];$e===0&&(Oe?I.call(this,qe.x1+M,qe.y1+R):j.call(this,qe.x1+M,qe.y1+R)),le.call(this,M,R,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}be?F.call(this):L.call(this,xe)},L=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(M,R){this.pdf.internal.out(n(M)+" "+r(R)+" m")},C=function(M){var R;switch(M.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var Z=this.pdf.getTextDimensions(M.text),ne=q.call(this,M.y),se=D.call(this,ne)-Z.h,ge=this.ctx.transform.applyToPoint(new o(M.x,ne)),xe=this.ctx.transform.decompose(),be=new l;be=(be=(be=be.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Oe,De,$e,qe=this.ctx.transform.applyToRectangle(new a(M.x,ne,Z.w,Z.h)),ot=be.applyToRectangle(new a(M.x,se,Z.w,Z.h)),Se=N.call(this,ot),te=[],yt=0;yt<Se.length;yt+=1)te.indexOf(Se[yt])===-1&&te.push(Se[yt]);if(A(te),this.autoPaging)for(var rt=te[0],Me=te[te.length-1],Be=rt;Be<Me+1;Be++){this.pdf.setPage(Be);var Ke=Be===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[2],ht=st-this.margin[0],xt=this.pdf.internal.pageSize.width-this.margin[1],me=xt-this.margin[3],Te=Be===1?0:He+(Be-2)*ht;if(this.ctx.clip_path.length!==0){var Ye=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Oe,this.posX+this.margin[3],-1*Te+Ke),K.call(this,"fill",!0),this.path=Ye}var Ue=S([JSON.parse(JSON.stringify(ot))],this.posX+this.margin[3],-Te+Ke+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*M.scale),$e=this.lineWidth,this.lineWidth=$e*M.scale);var Je=this.autoPaging!=="text";if(Je||Ue.y+Ue.h<=st){if(Je||Ue.y>=Ke&&Ue.x<=xt){var ze=Je?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||xt-Ue.x)[0],Wt=S([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-Te+Ke+this.ctx.prevPageLastElemOffset)[0],bt=Je&&(Be>rt||Be<Me)&&b.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],me,ht,null).clip().discardPath()),this.pdf.text(ze,Wt.x,Wt.y,{angle:M.angle,align:R,renderingMode:M.renderingMode}),bt&&this.pdf.restoreGraphicsState()}}else Ue.y<st&&(this.ctx.prevPageLastElemOffset+=st-Ue.y);M.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=$e)}else M.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*M.scale),$e=this.lineWidth,this.lineWidth=$e*M.scale),this.pdf.text(M.text,ge.x+this.posX,ge.y+this.posY,{angle:M.angle,align:R,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=$e)},j=function(M,R,Z,ne){Z=Z||0,ne=ne||0,this.pdf.internal.out(n(M+Z)+" "+r(R+ne)+" l")},Y=function(M,R,Z){return this.pdf.lines(M,R,Z,null,null)},le=function(M,R,Z,ne,se,ge,xe,be){this.pdf.internal.out([e(i(Z+M)),e(s(ne+R)),e(i(se+M)),e(s(ge+R)),e(i(xe+M)),e(s(be+R)),"c"].join(" "))},he=function(M,R,Z,ne){for(var se=2*Math.PI,ge=Math.PI/2;R>Z;)R-=se;var xe=Math.abs(Z-R);xe<se&&ne&&(xe=se-xe);for(var be=[],Oe=ne?-1:1,De=R;xe>1e-5;){var $e=De+Oe*Math.min(xe,ge);be.push(ue.call(this,M,De,$e)),xe-=Math.abs($e-De),De=$e}return be},ue=function(M,R,Z){var ne=(Z-R)/2,se=M*Math.cos(ne),ge=M*Math.sin(ne),xe=se,be=-ge,Oe=xe*xe+be*be,De=Oe+xe*se+be*ge,$e=4/3*(Math.sqrt(2*Oe*De)-De)/(xe*ge-be*se),qe=xe-$e*be,ot=be+$e*xe,Se=qe,te=-ot,yt=ne+R,rt=Math.cos(yt),Me=Math.sin(yt);return{x1:M*Math.cos(R),y1:M*Math.sin(R),x2:qe*rt-ot*Me,y2:qe*Me+ot*rt,x3:Se*rt-te*Me,y3:Se*Me+te*rt,x4:M*Math.cos(Z),y4:M*Math.sin(Z)}},X=function(M){return 180*M/Math.PI},re=function(M,R,Z,ne,se,ge){var xe=M+.5*(Z-M),be=R+.5*(ne-R),Oe=se+.5*(Z-se),De=ge+.5*(ne-ge),$e=Math.min(M,se,xe,Oe),qe=Math.max(M,se,xe,Oe),ot=Math.min(R,ge,be,De),Se=Math.max(R,ge,be,De);return new a($e,ot,qe-$e,Se-ot)},z=function(M,R,Z,ne,se,ge,xe,be){var Oe,De,$e,qe,ot,Se,te,yt,rt,Me,Be,Ke,He,st,ht=Z-M,xt=ne-R,me=se-Z,Te=ge-ne,Ye=xe-se,Ue=be-ge;for(De=0;De<41;De++)rt=(te=($e=M+(Oe=De/40)*ht)+Oe*((ot=Z+Oe*me)-$e))+Oe*(ot+Oe*(se+Oe*Ye-ot)-te),Me=(yt=(qe=R+Oe*xt)+Oe*((Se=ne+Oe*Te)-qe))+Oe*(Se+Oe*(ge+Oe*Ue-Se)-yt),De==0?(Be=rt,Ke=Me,He=rt,st=Me):(Be=Math.min(Be,rt),Ke=Math.min(Ke,Me),He=Math.max(He,rt),st=Math.max(st,Me));return new a(Math.round(Be),Math.round(Ke),Math.round(He-Be),Math.round(st-Ke))},Ae=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,R,Z=(M=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:R}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(ft.API),function(t){var e=function(s){var o,a,l,u,c,h,m,p,_,b;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(c=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(b=c%85))/85)-(_=c%85))/85)-(p=c%85))/85)-(m=c%85))/85)%85,a.push(h+33,m+33,p+33,_+33,b+33)):a.push(122);return function(N,w){for(var S=w;S>0;S--)N.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,c,h=String,m="length",p=255,_="charCodeAt",b="slice",N="replace";for(s[b](-2),s=s[b](0,-2)[N](/\s/g,"")[N]("z","!!!!!"),l=[],u=0,c=(s+=o="uuuuu"[b](s[m]%5||5))[m];c>u;u+=5)a=52200625*(s[_](u)-33)+614125*(s[_](u+1)-33)+7225*(s[_](u+2)-33)+85*(s[_](u+3)-33)+(s[_](u+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(w,S){for(var A=S;A>0;A--)w.pop()}(l,o[m]),h.fromCharCode.apply(h,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=b5(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(ft.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var h=new XMLHttpRequest,m=0,p=function(_){var b=_.length,N=[],w=String.fromCharCode;for(m=0;m<b;m+=1)N.push(w(255&_.charCodeAt(m)));return N.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(p(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return p(h.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(ft.API),function(t){function e(){return(pt.html2canvas?Promise.resolve(pt.html2canvas):g5(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(pt.DOMPurify?Promise.resolve(pt.DOMPurify):g5(()=>import("./purify.es-a-CayzAK.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=en(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)c!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],_=p.src.find(function(b){return b.format==="truetype"});_&&l.addFont(_.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||ft.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=l.call(u,o,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,ft.getPageSize=function(o,a,l){if(en(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var p,_=0,b=0;if(m.hasOwnProperty(h))_=m[h][1]/c,b=m[h][0]/c;else try{_=l[1],b=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",b>_&&(p=b,b=_,_=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",_>b&&(p=b,b=_,_=p)}return{width:b,height:_,unit:a,k:c,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(N5):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(ft.API),ft.API.addJS=function(t){return Z3=t,this.internal.events.subscribe("postPutResources",function(){Um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Um+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Z3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Um!==void 0&&J3!==void 0&&this.internal.out("/Names <</JavaScript "+Um+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var h=n.internal.newObject();c.push(h);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<c.length;s++)n.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(ft.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),_=h.length,b={width:0,height:0,numcomponents:1},N=4;N<_;N+=2){if(N+=p,e.indexOf(h.charCodeAt(N+1))!==-1){m=256*h.charCodeAt(N+5)+h.charCodeAt(N+6),b={width:256*h.charCodeAt(N+7)+h.charCodeAt(N+8),height:m,numcomponents:h.charCodeAt(N+9)};break}p=256*h.charCodeAt(N+2)+h.charCodeAt(N+3)}return b}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(ft.API);var zc,zm,eT,tT,nT,fee=function(){var t,e,n;function r(s){var o,a,l,u,c,h,m,p,_,b,N,w,S,A;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),_=(function(){var O,K;for(K=[],O=0;O<4;++O)K.push(String.fromCharCode(this.data[this.pos++]));return K}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,o-=4),s=(h!=null?h.data:void 0)||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((b=l-this.transparency.indexed.length)>0)for(S=0;0<=b?S<b:S>b;0<=b?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(N=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,N.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,N.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(A=this.colorType)===4||A===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(h,m,p,_){var b,N,w,S,A,O,K,q,D,T,L,F,I,C,j,Y,le,he,ue,X,re,z=Math.ceil((u.width-h)/p),Ae=Math.ceil((u.height-m)/_),M=u.width==z&&u.height==Ae;for(C=o*z,F=M?a:new Uint8Array(C*Ae),O=s.length,I=0,N=0;I<Ae&&l<O;){switch(s[l++]){case 0:for(S=le=0;le<C;S=le+=1)F[N++]=s[l++];break;case 1:for(S=he=0;he<C;S=he+=1)b=s[l++],A=S<o?0:F[N-o],F[N++]=(b+A)%256;break;case 2:for(S=ue=0;ue<C;S=ue+=1)b=s[l++],w=(S-S%o)/o,j=I&&F[(I-1)*C+w*o+S%o],F[N++]=(j+b)%256;break;case 3:for(S=X=0;X<C;S=X+=1)b=s[l++],w=(S-S%o)/o,A=S<o?0:F[N-o],j=I&&F[(I-1)*C+w*o+S%o],F[N++]=(b+Math.floor((A+j)/2))%256;break;case 4:for(S=re=0;re<C;S=re+=1)b=s[l++],w=(S-S%o)/o,A=S<o?0:F[N-o],I===0?j=Y=0:(j=F[(I-1)*C+w*o+S%o],Y=w&&F[(I-1)*C+(w-1)*o+S%o]),K=A+j-Y,q=Math.abs(K-A),T=Math.abs(K-j),L=Math.abs(K-Y),D=q<=T&&q<=L?A:T<=L?j:Y,F[N++]=(b+D)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!M){var R=((m+I*_)*u.width+h)*o,Z=I*C;for(S=0;S<z;S+=1){for(var ne=0;ne<o;ne+=1)a[R++]=F[Z++];R+=(p-1)*o}}I++}}return s=HZ(s),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,c,h,m,p;for(a=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+a.length),l=0,s=0,o=h=0,m=a.length;h<m;o=h+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(p=c[s++])!=null?p:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,c,h,m,p,_,b,N,w;if(l=this.colors,b=null,a=this.hasAlphaChannel,this.palette.length&&(b=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),l=4,a=!0),_=(u=s.data||s).length,h=b||o,c=m=0,l===1)for(;c<_;)p=b?4*o[c/4]:m,N=h[p++],u[c++]=N,u[c++]=N,u[c++]=N,u[c++]=a?h[p++]:255,m=p;else for(;c<_;)p=b?4*o[c/4]:m,u[c++]=h[p++],u[c++]=h[p++],u[c++]=h[p++],u[c++]=a?h[p++]:255,m=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(pt)==="[object Window]"){try{e=pt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,c,h,m,p;if(this.animation){for(p=[],a=c=0,h=(m=this.animation.frames).length;c<h;a=++c)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,p.push(o.image=t(l));return p}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,c,h,m=this;return a=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(o=function(){var p,_;if(p=a++%u,_=l[p],m.renderFrame(s,p),u>1&&a/u<c)return m.animation._timeout=setTimeout(o,_.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function pee(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],h=0,m=null,p=0,_=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,_=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],!(1&b)&&(m=null),p=b>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var N=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,O=t[e++],K=O>>6&1,q=1<<(7&O)+1,D=a,T=l,L=!1;O>>7&&(L=!0,D=e,T=q,e+=3*q);var F=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}c.push({x:N,y:w,width:S,height:A,has_local_palette:L,palette_offset:D,palette_size:T,data_offset:F,data_length:e-F,transparent_index:m,interlaced:!!K,delay:h,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return _},this.frameInfo=function(C){if(C<0||C>=c.length)throw new Error("Frame index out of range.");return c[C]},this.decodeAndBlitFrameBGRA=function(C,j){var Y=this.frameInfo(C),le=Y.width*Y.height,he=new Uint8Array(le);rT(t,Y.data_offset,he,le);var ue=Y.palette_offset,X=Y.transparent_index;X===null&&(X=256);var re=Y.width,z=n-re,Ae=re,M=4*(Y.y*n+Y.x),R=4*((Y.y+Y.height)*n+Y.x),Z=M,ne=4*z;Y.interlaced===!0&&(ne+=4*n*7);for(var se=8,ge=0,xe=he.length;ge<xe;++ge){var be=he[ge];if(Ae===0&&(Ae=re,(Z+=ne)>=R&&(ne=4*z+4*n*(se-1),Z=M+(re+z)*(se<<1),se>>=1)),be===X)Z+=4;else{var Oe=t[ue+3*be],De=t[ue+3*be+1],$e=t[ue+3*be+2];j[Z++]=$e,j[Z++]=De,j[Z++]=Oe,j[Z++]=255}--Ae}},this.decodeAndBlitFrameRGBA=function(C,j){var Y=this.frameInfo(C),le=Y.width*Y.height,he=new Uint8Array(le);rT(t,Y.data_offset,he,le);var ue=Y.palette_offset,X=Y.transparent_index;X===null&&(X=256);var re=Y.width,z=n-re,Ae=re,M=4*(Y.y*n+Y.x),R=4*((Y.y+Y.height)*n+Y.x),Z=M,ne=4*z;Y.interlaced===!0&&(ne+=4*n*7);for(var se=8,ge=0,xe=he.length;ge<xe;++ge){var be=he[ge];if(Ae===0&&(Ae=re,(Z+=ne)>=R&&(ne=4*z+4*n*(se-1),Z=M+(re+z)*(se<<1),se>>=1)),be===X)Z+=4;else{var Oe=t[ue+3*be],De=t[ue+3*be+1],$e=t[ue+3*be+2];j[Z++]=Oe,j[Z++]=De,j[Z++]=$e,j[Z++]=255}--Ae}}}function rT(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,h=0,m=0,p=t[e++],_=new Int32Array(4096),b=null;;){for(;c<16&&p!==0;)h|=t[e++]<<c,c+=8,p===1?p=t[e++]:--p;if(c<l)break;var N=h&u;if(h>>=l,c-=l,N!==s){if(N===o)break;for(var w=N<a?N:b,S=0,A=w;A>s;)A=_[A]>>8,++S;var O=A;if(m+S+(w!==N?1:0)>r)return void an.log("Warning, gif stream longer than expected.");n[m++]=O;var K=m+=S;for(w!==N&&(n[m++]=O),A=w;S--;)A=_[A],n[--K]=255&A,A>>=8;b!==null&&a<4096&&(_[a++]=b<<8|O,a>=u+1&&l<12&&(++l,u=u<<1|1)),b=N}else a=o+1,u=(1<<(l=i+1))-1,b=null}return m!==r&&an.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function wv(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),_=new Array(64),b=[],N=0,w=7,S=new Array(64),A=new Array(64),O=new Array(64),K=new Array(256),q=new Array(2048),D=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function he(M,R){for(var Z=0,ne=0,se=new Array,ge=1;ge<=16;ge++){for(var xe=1;xe<=M[ge];xe++)se[R[ne]]=[],se[R[ne]][0]=Z,se[R[ne]][1]=ge,ne++,Z++;Z*=2}return se}function ue(M){for(var R=M[0],Z=M[1]-1;Z>=0;)R&1<<Z&&(N|=1<<w),Z--,--w<0&&(N==255?(X(255),X(0)):X(N),w=7,N=0)}function X(M){b.push(M)}function re(M){X(M>>8&255),X(255&M)}function z(M,R,Z,ne,se){for(var ge,xe=se[0],be=se[240],Oe=function(Me,Be){var Ke,He,st,ht,xt,me,Te,Ye,Ue,Je,ze=0;for(Ue=0;Ue<8;++Ue){Ke=Me[ze],He=Me[ze+1],st=Me[ze+2],ht=Me[ze+3],xt=Me[ze+4],me=Me[ze+5],Te=Me[ze+6];var Wt=Ke+(Ye=Me[ze+7]),bt=Ke-Ye,Hn=He+Te,Dt=He-Te,Pt=st+me,nr=st-me,Et=ht+xt,Gs=ht-xt,mn=Wt+Et,gr=Wt-Et,ki=Hn+Pt,un=Hn-Pt;Me[ze]=mn+ki,Me[ze+4]=mn-ki;var ut=.707106781*(un+gr);Me[ze+2]=gr+ut,Me[ze+6]=gr-ut;var Ut=.382683433*((mn=Gs+nr)-(un=Dt+bt)),Qi=.5411961*mn+Ut,Wn=1.306562965*un+Ut,kr=.707106781*(ki=nr+Dt),Ci=bt+kr,tt=bt-kr;Me[ze+5]=tt+Qi,Me[ze+3]=tt-Qi,Me[ze+1]=Ci+Wn,Me[ze+7]=Ci-Wn,ze+=8}for(ze=0,Ue=0;Ue<8;++Ue){Ke=Me[ze],He=Me[ze+8],st=Me[ze+16],ht=Me[ze+24],xt=Me[ze+32],me=Me[ze+40],Te=Me[ze+48];var ci=Ke+(Ye=Me[ze+56]),Cr=Ke-Ye,Gn=He+Te,Rn=He-Te,In=st+me,Kn=st-me,Aa=ht+xt,vs=ht-xt,Pr=ci+Aa,hi=ci-Aa,Jr=Gn+In,Zr=Gn-In;Me[ze]=Pr+Jr,Me[ze+32]=Pr-Jr;var Dn=.707106781*(Zr+hi);Me[ze+16]=hi+Dn,Me[ze+48]=hi-Dn;var Pi=.382683433*((Pr=vs+Kn)-(Zr=Rn+Cr)),Ks=.5411961*Pr+Pi,Ys=1.306562965*Zr+Pi,Qs=.707106781*(Jr=Kn+Rn),ko=Cr+Qs,Co=Cr-Qs;Me[ze+40]=Co+Ks,Me[ze+24]=Co-Ks,Me[ze+8]=ko+Ys,Me[ze+56]=ko-Ys,ze++}for(Ue=0;Ue<64;++Ue)Je=Me[Ue]*Be[Ue],p[Ue]=Je>0?Je+.5|0:Je-.5|0;return p}(M,R),De=0;De<64;++De)_[D[De]]=Oe[De];var $e=_[0]-Z;Z=_[0],$e==0?ue(ne[0]):(ue(ne[m[ge=32767+$e]]),ue(h[ge]));for(var qe=63;qe>0&&_[qe]==0;)qe--;if(qe==0)return ue(xe),Z;for(var ot,Se=1;Se<=qe;){for(var te=Se;_[Se]==0&&Se<=qe;)++Se;var yt=Se-te;if(yt>=16){ot=yt>>4;for(var rt=1;rt<=ot;++rt)ue(be);yt&=15}ge=32767+_[Se],ue(se[(yt<<4)+m[ge]]),ue(h[ge]),Se++}return qe!=63&&ue(xe),Z}function Ae(M){M=Math.min(Math.max(M,1),100),s!=M&&(function(R){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var se=o((Z[ne]*R+50)/100);se=Math.min(Math.max(se,1),255),a[D[ne]]=se}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var be=o((ge[xe]*R+50)/100);be=Math.min(Math.max(be,1),255),l[D[xe]]=be}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,$e=0;$e<8;$e++)for(var qe=0;qe<8;qe++)u[De]=1/(a[D[De]]*Oe[$e]*Oe[qe]*8),c[De]=1/(l[D[De]]*Oe[$e]*Oe[qe]*8),De++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,R){R&&Ae(R),b=new Array,N=0,w=7,re(65496),re(65504),re(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),re(1),re(1),X(0),X(0),function(){re(65499),re(132),X(0);for(var He=0;He<64;He++)X(a[He]);X(1);for(var st=0;st<64;st++)X(l[st])}(),function(He,st){re(65472),re(17),X(8),re(st),re(He),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(M.width,M.height),function(){re(65476),re(418),X(0);for(var He=0;He<16;He++)X(T[He+1]);for(var st=0;st<=11;st++)X(L[st]);X(16);for(var ht=0;ht<16;ht++)X(F[ht+1]);for(var xt=0;xt<=161;xt++)X(I[xt]);X(1);for(var me=0;me<16;me++)X(C[me+1]);for(var Te=0;Te<=11;Te++)X(j[Te]);X(17);for(var Ye=0;Ye<16;Ye++)X(Y[Ye+1]);for(var Ue=0;Ue<=161;Ue++)X(le[Ue])}(),re(65498),re(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var Z=0,ne=0,se=0;N=0,w=7,this.encode.displayName="_encode_";for(var ge,xe,be,Oe,De,$e,qe,ot,Se,te=M.data,yt=M.width,rt=M.height,Me=4*yt,Be=0;Be<rt;){for(ge=0;ge<Me;){for(De=Me*Be+ge,qe=-1,ot=0,Se=0;Se<64;Se++)$e=De+(ot=Se>>3)*Me+(qe=4*(7&Se)),Be+ot>=rt&&($e-=Me*(Be+1+ot-rt)),ge+qe>=Me&&($e-=ge+qe-Me+4),xe=te[$e++],be=te[$e++],Oe=te[$e++],S[Se]=(q[xe]+q[be+256>>0]+q[Oe+512>>0]>>16)-128,A[Se]=(q[xe+768>>0]+q[be+1024>>0]+q[Oe+1280>>0]>>16)-128,O[Se]=(q[xe+1280>>0]+q[be+1536>>0]+q[Oe+1792>>0]>>16)-128;Z=z(S,u,Z,e,r),ne=z(A,c,ne,n,i),se=z(O,c,se,n,i),ge+=32}Be+=8}if(w>=0){var Ke=[];Ke[1]=w+1,Ke[0]=(1<<w+1)-1,ue(Ke)}return re(65497),new Uint8Array(b)},t=t||50,function(){for(var M=String.fromCharCode,R=0;R<256;R++)K[R]=M(R)}(),e=he(T,L),n=he(C,j),r=he(F,I),i=he(Y,le),function(){for(var M=1,R=2,Z=1;Z<=15;Z++){for(var ne=M;ne<R;ne++)m[32767+ne]=Z,h[32767+ne]=[],h[32767+ne][1]=Z,h[32767+ne][0]=ne;for(var se=-(R-1);se<=-M;se++)m[32767+se]=Z,h[32767+se]=[],h[32767+se][1]=Z,h[32767+se][0]=R-1+se;M<<=1,R<<=1}}(),function(){for(var M=0;M<256;M++)q[M]=19595*M,q[M+256>>0]=38470*M,q[M+512>>0]=7471*M+32768,q[M+768>>0]=-11059*M,q[M+1024>>0]=-21709*M,q[M+1280>>0]=32768*M+8421375,q[M+1536>>0]=-27439*M,q[M+1792>>0]=-5329*M}(),Ae(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ps(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function iT(t){function e(T){if(!T)throw Error("assert :P")}function n(T,L,F){for(var I=0;4>I;I++)if(T[L+I]!=F.charCodeAt(I))return!0;return!1}function r(T,L,F,I,C){for(var j=0;j<C;j++)T[L+j]=F[I+j]}function i(T,L,F,I){for(var C=0;C<I;C++)T[L+C]=F}function s(T){return new Int32Array(T)}function o(T,L){for(var F=[],I=0;I<T;I++)F.push(new L);return F}function a(T,L){var F=[];return function I(C,j,Y){for(var le=Y[j],he=0;he<le&&(C.push(Y.length>j+1?[]:new L),!(Y.length<j+1));he++)I(C[he],j+1,Y)}(F,0,T),F}var l=function(){var T=this;function L(d,g){for(var x=1<<g-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function F(d,g,x,k,B){e(!(k%x));do d[g+(k-=x)]=B;while(0<k)}function I(d,g,x,k,B){if(e(2328>=B),512>=B)var U=s(512);else if((U=s(B))==null)return 0;return function($,W,G,Q,oe,ye){var ve,pe,ke=W,_e=1<<G,ae=s(16),ce=s(16);for(e(oe!=0),e(Q!=null),e($!=null),e(0<G),pe=0;pe<oe;++pe){if(15<Q[pe])return 0;++ae[Q[pe]]}if(ae[0]==oe)return 0;for(ce[1]=0,ve=1;15>ve;++ve){if(ae[ve]>1<<ve)return 0;ce[ve+1]=ce[ve]+ae[ve]}for(pe=0;pe<oe;++pe)ve=Q[pe],0<Q[pe]&&(ye[ce[ve]++]=pe);if(ce[15]==1)return(Q=new C).g=0,Q.value=ye[0],F($,ke,1,_e,Q),_e;var Ne,Le=-1,Ie=_e-1,Xe=0,We=1,ct=1,Qe=1<<G;for(pe=0,ve=1,oe=2;ve<=G;++ve,oe<<=1){if(We+=ct<<=1,0>(ct-=ae[ve]))return 0;for(;0<ae[ve];--ae[ve])(Q=new C).g=ve,Q.value=ye[pe++],F($,ke+Xe,oe,Qe,Q),Xe=L(Xe,ve)}for(ve=G+1,oe=2;15>=ve;++ve,oe<<=1){if(We+=ct<<=1,0>(ct-=ae[ve]))return 0;for(;0<ae[ve];--ae[ve]){if(Q=new C,(Xe&Ie)!=Le){for(ke+=Qe,Ne=1<<(Le=ve)-G;15>Le&&!(0>=(Ne-=ae[Le]));)++Le,Ne<<=1;_e+=Qe=1<<(Ne=Le-G),$[W+(Le=Xe&Ie)].g=Ne+G,$[W+Le].value=ke-W-Le}Q.g=ve-G,Q.value=ye[pe++],F($,ke+(Xe>>G),oe,Qe,Q),Xe=L(Xe,ve)}}return We!=2*ce[15]-1?0:_e}(d,g,x,k,B,U)}function C(){this.value=this.g=0}function j(){this.value=this.g=0}function Y(){this.G=o(5,C),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(wr,j)}function le(d,g,x,k){e(d!=null),e(g!=null),e(2147483648>k),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=g,d.pa=x,d.Jd=g,d.Yc=x+k,d.Zc=4<=k?x+k-4+1:x,ge(d)}function he(d,g){for(var x=0;0<g--;)x|=be(d,128)<<g;return x}function ue(d,g){var x=he(d,g);return xe(d)?-x:x}function X(d,g,x,k){var B,U=0;for(e(d!=null),e(g!=null),e(4294967288>k),d.Sb=k,d.Ra=0,d.u=0,d.h=0,4<k&&(k=4),B=0;B<k;++B)U+=g[x+B]<<8*B;d.Ra=U,d.bb=k,d.oa=g,d.pa=x}function re(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Nc-8>>>0,++d.bb,d.u-=8;Z(d)&&(d.h=1,d.u=0)}function z(d,g){if(e(0<=g),!d.h&&g<=Tc){var x=R(d)&Ac[g];return d.u+=g,re(d),x}return d.h=1,d.u=0}function Ae(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(d){return d.Ra>>>(d.u&Nc-1)>>>0}function Z(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Nc}function ne(d,g){d.u=g,d.h=Z(d)}function se(d){d.u>=xd&&(e(d.u>=xd),re(d))}function ge(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function xe(d){return he(d,1)}function be(d,g){var x=d.Ca;0>d.b&&ge(d);var k=d.b,B=x*g>>>8,U=(d.I>>>k>B)+0;for(U?(x-=B,d.I-=B+1<<k>>>0):x=B+1,k=x,B=0;256<=k;)B+=8,k>>=8;return k=7^B+fi[k],d.b-=k,d.Ca=(x<<k)-1,U}function Oe(d,g,x){d[g+0]=x>>24&255,d[g+1]=x>>16&255,d[g+2]=x>>8&255,d[g+3]=x>>0&255}function De(d,g){return d[g+0]<<0|d[g+1]<<8}function $e(d,g){return De(d,g)|d[g+2]<<16}function qe(d,g){return De(d,g)|De(d,g+2)<<16}function ot(d,g){var x=1<<g;return e(d!=null),e(0<g),d.X=s(x),d.X==null?0:(d.Mb=32-g,d.Xa=g,1)}function Se(d,g){e(d!=null),e(g!=null),e(d.Xa==g.Xa),r(g.X,0,d.X,0,1<<g.Xa)}function te(){this.X=[],this.Xa=this.Mb=0}function yt(d,g,x,k){e(x!=null),e(k!=null);var B=x[0],U=k[0];return B==0&&(B=(d*U+g/2)/g),U==0&&(U=(g*B+d/2)/d),0>=B||0>=U?0:(x[0]=B,k[0]=U,1)}function rt(d,g){return d+(1<<g)-1>>>g}function Me(d,g){return((4278255360&d)+(4278255360&g)>>>0&4278255360)+((16711935&d)+(16711935&g)>>>0&16711935)>>>0}function Be(d,g){T[g]=function(x,k,B,U,$,W,G){var Q;for(Q=0;Q<$;++Q){var oe=T[d](W[G+Q-1],B,U+Q);W[G+Q]=Me(x[k+Q],oe)}}}function Ke(){this.ud=this.hd=this.jd=0}function He(d,g){return((4278124286&(d^g))>>>1)+(d&g)>>>0}function st(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function ht(d,g){return st(d+(d-g+.5>>1))}function xt(d,g,x){return Math.abs(g-x)-Math.abs(d-x)}function me(d,g,x,k,B,U,$){for(k=U[$-1],x=0;x<B;++x)U[$+x]=k=Me(d[g+x],k)}function Te(d,g,x,k,B){var U;for(U=0;U<x;++U){var $=d[g+U],W=$>>8&255,G=16711935&(G=(G=16711935&$)+((W<<16)+W));k[B+U]=(4278255360&$)+G>>>0}}function Ye(d,g){g.jd=d>>0&255,g.hd=d>>8&255,g.ud=d>>16&255}function Ue(d,g,x,k,B,U){var $;for($=0;$<k;++$){var W=g[x+$],G=W>>>8,Q=W,oe=255&(oe=(oe=W>>>16)+((d.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((d.hd<<24>>24)*(G<<24>>24)>>>5))+((d.ud<<24>>24)*(oe<<24>>24)>>>5)),B[U+$]=(4278255360&W)+(oe<<16)+Q}}function Je(d,g,x,k,B){T[g]=function(U,$,W,G,Q,oe,ye,ve,pe){for(G=ye;G<ve;++G)for(ye=0;ye<pe;++ye)Q[oe++]=B(W[k(U[$++])])},T[d]=function(U,$,W,G,Q,oe,ye){var ve=8>>U.b,pe=U.Ea,ke=U.K[0],_e=U.w;if(8>ve)for(U=(1<<U.b)-1,_e=(1<<ve)-1;$<W;++$){var ae,ce=0;for(ae=0;ae<pe;++ae)ae&U||(ce=k(G[Q++])),oe[ye++]=B(ke[ce&_e]),ce>>=ve}else T["VP8LMapColor"+x](G,Q,ke,_e,oe,ye,$,W,pe)}}function ze(d,g,x,k,B){for(x=g+x;g<x;){var U=d[g++];k[B++]=U>>16&255,k[B++]=U>>8&255,k[B++]=U>>0&255}}function Wt(d,g,x,k,B){for(x=g+x;g<x;){var U=d[g++];k[B++]=U>>16&255,k[B++]=U>>8&255,k[B++]=U>>0&255,k[B++]=U>>24&255}}function bt(d,g,x,k,B){for(x=g+x;g<x;){var U=($=d[g++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;k[B++]=U,k[B++]=$}}function Hn(d,g,x,k,B){for(x=g+x;g<x;){var U=($=d[g++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;k[B++]=U,k[B++]=$}}function Dt(d,g,x,k,B){for(x=g+x;g<x;){var U=d[g++];k[B++]=U>>0&255,k[B++]=U>>8&255,k[B++]=U>>16&255}}function Pt(d,g,x,k,B,U){if(U==0)for(x=g+x;g<x;)Oe(k,((U=d[g++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),B+=32;else r(k,B,d,g,x)}function nr(d,g){T[g][0]=T[d+"0"],T[g][1]=T[d+"1"],T[g][2]=T[d+"2"],T[g][3]=T[d+"3"],T[g][4]=T[d+"4"],T[g][5]=T[d+"5"],T[g][6]=T[d+"6"],T[g][7]=T[d+"7"],T[g][8]=T[d+"8"],T[g][9]=T[d+"9"],T[g][10]=T[d+"10"],T[g][11]=T[d+"11"],T[g][12]=T[d+"12"],T[g][13]=T[d+"13"],T[g][14]=T[d+"0"],T[g][15]=T[d+"0"]}function Et(d){return d==F1||d==V1||d==Yp||d==B1}function Gs(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Gs,this.f.kb=new mn,this.sd=null}function ki(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Ut(d,g){var x=d.T,k=g.ba.f.RGBA,B=k.eb,U=k.fb+d.ka*k.A,$=rs[g.ba.S],W=d.y,G=d.O,Q=d.f,oe=d.N,ye=d.ea,ve=d.W,pe=g.cc,ke=g.dc,_e=g.Mc,ae=g.Nc,ce=d.ka,Ne=d.ka+d.T,Le=d.U,Ie=Le+1>>1;for(ce==0?$(W,G,null,null,Q,oe,ye,ve,Q,oe,ye,ve,B,U,null,null,Le):($(g.ec,g.fc,W,G,pe,ke,_e,ae,Q,oe,ye,ve,B,U-k.A,B,U,Le),++x);ce+2<Ne;ce+=2)pe=Q,ke=oe,_e=ye,ae=ve,oe+=d.Rc,ve+=d.Rc,U+=2*k.A,$(W,(G+=2*d.fa)-d.fa,W,G,pe,ke,_e,ae,Q,oe,ye,ve,B,U-k.A,B,U,Le);return G+=d.fa,d.j+Ne<d.o?(r(g.ec,g.fc,W,G,Le),r(g.cc,g.dc,Q,oe,Ie),r(g.Mc,g.Nc,ye,ve,Ie),x--):1&Ne||$(W,G,null,null,Q,oe,ye,ve,Q,oe,ye,ve,B,U+k.A,null,null,Le),x}function Qi(d,g,x){var k=d.F,B=[d.J];if(k!=null){var U=d.U,$=g.ba.S,W=$==Kp||$==Yp;g=g.ba.f.RGBA;var G=[0],Q=d.ka;G[0]=d.T,d.Kb&&(Q==0?--G[0]:(--Q,B[0]-=d.width),d.j+d.ka+d.T==d.o&&(G[0]=d.o-d.j-Q));var oe=g.eb;Q=g.fb+Q*g.A,d=hn(k,B[0],d.width,U,G,oe,Q+(W?0:3),g.A),e(x==G),d&&Et($)&&ts(oe,Q,W,U,G,g.A)}return 0}function Wn(d){var g=d.ma,x=g.ba.S,k=11>x,B=x==Wp||x==Gp||x==Kp||x==M1||x==12||Et(x);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!vd(g.Oa,d,B?11:12))return 0;if(B&&Et(x)&&Re(),d.da)alert("todo:use_scaling");else{if(k){if(g.Ib=ut,d.Kb){if(x=d.U+1>>1,g.memory=s(d.U+2*x),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+d.U,g.Mc=g.cc,g.Nc=g.dc+x,g.Ib=Ut,Re()}}else alert("todo:EmitYUV");B&&(g.Jb=Qi,k&&fe())}if(k&&!$b){for(d=0;256>d;++d)AR[d]=89858*(d-128)+Xp>>Qp,IR[d]=-22014*(d-128)+Xp,NR[d]=-45773*(d-128),TR[d]=113618*(d-128)+Xp>>Qp;for(d=Nd;d<q1;++d)g=76283*(d-16)+Xp>>Qp,kR[d-Nd]=Kt(g,255),CR[d-Nd]=Kt(g+8>>4,15);$b=1}return 1}function kr(d){var g=d.ma,x=d.U,k=d.T;return e(!(1&d.ka)),0>=x||0>=k?0:(x=g.Ib(d,g),g.Jb!=null&&g.Jb(d,g,x),g.Dc+=x,1)}function Ci(d){d.ma.memory=null}function tt(d,g,x,k){return z(d,8)!=47?0:(g[0]=z(d,14)+1,x[0]=z(d,14)+1,k[0]=z(d,1),z(d,3)!=0?0:!d.h)}function ci(d,g){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+z(g,x)+1}function Cr(d,g){return 120<g?g-120:1<=(x=((x=hR[g-1])>>4)*d+(8-(15&x)))?x:1;var x}function Gn(d,g,x){var k=R(x),B=d[g+=255&k].g-8;return 0<B&&(ne(x,x.u+8),k=R(x),g+=d[g].value,g+=k&(1<<B)-1),ne(x,x.u+d[g].g),d[g].value}function Rn(d,g,x){return x.g+=d.g,x.value+=d.value<<g>>>0,e(8>=x.g),d.g}function In(d,g,x){var k=d.xc;return e((g=k==0?0:d.vc[d.md*(x>>k)+(g>>k)])<d.Wb),d.Ya[g]}function Kn(d,g,x,k){var B=d.ab,U=d.c*g,$=d.C;g=$+g;var W=x,G=k;for(k=d.Ta,x=d.Ua;0<B--;){var Q=d.gc[B],oe=$,ye=g,ve=W,pe=G,ke=(G=k,W=x,Q.Ea);switch(e(oe<ye),e(ye<=Q.nc),Q.hc){case 2:Vp(ve,pe,(ye-oe)*ke,G,W);break;case 0:var _e=oe,ae=ye,ce=G,Ne=W,Le=(Qe=Q).Ea;_e==0&&(j1(ve,pe,null,null,1,ce,Ne),me(ve,pe+1,0,0,Le-1,ce,Ne+1),pe+=Le,Ne+=Le,++_e);for(var Ie=1<<Qe.b,Xe=Ie-1,We=rt(Le,Qe.b),ct=Qe.K,Qe=Qe.w+(_e>>Qe.b)*We;_e<ae;){var $t=ct,Xt=Qe,zt=1;for(bd(ve,pe,ce,Ne-Le,1,ce,Ne);zt<Le;){var Mt=(zt&~Xe)+Ie;Mt>Le&&(Mt=Le),(0,qa[$t[Xt++]>>8&15])(ve,pe+ +zt,ce,Ne+zt-Le,Mt-zt,ce,Ne+zt),zt=Mt}pe+=Le,Ne+=Le,++_e&Xe||(Qe+=We)}ye!=Q.nc&&r(G,W-ke,G,W+(ye-oe-1)*ke,ke);break;case 1:for(ke=ve,ae=pe,Le=(ve=Q.Ea)-(Ne=ve&~(ce=(pe=1<<Q.b)-1)),_e=rt(ve,Q.b),Ie=Q.K,Q=Q.w+(oe>>Q.b)*_e;oe<ye;){for(Xe=Ie,We=Q,ct=new Ke,Qe=ae+Ne,$t=ae+ve;ae<Qe;)Ye(Xe[We++],ct),xu(ct,ke,ae,pe,G,W),ae+=pe,W+=pe;ae<$t&&(Ye(Xe[We++],ct),xu(ct,ke,ae,Le,G,W),ae+=Le,W+=Le),++oe&ce||(Q+=_e)}break;case 3:if(ve==G&&pe==W&&0<Q.b){for(ae=G,ve=ke=W+(ye-oe)*ke-(Ne=(ye-oe)*rt(Q.Ea,Q.b)),pe=G,ce=W,_e=[],Ne=(Le=Ne)-1;0<=Ne;--Ne)_e[Ne]=pe[ce+Ne];for(Ne=Le-1;0<=Ne;--Ne)ae[ve+Ne]=_e[Ne];Ji(Q,oe,ye,G,ke,G,W)}else Ji(Q,oe,ye,ve,pe,G,W)}W=k,G=x}G!=x&&r(k,x,W,G,U)}function Aa(d,g){var x=d.V,k=d.Ba+d.c*d.C,B=g-d.C;if(e(g<=d.l.o),e(16>=B),0<B){var U=d.l,$=d.Ta,W=d.Ua,G=U.width;if(Kn(d,B,x,k),B=W=[W],e((x=d.C)<(k=g)),e(U.v<U.va),k>U.o&&(k=U.o),x<U.j){var Q=U.j-x;x=U.j,B[0]+=Q*G}if(x>=k?x=0:(B[0]+=4*U.v,U.ka=x-U.j,U.U=U.va-U.v,U.T=k-x,x=1),x){if(W=W[0],11>(x=d.ca).S){var oe=x.f.RGBA,ye=(k=x.S,B=U.U,U=U.T,Q=oe.eb,oe.A),ve=U;for(oe=oe.fb+d.Ma*oe.A;0<ve--;){var pe=$,ke=W,_e=B,ae=Q,ce=oe;switch(k){case Hp:pi(pe,ke,_e,ae,ce);break;case Wp:ti(pe,ke,_e,ae,ce);break;case F1:ti(pe,ke,_e,ae,ce),ts(ae,ce,0,_e,1,0);break;case Db:Uo(pe,ke,_e,ae,ce);break;case Gp:Pt(pe,ke,_e,ae,ce,1);break;case V1:Pt(pe,ke,_e,ae,ce,1),ts(ae,ce,0,_e,1,0);break;case Kp:Pt(pe,ke,_e,ae,ce,0);break;case Yp:Pt(pe,ke,_e,ae,ce,0),ts(ae,ce,1,_e,1,0);break;case M1:$a(pe,ke,_e,ae,ce);break;case B1:$a(pe,ke,_e,ae,ce),cn(ae,ce,_e,1,0);break;case jb:Bo(pe,ke,_e,ae,ce);break;default:e(0)}W+=G,oe+=ye}d.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=g,e(d.C<=d.i)}function vs(d){var g;if(0<d.ua)return 0;for(g=0;g<d.Wb;++g){var x=d.Ya[g].G,k=d.Ya[g].H;if(0<x[1][k[1]+0].g||0<x[2][k[2]+0].g||0<x[3][k[3]+0].g)return 0}return 1}function Pr(d,g,x,k,B,U){if(d.Z!=0){var $=d.qd,W=d.rd;for(e(Ka[d.Z]!=null);g<x;++g)Ka[d.Z]($,W,k,B,k,B,U),$=k,W=B,B+=U;d.qd=$,d.rd=W}}function hi(d,g){var x=d.l.ma,k=x.Z==0||x.Z==1?d.l.j:d.C;if(k=d.C<k?k:d.C,e(g<=d.l.o),g>k){var B=d.l.width,U=x.ca,$=x.tb+B*k,W=d.V,G=d.Ba+d.c*k,Q=d.gc;e(d.ab==1),e(Q[0].hc==3),Bp(Q[0],k,g,W,G,U,$),Pr(x,k,g,U,$,B)}d.C=d.Ma=g}function Jr(d,g,x,k,B,U,$){var W=d.$/k,G=d.$%k,Q=d.m,oe=d.s,ye=x+d.$,ve=ye;B=x+k*B;var pe=x+k*U,ke=280+oe.ua,_e=d.Pb?W:16777216,ae=0<oe.ua?oe.Wa:null,ce=oe.wc,Ne=ye<pe?In(oe,G,W):null;e(d.C<U),e(pe<=B);var Le=!1;e:for(;;){for(;Le||ye<pe;){var Ie=0;if(W>=_e){var Xe=ye-x;e((_e=d).Pb),_e.wd=_e.m,_e.xd=Xe,0<_e.s.ua&&Se(_e.s.Wa,_e.s.vb),_e=W+fR}if(G&ce||(Ne=In(oe,G,W)),e(Ne!=null),Ne.Qb&&(g[ye]=Ne.qb,Le=!0),!Le)if(se(Q),Ne.jc){Ie=Q,Xe=g;var We=ye,ct=Ne.pd[R(Ie)&wr-1];e(Ne.jc),256>ct.g?(ne(Ie,Ie.u+ct.g),Xe[We]=ct.value,Ie=0):(ne(Ie,Ie.u+ct.g-256),e(256<=ct.value),Ie=ct.value),Ie==0&&(Le=!0)}else Ie=Gn(Ne.G[0],Ne.H[0],Q);if(Q.h)break;if(Le||256>Ie){if(!Le)if(Ne.nd)g[ye]=(Ne.qb|Ie<<8)>>>0;else{if(se(Q),Le=Gn(Ne.G[1],Ne.H[1],Q),se(Q),Xe=Gn(Ne.G[2],Ne.H[2],Q),We=Gn(Ne.G[3],Ne.H[3],Q),Q.h)break;g[ye]=(We<<24|Le<<16|Ie<<8|Xe)>>>0}if(Le=!1,++ye,++G>=k&&(G=0,++W,$!=null&&W<=U&&!(W%16)&&$(d,W),ae!=null))for(;ve<ye;)Ie=g[ve++],ae.X[(506832829*Ie&4294967295)>>>ae.Mb]=Ie}else if(280>Ie){if(Ie=ci(Ie-256,Q),Xe=Gn(Ne.G[4],Ne.H[4],Q),se(Q),Xe=Cr(k,Xe=ci(Xe,Q)),Q.h)break;if(ye-x<Xe||B-ye<Ie)break e;for(We=0;We<Ie;++We)g[ye+We]=g[ye+We-Xe];for(ye+=Ie,G+=Ie;G>=k;)G-=k,++W,$!=null&&W<=U&&!(W%16)&&$(d,W);if(e(ye<=B),G&ce&&(Ne=In(oe,G,W)),ae!=null)for(;ve<ye;)Ie=g[ve++],ae.X[(506832829*Ie&4294967295)>>>ae.Mb]=Ie}else{if(!(Ie<ke))break e;for(Le=Ie-280,e(ae!=null);ve<ye;)Ie=g[ve++],ae.X[(506832829*Ie&4294967295)>>>ae.Mb]=Ie;Ie=ye,e(!(Le>>>(Xe=ae).Xa)),g[Ie]=Xe.X[Le],Le=!0}Le||e(Q.h==Z(Q))}if(d.Pb&&Q.h&&ye<B)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&Se(d.s.vb,d.s.Wa);else{if(Q.h)break e;$!=null&&$(d,W>U?U:W),d.a=0,d.$=ye-x}return 1}return d.a=3,0}function Zr(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var g=d.Wa;g!=null&&(g.X=null),d.vb=null,e(d!=null)}function Dn(){var d=new Sc;return d==null?null:(d.a=0,d.xb=Fb,nr("Predictor","VP8LPredictors"),nr("Predictor","VP8LPredictors_C"),nr("PredictorAdd","VP8LPredictorsAdd"),nr("PredictorAdd","VP8LPredictorsAdd_C"),Vp=Te,xu=Ue,pi=ze,ti=Wt,$a=bt,Bo=Hn,Uo=Dt,T.VP8LMapColor32b=Ic,T.VP8LMapColor8b=Up,d)}function Pi(d,g,x,k,B){var U=1,$=[d],W=[g],G=k.m,Q=k.s,oe=null,ye=0;e:for(;;){if(x)for(;U&&z(G,1);){var ve=$,pe=W,ke=k,_e=1,ae=ke.m,ce=ke.gc[ke.ab],Ne=z(ae,2);if(ke.Oc&1<<Ne)U=0;else{switch(ke.Oc|=1<<Ne,ce.hc=Ne,ce.Ea=ve[0],ce.nc=pe[0],ce.K=[null],++ke.ab,e(4>=ke.ab),Ne){case 0:case 1:ce.b=z(ae,3)+2,_e=Pi(rt(ce.Ea,ce.b),rt(ce.nc,ce.b),0,ke,ce.K),ce.K=ce.K[0];break;case 3:var Le,Ie=z(ae,8)+1,Xe=16<Ie?0:4<Ie?1:2<Ie?2:3;if(ve[0]=rt(ce.Ea,Xe),ce.b=Xe,Le=_e=Pi(Ie,1,0,ke,ce.K)){var We,ct=Ie,Qe=ce,$t=1<<(8>>Qe.b),Xt=s($t);if(Xt==null)Le=0;else{var zt=Qe.K[0],Mt=Qe.w;for(Xt[0]=Qe.K[0][0],We=1;We<1*ct;++We)Xt[We]=Me(zt[Mt+We],Xt[We-1]);for(;We<4*$t;++We)Xt[We]=0;Qe.K[0]=null,Qe.K[0]=Xt,Le=1}}_e=Le;break;case 2:break;default:e(0)}U=_e}}if($=$[0],W=W[0],U&&z(G,1)&&!(U=1<=(ye=z(G,4))&&11>=ye)){k.a=3;break e}var on;if(on=U)t:{var nn,kt,Yn,mi=k,Qn=$,gi=W,Jt=ye,Oi=x,Mi=mi.m,cr=mi.s,xr=[null],ri=1,is=0,oo=dR[Jt];n:for(;;){if(Oi&&z(Mi,1)){var hr=z(Mi,3)+2,Ho=rt(Qn,hr),Au=rt(gi,hr),Rc=Ho*Au;if(!Pi(Ho,Au,0,mi,xr))break n;for(xr=xr[0],cr.xc=hr,nn=0;nn<Rc;++nn){var Ya=xr[nn]>>8&65535;xr[nn]=Ya,Ya>=ri&&(ri=Ya+1)}}if(Mi.h)break n;for(kt=0;5>kt;++kt){var Cn=Ob[kt];!kt&&0<Jt&&(Cn+=1<<Jt),is<Cn&&(is=Cn)}var $1=o(ri*oo,C),Gb=ri,Kb=o(Gb,Y);if(Kb==null)var Zp=null;else e(65536>=Gb),Zp=Kb;var Id=s(is);if(Zp==null||Id==null||$1==null){mi.a=1;break n}var em=$1;for(nn=Yn=0;nn<ri;++nn){var Is=Zp[nn],Dc=Is.G,jc=Is.H,Yb=0,tm=1,Qb=0;for(kt=0;5>kt;++kt){Cn=Ob[kt],Dc[kt]=em,jc[kt]=Yn,!kt&&0<Jt&&(Cn+=1<<Jt);i:{var nm,H1=Cn,rm=mi,kd=Id,RR=em,DR=Yn,W1=0,Qa=rm.m,jR=z(Qa,1);if(i(kd,0,0,H1),jR){var OR=z(Qa,1)+1,MR=z(Qa,1),Xb=z(Qa,MR==0?1:8);kd[Xb]=1,OR==2&&(kd[Xb=z(Qa,8)]=1);var im=1}else{var Jb=s(19),Zb=z(Qa,4)+4;if(19<Zb){rm.a=3;var sm=0;break i}for(nm=0;nm<Zb;++nm)Jb[cR[nm]]=z(Qa,3);var G1=void 0,Cd=void 0,e_=rm,FR=Jb,om=H1,t_=kd,K1=0,Xa=e_.m,n_=8,r_=o(128,C);r:for(;I(r_,0,7,FR,19);){if(z(Xa,1)){var VR=2+2*z(Xa,3);if((G1=2+z(Xa,VR))>om)break r}else G1=om;for(Cd=0;Cd<om&&G1--;){se(Xa);var i_=r_[0+(127&R(Xa))];ne(Xa,Xa.u+i_.g);var Oc=i_.value;if(16>Oc)t_[Cd++]=Oc,Oc!=0&&(n_=Oc);else{var BR=Oc==16,s_=Oc-16,UR=lR[s_],o_=z(Xa,aR[s_])+UR;if(Cd+o_>om)break r;for(var zR=BR?n_:0;0<o_--;)t_[Cd++]=zR}}K1=1;break r}K1||(e_.a=3),im=K1}(im=im&&!Qa.h)&&(W1=I(RR,DR,8,kd,H1)),im&&W1!=0?sm=W1:(rm.a=3,sm=0)}if(sm==0)break n;if(tm&&uR[kt]==1&&(tm=em[Yn].g==0),Yb+=em[Yn].g,Yn+=sm,3>=kt){var Pd,Y1=Id[0];for(Pd=1;Pd<Cn;++Pd)Id[Pd]>Y1&&(Y1=Id[Pd]);Qb+=Y1}}if(Is.nd=tm,Is.Qb=0,tm&&(Is.qb=(Dc[3][jc[3]+0].value<<24|Dc[1][jc[1]+0].value<<16|Dc[2][jc[2]+0].value)>>>0,Yb==0&&256>Dc[0][jc[0]+0].value&&(Is.Qb=1,Is.qb+=Dc[0][jc[0]+0].value<<8)),Is.jc=!Is.Qb&&6>Qb,Is.jc){var am,Wo=Is;for(am=0;am<wr;++am){var Ja=am,Za=Wo.pd[Ja],lm=Wo.G[0][Wo.H[0]+Ja];256<=lm.value?(Za.g=lm.g+256,Za.value=lm.value):(Za.g=0,Za.value=0,Ja>>=Rn(lm,8,Za),Ja>>=Rn(Wo.G[1][Wo.H[1]+Ja],16,Za),Ja>>=Rn(Wo.G[2][Wo.H[2]+Ja],0,Za),Rn(Wo.G[3][Wo.H[3]+Ja],24,Za))}}}cr.vc=xr,cr.Wb=ri,cr.Ya=Zp,cr.yc=$1,on=1;break t}on=0}if(!(U=on)){k.a=3;break e}if(0<ye){if(Q.ua=1<<ye,!ot(Q.Wa,ye)){k.a=1,U=0;break e}}else Q.ua=0;var Q1=k,a_=$,qR=W,X1=Q1.s,J1=X1.xc;if(Q1.c=a_,Q1.i=qR,X1.md=rt(a_,J1),X1.wc=J1==0?-1:(1<<J1)-1,x){k.xb=xR;break e}if((oe=s($*W))==null){k.a=1,U=0;break e}U=(U=Jr(k,oe,0,$,W,W,null))&&!G.h;break e}return U?(B!=null?B[0]=oe:(e(oe==null),e(x)),k.$=0,x||Zr(Q)):Zr(Q),U}function Ks(d,g){var x=d.c*d.i,k=x+g+16*g;return e(d.c<=g),d.V=s(k),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+g,1)}function Ys(d,g){var x=d.C,k=g-x,B=d.V,U=d.Ba+d.c*x;for(e(g<=d.l.o);0<k;){var $=16<k?16:k,W=d.l.ma,G=d.l.width,Q=G*$,oe=W.ca,ye=W.tb+G*x,ve=d.Ta,pe=d.Ua;Kn(d,$,B,U),On(ve,pe,oe,ye,Q),Pr(W,x,x+$,oe,ye,G),k-=$,B+=$*d.c,x+=$}e(x==g),d.C=d.Ma=g}function Qs(){this.ub=this.yd=this.td=this.Rb=0}function ko(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Co(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function fc(){this.Yb=function(){var d=[];return function g(x,k,B){for(var U=B[k],$=0;$<U&&(x.push(B.length>k+1?[]:0),!(B.length<k+1));$++)g(x[$],k+1,B)}(d,0,[3,11]),d}()}function Ta(){this.jb=s(3),this.Wc=a([4,8],fc),this.Xc=a([4,17],fc)}function pc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Xs(){this.ld=this.La=this.dd=this.tc=0}function Js(){this.Na=this.la=0}function ws(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Po(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function pd(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xs),this.Y=0,this.ya=Array(new Po),this.aa=0,this.l=new Lo}function ou(){this.y=s(16),this.f=s(8),this.ea=s(8)}function mc(){this.cb=this.a=0,this.sc="",this.m=new Ae,this.Od=new Qs,this.Kc=new ko,this.ed=new pc,this.Qa=new Co,this.Ic=this.$c=this.Aa=0,this.D=new pd,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ae),this.ia=0,this.pb=o(4,ws),this.Pa=new Ta,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ou),this.Hd=0,this.rb=Array(new Js),this.sb=0,this.wa=Array(new Xs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Po),this.L=this.aa=0,this.gd=a([4,2],Xs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Lo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function au(){var d=new mc;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Td||(Td=gc)),d}function gn(d,g,x){return d.a==0&&(d.a=g,d.sc=x,d.cb=0),0}function lu(d,g,x){return 3<=x&&d[g+0]==157&&d[g+1]==1&&d[g+2]==42}function uu(d,g){if(d==null)return 0;if(d.a=0,d.sc="OK",g==null)return gn(d,2,"null VP8Io passed to VP8GetHeaders()");var x=g.data,k=g.w,B=g.ha;if(4>B)return gn(d,7,"Truncated header.");var U=x[k+0]|x[k+1]<<8|x[k+2]<<16,$=d.Od;if($.Rb=!(1&U),$.td=U>>1&7,$.yd=U>>4&1,$.ub=U>>5,3<$.td)return gn(d,3,"Incorrect keyframe parameters.");if(!$.yd)return gn(d,4,"Frame not displayable.");k+=3,B-=3;var W=d.Kc;if($.Rb){if(7>B)return gn(d,7,"cannot parse picture header");if(!lu(x,k,B))return gn(d,3,"Bad code word");W.c=16383&(x[k+4]<<8|x[k+3]),W.Td=x[k+4]>>6,W.i=16383&(x[k+6]<<8|x[k+5]),W.Ud=x[k+6]>>6,k+=7,B-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,g.width=W.c,g.height=W.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((U=d.Pa).jb,0,255,U.jb.length),e((U=d.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,i(U.Zb,0,0,U.Zb.length),i(U.Lb,0,0,U.Lb)}if($.ub>B)return gn(d,7,"bad partition length");le(U=d.m,x,k,$.ub),k+=$.ub,B-=$.ub,$.Rb&&(W.Ld=xe(U),W.Kd=xe(U)),W=d.Qa;var G,Q=d.Pa;if(e(U!=null),e(W!=null),W.Cb=xe(U),W.Cb){if(W.Bb=xe(U),xe(U)){for(W.Fb=xe(U),G=0;4>G;++G)W.Zb[G]=xe(U)?ue(U,7):0;for(G=0;4>G;++G)W.Lb[G]=xe(U)?ue(U,6):0}if(W.Bb)for(G=0;3>G;++G)Q.jb[G]=xe(U)?he(U,8):255}else W.Bb=0;if(U.Ka)return gn(d,3,"cannot parse segment header");if((W=d.ed).zd=xe(U),W.Tb=he(U,6),W.wb=he(U,3),W.Pc=xe(U),W.Pc&&xe(U)){for(Q=0;4>Q;++Q)xe(U)&&(W.vd[Q]=ue(U,6));for(Q=0;4>Q;++Q)xe(U)&&(W.od[Q]=ue(U,6))}if(d.L=W.Tb==0?0:W.zd?1:2,U.Ka)return gn(d,3,"cannot parse filter header");var oe=B;if(B=G=k,k=G+oe,W=oe,d.Xb=(1<<he(d.m,2))-1,oe<3*(Q=d.Xb))x=7;else{for(G+=3*Q,W-=3*Q,oe=0;oe<Q;++oe){var ye=x[B+0]|x[B+1]<<8|x[B+2]<<16;ye>W&&(ye=W),le(d.Jc[+oe],x,G,ye),G+=ye,W-=ye,B+=3}le(d.Jc[+Q],x,G,W),x=G<k?0:5}if(x!=0)return gn(d,x,"cannot parse partitions");for(x=he(G=d.m,7),B=xe(G)?ue(G,4):0,k=xe(G)?ue(G,4):0,W=xe(G)?ue(G,4):0,Q=xe(G)?ue(G,4):0,G=xe(G)?ue(G,4):0,oe=d.Qa,ye=0;4>ye;++ye){if(oe.Cb){var ve=oe.Zb[ye];oe.Fb||(ve+=x)}else{if(0<ye){d.pb[ye]=d.pb[0];continue}ve=x}var pe=d.pb[ye];pe.Sc[0]=U1[Kt(ve+B,127)],pe.Sc[1]=z1[Kt(ve+0,127)],pe.Eb[0]=2*U1[Kt(ve+k,127)],pe.Eb[1]=101581*z1[Kt(ve+W,127)]>>16,8>pe.Eb[1]&&(pe.Eb[1]=8),pe.Qc[0]=U1[Kt(ve+Q,117)],pe.Qc[1]=z1[Kt(ve+G,127)],pe.lc=ve+G}if(!$.Rb)return gn(d,4,"Not a key frame.");for(xe(U),$=d.Pa,x=0;4>x;++x){for(B=0;8>B;++B)for(k=0;3>k;++k)for(W=0;11>W;++W)Q=be(U,vR[x][B][k][W])?he(U,8):gR[x][B][k][W],$.Wc[x][B].Yb[k][W]=Q;for(B=0;17>B;++B)$.Xc[x][B]=$.Wc[x][wR[B]]}return d.kc=xe(U),d.kc&&(d.Bd=he(U,8)),d.cb=1}function gc(d,g,x,k,B,U,$){var W=g[B].Yb[x];for(x=0;16>B;++B){if(!be(d,W[x+0]))return B;for(;!be(d,W[x+1]);)if(W=g[++B].Yb[0],x=0,B==16)return 16;var G=g[B+1].Yb;if(be(d,W[x+2])){var Q=d,oe=0;if(be(Q,(ve=W)[(ye=x)+3]))if(be(Q,ve[ye+6])){for(W=0,ye=2*(oe=be(Q,ve[ye+8]))+(ve=be(Q,ve[ye+9+oe])),oe=0,ve=pR[ye];ve[W];++W)oe+=oe+be(Q,ve[W]);oe+=3+(8<<ye)}else be(Q,ve[ye+7])?(oe=7+2*be(Q,165),oe+=be(Q,145)):oe=5+be(Q,159);else oe=be(Q,ve[ye+4])?3+be(Q,ve[ye+5]):2;W=G[2]}else oe=1,W=G[1];G=$+mR[B],0>(Q=d).b&&ge(Q);var ye,ve=Q.b,pe=(ye=Q.Ca>>1)-(Q.I>>ve)>>31;--Q.b,Q.Ca+=pe,Q.Ca|=1,Q.I-=(ye+1&pe)<<ve,U[G]=((oe^pe)-pe)*k[(0<B)+0]}return 16}function cu(d){var g=d.rb[d.sb-1];g.la=0,g.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function yc(d,g){if(d==null)return 0;if(g==null)return gn(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!uu(d,g))return 0;if(e(d.cb),g.ac==null||g.ac(g)){g.ob&&(d.L=0);var x=Jp[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=g.v-x>>4,d.zb=g.j-x>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=g.o+15+x>>4,d.Hb=g.va+15+x>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var k=d.ed;for(x=0;4>x;++x){var B;if(d.Qa.Cb){var U=d.Qa.Lb[x];d.Qa.Fb||(U+=k.Tb)}else U=k.Tb;for(B=0;1>=B;++B){var $=d.gd[x][B],W=U;if(k.Pc&&(W+=k.vd[0],B&&(W+=k.od[0])),0<(W=0>W?0:63<W?63:W)){var G=W;0<k.wb&&(G=4<k.wb?G>>2:G>>1)>9-k.wb&&(G=9-k.wb),1>G&&(G=1),$.dd=G,$.tc=2*W+G,$.ld=40<=W?2:15<=W?1:0}else $.tc=0;$.La=B}}}x=0}else gn(d,6,"Frame setup failed"),x=d.a;if(x=x==0){if(x){d.$c=0,0<d.Aa||(d.Ic=LR);e:{x=d.Ic,k=4*(G=d.za);var Q=32*G,oe=G+1,ye=0<d.L?G*(0<d.Aa?2:1):0,ve=(d.Aa==2?2:1)*G;if(($=k+832+(B=3*(16*x+Jp[d.L])/2*Q)+(U=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=$)x=0;else{if($>d.Vb){if(d.Vb=0,d.Ec=s($),d.Fc=0,d.Ec==null){x=gn(d,1,"no memory during frame initialization.");break e}d.Vb=$}$=d.Ec,W=d.Fc,d.Ac=$,d.Bc=W,W+=k,d.Gd=o(Q,ou),d.Hd=0,d.rb=o(oe+1,Js),d.sb=1,d.wa=ye?o(ye,Xs):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=G),e(!0),d.oc=$,d.pc=W,W+=832,d.ya=o(ve,Po),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=G),d.R=16*G,d.B=8*G,G=(Q=Jp[d.L])*d.R,Q=Q/2*d.B,d.sa=$,d.ta=W+G,d.qa=d.sa,d.ra=d.ta+16*x*d.R+Q,d.Ha=d.qa,d.Ia=d.ra+8*x*d.B+Q,d.$c=0,W+=B,d.mb=U?$:null,d.nb=U?W:null,e(W+U<=d.Fc+d.Vb),cu(d),i(d.Ac,d.Bc,0,k),x=1}}if(x){if(g.ka=0,g.y=d.sa,g.O=d.ta,g.f=d.qa,g.N=d.ra,g.ea=d.Ha,g.Vd=d.Ia,g.fa=d.R,g.Rc=d.B,g.F=null,g.J=0,!qp){for(x=-255;255>=x;++x)ir[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)qo[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)Ad[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)Lc[255+x]=0>x?0:255<x?255:x;qp=1}kc=jo,zo=Ia,_d=hu,ni=Qt,Zi=Do,jn=Ro,Cc=ja,zp=Es,Sd=Ma,bu=wu,_u=Oa,Ha=Mo,Su=Fa,Pc=no,Eu=Oo,Wa=Di,Ed=rr,es=_c,Ns[0]=Xi,Ns[1]=md,Ns[2]=eo,Ns[3]=yd,Ns[4]=xc,Ns[5]=Pa,Ns[6]=Li,Ns[7]=fu,Ns[8]=Ra,Ns[9]=La,Ga[0]=Zs,Ga[1]=gd,Ga[2]=bs,Ga[3]=ka,Ga[4]=yn,Ga[5]=wc,Ga[6]=du,$o[0]=Ss,$o[1]=vc,$o[2]=bc,$o[3]=_s,$o[4]=Gt,$o[5]=pu,$o[6]=mu,x=1}else x=0}x&&(x=function(pe,ke){for(pe.M=0;pe.M<pe.Va;++pe.M){var _e,ae=pe.Jc[pe.M&pe.Xb],ce=pe.m,Ne=pe;for(_e=0;_e<Ne.za;++_e){var Le=ce,Ie=Ne,Xe=Ie.Ac,We=Ie.Bc+4*_e,ct=Ie.zc,Qe=Ie.ya[Ie.aa+_e];if(Ie.Qa.Bb?Qe.$b=be(Le,Ie.Pa.jb[0])?2+be(Le,Ie.Pa.jb[2]):be(Le,Ie.Pa.jb[1]):Qe.$b=0,Ie.kc&&(Qe.Ad=be(Le,Ie.Bd)),Qe.Za=!be(Le,145)+0,Qe.Za){var $t=Qe.Ob,Xt=0;for(Ie=0;4>Ie;++Ie){var zt,Mt=ct[0+Ie];for(zt=0;4>zt;++zt){Mt=yR[Xe[We+zt]][Mt];for(var on=Mb[be(Le,Mt[0])];0<on;)on=Mb[2*on+be(Le,Mt[on])];Mt=-on,Xe[We+zt]=Mt}r($t,Xt,Xe,We,4),Xt+=4,ct[0+Ie]=Mt}}else Mt=be(Le,156)?be(Le,128)?1:3:be(Le,163)?2:0,Qe.Ob[0]=Mt,i(Xe,We,Mt,4),i(ct,0,Mt,4);Qe.Dd=be(Le,142)?be(Le,114)?be(Le,183)?1:3:2:0}if(Ne.m.Ka)return gn(pe,7,"Premature end-of-partition0 encountered.");for(;pe.ja<pe.za;++pe.ja){if(Ne=ae,Le=(ce=pe).rb[ce.sb-1],Xe=ce.rb[ce.sb+ce.ja],_e=ce.ya[ce.aa+ce.ja],We=ce.kc?_e.Ad:0)Le.la=Xe.la=0,_e.Za||(Le.Na=Xe.Na=0),_e.Hc=0,_e.Gc=0,_e.ia=0;else{var nn,kt;if(Le=Xe,Xe=Ne,We=ce.Pa.Xc,ct=ce.ya[ce.aa+ce.ja],Qe=ce.pb[ct.$b],Ie=ct.ad,$t=0,Xt=ce.rb[ce.sb-1],Mt=zt=0,i(Ie,$t,0,384),ct.Za)var Yn=0,mi=We[3];else{on=s(16);var Qn=Le.Na+Xt.Na;if(Qn=Td(Xe,We[1],Qn,Qe.Eb,0,on,0),Le.Na=Xt.Na=(0<Qn)+0,1<Qn)kc(on,0,Ie,$t);else{var gi=on[0]+3>>3;for(on=0;256>on;on+=16)Ie[$t+on]=gi}Yn=1,mi=We[0]}var Jt=15&Le.la,Oi=15&Xt.la;for(on=0;4>on;++on){var Mi=1&Oi;for(gi=kt=0;4>gi;++gi)Jt=Jt>>1|(Mi=(Qn=Td(Xe,mi,Qn=Mi+(1&Jt),Qe.Sc,Yn,Ie,$t))>Yn)<<7,kt=kt<<2|(3<Qn?3:1<Qn?2:Ie[$t+0]!=0),$t+=16;Jt>>=4,Oi=Oi>>1|Mi<<7,zt=(zt<<8|kt)>>>0}for(mi=Jt,Yn=Oi>>4,nn=0;4>nn;nn+=2){for(kt=0,Jt=Le.la>>4+nn,Oi=Xt.la>>4+nn,on=0;2>on;++on){for(Mi=1&Oi,gi=0;2>gi;++gi)Qn=Mi+(1&Jt),Jt=Jt>>1|(Mi=0<(Qn=Td(Xe,We[2],Qn,Qe.Qc,0,Ie,$t)))<<3,kt=kt<<2|(3<Qn?3:1<Qn?2:Ie[$t+0]!=0),$t+=16;Jt>>=2,Oi=Oi>>1|Mi<<5}Mt|=kt<<4*nn,mi|=Jt<<4<<nn,Yn|=(240&Oi)<<nn}Le.la=mi,Xt.la=Yn,ct.Hc=zt,ct.Gc=Mt,ct.ia=43690&Mt?0:Qe.ia,We=!(zt|Mt)}if(0<ce.L&&(ce.wa[ce.Y+ce.ja]=ce.gd[_e.$b][_e.Za],ce.wa[ce.Y+ce.ja].La|=!We),Ne.Ka)return gn(pe,7,"Premature end-of-file encountered.")}if(cu(pe),ce=ke,Ne=1,_e=(ae=pe).D,Le=0<ae.L&&ae.M>=ae.zb&&ae.M<=ae.Va,ae.Aa==0)e:{if(_e.M=ae.M,_e.uc=Le,io(ae,_e),Ne=1,_e=(kt=ae.D).Nb,Le=(Mt=Jp[ae.L])*ae.R,Xe=Mt/2*ae.B,on=16*_e*ae.R,gi=8*_e*ae.B,We=ae.sa,ct=ae.ta-Le+on,Qe=ae.qa,Ie=ae.ra-Xe+gi,$t=ae.Ha,Xt=ae.Ia-Xe+gi,Oi=(Jt=kt.M)==0,zt=Jt>=ae.Va-1,ae.Aa==2&&io(ae,kt),kt.uc)for(Mi=(Qn=ae).D.M,e(Qn.D.uc),kt=Qn.yb;kt<Qn.Hb;++kt){Yn=kt,mi=Mi;var cr=(xr=(Cn=Qn).D).Nb;nn=Cn.R;var xr=xr.wa[xr.Y+Yn],ri=Cn.sa,is=Cn.ta+16*cr*nn+16*Yn,oo=xr.dd,hr=xr.tc;if(hr!=0)if(e(3<=hr),Cn.L==1)0<Yn&&Wa(ri,is,nn,hr+4),xr.La&&es(ri,is,nn,hr),0<mi&&Eu(ri,is,nn,hr+4),xr.La&&Ed(ri,is,nn,hr);else{var Ho=Cn.B,Au=Cn.qa,Rc=Cn.ra+8*cr*Ho+8*Yn,Ya=Cn.Ha,Cn=Cn.Ia+8*cr*Ho+8*Yn;cr=xr.ld,0<Yn&&(zp(ri,is,nn,hr+4,oo,cr),bu(Au,Rc,Ya,Cn,Ho,hr+4,oo,cr)),xr.La&&(Ha(ri,is,nn,hr,oo,cr),Pc(Au,Rc,Ya,Cn,Ho,hr,oo,cr)),0<mi&&(Cc(ri,is,nn,hr+4,oo,cr),Sd(Au,Rc,Ya,Cn,Ho,hr+4,oo,cr)),xr.La&&(_u(ri,is,nn,hr,oo,cr),Su(Au,Rc,Ya,Cn,Ho,hr,oo,cr))}}if(ae.ia&&alert("todo:DitherRow"),ce.put!=null){if(kt=16*Jt,Jt=16*(Jt+1),Oi?(ce.y=ae.sa,ce.O=ae.ta+on,ce.f=ae.qa,ce.N=ae.ra+gi,ce.ea=ae.Ha,ce.W=ae.Ia+gi):(kt-=Mt,ce.y=We,ce.O=ct,ce.f=Qe,ce.N=Ie,ce.ea=$t,ce.W=Xt),zt||(Jt-=Mt),Jt>ce.o&&(Jt=ce.o),ce.F=null,ce.J=null,ae.Fa!=null&&0<ae.Fa.length&&kt<Jt&&(ce.J=za(ae,ce,kt,Jt-kt),ce.F=ae.mb,ce.F==null&&ce.F.length==0)){Ne=gn(ae,3,"Could not decode alpha data.");break e}kt<ce.j&&(Mt=ce.j-kt,kt=ce.j,e(!(1&Mt)),ce.O+=ae.R*Mt,ce.N+=ae.B*(Mt>>1),ce.W+=ae.B*(Mt>>1),ce.F!=null&&(ce.J+=ce.width*Mt)),kt<Jt&&(ce.O+=ce.v,ce.N+=ce.v>>1,ce.W+=ce.v>>1,ce.F!=null&&(ce.J+=ce.v),ce.ka=kt-ce.j,ce.U=ce.va-ce.v,ce.T=Jt-kt,Ne=ce.put(ce))}_e+1!=ae.Ic||zt||(r(ae.sa,ae.ta-Le,We,ct+16*ae.R,Le),r(ae.qa,ae.ra-Xe,Qe,Ie+8*ae.B,Xe),r(ae.Ha,ae.Ia-Xe,$t,Xt+8*ae.B,Xe))}if(!Ne)return gn(pe,6,"Output aborted.")}return 1}(d,g)),g.bc!=null&&g.bc(g),x&=1}return x?(d.cb=0,x):0}function di(d,g,x,k,B){B=d[g+x+32*k]+(B>>3),d[g+x+32*k]=-256&B?0>B?0:255:B}function Na(d,g,x,k,B,U){di(d,g,0,x,k+B),di(d,g,1,x,k+U),di(d,g,2,x,k-U),di(d,g,3,x,k-B)}function kn(d){return(20091*d>>16)+d}function ei(d,g,x,k){var B,U=0,$=s(16);for(B=0;4>B;++B){var W=d[g+0]+d[g+8],G=d[g+0]-d[g+8],Q=(35468*d[g+4]>>16)-kn(d[g+12]),oe=kn(d[g+4])+(35468*d[g+12]>>16);$[U+0]=W+oe,$[U+1]=G+Q,$[U+2]=G-Q,$[U+3]=W-oe,U+=4,g++}for(B=U=0;4>B;++B)W=(d=$[U+0]+4)+$[U+8],G=d-$[U+8],Q=(35468*$[U+4]>>16)-kn($[U+12]),di(x,k,0,0,W+(oe=kn($[U+4])+(35468*$[U+12]>>16))),di(x,k,1,0,G+Q),di(x,k,2,0,G-Q),di(x,k,3,0,W-oe),U++,k+=32}function Ro(d,g,x,k){var B=d[g+0]+4,U=35468*d[g+4]>>16,$=kn(d[g+4]),W=35468*d[g+1]>>16;Na(x,k,0,B+$,d=kn(d[g+1]),W),Na(x,k,1,B+U,d,W),Na(x,k,2,B-U,d,W),Na(x,k,3,B-$,d,W)}function Ia(d,g,x,k,B){ei(d,g,x,k),B&&ei(d,g+16,x,k+4)}function hu(d,g,x,k){zo(d,g+0,x,k,1),zo(d,g+32,x,k+128,1)}function Qt(d,g,x,k){var B;for(d=d[g+0]+4,B=0;4>B;++B)for(g=0;4>g;++g)di(x,k,g,B,d)}function Do(d,g,x,k){d[g+0]&&ni(d,g+0,x,k),d[g+16]&&ni(d,g+16,x,k+4),d[g+32]&&ni(d,g+32,x,k+128),d[g+48]&&ni(d,g+48,x,k+128+4)}function jo(d,g,x,k){var B,U=s(16);for(B=0;4>B;++B){var $=d[g+0+B]+d[g+12+B],W=d[g+4+B]+d[g+8+B],G=d[g+4+B]-d[g+8+B],Q=d[g+0+B]-d[g+12+B];U[0+B]=$+W,U[8+B]=$-W,U[4+B]=Q+G,U[12+B]=Q-G}for(B=0;4>B;++B)$=(d=U[0+4*B]+3)+U[3+4*B],W=U[1+4*B]+U[2+4*B],G=U[1+4*B]-U[2+4*B],Q=d-U[3+4*B],x[k+0]=$+W>>3,x[k+16]=Q+G>>3,x[k+32]=$-W>>3,x[k+48]=Q-G>>3,k+=64}function xs(d,g,x){var k,B=g-32,U=ji,$=255-d[B-1];for(k=0;k<x;++k){var W,G=U,Q=$+d[g-1];for(W=0;W<x;++W)d[g+W]=G[Q+d[B+W]];g+=32}}function md(d,g){xs(d,g,4)}function vc(d,g){xs(d,g,8)}function gd(d,g){xs(d,g,16)}function bs(d,g){var x;for(x=0;16>x;++x)r(d,g+32*x,d,g-32,16)}function ka(d,g){var x;for(x=16;0<x;--x)i(d,g,d[g-1],16),g+=32}function Ca(d,g,x){var k;for(k=0;16>k;++k)i(g,x+32*k,d,16)}function Zs(d,g){var x,k=16;for(x=0;16>x;++x)k+=d[g-1+32*x]+d[g+x-32];Ca(k>>5,d,g)}function yn(d,g){var x,k=8;for(x=0;16>x;++x)k+=d[g-1+32*x];Ca(k>>4,d,g)}function wc(d,g){var x,k=8;for(x=0;16>x;++x)k+=d[g+x-32];Ca(k>>4,d,g)}function du(d,g){Ca(128,d,g)}function vt(d,g,x){return d+2*g+x+2>>2}function eo(d,g){var x,k=g-32;for(k=new Uint8Array([vt(d[k-1],d[k+0],d[k+1]),vt(d[k+0],d[k+1],d[k+2]),vt(d[k+1],d[k+2],d[k+3]),vt(d[k+2],d[k+3],d[k+4])]),x=0;4>x;++x)r(d,g+32*x,k,0,k.length)}function yd(d,g){var x=d[g-1],k=d[g-1+32],B=d[g-1+64],U=d[g-1+96];Oe(d,g+0,16843009*vt(d[g-1-32],x,k)),Oe(d,g+32,16843009*vt(x,k,B)),Oe(d,g+64,16843009*vt(k,B,U)),Oe(d,g+96,16843009*vt(B,U,U))}function Xi(d,g){var x,k=4;for(x=0;4>x;++x)k+=d[g+x-32]+d[g-1+32*x];for(k>>=3,x=0;4>x;++x)i(d,g+32*x,k,4)}function xc(d,g){var x=d[g-1+0],k=d[g-1+32],B=d[g-1+64],U=d[g-1-32],$=d[g+0-32],W=d[g+1-32],G=d[g+2-32],Q=d[g+3-32];d[g+0+96]=vt(k,B,d[g-1+96]),d[g+1+96]=d[g+0+64]=vt(x,k,B),d[g+2+96]=d[g+1+64]=d[g+0+32]=vt(U,x,k),d[g+3+96]=d[g+2+64]=d[g+1+32]=d[g+0+0]=vt($,U,x),d[g+3+64]=d[g+2+32]=d[g+1+0]=vt(W,$,U),d[g+3+32]=d[g+2+0]=vt(G,W,$),d[g+3+0]=vt(Q,G,W)}function Li(d,g){var x=d[g+1-32],k=d[g+2-32],B=d[g+3-32],U=d[g+4-32],$=d[g+5-32],W=d[g+6-32],G=d[g+7-32];d[g+0+0]=vt(d[g+0-32],x,k),d[g+1+0]=d[g+0+32]=vt(x,k,B),d[g+2+0]=d[g+1+32]=d[g+0+64]=vt(k,B,U),d[g+3+0]=d[g+2+32]=d[g+1+64]=d[g+0+96]=vt(B,U,$),d[g+3+32]=d[g+2+64]=d[g+1+96]=vt(U,$,W),d[g+3+64]=d[g+2+96]=vt($,W,G),d[g+3+96]=vt(W,G,G)}function Pa(d,g){var x=d[g-1+0],k=d[g-1+32],B=d[g-1+64],U=d[g-1-32],$=d[g+0-32],W=d[g+1-32],G=d[g+2-32],Q=d[g+3-32];d[g+0+0]=d[g+1+64]=U+$+1>>1,d[g+1+0]=d[g+2+64]=$+W+1>>1,d[g+2+0]=d[g+3+64]=W+G+1>>1,d[g+3+0]=G+Q+1>>1,d[g+0+96]=vt(B,k,x),d[g+0+64]=vt(k,x,U),d[g+0+32]=d[g+1+96]=vt(x,U,$),d[g+1+32]=d[g+2+96]=vt(U,$,W),d[g+2+32]=d[g+3+96]=vt($,W,G),d[g+3+32]=vt(W,G,Q)}function fu(d,g){var x=d[g+0-32],k=d[g+1-32],B=d[g+2-32],U=d[g+3-32],$=d[g+4-32],W=d[g+5-32],G=d[g+6-32],Q=d[g+7-32];d[g+0+0]=x+k+1>>1,d[g+1+0]=d[g+0+64]=k+B+1>>1,d[g+2+0]=d[g+1+64]=B+U+1>>1,d[g+3+0]=d[g+2+64]=U+$+1>>1,d[g+0+32]=vt(x,k,B),d[g+1+32]=d[g+0+96]=vt(k,B,U),d[g+2+32]=d[g+1+96]=vt(B,U,$),d[g+3+32]=d[g+2+96]=vt(U,$,W),d[g+3+64]=vt($,W,G),d[g+3+96]=vt(W,G,Q)}function La(d,g){var x=d[g-1+0],k=d[g-1+32],B=d[g-1+64],U=d[g-1+96];d[g+0+0]=x+k+1>>1,d[g+2+0]=d[g+0+32]=k+B+1>>1,d[g+2+32]=d[g+0+64]=B+U+1>>1,d[g+1+0]=vt(x,k,B),d[g+3+0]=d[g+1+32]=vt(k,B,U),d[g+3+32]=d[g+1+64]=vt(B,U,U),d[g+3+64]=d[g+2+64]=d[g+0+96]=d[g+1+96]=d[g+2+96]=d[g+3+96]=U}function Ra(d,g){var x=d[g-1+0],k=d[g-1+32],B=d[g-1+64],U=d[g-1+96],$=d[g-1-32],W=d[g+0-32],G=d[g+1-32],Q=d[g+2-32];d[g+0+0]=d[g+2+32]=x+$+1>>1,d[g+0+32]=d[g+2+64]=k+x+1>>1,d[g+0+64]=d[g+2+96]=B+k+1>>1,d[g+0+96]=U+B+1>>1,d[g+3+0]=vt(W,G,Q),d[g+2+0]=vt($,W,G),d[g+1+0]=d[g+3+32]=vt(x,$,W),d[g+1+32]=d[g+3+64]=vt(k,x,$),d[g+1+64]=d[g+3+96]=vt(B,k,x),d[g+1+96]=vt(U,B,k)}function bc(d,g){var x;for(x=0;8>x;++x)r(d,g+32*x,d,g-32,8)}function _s(d,g){var x;for(x=0;8>x;++x)i(d,g,d[g-1],8),g+=32}function Ri(d,g,x){var k;for(k=0;8>k;++k)i(g,x+32*k,d,8)}function Ss(d,g){var x,k=8;for(x=0;8>x;++x)k+=d[g+x-32]+d[g-1+32*x];Ri(k>>4,d,g)}function pu(d,g){var x,k=4;for(x=0;8>x;++x)k+=d[g+x-32];Ri(k>>3,d,g)}function Gt(d,g){var x,k=4;for(x=0;8>x;++x)k+=d[g-1+32*x];Ri(k>>3,d,g)}function mu(d,g){Ri(128,d,g)}function Da(d,g,x){var k=d[g-x],B=d[g+0],U=3*(B-k)+O1[1020+d[g-2*x]-d[g+x]],$=$p[112+(U+4>>3)];d[g-x]=ji[255+k+$p[112+(U+3>>3)]],d[g+0]=ji[255+B-$]}function gu(d,g,x,k){var B=d[g+0],U=d[g+x];return ns[255+d[g-2*x]-d[g-x]]>k||ns[255+U-B]>k}function yu(d,g,x,k){return 4*ns[255+d[g-x]-d[g+0]]+ns[255+d[g-2*x]-d[g+x]]<=k}function vu(d,g,x,k,B){var U=d[g-3*x],$=d[g-2*x],W=d[g-x],G=d[g+0],Q=d[g+x],oe=d[g+2*x],ye=d[g+3*x];return 4*ns[255+W-G]+ns[255+$-Q]>k?0:ns[255+d[g-4*x]-U]<=B&&ns[255+U-$]<=B&&ns[255+$-W]<=B&&ns[255+ye-oe]<=B&&ns[255+oe-Q]<=B&&ns[255+Q-G]<=B}function Oo(d,g,x,k){var B=2*k+1;for(k=0;16>k;++k)yu(d,g+k,x,B)&&Da(d,g+k,x)}function Di(d,g,x,k){var B=2*k+1;for(k=0;16>k;++k)yu(d,g+k*x,1,B)&&Da(d,g+k*x,1)}function rr(d,g,x,k){var B;for(B=3;0<B;--B)Oo(d,g+=4*x,x,k)}function _c(d,g,x,k){var B;for(B=3;0<B;--B)Di(d,g+=4,x,k)}function to(d,g,x,k,B,U,$,W){for(U=2*U+1;0<B--;){if(vu(d,g,x,U,$))if(gu(d,g,x,W))Da(d,g,x);else{var G=d,Q=g,oe=x,ye=G[Q-2*oe],ve=G[Q-oe],pe=G[Q+0],ke=G[Q+oe],_e=G[Q+2*oe],ae=27*(Ne=O1[1020+3*(pe-ve)+O1[1020+ye-ke]])+63>>7,ce=18*Ne+63>>7,Ne=9*Ne+63>>7;G[Q-3*oe]=ji[255+G[Q-3*oe]+Ne],G[Q-2*oe]=ji[255+ye+ce],G[Q-oe]=ji[255+ve+ae],G[Q+0]=ji[255+pe-ae],G[Q+oe]=ji[255+ke-ce],G[Q+2*oe]=ji[255+_e-Ne]}g+=k}}function yr(d,g,x,k,B,U,$,W){for(U=2*U+1;0<B--;){if(vu(d,g,x,U,$))if(gu(d,g,x,W))Da(d,g,x);else{var G=d,Q=g,oe=x,ye=G[Q-oe],ve=G[Q+0],pe=G[Q+oe],ke=$p[112+((_e=3*(ve-ye))+4>>3)],_e=$p[112+(_e+3>>3)],ae=ke+1>>1;G[Q-2*oe]=ji[255+G[Q-2*oe]+ae],G[Q-oe]=ji[255+ye+_e],G[Q+0]=ji[255+ve-ke],G[Q+oe]=ji[255+pe-ae]}g+=k}}function ja(d,g,x,k,B,U){to(d,g,x,1,16,k,B,U)}function Es(d,g,x,k,B,U){to(d,g,1,x,16,k,B,U)}function Oa(d,g,x,k,B,U){var $;for($=3;0<$;--$)yr(d,g+=4*x,x,1,16,k,B,U)}function Mo(d,g,x,k,B,U){var $;for($=3;0<$;--$)yr(d,g+=4,1,x,16,k,B,U)}function Ma(d,g,x,k,B,U,$,W){to(d,g,B,1,8,U,$,W),to(x,k,B,1,8,U,$,W)}function wu(d,g,x,k,B,U,$,W){to(d,g,1,B,8,U,$,W),to(x,k,1,B,8,U,$,W)}function Fa(d,g,x,k,B,U,$,W){yr(d,g+4*B,B,1,8,U,$,W),yr(x,k+4*B,B,1,8,U,$,W)}function no(d,g,x,k,B,U,$,W){yr(d,g+4,1,B,8,U,$,W),yr(x,k+4,1,B,8,U,$,W)}function Fo(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Vo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ba(){this.ua=0,this.Wa=new te,this.vb=new te,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new C}function Sc(){this.xb=this.a=0,this.l=new Lo,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ba,this.ab=0,this.gc=o(4,Vo),this.Oc=0}function As(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Lo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ro(d,g,x,k,B,U,$){for(d=d==null?0:d[g+0],g=0;g<$;++g)B[U+g]=d+x[k+g]&255,d=B[U+g]}function Ua(d,g,x,k,B,U,$){var W;if(d==null)ro(null,null,x,k,B,U,$);else for(W=0;W<$;++W)B[U+W]=d[g+W]+x[k+W]&255}function Lr(d,g,x,k,B,U,$){if(d==null)ro(null,null,x,k,B,U,$);else{var W,G=d[g+0],Q=G,oe=G;for(W=0;W<$;++W)Q=oe+(G=d[g+W])-Q,oe=x[k+W]+(-256&Q?0>Q?0:255:Q)&255,Q=G,B[U+W]=oe}}function za(d,g,x,k){var B=g.width,U=g.o;if(e(d!=null&&g!=null),0>x||0>=k||x+k>U)return null;if(!d.Cc){if(d.ga==null){var $;if(d.ga=new As,($=d.ga==null)||($=g.width*g.o,e(d.Gb.length==0),d.Gb=s($),d.Uc=0,d.Gb==null?$=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,$=1),$=!$),!$){$=d.ga;var W=d.Fa,G=d.P,Q=d.qc,oe=d.mb,ye=d.nb,ve=G+1,pe=Q-1,ke=$.l;if(e(W!=null&&oe!=null&&g!=null),Ka[0]=null,Ka[1]=ro,Ka[2]=Ua,Ka[3]=Lr,$.ca=oe,$.tb=ye,$.c=g.width,$.i=g.height,e(0<$.c&&0<$.i),1>=Q)g=0;else if($.$a=W[G+0]>>0&3,$.Z=W[G+0]>>2&3,$.Lc=W[G+0]>>4&3,G=W[G+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||G)g=0;else if(ke.put=kr,ke.ac=Wn,ke.bc=Ci,ke.ma=$,ke.width=g.width,ke.height=g.height,ke.Da=g.Da,ke.v=g.v,ke.va=g.va,ke.j=g.j,ke.o=g.o,$.$a)e:{e($.$a==1),g=Dn();t:for(;;){if(g==null){g=0;break e}if(e($!=null),$.mc=g,g.c=$.c,g.i=$.i,g.l=$.l,g.l.ma=$,g.l.width=$.c,g.l.height=$.i,g.a=0,X(g.m,W,ve,pe),!Pi($.c,$.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&vs(g.s)?($.ic=1,W=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(W),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):($.ic=0,g=Ks(g,$.c)),!g))break t;g=1;break e}$.mc=null,g=0}else g=pe>=$.c*$.i;$=!g}if($)return null;d.ga.Lc!=1?d.Ga=0:k=U-x}e(d.ga!=null),e(x+k<=U);e:{if(g=(W=d.ga).c,U=W.l.o,W.$a==0){if(ve=d.rc,pe=d.Vc,ke=d.Fa,G=d.P+1+x*g,Q=d.mb,oe=d.nb+x*g,e(G<=d.P+d.qc),W.Z!=0)for(e(Ka[W.Z]!=null),$=0;$<k;++$)Ka[W.Z](ve,pe,ke,G,Q,oe,g),ve=Q,pe=oe,oe+=g,G+=g;else for($=0;$<k;++$)r(Q,oe,ke,G,g),ve=Q,pe=oe,oe+=g,G+=g;d.rc=ve,d.Vc=pe}else{if(e(W.mc!=null),g=x+k,e(($=W.mc)!=null),e(g<=$.i),$.C>=g)g=1;else if(W.ic||fe(),W.ic){W=$.V,ve=$.Ba,pe=$.c;var _e=$.i,ae=(ke=1,G=$.$/pe,Q=$.$%pe,oe=$.m,ye=$.s,$.$),ce=pe*_e,Ne=pe*g,Le=ye.wc,Ie=ae<Ne?In(ye,Q,G):null;e(ae<=ce),e(g<=_e),e(vs(ye));t:for(;;){for(;!oe.h&&ae<Ne;){if(Q&Le||(Ie=In(ye,Q,G)),e(Ie!=null),se(oe),256>(_e=Gn(Ie.G[0],Ie.H[0],oe)))W[ve+ae]=_e,++ae,++Q>=pe&&(Q=0,++G<=g&&!(G%16)&&hi($,G));else{if(!(280>_e)){ke=0;break t}_e=ci(_e-256,oe);var Xe,We=Gn(Ie.G[4],Ie.H[4],oe);if(se(oe),!(ae>=(We=Cr(pe,We=ci(We,oe)))&&ce-ae>=_e)){ke=0;break t}for(Xe=0;Xe<_e;++Xe)W[ve+ae+Xe]=W[ve+ae+Xe-We];for(ae+=_e,Q+=_e;Q>=pe;)Q-=pe,++G<=g&&!(G%16)&&hi($,G);ae<Ne&&Q&Le&&(Ie=In(ye,Q,G))}e(oe.h==Z(oe))}hi($,G>g?g:G);break t}!ke||oe.h&&ae<ce?(ke=0,$.a=oe.h?5:3):$.$=ae,g=ke}else g=Jr($,$.V,$.Ba,$.c,$.i,g,Ys);if(!g){k=0;break e}}x+k>=U&&(d.Cc=1),k=1}if(!k)return null;if(d.Cc&&((k=d.ga)!=null&&(k.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*B}function v(d,g,x,k,B,U){for(;0<B--;){var $,W=d,G=g+(x?1:0),Q=d,oe=g+(x?0:3);for($=0;$<k;++$){var ye=Q[oe+4*$];ye!=255&&(ye*=32897,W[G+4*$+0]=W[G+4*$+0]*ye>>23,W[G+4*$+1]=W[G+4*$+1]*ye>>23,W[G+4*$+2]=W[G+4*$+2]*ye>>23)}g+=U}}function V(d,g,x,k,B){for(;0<k--;){var U;for(U=0;U<x;++U){var $=d[g+2*U+0],W=15&(Q=d[g+2*U+1]),G=4369*W,Q=(240&Q|Q>>4)*G>>16;d[g+2*U+0]=(240&$|$>>4)*G>>16&240|(15&$|$<<4)*G>>16>>4&15,d[g+2*U+1]=240&Q|W}g+=B}}function J(d,g,x,k,B,U,$,W){var G,Q,oe=255;for(Q=0;Q<B;++Q){for(G=0;G<k;++G){var ye=d[g+G];U[$+4*G]=ye,oe&=ye}g+=x,$+=W}return oe!=255}function ie(d,g,x,k,B){var U;for(U=0;U<B;++U)x[k+U]=d[g+U]>>8}function fe(){ts=v,cn=V,hn=J,On=ie}function Ee(d,g,x){T[d]=function(k,B,U,$,W,G,Q,oe,ye,ve,pe,ke,_e,ae,ce,Ne,Le){var Ie,Xe=Le-1>>1,We=W[G+0]|Q[oe+0]<<16,ct=ye[ve+0]|pe[ke+0]<<16;e(k!=null);var Qe=3*We+ct+131074>>2;for(g(k[B+0],255&Qe,Qe>>16,_e,ae),U!=null&&(Qe=3*ct+We+131074>>2,g(U[$+0],255&Qe,Qe>>16,ce,Ne)),Ie=1;Ie<=Xe;++Ie){var $t=W[G+Ie]|Q[oe+Ie]<<16,Xt=ye[ve+Ie]|pe[ke+Ie]<<16,zt=We+$t+ct+Xt+524296,Mt=zt+2*($t+ct)>>3;Qe=Mt+We>>1,We=(zt=zt+2*(We+Xt)>>3)+$t>>1,g(k[B+2*Ie-1],255&Qe,Qe>>16,_e,ae+(2*Ie-1)*x),g(k[B+2*Ie-0],255&We,We>>16,_e,ae+(2*Ie-0)*x),U!=null&&(Qe=zt+ct>>1,We=Mt+Xt>>1,g(U[$+2*Ie-1],255&Qe,Qe>>16,ce,Ne+(2*Ie-1)*x),g(U[$+2*Ie+0],255&We,We>>16,ce,Ne+(2*Ie+0)*x)),We=$t,ct=Xt}1&Le||(Qe=3*We+ct+131074>>2,g(k[B+Le-1],255&Qe,Qe>>16,_e,ae+(Le-1)*x),U!=null&&(Qe=3*ct+We+131074>>2,g(U[$+Le-1],255&Qe,Qe>>16,ce,Ne+(Le-1)*x)))}}function Re(){rs[Hp]=bR,rs[Wp]=Vb,rs[Db]=_R,rs[Gp]=Bb,rs[Kp]=Ub,rs[M1]=zb,rs[jb]=SR,rs[F1]=Vb,rs[V1]=Bb,rs[Yp]=Ub,rs[B1]=zb}function Ge(d){return d&~ER?0>d?0:255:d>>qb}function f(d,g){return Ge((19077*d>>8)+(26149*g>>8)-14234)}function E(d,g,x){return Ge((19077*d>>8)-(6419*g>>8)-(13320*x>>8)+8708)}function P(d,g){return Ge((19077*d>>8)+(33050*g>>8)-17685)}function H(d,g,x,k,B){k[B+0]=f(d,x),k[B+1]=E(d,g,x),k[B+2]=P(d,g)}function de(d,g,x,k,B){k[B+0]=P(d,g),k[B+1]=E(d,g,x),k[B+2]=f(d,x)}function we(d,g,x,k,B){var U=E(d,g,x);g=U<<3&224|P(d,g)>>3,k[B+0]=248&f(d,x)|U>>5,k[B+1]=g}function je(d,g,x,k,B){var U=240&P(d,g)|15;k[B+0]=240&f(d,x)|E(d,g,x)>>4,k[B+1]=U}function At(d,g,x,k,B){k[B+0]=255,H(d,g,x,k,B+1)}function Ot(d,g,x,k,B){de(d,g,x,k,B),k[B+3]=255}function Tt(d,g,x,k,B){H(d,g,x,k,B),k[B+3]=255}function Kt(d,g){return 0>d?0:d>g?g:d}function sn(d,g,x){T[d]=function(k,B,U,$,W,G,Q,oe,ye){for(var ve=oe+(-2&ye)*x;oe!=ve;)g(k[B+0],U[$+0],W[G+0],Q,oe),g(k[B+1],U[$+0],W[G+0],Q,oe+x),B+=2,++$,++G,oe+=2*x;1&ye&&g(k[B+0],U[$+0],W[G+0],Q,oe)}}function Ts(d,g,x){return x==0?d==0?g==0?6:5:g==0?4:0:x}function vr(d,g,x,k,B){switch(d>>>30){case 3:zo(g,x,k,B,0);break;case 2:jn(g,x,k,B);break;case 1:ni(g,x,k,B)}}function io(d,g){var x,k,B=g.M,U=g.Nb,$=d.oc,W=d.pc+40,G=d.oc,Q=d.pc+584,oe=d.oc,ye=d.pc+600;for(x=0;16>x;++x)$[W+32*x-1]=129;for(x=0;8>x;++x)G[Q+32*x-1]=129,oe[ye+32*x-1]=129;for(0<B?$[W-1-32]=G[Q-1-32]=oe[ye-1-32]=129:(i($,W-32-1,127,21),i(G,Q-32-1,127,9),i(oe,ye-32-1,127,9)),k=0;k<d.za;++k){var ve=g.ya[g.aa+k];if(0<k){for(x=-1;16>x;++x)r($,W+32*x-4,$,W+32*x+12,4);for(x=-1;8>x;++x)r(G,Q+32*x-4,G,Q+32*x+4,4),r(oe,ye+32*x-4,oe,ye+32*x+4,4)}var pe=d.Gd,ke=d.Hd+k,_e=ve.ad,ae=ve.Hc;if(0<B&&(r($,W-32,pe[ke].y,0,16),r(G,Q-32,pe[ke].f,0,8),r(oe,ye-32,pe[ke].ea,0,8)),ve.Za){var ce=$,Ne=W-32+16;for(0<B&&(k>=d.za-1?i(ce,Ne,pe[ke].y[15],4):r(ce,Ne,pe[ke+1].y,0,4)),x=0;4>x;x++)ce[Ne+128+x]=ce[Ne+256+x]=ce[Ne+384+x]=ce[Ne+0+x];for(x=0;16>x;++x,ae<<=2)ce=$,Ne=W+Hb[x],Ns[ve.Ob[x]](ce,Ne),vr(ae,_e,16*+x,ce,Ne)}else if(ce=Ts(k,B,ve.Ob[0]),Ga[ce]($,W),ae!=0)for(x=0;16>x;++x,ae<<=2)vr(ae,_e,16*+x,$,W+Hb[x]);for(x=ve.Gc,ce=Ts(k,B,ve.Dd),$o[ce](G,Q),$o[ce](oe,ye),ae=_e,ce=G,Ne=Q,255&(ve=x>>0)&&(170&ve?_d(ae,256,ce,Ne):Zi(ae,256,ce,Ne)),ve=oe,ae=ye,255&(x>>=8)&&(170&x?_d(_e,320,ve,ae):Zi(_e,320,ve,ae)),B<d.Ub-1&&(r(pe[ke].y,0,$,W+480,16),r(pe[ke].f,0,G,Q+224,8),r(pe[ke].ea,0,oe,ye+224,8)),x=8*U*d.B,pe=d.sa,ke=d.ta+16*k+16*U*d.R,_e=d.qa,ve=d.ra+8*k+x,ae=d.Ha,ce=d.Ia+8*k+x,x=0;16>x;++x)r(pe,ke+x*d.R,$,W+32*x,16);for(x=0;8>x;++x)r(_e,ve+x*d.B,G,Q+32*x,8),r(ae,ce+x*d.B,oe,ye+32*x,8)}}function so(d,g,x,k,B,U,$,W,G){var Q=[0],oe=[0],ye=0,ve=G!=null?G.kd:0,pe=G??new Va;if(d==null||12>x)return 7;pe.data=d,pe.w=g,pe.ha=x,g=[g],x=[x],pe.gb=[pe.gb];e:{var ke=g,_e=x,ae=pe.gb;if(e(d!=null),e(_e!=null),e(ae!=null),ae[0]=0,12<=_e[0]&&!n(d,ke[0],"RIFF")){if(n(d,ke[0]+8,"WEBP")){ae=3;break e}var ce=qe(d,ke[0]+4);if(12>ce||4294967286<ce){ae=3;break e}if(ve&&ce>_e[0]-8){ae=7;break e}ae[0]=ce,ke[0]+=12,_e[0]-=12}ae=0}if(ae!=0)return ae;for(ce=0<pe.gb[0],x=x[0];;){e:{var Ne=d;_e=g,ae=x;var Le=Q,Ie=oe,Xe=ke=[0];if((Qe=ye=[ye])[0]=0,8>ae[0])ae=7;else{if(!n(Ne,_e[0],"VP8X")){if(qe(Ne,_e[0]+4)!=10){ae=3;break e}if(18>ae[0]){ae=7;break e}var We=qe(Ne,_e[0]+8),ct=1+$e(Ne,_e[0]+12);if(2147483648<=ct*(Ne=1+$e(Ne,_e[0]+15))){ae=3;break e}Xe!=null&&(Xe[0]=We),Le!=null&&(Le[0]=ct),Ie!=null&&(Ie[0]=Ne),_e[0]+=18,ae[0]-=18,Qe[0]=1}ae=0}}if(ye=ye[0],ke=ke[0],ae!=0)return ae;if(_e=!!(2&ke),!ce&&ye)return 3;if(U!=null&&(U[0]=!!(16&ke)),$!=null&&($[0]=_e),W!=null&&(W[0]=0),$=Q[0],ke=oe[0],ye&&_e&&G==null){ae=0;break}if(4>x){ae=7;break}if(ce&&ye||!ce&&!ye&&!n(d,g[0],"ALPH")){x=[x],pe.na=[pe.na],pe.P=[pe.P],pe.Sa=[pe.Sa];e:{We=d,ae=g,ce=x;var Qe=pe.gb;Le=pe.na,Ie=pe.P,Xe=pe.Sa,ct=22,e(We!=null),e(ce!=null),Ne=ae[0];var $t=ce[0];for(e(Le!=null),e(Xe!=null),Le[0]=null,Ie[0]=null,Xe[0]=0;;){if(ae[0]=Ne,ce[0]=$t,8>$t){ae=7;break e}var Xt=qe(We,Ne+4);if(4294967286<Xt){ae=3;break e}var zt=8+Xt+1&-2;if(ct+=zt,0<Qe&&ct>Qe){ae=3;break e}if(!n(We,Ne,"VP8 ")||!n(We,Ne,"VP8L")){ae=0;break e}if($t[0]<zt){ae=7;break e}n(We,Ne,"ALPH")||(Le[0]=We,Ie[0]=Ne+8,Xe[0]=Xt),Ne+=zt,$t-=zt}}if(x=x[0],pe.na=pe.na[0],pe.P=pe.P[0],pe.Sa=pe.Sa[0],ae!=0)break}x=[x],pe.Ja=[pe.Ja],pe.xa=[pe.xa];e:if(Qe=d,ae=g,ce=x,Le=pe.gb[0],Ie=pe.Ja,Xe=pe.xa,We=ae[0],Ne=!n(Qe,We,"VP8 "),ct=!n(Qe,We,"VP8L"),e(Qe!=null),e(ce!=null),e(Ie!=null),e(Xe!=null),8>ce[0])ae=7;else{if(Ne||ct){if(Qe=qe(Qe,We+4),12<=Le&&Qe>Le-12){ae=3;break e}if(ve&&Qe>ce[0]-8){ae=7;break e}Ie[0]=Qe,ae[0]+=8,ce[0]-=8,Xe[0]=ct}else Xe[0]=5<=ce[0]&&Qe[We+0]==47&&!(Qe[We+4]>>5),Ie[0]=ce[0];ae=0}if(x=x[0],pe.Ja=pe.Ja[0],pe.xa=pe.xa[0],g=g[0],ae!=0)break;if(4294967286<pe.Ja)return 3;if(W==null||_e||(W[0]=pe.xa?2:1),$=[$],ke=[ke],pe.xa){if(5>x){ae=7;break}W=$,ve=ke,_e=U,d==null||5>x?d=0:5<=x&&d[g+0]==47&&!(d[g+4]>>5)?(ce=[0],Qe=[0],Le=[0],X(Ie=new M,d,g,x),tt(Ie,ce,Qe,Le)?(W!=null&&(W[0]=ce[0]),ve!=null&&(ve[0]=Qe[0]),_e!=null&&(_e[0]=Le[0]),d=1):d=0):d=0}else{if(10>x){ae=7;break}W=ke,d==null||10>x||!lu(d,g+3,x-3)?d=0:(ve=d[g+0]|d[g+1]<<8|d[g+2]<<16,_e=16383&(d[g+7]<<8|d[g+6]),d=16383&(d[g+9]<<8|d[g+8]),1&ve||3<(ve>>1&7)||!(ve>>4&1)||ve>>5>=pe.Ja||!_e||!d?d=0:($&&($[0]=_e),W&&(W[0]=d),d=1))}if(!d||($=$[0],ke=ke[0],ye&&(Q[0]!=$||oe[0]!=ke)))return 3;G!=null&&(G[0]=pe,G.offset=g-G.w,e(4294967286>g-G.w),e(G.offset==G.ha-x));break}return ae==0||ae==7&&ye&&G==null?(U!=null&&(U[0]|=pe.na!=null&&0<pe.na.length),k!=null&&(k[0]=$),B!=null&&(B[0]=ke),0):ae}function vd(d,g,x){var k=g.width,B=g.height,U=0,$=0,W=k,G=B;if(g.Da=d!=null&&0<d.Da,g.Da&&(W=d.cd,G=d.bd,U=d.v,$=d.j,11>x||(U&=-2,$&=-2),0>U||0>$||0>=W||0>=G||U+W>k||$+G>B))return 0;if(g.v=U,g.j=$,g.va=U+W,g.o=$+G,g.U=W,g.T=G,g.da=d!=null&&0<d.da,g.da){if(!yt(W,G,x=[d.ib],U=[d.hb]))return 0;g.ib=x[0],g.hb=U[0]}return g.ob=d!=null&&d.ob,g.Kb=d==null||!d.Sd,g.da&&(g.ob=g.ib<3*k/4&&g.hb<3*B/4,g.Kb=0),1}function wd(d){if(d==null)return 2;if(11>d.S){var g=d.f.RGBA;g.fb+=(d.height-1)*g.A,g.A=-g.A}else g=d.f.kb,d=d.height,g.O+=(d-1)*g.fa,g.fa=-g.fa,g.N+=(d-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(d-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(d-1)*g.lb,g.lb=-g.lb);return 0}function Ec(d,g,x,k){if(k==null||0>=d||0>=g)return 2;if(x!=null){if(x.Da){var B=x.cd,U=x.bd,$=-2&x.v,W=-2&x.j;if(0>$||0>W||0>=B||0>=U||$+B>d||W+U>g)return 2;d=B,g=U}if(x.da){if(!yt(d,g,B=[x.ib],U=[x.hb]))return 2;d=B[0],g=U[0]}}k.width=d,k.height=g;e:{var G=k.width,Q=k.height;if(d=k.S,0>=G||0>=Q||!(d>=Hp&&13>d))d=2;else{if(0>=k.Rd&&k.sd==null){$=U=B=g=0;var oe=(W=G*Wb[d])*Q;if(11>d||(U=(Q+1)/2*(g=(G+1)/2),d==12&&($=(B=G)*Q)),(Q=s(oe+2*U+$))==null){d=1;break e}k.sd=Q,11>d?((G=k.f.RGBA).eb=Q,G.fb=0,G.A=W,G.size=oe):((G=k.f.kb).y=Q,G.O=0,G.fa=W,G.Fd=oe,G.f=Q,G.N=0+oe,G.Ab=g,G.Cd=U,G.ea=Q,G.W=0+oe+U,G.Db=g,G.Ed=U,d==12&&(G.F=Q,G.J=0+oe+2*U),G.Tc=$,G.lb=B)}if(g=1,B=k.S,U=k.width,$=k.height,B>=Hp&&13>B)if(11>B)d=k.f.RGBA,g&=(W=Math.abs(d.A))*($-1)+U<=d.size,g&=W>=U*Wb[B],g&=d.eb!=null;else{d=k.f.kb,W=(U+1)/2,oe=($+1)/2,G=Math.abs(d.fa),Q=Math.abs(d.Ab);var ye=Math.abs(d.Db),ve=Math.abs(d.lb),pe=ve*($-1)+U;g&=G*($-1)+U<=d.Fd,g&=Q*(oe-1)+W<=d.Cd,g=(g&=ye*(oe-1)+W<=d.Ed)&G>=U&Q>=W&ye>=W,g&=d.y!=null,g&=d.f!=null,g&=d.ea!=null,B==12&&(g&=ve>=U,g&=pe<=d.Tc,g&=d.F!=null)}else g=0;d=g?0:2}}return d!=0||x!=null&&x.fd&&(d=wd(k)),d}var wr=64,Ac=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Tc=24,Nc=32,xd=8,fi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(d){return d},T.Predictor2=function(d,g,x){return g[x+0]},T.Predictor3=function(d,g,x){return g[x+1]},T.Predictor4=function(d,g,x){return g[x-1]},T.Predictor5=function(d,g,x){return He(He(d,g[x+1]),g[x+0])},T.Predictor6=function(d,g,x){return He(d,g[x-1])},T.Predictor7=function(d,g,x){return He(d,g[x+0])},T.Predictor8=function(d,g,x){return He(g[x-1],g[x+0])},T.Predictor9=function(d,g,x){return He(g[x+0],g[x+1])},T.Predictor10=function(d,g,x){return He(He(d,g[x-1]),He(g[x+0],g[x+1]))},T.Predictor11=function(d,g,x){var k=g[x+0];return 0>=xt(k>>24&255,d>>24&255,(g=g[x-1])>>24&255)+xt(k>>16&255,d>>16&255,g>>16&255)+xt(k>>8&255,d>>8&255,g>>8&255)+xt(255&k,255&d,255&g)?k:d},T.Predictor12=function(d,g,x){var k=g[x+0];return(st((d>>24&255)+(k>>24&255)-((g=g[x-1])>>24&255))<<24|st((d>>16&255)+(k>>16&255)-(g>>16&255))<<16|st((d>>8&255)+(k>>8&255)-(g>>8&255))<<8|st((255&d)+(255&k)-(255&g)))>>>0},T.Predictor13=function(d,g,x){var k=g[x-1];return(ht((d=He(d,g[x+0]))>>24&255,k>>24&255)<<24|ht(d>>16&255,k>>16&255)<<16|ht(d>>8&255,k>>8&255)<<8|ht(d>>0&255,k>>0&255))>>>0};var j1=T.PredictorAdd0;T.PredictorAdd1=me,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var bd=T.PredictorAdd2;Je("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Vp,Ji=T.ColorIndexInverseTransform,Ic=T.MapARGB,Bp=T.VP8LColorIndexInverseTransformAlpha,Up=T.MapAlpha,qa=T.VP8LPredictorsAdd=[];qa.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var xu,pi,ti,$a,Bo,Uo,kc,zo,jn,_d,ni,Zi,Cc,zp,Sd,bu,_u,Ha,Su,Pc,Eu,Wa,Ed,es,ts,cn,hn,On,ir=s(511),qo=s(2041),Ad=s(225),Lc=s(767),qp=0,O1=qo,$p=Ad,ji=Lc,ns=ir,Hp=0,Wp=1,Db=2,Gp=3,Kp=4,M1=5,jb=6,F1=7,V1=8,Yp=9,B1=10,aR=[2,3,7],lR=[3,3,11],Ob=[280,256,256,256,40],uR=[0,1,1,1,0],cR=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hR=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dR=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],fR=8,U1=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],z1=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Td=null,pR=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],mR=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Mb=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gR=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],yR=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vR=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],wR=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ga=[],Ns=[],$o=[],xR=1,Fb=2,Ka=[],rs=[];Ee("UpsampleRgbLinePair",H,3),Ee("UpsampleBgrLinePair",de,3),Ee("UpsampleRgbaLinePair",Tt,4),Ee("UpsampleBgraLinePair",Ot,4),Ee("UpsampleArgbLinePair",At,4),Ee("UpsampleRgba4444LinePair",je,2),Ee("UpsampleRgb565LinePair",we,2);var bR=T.UpsampleRgbLinePair,_R=T.UpsampleBgrLinePair,Vb=T.UpsampleRgbaLinePair,Bb=T.UpsampleBgraLinePair,Ub=T.UpsampleArgbLinePair,zb=T.UpsampleRgba4444LinePair,SR=T.UpsampleRgb565LinePair,Qp=16,Xp=1<<Qp-1,Nd=-227,q1=482,qb=6,ER=(256<<qb)-1,$b=0,AR=s(256),TR=s(256),NR=s(256),IR=s(256),kR=s(q1-Nd),CR=s(q1-Nd);sn("YuvToRgbRow",H,3),sn("YuvToBgrRow",de,3),sn("YuvToRgbaRow",Tt,4),sn("YuvToBgraRow",Ot,4),sn("YuvToArgbRow",At,4),sn("YuvToRgba4444Row",je,2),sn("YuvToRgb565Row",we,2);var Hb=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Jp=[0,2,8],PR=[8,7,6,4,4,2,2,2,1,1,1,1],LR=1;this.WebPDecodeRGBA=function(d,g,x,k,B){var U=Wp,$=new Fo,W=new gr;$.ba=W,W.S=U,W.width=[W.width],W.height=[W.height];var G=W.width,Q=W.height,oe=new ki;if(oe==null||d==null)var ye=2;else e(oe!=null),ye=so(d,g,x,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(ye!=0?G=0:(G!=null&&(G[0]=oe.width[0]),Q!=null&&(Q[0]=oe.height[0]),G=1),G){W.width=W.width[0],W.height=W.height[0],k!=null&&(k[0]=W.width),B!=null&&(B[0]=W.height);e:{if(k=new Lo,(B=new Va).data=d,B.w=g,B.ha=x,B.kd=1,g=[0],e(B!=null),((d=so(B.data,B.w,B.ha,null,null,null,g,null,B))==0||d==7)&&g[0]&&(d=4),(g=d)==0){if(e($!=null),k.data=B.data,k.w=B.w+B.offset,k.ha=B.ha-B.offset,k.put=kr,k.ac=Wn,k.bc=Ci,k.ma=$,B.xa){if((d=Dn())==null){$=1;break e}if(function(ve,pe){var ke=[0],_e=[0],ae=[0];t:for(;;){if(ve==null)return 0;if(pe==null)return ve.a=2,0;if(ve.l=pe,ve.a=0,X(ve.m,pe.data,pe.w,pe.ha),!tt(ve.m,ke,_e,ae)){ve.a=3;break t}if(ve.xb=Fb,pe.width=ke[0],pe.height=_e[0],!Pi(ke[0],_e[0],1,ve,null))break t;return 1}return e(ve.a!=0),0}(d,k)){if(k=(g=Ec(k.width,k.height,$.Oa,$.ba))==0){t:{k=d;n:for(;;){if(k==null){k=0;break t}if(e(k.s.yc!=null),e(k.s.Ya!=null),e(0<k.s.Wb),e((x=k.l)!=null),e((B=x.ma)!=null),k.xb!=0){if(k.ca=B.ba,k.tb=B.tb,e(k.ca!=null),!vd(B.Oa,x,Gp)){k.a=2;break n}if(!Ks(k,x.width)||x.da)break n;if((x.da||Et(k.ca.S))&&fe(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&fe()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!ot(k.s.vb,k.s.Wa.Xa)){k.a=1;break n}k.xb=0}if(!Jr(k,k.V,k.Ba,k.c,k.i,x.o,Aa))break n;B.Dc=k.Ma,k=1;break t}e(k.a!=0),k=0}k=!k}k&&(g=d.a)}else g=d.a}else{if((d=new au)==null){$=1;break e}if(d.Fa=B.na,d.P=B.P,d.qc=B.Sa,uu(d,k)){if((g=Ec(k.width,k.height,$.Oa,$.ba))==0){if(d.Aa=0,x=$.Oa,e((B=d)!=null),x!=null){if(0<(G=0>(G=x.Md)?0:100<G?255:255*G/100)){for(Q=oe=0;4>Q;++Q)12>(ye=B.pb[Q]).lc&&(ye.ia=G*PR[0>ye.lc?0:ye.lc]>>3),oe|=ye.ia;oe&&(alert("todo:VP8InitRandom"),B.ia=1)}B.Ga=x.Id,100<B.Ga?B.Ga=100:0>B.Ga&&(B.Ga=0)}yc(d,k)||(g=d.a)}}else g=d.a}g==0&&$.Oa!=null&&$.Oa.fd&&(g=wd($.ba))}$=g}U=$!=0?null:11>U?W.f.RGBA.eb:W.f.kb.y}else U=null;return U};var Wb=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,L){for(var F="",I=0;I<4;I++)F+=String.fromCharCode(T[L++]);return F}function c(T,L){return(T[L+0]<<0|T[L+1]<<8|T[L+2]<<16)>>>0}function h(T,L){return(T[L+0]<<0|T[L+1]<<8|T[L+2]<<16|T[L+3]<<24)>>>0}new l;var m=[0],p=[0],_=[],b=new l,N=t,w=function(T,L){var F={},I=0,C=!1,j=0,Y=0;if(F.frames=[],!function(R,Z,ne,se){for(var ge=0;ge<se;ge++)if(R[Z+ge]!=ne.charCodeAt(ge))return!0;return!1}(T,L,"RIFF",4)){var le,he;for(h(T,L+=4),L+=8;L<T.length;){var ue=u(T,L),X=h(T,L+=4);L+=4;var re=X+(1&X);switch(ue){case"VP8 ":case"VP8L":F.frames[I]===void 0&&(F.frames[I]={}),(M=F.frames[I]).src_off=C?Y:L-8,M.src_size=j+X+8,I++,C&&(C=!1,j=0,Y=0);break;case"VP8X":(M=F.header={}).feature_flags=T[L];var z=L+4;M.canvas_width=1+c(T,z),z+=3,M.canvas_height=1+c(T,z),z+=3;break;case"ALPH":C=!0,j=re+8,Y=L-8;break;case"ANIM":(M=F.header).bgcolor=h(T,L),z=L+4,M.loop_count=(le=T)[(he=z)+0]<<0|le[he+1]<<8,z+=2;break;case"ANMF":var Ae,M;(M=F.frames[I]={}).offset_x=2*c(T,L),L+=3,M.offset_y=2*c(T,L),L+=3,M.width=1+c(T,L),L+=3,M.height=1+c(T,L),L+=3,M.duration=c(T,L),L+=3,Ae=T[L++],M.dispose=1&Ae,M.blend=Ae>>1&1}ue!="ANMF"&&(L+=re)}return F}}(N,0);w.response=N,w.rgbaoutput=!0,w.dataurl=!1;var S=w.header?w.header:null,A=w.frames?w.frames:null;if(S){S.loop_counter=S.loop_count,m=[S.canvas_height],p=[S.canvas_width];for(var O=0;O<A.length&&A[O].blend!=0;O++);}var K=A[0],q=b.WebPDecodeRGBA(N,K.src_off,K.src_size,p,m);K.rgba=q,K.imgwidth=p[0],K.imgheight=m[0];for(var D=0;D<p[0]*m[0]*4;D++)_[D]=q[D];return this.width=p,this.height=m,this.data=_,this}(function(t){var e=function(){return typeof b5=="function"},n=function(m,p,_,b){var N=4,w=o;switch(b){case t.image_compression.FAST:N=1,w=s;break;case t.image_compression.MEDIUM:N=6,w=a;break;case t.image_compression.SLOW:N=9,w=l}m=r(m,p,_,w);var S=b5(m,{level:N});return t.__addimage__.arrayBufferToBinaryString(S)},r=function(m,p,_,b){for(var N,w,S,A=m.length/p,O=new Uint8Array(m.length+A),K=c(),q=0;q<A;q+=1){if(S=q*p,N=m.subarray(S,S+p),b)O.set(b(N,_,w),S+q);else{for(var D,T=K.length,L=[];D<T;D+=1)L[D]=K[D](N,_,w);var F=h(L.concat());O.set(L[F],S+q)}w=N}return O},i=function(m){var p=Array.apply([],m);return p.unshift(0),p},s=function(m,p){var _,b=[],N=m.length;b[0]=1;for(var w=0;w<N;w+=1)_=m[w-p]||0,b[w+1]=m[w]-_+256&255;return b},o=function(m,p,_){var b,N=[],w=m.length;N[0]=2;for(var S=0;S<w;S+=1)b=_&&_[S]||0,N[S+1]=m[S]-b+256&255;return N},a=function(m,p,_){var b,N,w=[],S=m.length;w[0]=3;for(var A=0;A<S;A+=1)b=m[A-p]||0,N=_&&_[A]||0,w[A+1]=m[A]+256-(b+N>>>1)&255;return w},l=function(m,p,_){var b,N,w,S,A=[],O=m.length;A[0]=4;for(var K=0;K<O;K+=1)b=m[K-p]||0,N=_&&_[K]||0,w=_&&_[K-p]||0,S=u(b,N,w),A[K+1]=m[K]-S+256&255;return A},u=function(m,p,_){if(m===p&&p===_)return m;var b=Math.abs(p-_),N=Math.abs(m-_),w=Math.abs(m+p-_-_);return b<=N&&b<=w?m:N<=w?p:_},c=function(){return[i,s,o,a,l]},h=function(m){var p=m.map(function(_){return _.reduce(function(b,N){return b+Math.abs(N)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(m,p,_,b){var N,w,S,A,O,K,q,D,T,L,F,I,C,j,Y,le=this.decode.FLATE_DECODE,he="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(S=new fee(m)).imgData,w=S.bits,N=S.colorSpace,O=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){T=(D=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,F=new Uint8Array(T*S.colors),L=new Uint8Array(T);var ue,X=S.pixelBitlength-S.bits;for(j=0,Y=0;j<T;j++){for(C=D[j],ue=0;ue<X;)F[Y++]=C>>>ue&255,ue+=S.bits;L[j]=C>>>ue&255}}if(S.bits===16){T=(D=new Uint32Array(S.decodePixels().buffer)).length,F=new Uint8Array(T*(32/S.pixelBitlength)*S.colors),L=new Uint8Array(T*(32/S.pixelBitlength)),I=S.colors>1,j=0,Y=0;for(var re=0;j<T;)C=D[j++],F[Y++]=C>>>0&255,I&&(F[Y++]=C>>>16&255,C=D[j++],F[Y++]=C>>>0&255),L[re++]=C>>>16&255;w=8}b!==t.image_compression.NONE&&e()?(m=n(F,S.width*S.colors,S.colors,b),q=n(L,S.width,1,b)):(m=F,q=L,le=void 0)}if(S.colorType===3&&(N=this.color_spaces.INDEXED,K=S.palette,S.transparency.indexed)){var z=S.transparency.indexed,Ae=0;for(j=0,T=z.length;j<T;++j)Ae+=z[j];if((Ae/=255)===T-1&&z.indexOf(0)!==-1)A=[z.indexOf(0)];else if(Ae!==T){for(D=S.decodePixels(),L=new Uint8Array(D.length),j=0,T=D.length;j<T;j++)L[j]=z[D[j]];q=n(L,S.width,1)}}var M=function(R){var Z;switch(R){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(b);return le===this.decode.FLATE_DECODE&&(he="/Predictor "+M+" "),he+="/Colors "+O+" /BitsPerComponent "+w+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(q&&this.__addimage__.isArrayBuffer(q)||this.__addimage__.isArrayBufferView(q))&&(q=this.__addimage__.arrayBufferToBinaryString(q)),{alias:_,data:m,index:p,filter:le,decodeParameters:he,transparency:A,palette:K,sMask:q,predictor:M,width:S.width,height:S.height,bitsPerComponent:w,colorSpace:N}}}})(ft.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new pee(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new wv(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(ft.API),Ps.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ps.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){an.log("bit decode error:"+n)}},Ps.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ps.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ps.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ps.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},Ps.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},Ps.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ps.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ps.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ps(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new wv(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ft.API),iT.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new iT(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new wv(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(ft.API),ft.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],m=r[u+2],p=r[u+3];s[a++]=c,s[a++]=h,s[a++]=m,o[l++]=p}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:_,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},ft.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},zc=ft.API,zm=zc.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,p=t.length,_=0,b=a[0]||l,N=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?N.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=h&&en(u[r])==="object"&&!isNaN(parseInt(u[r][_],10))?u[r][_]/c:0,N.push((a[r]||b)/l+m)),_=r;return N},eT=zc.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return zc.processArabic&&(t=zc.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:zm.apply(this,arguments).reduce(function(s,o){return s+o},0)},tT=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},nT=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,c=[],h=[c],m=n.textIndent||0,p=0,_=0,b=t.split(" "),N=zm.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?b[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),S=[];b.map(function(O){(O=O.split(/\s*\n/)).length>1?S=S.concat(O.map(function(K,q){return(q&&K.length?`
`:"")+K})):S.push(O[0])}),b=S,l=eT.apply(this,[w,n])}for(s=0,o=b.length;s<o;s++){var A=0;if(r=b[s],l&&r[0]==`
`&&(r=r.substr(1),A=1),m+p+(_=(i=zm.apply(this,[r,n])).reduce(function(O,K){return O+K},0))>e||A){if(_>e){for(a=tT.apply(this,[r,i,e-(m+p),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);_=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(O,K){return O+K},0)}else c=[r];h.push(c),m=_+l,p=N}else c.push(r),m+=p+_,p=N}return u=l?function(O,K){return(K?w:"")+O.join(" ")}:function(O){return O.join(" ")},h.map(u)},zc.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(nT.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var m,p,_,b,N=["{"];for(var w in h){if(m=h[w],isNaN(parseInt(w,10))?p="'"+w+"'":(w=parseInt(w,10),p=(p=s(w).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof m=="number")m<0?(_=s(m).slice(3),b="-"):(_=s(m).slice(2),b=""),_=b+_.slice(0,-1)+r[_.slice(-1)];else{if(en(m)!=="object")throw new Error("Don't know what to do with value type "+en(m)+".");_=o(m)}N.push(p+_)}return N.push("}"),N.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,_,b,N={},w=1,S=N,A=[],O="",K="",q=h.length-1,D=1;D<q;D+=1)(b=h[D])=="'"?m?(_=m.join(""),m=void 0):m=[]:m?m.push(b):b=="{"?(A.push([S,_]),S={},_=void 0):b=="}"?((p=A.pop())[0][p[1]]=S,_=void 0,S=p[0]):b=="-"?w=-1:_===void 0?n.hasOwnProperty(b)?(O+=n[b],_=parseInt(O,16)*w,w=1,O=""):O+=b:n.hasOwnProperty(b)?(K+=n[b],S[_]=parseInt(K,16)*w,w=1,_=void 0,K=""):K+=b;return N},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,p=c.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var _=u.Unicode[m.postScriptName];_&&(m.metadata.Unicode.encoding=_,m.encoding=_.codePages[0])}])}(ft.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(kf(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(ft),function(t){function e(){return(pt.canvg?Promise.resolve(pt.canvg):g5(()=>import("./index.es-iWDEUeKu.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}ft.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw an.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw an.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=o;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(_){return _.fromString(h,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(m)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),ft.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},ft.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,h=0;function m(_,b){var N,w=!1;for(N=0;N<_.length;N+=1)_[N]===b&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(h=0;h<p;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(en(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var _,b=[];for(_ in n)n[_].explicitSet===!0&&(n[_].type==="name"?b.push("/"+_+" /"+n[_].value):b.push("/"+_+" "+n[_].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(ft.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,m=s.length;h<m;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,h,m;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(a=Object.keys(s).sort(function(p,_){return p-_})).length;h<m;h++)o=a[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",_=0;_<m.length;_++)p+=String.fromCharCode(m[_]);var b=u();c({data:p,addLength1:!0,objectId:b}),l("endobj");var N=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:N}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Kc(a.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Kc(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+N+" 0 R"),l("/BaseFont /"+Kc(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var _=u();c({data:m,addLength1:!0,objectId:_}),l("endobj");var b=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var N=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+_+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Kc(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+Kc(a.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},h=s.mutex||{},m=h.pdfEscape,p=h.activeFontKey,_=h.fonts,b=p,N="",w=0,S="",A=_[b].encoding;if(_[b].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:h};for(S=a,b=p,Array.isArray(a)&&(S=a[0]),w=0;w<S.length;w+=1)_[b].metadata.hasOwnProperty("cmap")&&(o=_[b].metadata.cmap.unicode.codeMap[S[w].charCodeAt(0)]),o||S[w].charCodeAt(0)<256&&_[b].metadata.hasOwnProperty("Unicode")?N+=S[w]:N+="";var O="";return parseInt(b.slice(1))<14||A==="WinAnsiEncoding"?O=m(N,b).split("").map(function(K){return K.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(O=n(N,_[b])),h.isHex=!0,{text:O,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(ft),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(ft.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,A=0;this.__bidiEngine__={};var O=function(I){var C=I.charCodeAt(),j=C>>8,Y=b[j];return Y!==void 0?h[256*Y+(255&C)]:j===252||j===253?"AL":w.test(j)?"L":j===8?"R":"N"},K=function(I){for(var C,j=0;j<I.length;j++){if((C=O(I.charAt(j)))==="L")return!1;if(C==="R")return!0}return!1},q=function(I,C,j,Y){var le,he,ue,X,re=C[Y];switch(re){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(re="AN");break;case"AL":S=!0,re="R";break;case"WS":re="N";break;case"CS":Y<1||Y+1>=C.length||(le=j[Y-1])!=="EN"&&le!=="AN"||(he=C[Y+1])!=="EN"&&he!=="AN"?re="N":S&&(he="AN"),re=he===le?he:"N";break;case"ES":re=(le=Y>0?j[Y-1]:"B")==="EN"&&Y+1<C.length&&C[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&j[Y-1]==="EN"){re="EN";break}if(S){re="N";break}for(ue=Y+1,X=C.length;ue<X&&C[ue]==="ET";)ue++;re=ue<X&&C[ue]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=C.length,ue=Y+1;ue<X&&C[ue]==="NSM";)ue++;if(ue<X){var z=I[Y],Ae=z>=1425&&z<=2303||z===64286;if(le=C[ue],Ae&&(le==="R"||le==="AL")){re="R";break}}}re=Y<1||(le=C[Y-1])==="B"?"N":j[Y-1];break;case"B":S=!1,i=!0,re=A;break;case"S":s=!0,re="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":re="N"}return re},D=function(I,C,j){var Y=I.split("");return j&&T(Y,j,{hiLevel:A}),Y.reverse(),C&&C.reverse(),Y.join("")},T=function(I,C,j){var Y,le,he,ue,X,re=-1,z=I.length,Ae=0,M=[],R=A?p:m,Z=[];for(S=!1,i=!1,s=!1,le=0;le<z;le++)Z[le]=O(I[le]);for(he=0;he<z;he++){if(X=Ae,M[he]=q(I,Z,M,he),Y=240&(Ae=R[X][_[M[he]]]),Ae&=15,C[he]=ue=R[Ae][5],Y>0)if(Y===16){for(le=re;le<he;le++)C[le]=1;re=-1}else re=-1;if(R[Ae][6])re===-1&&(re=he);else if(re>-1){for(le=re;le<he;le++)C[le]=ue;re=-1}Z[he]==="B"&&(C[he]=0),j.hiLevel|=ue}s&&function(ne,se,ge){for(var xe=0;xe<ge;xe++)if(ne[xe]==="S"){se[xe]=A;for(var be=xe-1;be>=0&&ne[be]==="WS";be--)se[be]=A}}(Z,C,z)},L=function(I,C,j,Y,le){if(!(le.hiLevel<I)){if(I===1&&A===1&&!i)return C.reverse(),void(j&&j.reverse());for(var he,ue,X,re,z=C.length,Ae=0;Ae<z;){if(Y[Ae]>=I){for(X=Ae+1;X<z&&Y[X]>=I;)X++;for(re=Ae,ue=X-1;re<ue;re++,ue--)he=C[re],C[re]=C[ue],C[ue]=he,j&&(he=j[re],j[re]=j[ue],j[ue]=he);Ae=X}Ae++}}},F=function(I,C,j){var Y=I.split(""),le={hiLevel:A};return j||(j=[]),T(Y,j,le),function(he,ue,X){if(X.hiLevel!==0&&c)for(var re,z=0;z<he.length;z++)ue[z]===1&&(re=N.indexOf(he[z]))>=0&&(he[z]=N[re+1])}(Y,j,le),L(2,Y,C,j,le),L(1,Y,C,j,le),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(I,C,j){if(function(le,he){if(he)for(var ue=0;ue<le.length;ue++)he[ue]=ue;a===void 0&&(a=K(le)),u===void 0&&(u=K(le))}(I,C),o||!l||u)if(o&&l&&a^u)A=a?1:0,I=D(I,C,j);else if(!o&&l&&u)A=a?1:0,I=F(I,C,j),I=D(I,C);else if(!o||a||l||u){if(o&&!l&&a^u)I=D(I,C),a?(A=0,I=F(I,C,j)):(A=1,I=F(I,C,j),I=D(I,C));else if(o&&a&&!l&&u)A=1,I=F(I,C,j),I=D(I,C);else if(!o&&!l&&a^u){var Y=c;a?(A=1,I=F(I,C,j),A=0,c=!1,I=F(I,C,j),c=Y):(A=0,I=F(I,C,j),I=D(I,C),A=1,c=!1,I=F(I,C,j),c=Y,I=D(I,C))}}else A=0,I=F(I,C,j);else A=a?1:0,I=F(I,C,j);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,u=I.isOutputRtl,c=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(ft),ft.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Kl(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new kee(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new mee(this.contents),this.head=new yee(this),this.name=new _ee(this),this.cmap=new sR(this),this.toUnicode={},this.hhea=new vee(this),this.maxp=new See(this),this.hmtx=new Eee(this),this.post=new xee(this),this.os2=new wee(this),this.loca=new Iee(this),this.glyf=new Aee(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Ws,Kl=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),mee=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,c,h,m,p,_,b;for(b in p=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(p)/l),o=Math.floor(h/l),c=16*p-h,(i=new Kl).writeInt(this.scalarType),i.writeShort(p),i.writeShort(h),i.writeShort(o),i.writeShort(c),s=16*p,u=i.pos+s,a=null,_=[],n)for(m=n[b],i.writeString(b),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),_=_.concat(m),b==="head"&&(a=u),u+=m.length;u%4;)_.push(0),u++;return i.write(_),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=oR.call(n);n.length%4;)n.push(0);for(s=new Kl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),gee={}.hasOwnProperty,Io=function(t,e){for(var n in e)gee.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Ws=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var yee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Kl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),sT=function(){function t(e,n){var r,i,s,o,a,l,u,c,h,m,p,_,b,N,w,S,A;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),e.pos+=2,b=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),u=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),c=function(){var O,K;for(K=[],l=O=0;0<=m?O<m:O>m;l=0<=m?++O:--O)K.push(e.readUInt16());return K}(),i=(this.length-e.pos+this.offset)/2,a=function(){var O,K;for(K=[],l=O=0;0<=i?O<i:O>i;l=0<=i?++O:--O)K.push(e.readUInt16());return K}(),l=w=0,A=s.length;w<A;l=++w)for(N=s[l],r=S=_=b[l];_<=N?S<=N:S>=N;r=_<=N?++S:--S)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-_)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=h}return t.encode=function(e,n){var r,i,s,o,a,l,u,c,h,m,p,_,b,N,w,S,A,O,K,q,D,T,L,F,I,C,j,Y,le,he,ue,X,re,z,Ae,M,R,Z,ne,se,ge,xe,be,Oe,De,$e;switch(Y=new Kl,o=Object.keys(e).sort(function(qe,ot){return qe-ot}),n){case"macroman":for(b=0,N=function(){var qe=[];for(_=0;_<256;++_)qe.push(0);return qe}(),S={0:0},s={},le=0,re=o.length;le<re;le++)S[be=e[i=o[le]]]==null&&(S[be]=++b),s[i]={old:e[i],new:S[e[i]]},N[i]=S[e[i]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(N),{charMap:s,subtable:Y.data,maxGlyphID:b+1};case"unicode":for(C=[],h=[],A=0,S={},r={},w=u=null,he=0,z=o.length;he<z;he++)S[K=e[i=o[he]]]==null&&(S[K]=++A),r[i]={old:K,new:S[K]},a=S[K]-i,w!=null&&a===u||(w&&h.push(w),C.push(i),u=a),w=i;for(w&&h.push(w),h.push(65535),C.push(65535),F=2*(L=C.length),T=2*Math.pow(Math.log(L)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,D=2*L-T,l=[],q=[],p=[],_=ue=0,Ae=C.length;ue<Ae;_=++ue){if(I=C[_],c=h[_],I===65535){l.push(0),q.push(0);break}if(I-(j=r[I].new)>=32768)for(l.push(0),q.push(2*(p.length+L-_)),i=X=I;I<=c?X<=c:X>=c;i=I<=c?++X:--X)p.push(r[i].new);else l.push(j-I),q.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*L+2*p.length),Y.writeUInt16(0),Y.writeUInt16(F),Y.writeUInt16(T),Y.writeUInt16(m),Y.writeUInt16(D),ge=0,M=h.length;ge<M;ge++)i=h[ge],Y.writeUInt16(i);for(Y.writeUInt16(0),xe=0,R=C.length;xe<R;xe++)i=C[xe],Y.writeUInt16(i);for(Oe=0,Z=l.length;Oe<Z;Oe++)a=l[Oe],Y.writeUInt16(a);for(De=0,ne=q.length;De<ne;De++)O=q[De],Y.writeUInt16(O);for($e=0,se=p.length;$e<se;$e++)b=p[$e],Y.writeUInt16(b);return{charMap:r,subtable:Y.data,maxGlyphID:A+1}}},t}(),sR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new sT(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=sT.encode(n,r),(s=new Kl).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),vee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),wee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),xee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}).call(this)}},e}(),bee=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},_ee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,c,h,m,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=h=0,m=i.length;h<m;o=++h)s=i[o],n.pos=s.offset,c=n.readString(s.length),a=new bee(c,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),See=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Eee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)h.push(n.readInt16());return h}(),this.widths=(function(){var c,h,m,p;for(p=[],c=0,h=(m=this.metrics).length;c<h;c++)o=m[c],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),oR=[].slice,Aee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,c,h,m;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Kl(r.read(s))).readShort(),c=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new Nee(l,c,m,u,h):new Tee(l,a,c,m,u,h),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Tee=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Nee=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Kl(oR.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Iee=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Io(e,Ws),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),kee=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,c,h,m,p,_,b,N,w;for(i in r=sR.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=r.charMap)p[(l=w[i]).old]=l.new;for(_ in m=r.maxGlyphID,o)_ in p||(p[_]=m++);return c=function(S){var A,O;for(A in O={},S)O[S[A]]=A;return O}(p),h=Object.keys(c).sort(function(S,A){return S-A}),b=function(){var S,A,O;for(O=[],S=0,A=h.length;S<A;S++)a=h[S],O.push(c[a]);return O}(),s=this.font.glyf.encode(o,b,p),u=this.font.loca.encode(s.offsets,b),N={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},t}();ft.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const Cee=()=>{const[t,e]=ee.useState(!0),[n,r]=ee.useState(!0),[i,s]=ee.useState(!0),[o,a]=ee.useState(!0),[l,u]=ee.useState(!0),[c,h]=ee.useState(null),[m,p]=ee.useState(!0),{user:_}=ui(),b={userName:(_==null?void 0:_.displayName)||"John Doe",ailment:"Fever, Cough",suggestedTreatment:"Paracetamol 500mg - 3 times a day",doctorSuggestions:[{name:"Dr. Smith",specialization:"General Physician",rating:"4.5/5"},{name:"Dr. Jane",specialization:"Internal Medicine",rating:"4.2/5"}],notes:"Drink plenty of water and rest well.",date:new Date().toLocaleDateString()};ee.useEffect(()=>{(async()=>{if(_)try{const S=si(ln(St,"bookings"),or("userId","==",_.uid),lp("createdAt","desc"),vW(1)),A=await ds(S);if(!A.empty){const O=A.docs[0].data();h({id:A.docs[0].id,doctorName:O.doctorName,appointmentTime:O.appointmentTime,medicalCenterName:O.medicalCenterName,location:O.location,status:O.status})}}catch(S){console.error("Error fetching booking:",S)}finally{p(!1)}})()},[_]);const N=()=>{const w=new ft;w.setFontSize(18),w.text("MediLink AI Treatment Report",20,20),w.setFontSize(12);let S=40;w.text(`Name: ${b.userName}`,20,S),S+=10,w.text(`Ailments: ${b.ailment}`,20,S),S+=10,n&&(w.text(`Suggested Treatment: ${b.suggestedTreatment}`,20,S),S+=10),t&&c&&(w.text(`Doctor: ${c.doctorName}`,20,S),S+=10),i&&(w.text(`Notes: ${b.notes}`,20,S),S+=10),o&&(w.text("Doctor Suggestions:",20,S),S+=10,b.doctorSuggestions.forEach((A,O)=>{w.text(`${O+1}. ${A.name} (${A.specialization})`,20,S),w.text(`Rating: ${A.rating}`,60,S+5),S+=15})),l&&c&&(w.text("Appointment Details:",20,S),S+=10,w.text(`Doctor: ${c.doctorName}`,20,S),S+=10,w.text(`Date & Time: ${c.appointmentTime}`,20,S),S+=10,w.text(`Location: ${c.location}`,20,S),S+=10,w.text(`Medical Center: ${c.medicalCenterName}`,20,S),S+=10,w.text(`Status: ${c.status}`,20,S),S+=10),w.text(`Report Date: ${b.date}`,20,S),w.save("Treatment_Report.pdf")};return y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},className:"p-6 max-w-4xl mx-auto bg-gray-900 text-gray-100 rounded-xl space-y-6",children:[y.jsxs("h2",{className:"text-3xl font-bold text-cyan-400 flex items-center space-x-2",children:[y.jsx(CW,{className:"w-6 h-6"}),y.jsx("span",{children:"Generate Treatment Report"})]}),y.jsx("p",{className:"text-sm text-gray-400",children:"Customize your report before generating. Real-time preview below."}),y.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[{id:1,label:"Include Doctor Evidence",state:t,setter:e},{id:2,label:"Include Treatment Details",state:n,setter:r},{id:3,label:"Include Notes",state:i,setter:s},{id:4,label:"Include Doctor Suggestions",state:o,setter:a},{id:5,label:"Include Appointment Details",state:l,setter:u}].map(({id:w,label:S,state:A,setter:O})=>y.jsx(at.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:w*.2},children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("label",{className:"text-sm",children:[S,":"]}),y.jsx("div",{className:`w-10 h-5 rounded-full cursor-pointer ${A?"bg-cyan-500":"bg-gray-500 animate-pulse"} relative`,onClick:()=>O(!A),children:y.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-0.5 transition-transform ${A?"translate-x-5":"translate-x-1"}`})})]})},w))}),y.jsxs("div",{className:"p-4 bg-gray-800 rounded-xl shadow-md max-h-80 overflow-y-auto space-y-3",children:[y.jsx("h3",{className:"text-xl font-semibold text-gray-100",children:"Report Preview"}),m?y.jsx("p",{className:"text-gray-400",children:"Loading booking details..."}):y.jsxs("div",{className:"text-sm space-y-2",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Name:"})," ",b.userName]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Ailments:"})," ",b.ailment]}),n&&y.jsxs("p",{children:[y.jsx("strong",{children:"Treatment:"})," ",b.suggestedTreatment]}),t&&c&&y.jsxs("p",{children:[y.jsx("strong",{children:"Doctor:"})," ",c.doctorName]}),i&&y.jsxs("p",{children:[y.jsx("strong",{children:"Notes:"})," ",b.notes]}),o&&y.jsxs("div",{children:[y.jsx("strong",{children:"Doctor Suggestions:"}),y.jsx("div",{className:"space-y-2",children:b.doctorSuggestions.map((w,S)=>y.jsxs("div",{className:"flex justify-between",children:[y.jsxs("p",{children:[w.name," (",w.specialization,")"]}),y.jsxs("p",{children:["Rating: ",w.rating]})]},S))})]}),l&&c&&y.jsxs("div",{children:[y.jsx("strong",{children:"Appointment Details:"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("p",{children:["Doctor: ",c.doctorName]}),y.jsxs("p",{children:["Date & Time: ",c.appointmentTime]}),y.jsxs("p",{children:["Location: ",c.location]}),y.jsxs("p",{children:["Medical Center: ",c.medicalCenterName]}),y.jsxs("p",{children:["Status: ",c.status]})]})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Date:"})," ",b.date]})]})]}),y.jsxs("button",{onClick:N,className:"w-full flex justify-center gap-5 items-center cyber-button py-2 px-4 rounded-lg transition",children:[y.jsx(B6,{})," Generate PDF Report"]})]})},Pee=()=>{const{user:t,setUser:e}=ui(),[n,r]=ee.useState(""),[i,s]=ee.useState(""),[o,a]=ee.useState(""),[l,u]=ee.useState(""),[c,h]=ee.useState(null),[m,p]=ee.useState(!1),[_,b]=ee.useState(!1),N=_a();ee.useEffect(()=>{t&&(a(t.name||""),r(t.email||""))},[t]);const w=async()=>{p(!0),h(null);const A=new mo;try{const O=await eP(ua,A),K={id:O.user.uid,name:O.user.displayName||O.user.email||"Unknown",email:O.user.email||void 0,role:"user"};await la(qn(St,"users",O.user.uid),K,{merge:!0}),e(K),a(K.name),r(K.email||"")}catch(O){console.error("Google Sign-In Error:",{code:O.code,message:O.message}),h(O.message||"Failed to sign in with Google.")}finally{p(!1)}},S=async A=>{A.preventDefault(),p(!0),h(null);try{let O;if(t)O=ua.currentUser;else{if(i.length<6){h("Password must be at least 6 characters long."),p(!1);return}O=(await ZU(ua,n,i)).user}if(!O){h("No authenticated user found."),p(!1);return}const K={id:O.uid,name:o,email:n,role:"user"};await la(qn(St,"users",O.uid),K,{merge:!0}),await Wl(ln(St,"medicalCenterRequests"),{centerName:l,userId:O.uid,userName:o,userEmail:n,status:"pending",createdAt:new Date().toISOString()}),e(K),b(!0),setTimeout(()=>N("/"),2e3)}catch(O){console.error("Registration Error:",{code:O.code,message:O.message}),h(O.code==="auth/weak-password"?"Password must be at least 6 characters long.":O.message||"Failed to register. Please try again.")}finally{p(!1)}};return y.jsx(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsxs("div",{className:"cyber-card p-8 max-w-md w-full",children:[y.jsx("h2",{className:"text-3xl font-bold neon-text mb-6 text-center",children:"MediLink Registration"}),c&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg text-center mb-4",children:c}),_&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-cyan-400 bg-cyan-900/20 border border-cyan-500/30 p-3 rounded-lg text-center mb-4",children:"Request submitted successfully! Redirecting..."}),!t&&y.jsxs("button",{onClick:w,disabled:m,className:"cyber-button w-full flex items-center justify-center space-x-2 mb-4",children:[y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:y.jsx("path",{fill:"currentColor",d:"M12.24 10.493v2.808h4.633c-.186 1.24-.76 2.28-1.704 2.976l2.784 2.136c1.704-1.584 2.688-3.84 2.688-6.312 0-.672-.072-1.32-.192-1.944h-8.209zm-1.128-2.808v2.808h-4.632c.192 1.248.768 2.28 1.704 2.976l-2.784 2.136c-1.704-1.584-2.688-3.84-2.688-6.312 0-.672.072-1.32.192-1.944h8.208zm1.128-2.808c-3.84 0-7.104 2.496-8.304 6h16.608c-1.2-3.504-4.464-6-8.304-6zm0-2.4c5.328 0 9.672 4.344 9.672 9.672s-4.344 9.672-9.672 9.672-9.672-4.344-9.672-9.672 4.344-9.672 9.672-9.672z"})}),y.jsx("span",{children:m?"Processing...":"Sign in with Google"})]}),y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(hp,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"text",placeholder:"Full Name",value:o,onChange:A=>a(A.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(q6,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:A=>r(A.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0,disabled:!!t})]}),!t&&y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(z6,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",value:i,onChange:A=>s(A.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(cb,{className:"w-5 h-5 text-cyan-400"}),y.jsx("input",{type:"text",placeholder:"Medical Center Name (Request)",value:l,onChange:A=>u(A.target.value),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("button",{type:"submit",disabled:m,className:"cyber-button w-full flex items-center justify-center space-x-2",children:[y.jsx(hp,{className:"w-5 h-5"}),y.jsx("span",{children:m?"Submitting...":"Submit Request"})]})]}),y.jsxs("p",{className:"mt-4 text-center text-gray-400",children:["Already have an account?"," ",y.jsx("a",{href:"/login",className:"text-cyan-400 hover:underline",children:"Login"})]})]})})},Lee=({activeSection:t,setActiveSection:e})=>y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full sm:w-48 md:w-56 lg:w-64 bg-gray-900/95 p-4 sm:p-6 border-r border-cyan-500/30 shadow-lg shadow-cyan-500/10 min-h-screen",children:[y.jsx("div",{className:"mb-6 sm:mb-8",children:y.jsx("h2",{className:"text-xl sm:text-2xl font-bold neon-text bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-pink-500",children:"Admin Menu"})}),y.jsxs("nav",{className:"space-y-3 sm:space-y-4",children:[y.jsxs("button",{onClick:()=>e("dashboard"),className:`w-full flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-all duration-200 ${t==="dashboard"?"bg-cyan-500/20 text-cyan-400 neon-text shadow-md shadow-cyan-500/30":"text-gray-300 hover:bg-gray-800 hover:text-cyan-400"}`,children:[y.jsx(cb,{className:"w-4 h-4 sm:w-5 sm:h-5"}),y.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Dashboard"})]}),y.jsxs("button",{onClick:()=>e("add-doctor"),className:`w-full flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-all duration-200 ${t==="add-doctor"?"bg-cyan-500/20 text-cyan-400 neon-text shadow-md shadow-cyan-500/30":"text-gray-300 hover:bg-gray-800 hover:text-cyan-400"}`,children:[y.jsx(pb,{className:"w-4 h-4 sm:w-5 sm:h-5"}),y.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Add Doctor"})]}),y.jsxs("button",{onClick:()=>e("bookings"),className:`w-full flex items-center space-x-2 sm:space-x-3 px-3 sm:px-4 py-2 sm:py-3 rounded-lg transition-all duration-200 ${t==="bookings"?"bg-cyan-500/20 text-cyan-400 neon-text shadow-md shadow-cyan-500/30":"text-gray-300 hover:bg-gray-800 hover:text-cyan-400"}`,children:[y.jsx(V6,{className:"w-4 h-4 sm:w-5 sm:h-5"}),y.jsx("span",{className:"font-medium text-sm sm:text-base",children:"Bookings"})]})]})]}),Ree=({medicalCenter:t,setDoctors:e,setError:n})=>{var a,l,u,c,h,m,p,_,b;const{user:r}=ui(),[i,s]=ee.useState({name:"",specialty:"",rating:4,reviews:0,location:"",image:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=300&h=300",bio:"",education:"",experience:"",procedures:[],availability:{status:"Available",nextSlot:"",schedule:[]},pharmacies:[],privateClinic:{name:"",address:"",facilities:[],appointments:""},addedBy:(r==null?void 0:r.id)||""}),o=async N=>{if(N.preventDefault(),!t){n("No medical center assigned.");return}if(!r){n("No user authenticated.");return}try{if(!(await ds(si(ln(St,"doctors"),or("name","==",i.name)))).empty){n("This doctor is already registered with another medical center.");return}const S={name:i.name||"",specialty:i.specialty||"",rating:i.rating||4,reviews:i.reviews||0,location:i.location||"",image:i.image||"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=300&h=300",bio:i.bio||"",education:i.education||"",experience:i.experience||"",procedures:i.procedures||[],availability:i.availability||{status:"Available",nextSlot:"",schedule:[]},pharmacies:i.pharmacies||[],privateClinic:i.privateClinic||{name:"",address:"",facilities:[],appointments:""},medicalCenterId:t.id,medicalCenterName:t.name,addedBy:r.id},A=await Wl(ln(St,"doctors"),S);e(O=>[...O,{...S,id:A.id}]),s({name:"",specialty:"",rating:4,reviews:0,location:"",image:"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?auto=format&fit=crop&q=80&w=300&h=300",bio:"",education:"",experience:"",procedures:[],availability:{status:"Available",nextSlot:"",schedule:[]},pharmacies:[],privateClinic:{name:"",address:"",facilities:[],appointments:""},addedBy:r.id}),alert("Doctor added successfully!")}catch(w){console.error("Error adding doctor:",{code:w.code,message:w.message}),n(w.message||"Failed to add doctor.")}};return y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text mb-4",children:"Add New Doctor"}),y.jsxs("form",{onSubmit:o,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Name"}),y.jsx("input",{type:"text",value:i.name,onChange:N=>s({...i,name:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Specialty"}),y.jsx("input",{type:"text",value:i.specialty,onChange:N=>s({...i,specialty:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Location"}),y.jsx("input",{type:"text",value:i.location,onChange:N=>s({...i,location:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Image URL"}),y.jsx("input",{type:"text",value:i.image,onChange:N=>s({...i,image:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Bio"}),y.jsx("textarea",{value:i.bio,onChange:N=>s({...i,bio:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Education"}),y.jsx("input",{type:"text",value:i.education,onChange:N=>s({...i,education:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Experience"}),y.jsx("input",{type:"text",value:i.experience,onChange:N=>s({...i,experience:N.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Procedures (comma-separated)"}),y.jsx("input",{type:"text",value:(a=i.procedures)==null?void 0:a.join(", "),onChange:N=>s({...i,procedures:N.target.value.split(", ")}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Availability Status"}),y.jsxs("select",{value:(l=i.availability)==null?void 0:l.status,onChange:N=>s({...i,availability:{...i.availability,status:N.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",children:[y.jsx("option",{value:"Available",children:"Available"}),y.jsx("option",{value:"Unavailable",children:"Unavailable"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Next Available Slot"}),y.jsx("input",{type:"text",value:(u=i.availability)==null?void 0:u.nextSlot,onChange:N=>s({...i,availability:{...i.availability,nextSlot:N.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Schedule (comma-separated)"}),y.jsx("input",{type:"text",value:(h=(c=i.availability)==null?void 0:c.schedule)==null?void 0:h.join(", "),onChange:N=>s({...i,availability:{...i.availability,schedule:N.target.value.split(", ")}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Name"}),y.jsx("input",{type:"text",value:(m=i.privateClinic)==null?void 0:m.name,onChange:N=>s({...i,privateClinic:{...i.privateClinic,name:N.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Address"}),y.jsx("input",{type:"text",value:(p=i.privateClinic)==null?void 0:p.address,onChange:N=>s({...i,privateClinic:{...i.privateClinic,address:N.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Facilities (comma-separated)"}),y.jsx("input",{type:"text",value:(b=(_=i.privateClinic)==null?void 0:_.facilities)==null?void 0:b.join(", "),onChange:N=>s({...i,privateClinic:{...i.privateClinic,facilities:N.target.value.split(", ")}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("button",{type:"submit",className:"cyber-button w-full flex items-center justify-center space-x-2",children:[y.jsx(pb,{className:"w-5 h-5"}),y.jsx("span",{children:"Add Doctor"})]})]})]})},Dee=({selectedDoctor:t,setDoctors:e,setError:n,setActiveSection:r})=>{const[i,s]=ee.useState(null);ee.useEffect(()=>{t?s({...t}):(n("No doctor selected."),r("dashboard"))},[t,n,r]);const o=async a=>{if(a.preventDefault(),!i||!i.id){n("No doctor selected for update.");return}try{const l=qn(St,"doctors",i.id),u={name:i.name||"",specialty:i.specialty||"",rating:i.rating||4,reviews:i.reviews||0,location:i.location||"",image:i.image||"",bio:i.bio||"",education:i.education||"",experience:i.experience||"",procedures:i.procedures||[],availability:i.availability||{status:"Available",nextSlot:"",schedule:[]},pharmacies:i.pharmacies||[],privateClinic:i.privateClinic||{name:"",address:"",facilities:[],appointments:""},addedBy:i.addedBy||""};await Fs(l,u),e(c=>c.map(h=>h.id===i.id?i:h)),r("dashboard"),alert("Doctor updated successfully!")}catch(l){console.error("Error updating doctor:",{code:l.code,message:l.message}),n(l.code==="permission-denied"?"Insufficient permissions to update doctor.":l.message||"Failed to update doctor.")}};return i?y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6",children:[y.jsxs("h2",{className:"text-2xl font-bold neon-text mb-4",children:["Edit Doctor: ",i.name]}),y.jsxs("form",{onSubmit:o,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Name"}),y.jsx("input",{type:"text",value:i.name,onChange:a=>s({...i,name:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Specialty"}),y.jsx("input",{type:"text",value:i.specialty,onChange:a=>s({...i,specialty:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Location"}),y.jsx("input",{type:"text",value:i.location,onChange:a=>s({...i,location:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Image URL"}),y.jsx("input",{type:"text",value:i.image,onChange:a=>s({...i,image:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Bio"}),y.jsx("textarea",{value:i.bio,onChange:a=>s({...i,bio:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Education"}),y.jsx("input",{type:"text",value:i.education,onChange:a=>s({...i,education:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Experience"}),y.jsx("input",{type:"text",value:i.experience,onChange:a=>s({...i,experience:a.target.value}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Procedures (comma-separated)"}),y.jsx("input",{type:"text",value:i.procedures.join(", "),onChange:a=>s({...i,procedures:a.target.value.split(", ").filter(Boolean)}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Availability Status"}),y.jsxs("select",{value:i.availability.status,onChange:a=>s({...i,availability:{...i.availability,status:a.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400",children:[y.jsx("option",{value:"Available",children:"Available"}),y.jsx("option",{value:"Unavailable",children:"Unavailable"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Next Available Slot"}),y.jsx("input",{type:"text",value:i.availability.nextSlot,onChange:a=>s({...i,availability:{...i.availability,nextSlot:a.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Schedule (comma-separated)"}),y.jsx("input",{type:"text",value:i.availability.schedule.join(", "),onChange:a=>s({...i,availability:{...i.availability,schedule:a.target.value.split(", ").filter(Boolean)}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Name"}),y.jsx("input",{type:"text",value:i.privateClinic.name,onChange:a=>s({...i,privateClinic:{...i.privateClinic,name:a.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Address"}),y.jsx("input",{type:"text",value:i.privateClinic.address,onChange:a=>s({...i,privateClinic:{...i.privateClinic,address:a.target.value}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-gray-400",children:"Private Clinic Facilities (comma-separated)"}),y.jsx("input",{type:"text",value:i.privateClinic.facilities.join(", "),onChange:a=>s({...i,privateClinic:{...i.privateClinic,facilities:a.target.value.split(", ").filter(Boolean)}}),className:"w-full p-2 rounded-lg bg-gray-800 border border-cyan-500/30 focus:outline-none focus:border-cyan-400"})]}),y.jsxs("div",{className:"flex space-x-4",children:[y.jsxs("button",{type:"submit",className:"cyber-button w-full flex items-center justify-center space-x-2",children:[y.jsx(OW,{className:"w-5 h-5"}),y.jsx("span",{children:"Save Changes"})]}),y.jsx("button",{type:"button",className:"cyber-button w-full flex items-center justify-center space-x-2 bg-gray-600",onClick:()=>r("dashboard"),children:y.jsx("span",{children:"Cancel"})})]})]})]}):y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"cyber-card p-6 text-red-400 bg-red-900/20 border border-red-500/30 rounded-lg text-center",children:"No doctor selected."})},jee=({doctors:t,setDoctors:e,setActiveSection:n,setSelectedDoctor:r})=>{const i=_a(),s=async o=>{if(window.confirm("Are you sure you want to remove this doctor?"))try{await bW(qn(St,"doctors",o)),e(a=>a.filter(l=>l.id!==o)),alert("Doctor removed successfully!")}catch(a){console.error("Error removing doctor:",{code:a.code,message:a.message}),alert(a.code==="permission-denied"?"Insufficient permissions to delete doctor.":"Failed to remove doctor.")}};return y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text mb-4",children:"Doctors"}),t.length===0?y.jsx("p",{className:"text-gray-400",children:"No doctors added yet."}):y.jsx("div",{className:"space-y-4",children:t.map(o=>y.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-800 rounded-lg border border-cyan-500/30",children:[y.jsxs("div",{className:"cursor-pointer hover:text-cyan-400",onClick:()=>i(`/doctor/details/${o.id}`),children:[y.jsx("p",{className:"font-semibold",children:o.name}),y.jsxs("p",{className:"text-sm text-gray-400",children:["Specialty: ",o.specialty]}),y.jsxs("p",{className:"text-sm text-gray-400",children:["Added by: ",o.addedBy]})]}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsxs("button",{onClick:()=>{r(o),n("edit-doctor")},className:"cyber-button flex items-center space-x-1",children:[y.jsx(FW,{className:"w-4 h-4"}),y.jsx("span",{children:"Edit"})]}),y.jsxs("button",{onClick:()=>s(o.id),className:"cyber-button bg-red-500 flex items-center space-x-1",children:[y.jsx(BW,{className:"w-4 h-4"}),y.jsx("span",{children:"Remove"})]})]})]},o.id))})]})},Oee=({medicalCenterId:t})=>{const[e,n]=ee.useState([]),[r,i]=ee.useState(!0),[s,o]=ee.useState(null);return ee.useEffect(()=>{(async()=>{try{const l=si(ln(St,"bookings"),or("medicalCenterId","==",t)),c=(await ds(l)).docs.map(h=>({id:h.id,...h.data()}));n(c)}catch(l){o(l.message||"Failed to fetch bookings."),console.error(l)}finally{i(!1)}})()},[t]),r?y.jsx("div",{className:"flex items-center justify-center p-6",children:y.jsx(at.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full"})}):s?y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg text-center",children:s}):y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6 rounded-xl border border-cyan-500/30",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text text-cyan-400 mb-4",children:"Bookings"}),e.length===0?y.jsx("p",{className:"text-gray-400",children:"No bookings found for this medical center."}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-left text-gray-300",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"border-b border-cyan-500/20",children:[y.jsx("th",{className:"p-3 font-semibold",children:"Booking Number"}),y.jsx("th",{className:"p-3 font-semibold",children:"User Name"}),y.jsx("th",{className:"p-3 font-semibold",children:"User Email"}),y.jsx("th",{className:"p-3 font-semibold",children:"Doctor"}),y.jsx("th",{className:"p-3 font-semibold",children:"Date & Time"}),y.jsx("th",{className:"p-3 font-semibold",children:"Status"})]})}),y.jsx("tbody",{children:e.map(a=>y.jsxs("tr",{className:"border-b border-cyan-500/20 hover:bg-gray-800/50",children:[y.jsx("td",{className:"p-3",children:a.bookingNumber}),y.jsx("td",{className:"p-3",children:a.userName}),y.jsx("td",{className:"p-3",children:a.userEmail}),y.jsx("td",{className:"p-3",children:a.doctorName}),y.jsx("td",{className:"p-3",children:a.dateTime}),y.jsx("td",{className:"p-3",children:a.status})]},a.id))})]})})]})},Mee=()=>{const{user:t}=ui(),e=_a(),[n,r]=ee.useState([]),[i,s]=ee.useState(null),[o,a]=ee.useState(null),[l,u]=ee.useState(!0),[c,h]=ee.useState("dashboard"),[m,p]=ee.useState(null);return ee.useEffect(()=>{(async()=>{if(!t){a("No user authenticated."),e("/login");return}try{const b=si(ln(St,"users"),or("id","==",t.id),or("role","==","admin-1"));if((await ds(b)).empty){a("Unauthorized access. Admin role required."),e("/login");return}const w=si(ln(St,"medicalCenters"),or("adminId","==",t.id)),S=await ds(w);if(S.empty){const A=si(ln(St,"medicalCenterRequests"),or("userId","==",t.id),or("status","==","approved")),O=await ds(A);if(O.empty){a("No approved medical center request found. Please submit a request."),u(!1);return}else{const q={name:O.docs[0].data().centerName,adminId:t.id,createdAt:new Date().toISOString()},D=qn(ln(St,"medicalCenters"));await la(D,q),s({id:D.id,name:q.name})}}else{const A=S.docs[0].data();s({id:S.docs[0].id,name:A.name})}if(i!=null&&i.id){const A=si(ln(St,"doctors"),or("medicalCenterId","==",i.id)),K=(await ds(A)).docs.map(q=>{var D;return{id:q.id,...q.data(),conditions:Array.isArray(q.data().conditions)?q.data().conditions:[],procedures:Array.isArray(q.data().procedures)?q.data().procedures:[],availability:q.data().availability||{status:"Unavailable",nextSlot:"",schedule:[]},isAvailable:((D=q.data().availability)==null?void 0:D.status)==="Available"}});r(K)}}catch(b){console.error("Error in AdminDashboard:",{code:b.code,message:b.message}),a(b.code==="permission-denied"?"Insufficient permissions to access data. Please ensure your account has the correct access.":b.message||"Failed to load dashboard.")}finally{u(!1)}})()},[t,e,i]),l?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsx(at.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1},className:"w-8 h-8 border-2 border-cyan-400 border-t-transparent rounded-full"})}):y.jsxs(at.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-900 text-cyan-50 flex",children:[y.jsx(Lee,{activeSection:c,setActiveSection:h,doctors:n}),y.jsx("div",{className:"flex-1 p-4 sm:p-6 sm:pl-12 lg:pl-8",children:y.jsxs("div",{className:"container mx-auto max-w-7xl",children:[y.jsx("div",{className:"mb-6",children:y.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold neon-text",children:[(i==null?void 0:i.name)||"Medical Center"," Admin Dashboard"]})}),o&&y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"text-red-400 bg-red-900/20 border border-red-500/30 p-3 rounded-lg text-center mb-4",children:o}),c==="add-doctor"&&y.jsx(Ree,{medicalCenter:i,setDoctors:r,setError:a}),c==="edit-doctor"&&y.jsx(Dee,{selectedDoctor:m,setDoctors:r,setError:a,setActiveSection:h}),c==="bookings"&&i&&y.jsx(Oee,{medicalCenterId:i.id}),c==="dashboard"&&y.jsxs(y.Fragment,{children:[y.jsxs(at.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"cyber-card p-6 mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text mb-4",children:"Admin Details"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("p",{className:"text-gray-400",children:[y.jsx("span",{className:"font-bold",children:"Name:"})," ",(t==null?void 0:t.name)||"N/A"]}),y.jsxs("p",{className:"text-gray-400",children:[y.jsx("span",{className:"font-bold",children:"Email:"})," ",(t==null?void 0:t.email)||"N/A"]}),y.jsxs("p",{className:"text-gray-400",children:[y.jsx("span",{className:"font-bold",children:"Role:"})," ",(t==null?void 0:t.role)||"N/A"]}),y.jsxs("p",{className:"text-gray-400",children:[y.jsx("span",{className:"font-bold",children:"Medical Center:"})," ",(i==null?void 0:i.name)||"N/A"]})]})]}),y.jsx(jee,{doctors:n,setDoctors:r,setActiveSection:h,setSelectedDoctor:p})]})]})})]})},Fee=()=>{const{id:t}=TI();return y.jsx(at.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-900 text-cyan-50 p-8",children:y.jsx("div",{className:"container mx-auto",children:y.jsxs("div",{className:"cyber-card p-8",children:[y.jsx("h1",{className:"text-3xl font-bold neon-text mb-4",children:"Book Appointment"}),y.jsxs("p",{className:"text-gray-400",children:["Booking functionality for Doctor ID: ",t," is coming soon!"]}),y.jsx("p",{className:"text-gray-400",children:"Please contact the medical center directly to schedule an appointment."})]})})})};function Vee(){return y.jsx("div",{children:y.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:y.jsxs("div",{className:"relative w-40 h-40",children:[y.jsx("div",{className:"absolute inset-0 bg-cyan-500 rounded-full animate-ping opacity-50"}),y.jsx("div",{className:"absolute inset-0 bg-purple-500 rounded-full animate-ping delay-200 opacity-50"}),y.jsx("div",{className:"absolute inset-0 w-16 h-16 m-auto border-4 border-cyan-500 rounded-full border-t-transparent  animate-spin-slow"}),y.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[y.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-md animate-fade-in-out"}),y.jsx("div",{className:"absolute w-40 h-40 border border-cyan-500 rotate-90 animate-spin-slow",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}})]}),y.jsx("div",{className:"absolute inset-0 m-auto right-0 left-[0.9rem] top-[0.9rem] bottom-0 grid grid-cols-3 grid-rows-3 gap-1",children:[...Array(9)].map((t,e)=>y.jsx("div",{className:"w-8 h-8 bg-cyan-500 rounded-md animate-fade-in-out",style:{animationDelay:`${e*.1}s`,clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}},e))}),y.jsxs("div",{className:"lines animate-fade-in-out",children:[y.jsx("div",{className:"absolute w-full h-1 bg-cyan-500 top-1/2 animate-glow-line animate-glow opacity-75"}),y.jsx("div",{className:"absolute h-full w-1 bg-cyan-500 left-1/2 animate-glow-line opacity-75 animate-glow"})]})]})})})}class Bee extends ee.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:y.jsxs("div",{className:"cyber-card p-8 text-center",children:[y.jsx("h2",{className:"text-2xl font-bold neon-text mb-4",children:"Something went wrong."}),y.jsx("p",{className:"text-gray-400 mb-4",children:"Please try refreshing the page or contact support."}),y.jsx("button",{onClick:()=>window.location.reload(),className:"cyber-button",children:"Refresh Page"})]})}):this.props.children}}const xv=({children:t,adminOnly:e=!1})=>{const{user:n,isLoading:r}=ui();return r?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-cyan-50",children:"Loading..."}):n?e&&n.role!=="admin-1"?y.jsx(ES,{to:"/",replace:!0}):y.jsx(y.Fragment,{children:t}):y.jsx(ES,{to:"/login",replace:!0})};function Uee(){const[t,e]=ee.useState(!0),{initializeAuth:n}=ui(),r=oc();ee.useEffect(()=>{n();const s=setTimeout(()=>{e(!1)},1e3);return()=>clearTimeout(s)},[n]);const i=r.pathname!=="/admin";return t?y.jsx(Vee,{}):y.jsxs("div",{className:"min-h-screen bg-gray-900 text-cyan-50 font-sans",children:[y.jsx("div",{className:"cyber-gradient fixed inset-0 pointer-events-none w-full"}),y.jsx(zW,{}),y.jsx("main",{className:`container pt-20 pb-8 ${i?"ml-[10%]":""}`,children:y.jsxs(aO,{children:[y.jsx(os,{path:"/",element:y.jsx(WW,{})}),y.jsx(os,{path:"/doctors",element:y.jsx(KW,{})}),y.jsx(os,{path:"/notifications",element:y.jsx(kZ,{})}),y.jsx(os,{path:"/doctors/details/:id",element:y.jsx(eK,{})}),y.jsx(os,{path:"/community",element:y.jsx(rK,{})}),y.jsx(os,{path:"/chat-history",element:y.jsx(xv,{children:y.jsx(IZ,{})})}),y.jsx(os,{path:"/login",element:y.jsx(CZ,{})}),y.jsx(os,{path:"/report",element:y.jsx(Cee,{})}),y.jsx(os,{path:"/reg",element:y.jsx(Pee,{})}),y.jsx(os,{path:"/book/:id",element:y.jsx(xv,{children:y.jsx(Fee,{})})}),y.jsx(os,{path:"/admin",element:y.jsx(xv,{adminOnly:!0,children:y.jsx(Mee,{})})})]})})]})}function zee(){return y.jsx(Bee,{children:y.jsx(pO,{children:y.jsx(Uee,{})})})}wI(document.getElementById("root")).render(y.jsx(ee.StrictMode,{children:y.jsx(zee,{})}));export{en as _,_g as c,I0 as g};
